/*
 jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license  jQuery Migrate v3.0.0 | (c) jQuery Foundation and other contributors | jquery.org/license  Context menu plugin
 Radio buttons to regular buttons plugin, based on jQuery UI Button 1.11.2
 This has been done to avoid name collision
 Dialog plugin, based on jQuery UI Dialog 1.11.2
 This has been done to avoid name collision
 Menu plugin, based on jQuery UI Menu 1.11.2
 This has been done to avoid name collision
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var k=0;return function(){return k<b.length?{done:!1,value:b[k++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,k,m){b!=Array.prototype&&b!=Object.prototype&&(b[k]=m.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var b=0;return function(k){return $jscomp.SYMBOL_PREFIX+(k||"")+b++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.findInternal=function(b,k,m){b instanceof String&&(b=String(b));for(var p=b.length,f=0;f<p;f++){var e=b[f];if(k.call(m,e,f,b))return{i:f,v:e}}return{i:-1,v:void 0}};$jscomp.polyfill=function(b,k,m,p){if(k){m=$jscomp.global;b=b.split(".");for(p=0;p<b.length-1;p++){var f=b[p];f in m||(m[f]={});m=m[f]}b=b[b.length-1];p=m[b];k=k(p);k!=p&&null!=k&&$jscomp.defineProperty(m,b,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,m){return $jscomp.findInternal(this,b,m).v}},"es6","es3");$jscomp.polyfill("Number.isFinite",function(b){return b?b:function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b}},"es6","es3");$jscomp.polyfill("Number.isInteger",function(b){return b?b:function(b){return Number.isFinite(b)?b===Math.floor(b):!1}},"es6","es3");
$jscomp.checkStringArgs=function(b,k,m){if(null==b)throw new TypeError("The 'this' value for String.prototype."+m+" must not be null or undefined");if(k instanceof RegExp)throw new TypeError("First argument to String.prototype."+m+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.endsWith",function(b){return b?b:function(b,m){var k=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===m&&(m=k.length);m=Math.max(0,Math.min(m|0,k.length));for(var f=b.length;0<f&&0<m;)if(k[--m]!=b[--f])return!1;return 0>=f}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,m,p){var f=this.length||0;0>m&&(m=Math.max(0,f+m));if(null==p||p>f)p=f;p=Number(p);0>p&&(p=Math.max(0,f+p));for(m=Number(m||0);m<p;m++)this[m]=b;return this}},"es6","es3");$jscomp.polyfill("Math.trunc",function(b){return b?b:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var k=Math.floor(Math.abs(b));return 0>b?-k:k}},"es6","es3");
$jscomp.owns=function(b,k){return Object.prototype.hasOwnProperty.call(b,k)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(b,k){for(var m=1;m<arguments.length;m++){var p=arguments[m];if(p)for(var f in p)$jscomp.owns(p,f)&&(b[f]=p[f])}return b};$jscomp.polyfill("Object.assign",function(b){return b||$jscomp.assign},"es6","es3");
$jscomp.iteratorFromArray=function(b,k){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var m=0,p={next:function(){if(m<b.length){var f=m++;return{value:k(f,b[f]),done:!1}}p.next=function(){return{done:!0,value:void 0}};return p.next()}};p[Symbol.iterator]=function(){return p};return p};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(b){return b?b:function(b,m,p){b=Number(b);m=Number(m);var f,e=Math.max(Math.abs(b),Math.abs(m));for(f=2;f<arguments.length;f++)e=Math.max(e,Math.abs(arguments[f]));if(1E100<e||1E-100>e){if(!e)return e;b/=e;m/=e;var d=b*b+m*m;for(f=2;f<arguments.length;f++){var g=Number(arguments[f])/e;d+=g*g}return Math.sqrt(d)*e}d=b*b+m*m;for(f=2;f<arguments.length;f++)g=Number(arguments[f]),d+=g*g;return Math.sqrt(d)}},"es6","es3");
!function(b,k){"object"==typeof module&&"object"==typeof module.exports?module.exports=b.document?k(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return k(b)}:k(b)}("undefined"!=typeof window?window:this,function(b,k){function m(a,c,b){var h,l,v=(b=b||I).createElement("script");if(v.text=a,c)for(h in zb)(l=c[h]||c.getAttribute&&c.getAttribute(h))&&v.setAttribute(h,l);b.head.appendChild(v).parentNode.removeChild(v)}function p(a){return null==a?a+"":"object"==
typeof a||"function"==typeof a?ea[W.call(a)]||"object":typeof a}function f(a){var c=!!a&&"length"in a&&a.length,b=p(a);return!D(a)&&!la(a)&&("array"===b||0===c||"number"==typeof c&&0<c&&c-1 in a)}function e(a,c){return a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()}function d(a,c,b){return D(c)?n.grep(a,function(a,h){return!!c.call(a,h,a)!==b}):c.nodeType?n.grep(a,function(a){return a===c!==b}):"string"!=typeof c?n.grep(a,function(a){return-1<qa.call(c,a)!==b}):n.filter(c,a,b)}function g(a,
c){for(;(a=a[c])&&1!==a.nodeType;);return a}function r(a){return a}function z(a){throw a;}function B(a,c,b,h){var l;try{a&&D(l=a.promise)?l.call(a).done(c).fail(b):a&&D(l=a.then)?l.call(a,c,b):c.apply(void 0,[a].slice(h))}catch(Ua){b.apply(void 0,[Ua])}}function V(){I.removeEventListener("DOMContentLoaded",V);b.removeEventListener("load",V);n.ready()}function y(a,c){return c.toUpperCase()}function w(a){return a.replace(Ab,"ms-").replace(Bb,y)}function x(){this.expando=n.expando+x.uid++}function G(a,
c,b){var h,l;if(void 0===b&&1===a.nodeType)if(h="data-"+c.replace(Cb,"-$&").toLowerCase(),"string"==typeof(b=a.getAttribute(h))){try{b="true"===(l=b)||"false"!==l&&("null"===l?null:l===+l+""?+l:Db.test(l)?JSON.parse(l):l)}catch(Ua){}fa.set(a,c,b)}else b=void 0;return b}function C(a,c,b,h){var l,v,d=20,q=h?function(){return h.cur()}:function(){return n.css(a,c,"")},t=q(),g=b&&b[3]||(n.cssNumber[c]?"":"px"),u=a.nodeType&&(n.cssNumber[c]||"px"!==g&&+t)&&za.exec(n.css(a,c));if(u&&u[3]!==g){t/=2;g=g||
u[3];for(u=+t||1;d--;)n.style(a,c,u+g),0>=(1-v)*(1-(v=q()/t||.5))&&(d=0),u/=v;u*=2;n.style(a,c,u+g);b=b||[]}return b&&(u=+u||+t||0,l=b[1]?u+(b[1]+1)*b[2]:+b[2],h&&(h.unit=g,h.start=u,h.end=l)),l}function J(a,c){for(var b,h,l,v,d,q,t,g=[],u=0,aa=a.length;u<aa;u++)(h=a[u]).style&&(b=h.style.display,c?("none"===b&&(g[u]=O.get(h,"display")||null,g[u]||(h.style.display="")),""===h.style.display&&La(h)&&(g[u]=(t=d=v=void 0,d=(l=h).ownerDocument,q=l.nodeName,(t=bb[q])||(v=d.body.appendChild(d.createElement(q)),
t=n.css(v,"display"),v.parentNode.removeChild(v),"none"===t&&(t="block"),bb[q]=t)))):"none"!==b&&(g[u]="none",O.set(h,"display",b)));for(u=0;u<aa;u++)null!=g[u]&&(a[u].style.display=g[u]);return a}function K(a,c){var b;return b="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(c||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(c||"*"):[],void 0===c||c&&e(a,c)?n.merge([a],b):b}function H(a,c){for(var b=0,h=a.length;b<h;b++)O.set(a[b],"globalEval",!c||O.get(c[b],"globalEval"))}
function T(a,c,b,h,l){for(var v,d,q,t,g=c.createDocumentFragment(),u=[],aa=0,r=a.length;aa<r;aa++)if((v=a[aa])||0===v)if("object"===p(v))n.merge(u,v.nodeType?[v]:v);else if(Fb.test(v)){d=d||g.appendChild(c.createElement("div"));q=(cb.exec(v)||["",""])[1].toLowerCase();q=ba[q]||ba._default;d.innerHTML=q[1]+n.htmlPrefilter(v)+q[2];for(q=q[0];q--;)d=d.lastChild;n.merge(u,d.childNodes);(d=g.firstChild).textContent=""}else u.push(c.createTextNode(v));g.textContent="";for(aa=0;v=u[aa++];)if(h&&-1<n.inArray(v,
h))l&&l.push(v);else if(t=wa(v),d=K(g.appendChild(v),"script"),t&&H(d),b)for(q=0;v=d[q++];)db.test(v.type||"")&&b.push(v);return g}function M(){return!0}function U(){return!1}function P(a,c){a:{try{var b=I.activeElement;break a}catch(qc){}b=void 0}return a===b==("focus"===c)}function S(a,c,b,h,l,d){var v,q;if("object"==typeof c){for(q in"string"!=typeof b&&(h=h||b,b=void 0),c)S(a,q,b,h,c[q],d);return a}if(null==h&&null==l?(l=b,h=b=void 0):null==l&&("string"==typeof b?(l=h,h=void 0):(l=h,h=b,b=void 0)),
!1===l)l=U;else if(!l)return a;return 1===d&&(v=l,(l=function(a){return n().off(a),v.apply(this,arguments)}).guid=v.guid||(v.guid=n.guid++)),a.each(function(){n.event.add(this,c,l,h,b)})}function a(a,c,b){b?(O.set(a,c,!1),n.event.add(a,c,{namespace:!1,handler:function(a){var h,l,v=O.get(this,c);if(1&a.isTrigger&&this[c])if(v.length)(n.event.special[c]||{}).delegateType&&a.stopPropagation();else{if(v=na.call(arguments),O.set(this,c,v),h=b(this,c),this[c](),v!==(l=O.get(this,c))||h?O.set(this,c,!1):
l={},v!==l)return a.stopImmediatePropagation(),a.preventDefault(),l.value}else v.length&&(O.set(this,c,{value:n.event.trigger(n.extend(v[0],n.Event.prototype),v.slice(1),this)}),a.stopImmediatePropagation())}})):void 0===O.get(a,c)&&n.event.add(a,c,M)}function E(a,c){return e(a,"table")&&e(11!==c.nodeType?c:c.firstChild,"tr")&&n(a).children("tbody")[0]||a}function L(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function c(a){return"true/"===(a.type||"").slice(0,5)?a.type=a.type.slice(5):
a.removeAttribute("type"),a}function h(a,c){var b,h,l,v,d,q;if(1===c.nodeType){if(O.hasData(a)&&(b=O.access(a),h=O.set(c,b),q=b.events))for(l in delete h.handle,h.events={},q)for(b=0,h=q[l].length;b<h;b++)n.event.add(c,l,q[l][b]);fa.hasData(a)&&(v=fa.access(a),d=n.extend({},v),fa.set(c,d))}}function l(a,b,h,d){b=Ma.apply([],b);var v,q,t,g=0,u=a.length,aa=u-1,r=b[0],F=D(r);if(F||1<u&&"string"==typeof r&&!N.checkClone&&Gb.test(r))return a.each(function(c){var v=a.eq(c);F&&(b[0]=r.call(this,c,v.html()));
l(v,b,h,d)});if(u&&(q=(v=T(b,a[0].ownerDocument,!1,a,d)).firstChild,1===v.childNodes.length&&(v=q),q||d)){for(t=(q=n.map(K(v,"script"),L)).length;g<u;g++){var e=v;g!==aa&&(e=n.clone(e,!0,!0),t&&n.merge(q,K(e,"script")));h.call(a[g],e,g)}if(t)for(v=q[q.length-1].ownerDocument,n.map(q,c),g=0;g<t;g++)e=q[g],db.test(e.type||"")&&!O.access(e,"globalEval")&&n.contains(v,e)&&(e.src&&"module"!==(e.type||"").toLowerCase()?n._evalUrl&&!e.noModule&&n._evalUrl(e.src,{nonce:e.nonce||e.getAttribute("nonce")}):
m(e.textContent.replace(Ib,""),e,v))}return a}function q(a,c,b){for(var h=c?n.filter(c,a):a,l=0;null!=(c=h[l]);l++)b||1!==c.nodeType||n.cleanData(K(c)),c.parentNode&&(b&&wa(c)&&H(K(c,"script")),c.parentNode.removeChild(c));return a}function t(a,c,b){var h,l,v,d,q=a.style;return(b=b||Na(a))&&(""!==(d=b.getPropertyValue(c)||b[c])||wa(a)||(d=n.style(a,c)),!N.pixelBoxStyles()&&Va.test(d)&&Jb.test(c)&&(h=q.width,l=q.minWidth,v=q.maxWidth,q.minWidth=q.maxWidth=q.width=d,d=b.width,q.width=h,q.minWidth=l,
q.maxWidth=v)),void 0!==d?d+"":d}function F(a,c){return{get:function(){if(!a())return(this.get=c).apply(this,arguments);delete this.get}}}function u(a){var c;if(!(c=n.cssProps[a]||eb[a])){if(!(a in fb)){a:{c=a;for(var b=c[0].toUpperCase()+c.slice(1),h=gb.length;h--;)if((c=gb[h]+b)in fb)break a;c=void 0}a=eb[a]=c||a}c=a}return c}function Q(a,c,b){return(a=za.exec(c))?Math.max(0,a[2]-(b||0))+(a[3]||"px"):c}function X(a,c,b,h,l,d){var q="width"===c?1:0,v=0,t=0;if(b===(h?"border":"content"))return 0;
for(;4>q;q+=2)"margin"===b&&(t+=n.css(a,b+ra[q],!0,l)),h?("content"===b&&(t-=n.css(a,"padding"+ra[q],!0,l)),"margin"!==b&&(t-=n.css(a,"border"+ra[q]+"Width",!0,l))):(t+=n.css(a,"padding"+ra[q],!0,l),"padding"!==b?t+=n.css(a,"border"+ra[q]+"Width",!0,l):v+=n.css(a,"border"+ra[q]+"Width",!0,l));return!h&&0<=d&&(t+=Math.max(0,Math.ceil(a["offset"+c[0].toUpperCase()+c.slice(1)]-d-t-v-.5))||0),t}function ua(a,c,b){var h=Na(a),l=(!N.boxSizingReliable()||b)&&"border-box"===n.css(a,"boxSizing",!1,h),q=l,
d=t(a,c,h),v="offset"+c[0].toUpperCase()+c.slice(1);if(Va.test(d)){if(!b)return d;d="auto"}return(!N.boxSizingReliable()&&l||"auto"===d||!parseFloat(d)&&"inline"===n.css(a,"display",!1,h))&&a.getClientRects().length&&(l="border-box"===n.css(a,"boxSizing",!1,h),(q=v in a)&&(d=a[v])),(d=parseFloat(d)||0)+X(a,c,b||(l?"border":"content"),q,h,d)+"px"}function Y(a,c,b,h,l){return new Y.prototype.init(a,c,b,h,l)}function ca(){Oa&&(!1===I.hidden&&b.requestAnimationFrame?b.requestAnimationFrame(ca):b.setTimeout(ca,
n.fx.interval),n.fx.tick())}function va(){return b.setTimeout(function(){xa=void 0}),xa=Date.now()}function R(a,c){var b,h=0,l={height:a};for(c=c?1:0;4>h;h+=2-c)l["margin"+(b=ra[h])]=l["padding"+b]=a;return c&&(l.opacity=l.width=a),l}function da(a,c,b){for(var h,l=(ia.tweeners[c]||[]).concat(ia.tweeners["*"]),d=0,q=l.length;d<q;d++)if(h=l[d].call(b,c,a))return h}function ia(a,c,b){var h,l=0,d=ia.prefilters.length,q=n.Deferred().always(function(){delete v.elem}),v=function(){if(h)return!1;var c=xa||
va();c=Math.max(0,t.startTime+t.duration-c);for(var b=1-(c/t.duration||0),l=0,d=t.tweens.length;l<d;l++)t.tweens[l].run(b);return q.notifyWith(a,[t,b,c]),1>b&&d?c:(d||q.notifyWith(a,[t,1,0]),q.resolveWith(a,[t]),!1)},t=q.promise({elem:a,props:n.extend({},c),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},b),originalProperties:c,originalOptions:b,startTime:xa||va(),duration:b.duration,tweens:[],createTween:function(c,b){c=n.Tween(a,t.opts,c,b,t.opts.specialEasing[c]||t.opts.easing);return t.tweens.push(c),
c},stop:function(c){var b=0,l=c?t.tweens.length:0;if(h)return this;for(h=!0;b<l;b++)t.tweens[b].run(1);return c?(q.notifyWith(a,[t,1,0]),q.resolveWith(a,[t,c])):q.rejectWith(a,[t,c]),this}});b=t.props;!function(a,c){var b,h,l,d,q;for(b in a)if(l=c[h=w(b)],d=a[b],Array.isArray(d)&&(l=d[1],d=a[b]=d[0]),b!==h&&(a[h]=d,delete a[b]),(q=n.cssHooks[h])&&"expand"in q)for(b in d=q.expand(d),delete a[h],d)b in a||(a[b]=d[b],c[b]=l);else c[h]=l}(b,t.opts.specialEasing);for(;l<d;l++)if(c=ia.prefilters[l].call(t,
a,b,t.opts))return D(c.stop)&&(n._queueHooks(t.elem,t.opts.queue).stop=c.stop.bind(c)),c;return n.map(b,da,t),D(t.opts.start)&&t.opts.start.call(a,t),t.progress(t.opts.progress).done(t.opts.done,t.opts.complete).fail(t.opts.fail).always(t.opts.always),n.fx.timer(n.extend(v,{elem:a,anim:t,queue:t.opts.queue})),t}function oa(a){return(a.match(ja)||[]).join(" ")}function ha(a){return a.getAttribute&&a.getAttribute("class")||""}function Aa(a){return Array.isArray(a)?a:"string"==typeof a&&a.match(ja)||
[]}function Ba(a,c,b,h){var l;if(Array.isArray(c))n.each(c,function(c,l){b||Kb.test(a)?h(a,l):Ba(a+"["+("object"==typeof l&&null!=l?c:"")+"]",l,b,h)});else if(b||"object"!==p(c))h(a,c);else for(l in c)Ba(a+"["+l+"]",c[l],b,h)}function Ca(a){return function(c,b){"string"!=typeof c&&(b=c,c="*");var h=0,l=c.toLowerCase().match(ja)||[];if(D(b))for(;c=l[h++];)"+"===c[0]?(c=c.slice(1)||"*",(a[c]=a[c]||[]).unshift(b)):(a[c]=a[c]||[]).push(b)}}function Pa(a,c,b,h){function l(v){var t;return d[v]=!0,n.each(a[v]||
[],function(a,v){a=v(c,b,h);return"string"!=typeof a||q||d[a]?q?!(t=a):void 0:(c.dataTypes.unshift(a),l(a),!1)}),t}var d={},q=a===Wa;return l(c.dataTypes[0])||!d["*"]&&l("*")}function Da(a,c){var b,h,l=n.ajaxSettings.flatOptions||{};for(b in c)void 0!==c[b]&&((l[b]?a:h||(h={}))[b]=c[b]);return h&&n.extend(!0,a,h),a}var Z=[],I=b.document,ma=Object.getPrototypeOf,na=Z.slice,Ma=Z.concat,Ea=Z.push,qa=Z.indexOf,ea={},W=ea.toString,ya=ea.hasOwnProperty,Qa=ya.toString,A=Qa.call(Object),N={},D=function(a){return"function"==
typeof a&&"number"!=typeof a.nodeType},la=function(a){return null!=a&&a===a.window},zb={type:!0,src:!0,nonce:!0,noModule:!0},n=function(a,c){return new n.fn.init(a,c)},Lb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();n.fn=n.prototype={jquery:"3.4.1",constructor:n,length:0,toArray:function(){return na.call(this)},get:function(a){return null==a?na.call(this):0>a?this[a+this.length]:this[a]},
pushStack:function(a){a=n.merge(this.constructor(),a);return a.prevObject=this,a},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(c,b){return a.call(c,b,c)}))},slice:function(){return this.pushStack(na.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var c=this.length;a=+a+(0>a?c:0);return this.pushStack(0<=a&&a<c?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},
push:Ea,sort:Z.sort,splice:Z.splice};n.extend=n.fn.extend=function(){var a,c,b,h,l,d=arguments[0]||{},q=1,t=arguments.length,g=!1;"boolean"==typeof d&&(g=d,d=arguments[q]||{},q++);"object"==typeof d||D(d)||(d={});for(q===t&&(d=this,q--);q<t;q++)if(null!=(a=arguments[q]))for(c in a){var u=a[c];"__proto__"!==c&&d!==u&&(g&&u&&(n.isPlainObject(u)||(h=Array.isArray(u)))?(b=d[c],l=h&&!Array.isArray(b)?[]:h||n.isPlainObject(b)?b:{},h=!1,d[c]=n.extend(g,l,u)):void 0!==u&&(d[c]=u))}return d};n.extend({expando:"jQuery"+
("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isPlainObject:function(a){var c,b;return!(!a||"[object Object]"!==W.call(a))&&(!(c=ma(a))||"function"==typeof(b=ya.call(c,"constructor")&&c.constructor)&&Qa.call(b)===A)},isEmptyObject:function(a){for(var c in a)return!1;return!0},globalEval:function(a,c){m(a,{nonce:c&&c.nonce})},each:function(a,c){var b,h=0;if(f(a))for(b=a.length;h<b&&!1!==c.call(a[h],h,a[h]);h++);else for(h in a)if(!1===c.call(a[h],
h,a[h]))break;return a},trim:function(a){return null==a?"":(a+"").replace(Lb,"")},makeArray:function(a,c){c=c||[];return null!=a&&(f(Object(a))?n.merge(c,"string"==typeof a?[a]:a):Ea.call(c,a)),c},inArray:function(a,c,b){return null==c?-1:qa.call(c,a,b)},merge:function(a,c){for(var b=+c.length,h=0,l=a.length;h<b;h++)a[l++]=c[h];return a.length=l,a},grep:function(a,c,b){var h=[],l=0,d=a.length;for(b=!b;l<d;l++)!c(a[l],l)!==b&&h.push(a[l]);return h},map:function(a,c,b){var h,l,d=0,q=[];if(f(a))for(h=
a.length;d<h;d++)null!=(l=c(a[d],d,b))&&q.push(l);else for(d in a)null!=(l=c(a[d],d,b))&&q.push(l);return Ma.apply([],q)},guid:1,support:N});"function"==typeof Symbol&&(n.fn[Symbol.iterator]=Z[Symbol.iterator]);n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,c){ea["[object "+c+"]"]=c.toLowerCase()});var pa=function(a){function c(a,c,b,h){var l,d,q,t;var v=c&&c.ownerDocument;var g=c?c.nodeType:9;if(b=b||[],"string"!=typeof a||!a||1!==g&&9!==g&&11!==
g)return b;if(!h&&((c?c.ownerDocument||c:T)!==H&&w(c),c=c||H,G)){if(11!==g&&(t=Ma.exec(a)))if(l=t[1])if(9===g){if(!(d=c.getElementById(l)))return b;if(d.id===l)return b.push(d),b}else{if(v&&(d=v.getElementById(l))&&da(c,d)&&d.id===l)return b.push(d),b}else{if(t[2])return ha.apply(b,c.getElementsByTagName(a)),b;if((l=t[3])&&E.getElementsByClassName&&c.getElementsByClassName)return ha.apply(b,c.getElementsByClassName(l)),b}if(!(!E.qsa||U[a+" "]||ca&&ca.test(a)||1===g&&"object"===c.nodeName.toLowerCase())){if(l=
a,v=c,1===g&&W.test(a)){(q=c.getAttribute("id"))?q=q.replace(sa,pa):c.setAttribute("id",q=R);for(v=(g=L(a)).length;v--;)g[v]="#"+q+" "+e(g[v]);l=g.join(",");v=fa.test(a)&&r(c.parentNode)||c}try{return ha.apply(b,v.querySelectorAll(l)),b}catch(uc){U(a,!0)}finally{q===R&&c.removeAttribute("id")}}}return V(a.replace(N,"$1"),c,b,h)}function b(){var a=[];return function hb(c,b){return a.push(c+" ")>B.cacheLength&&delete hb[a.shift()],hb[c+" "]=b}}function h(a){return a[R]=!0,a}function l(a){var c=H.createElement("fieldset");
try{return!!a(c)}catch(sc){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}}function d(a,c){a=a.split("|");for(var b=a.length;b--;)B.attrHandle[a[b]]=c}function q(a,c){var b=c&&a,h=b&&1===a.nodeType&&1===c.nodeType&&a.sourceIndex-c.sourceIndex;if(h)return h;if(b)for(;b=b.nextSibling;)if(b===c)return-1;return a?1:-1}function t(a){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===a}}function v(a){return function(c){var b=c.nodeName.toLowerCase();return("input"===b||"button"===
b)&&c.type===a}}function g(a){return function(c){return"form"in c?c.parentNode&&!1===c.disabled?"label"in c?"label"in c.parentNode?c.parentNode.disabled===a:c.disabled===a:c.isDisabled===a||c.isDisabled!==!a&&Qa(c)===a:c.disabled===a:"label"in c&&c.disabled===a}}function u(a){return h(function(c){return c=+c,h(function(b,h){for(var l,d=a([],b.length,c),q=d.length;q--;)b[l=d[q]]&&(b[l]=!(h[l]=b[l]))})})}function r(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function F(){}function e(a){for(var c=
0,b=a.length,h="";c<b;c++)h+=a[c].value;return h}function f(a,c,b){var h=c.dir,l=c.next,d=l||h,q=b&&"parentNode"===d,t=M++;return c.first?function(c,b,l){for(;c=c[h];)if(1===c.nodeType||q)return a(c,b,l);return!1}:function(c,b,v){var g,u,r,F=[A,t];if(v)for(;c=c[h];){if((1===c.nodeType||q)&&a(c,b,v))return!0}else for(;c=c[h];)if(1===c.nodeType||q)if(u=(r=c[R]||(c[R]={}))[c.uniqueID]||(r[c.uniqueID]={}),l&&l===c.nodeName.toLowerCase())c=c[h]||c;else{if((g=u[d])&&g[0]===A&&g[1]===t)return F[2]=g[2];
if((u[d]=F)[2]=a(c,b,v))return!0}return!1}}function n(a){return 1<a.length?function(c,b,h){for(var l=a.length;l--;)if(!a[l](c,b,h))return!1;return!0}:a[0]}function X(a,c,b,h,l){for(var d,q=[],t=0,v=a.length,g=null!=c;t<v;t++)(d=a[t])&&(b&&!b(d,h,l)||(q.push(d),g&&c.push(t)));return q}function Q(a,b,l,d,q,t){return d&&!d[R]&&(d=Q(d)),q&&!q[R]&&(q=Q(q,t)),h(function(h,t,v,g){var u,r=[],F=[],aa=t.length,e;if(!(e=h)){e=b||"*";for(var f=v.nodeType?[v]:v,n=[],Q=0,z=f.length;Q<z;Q++)c(e,f[Q],n);e=n}e=!a||
!h&&b?e:X(e,r,a,v,g);f=l?q||(h?a:aa||d)?[]:t:e;if(l&&l(e,f,v,g),d){var ka=X(f,F);d(ka,[],v,g);for(v=ka.length;v--;)(u=ka[v])&&(f[F[v]]=!(e[F[v]]=u))}if(h){if(q||a){if(q){ka=[];for(v=f.length;v--;)(u=f[v])&&ka.push(e[v]=u);q(null,f=[],ka,g)}for(v=f.length;v--;)(u=f[v])&&-1<(ka=q?S(h,u):r[v])&&(h[ka]=!(t[ka]=u))}}else f=X(f===t?f.splice(aa,f.length):f),q?q(null,t,f,g):ha.apply(t,f)})}function z(a){var c,b,h=a.length,l=B.relative[a[0].type];var d=l||B.relative[" "];for(var q=l?1:0,t=f(function(a){return a===
c},d,!0),v=f(function(a){return-1<S(c,a)},d,!0),g=[function(a,b,h){a=!l&&(h||b!==x)||((c=b).nodeType?t(a,b,h):v(a,b,h));return c=null,a}];q<h;q++)if(d=B.relative[a[q].type])g=[f(n(g),d)];else{if((d=B.filter[a[q].type].apply(null,a[q].matches))[R]){for(b=++q;b<h&&!B.relative[a[b].type];b++);return Q(1<q&&n(g),1<q&&e(a.slice(0,q-1).concat({value:" "===a[q-2].type?"*":""})).replace(N,"$1"),d,q<b&&z(a.slice(q,b)),b<h&&z(a=a.slice(b)),b<h&&e(a))}g.push(d)}return n(g)}var k,E,B,Y,m,L,ua,V,x,p,y,w,H,C,G,
ca,J,va,da,R="sizzle"+1*new Date,T=a.document,A=0,M=0,K=b(),ia=b(),D=b(),U=b(),I=function(a,c){return a===c&&(y=!0),0},P={}.hasOwnProperty,Z=[],Ba=Z.pop,Aa=Z.push,ha=Z.push,Ca=Z.slice,S=function(a,c){for(var b=0,h=a.length;b<h;b++)if(a[b]===c)return b;return-1},O=/[\x20\t\r\n\f]+/g,N=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,oa=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Da=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,W=/[\x20\t\r\n\f]|>/,Pa=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
Ea=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,qa={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ea=/HTML$/i,ya=/^(?:input|select|textarea|button)$/i,na=
/^h\d$/i,la=/^[^{]+\{\s*\[native \w/,Ma=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,fa=/[+~]/,ma=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ba=function(a,c,b){a="0x"+c-65536;return a!=a||b?c:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)},sa=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,pa=function(a,c){return c?"\x00"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},ja=function(){w()},Qa=f(function(a){return!0===a.disabled&&
"fieldset"===a.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{ha.apply(Z=Ca.call(T.childNodes),T.childNodes),Z[T.childNodes.length].nodeType}catch(rc){ha={apply:Z.length?function(a,c){Aa.apply(a,Ca.call(c))}:function(a,c){for(var b=a.length,h=0;a[b++]=c[h++];);a.length=b-1}}}for(k in E=c.support={},m=c.isXML=function(a){var c=(a.ownerDocument||a).documentElement;return!ea.test(a.namespaceURI||c&&c.nodeName||"HTML")},w=c.setDocument=function(a){var c,b;a=a?a.ownerDocument||a:T;return a!==
H&&9===a.nodeType&&a.documentElement&&(C=(H=a).documentElement,G=!m(H),T!==H&&(b=H.defaultView)&&b.top!==b&&(b.addEventListener?b.addEventListener("unload",ja,!1):b.attachEvent&&b.attachEvent("onunload",ja)),E.attributes=l(function(a){return a.className="i",!a.getAttribute("className")}),E.getElementsByTagName=l(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),E.getElementsByClassName=la.test(H.getElementsByClassName),E.getById=l(function(a){return C.appendChild(a).id=
R,!H.getElementsByName||!H.getElementsByName(R).length}),E.getById?(B.filter.ID=function(a){var c=a.replace(ma,ba);return function(a){return a.getAttribute("id")===c}},B.find.ID=function(a,c){if("undefined"!=typeof c.getElementById&&G)return(a=c.getElementById(a))?[a]:[]}):(B.filter.ID=function(a){var c=a.replace(ma,ba);return function(a){return(a="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===c}},B.find.ID=function(a,c){if("undefined"!=typeof c.getElementById&&G){var b,
h=c.getElementById(a);if(h){if((b=h.getAttributeNode("id"))&&b.value===a)return[h];var l=c.getElementsByName(a);for(c=0;h=l[c++];)if((b=h.getAttributeNode("id"))&&b.value===a)return[h]}return[]}}),B.find.TAG=E.getElementsByTagName?function(a,c){return"undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(a):E.qsa?c.querySelectorAll(a):void 0}:function(a,c){var b=[],h=0;c=c.getElementsByTagName(a);if("*"===a){for(;a=c[h++];)1===a.nodeType&&b.push(a);return b}return c},B.find.CLASS=E.getElementsByClassName&&
function(a,c){if("undefined"!=typeof c.getElementsByClassName&&G)return c.getElementsByClassName(a)},J=[],ca=[],(E.qsa=la.test(H.querySelectorAll))&&(l(function(a){C.appendChild(a).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&ca.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||ca.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
a.querySelectorAll("[id~="+R+"-]").length||ca.push("~=");a.querySelectorAll(":checked").length||ca.push(":checked");a.querySelectorAll("a#"+R+"+*").length||ca.push(".#.+[+~]")}),l(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var c=H.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&ca.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==a.querySelectorAll(":enabled").length&&
ca.push(":enabled",":disabled");C.appendChild(a).disabled=!0;2!==a.querySelectorAll(":disabled").length&&ca.push(":enabled",":disabled");a.querySelectorAll("*,:x");ca.push(",.*:")})),(E.matchesSelector=la.test(va=C.matches||C.webkitMatchesSelector||C.mozMatchesSelector||C.oMatchesSelector||C.msMatchesSelector))&&l(function(a){E.disconnectedMatch=va.call(a,"*");va.call(a,"[s!='']:x");J.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
ca=ca.length&&new RegExp(ca.join("|")),J=J.length&&new RegExp(J.join("|")),c=la.test(C.compareDocumentPosition),da=c||la.test(C.contains)?function(a,c){var b=9===a.nodeType?a.documentElement:a;c=c&&c.parentNode;return a===c||!(!c||1!==c.nodeType||!(b.contains?b.contains(c):a.compareDocumentPosition&&16&a.compareDocumentPosition(c)))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1},I=c?function(a,c){if(a===c)return y=!0,0;var b=!a.compareDocumentPosition-!c.compareDocumentPosition;
return b||(1&(b=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1)||!E.sortDetached&&c.compareDocumentPosition(a)===b?a===H||a.ownerDocument===T&&da(T,a)?-1:c===H||c.ownerDocument===T&&da(T,c)?1:p?S(p,a)-S(p,c):0:4&b?-1:1)}:function(a,c){if(a===c)return y=!0,0;var b=0,h=a.parentNode,l=c.parentNode,d=[a],t=[c];if(!h||!l)return a===H?-1:c===H?1:h?-1:l?1:p?S(p,a)-S(p,c):0;if(h===l)return q(a,c);for(;a=a.parentNode;)d.unshift(a);for(a=c;a=a.parentNode;)t.unshift(a);for(;d[b]===
t[b];)b++;return b?q(d[b],t[b]):d[b]===T?-1:t[b]===T?1:0}),H},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==H&&w(a),!(!E.matchesSelector||!G||U[b+" "]||J&&J.test(b)||ca&&ca.test(b)))try{var h=va.call(a,b);if(h||E.disconnectedMatch||a.document&&11!==a.document.nodeType)return h}catch(tc){U(b,!0)}return 0<c(b,H,null,[a]).length},c.contains=function(a,c){return(a.ownerDocument||a)!==H&&w(a),da(a,c)},c.attr=function(a,c){(a.ownerDocument||a)!==
H&&w(a);var b=B.attrHandle[c.toLowerCase()];b=b&&P.call(B.attrHandle,c.toLowerCase())?b(a,c,!G):void 0;return void 0!==b?b:E.attributes||!G?a.getAttribute(c):(b=a.getAttributeNode(c))&&b.specified?b.value:null},c.escape=function(a){return(a+"").replace(sa,pa)},c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);},c.uniqueSort=function(a){var c,b=[],h=0,l=0;if(y=!E.detectDuplicates,p=!E.sortStable&&a.slice(0),a.sort(I),y){for(;c=a[l++];)c===a[l]&&(h=b.push(l));for(;h--;)a.splice(b[h],
1)}return p=null,a},Y=c.getText=function(a){var c,b="",h=0;if(c=a.nodeType)if(1===c||9===c||11===c){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)b+=Y(a)}else{if(3===c||4===c)return a.nodeValue}else for(;c=a[h++];)b+=Y(c);return b},(B=c.selectors={cacheLength:50,createPseudo:h,match:qa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=
a[1].replace(ma,ba),a[3]=(a[3]||a[4]||a[5]||"").replace(ma,ba),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,b=!a[6]&&a[2];return qa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":b&&Pa.test(b)&&(c=L(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(a[0]=a[0].slice(0,
c),a[2]=b.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var c=a.replace(ma,ba).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===c}},CLASS:function(a){var c=K[a+" "];return c||(c=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),K(a,function(a){return c.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,b,h){return function(l){l=c.attr(l,
a);return null==l?"!="===b:!b||(l+="","="===b?l===h:"!="===b?l!==h:"^="===b?h&&0===l.indexOf(h):"*="===b?h&&-1<l.indexOf(h):"$="===b?h&&l.slice(-h.length)===h:"~="===b?-1<(" "+l.replace(O," ")+" ").indexOf(h):"|="===b&&(l===h||l.slice(0,h.length+1)===h+"-"))}},CHILD:function(a,c,b,h,l){var d="nth"!==a.slice(0,3),q="last"!==a.slice(-4),t="of-type"===c;return 1===h&&0===l?function(a){return!!a.parentNode}:function(c,b,v){var g,u,r,F;b=d!==q?"nextSibling":"previousSibling";var aa=c.parentNode,e=t&&c.nodeName.toLowerCase(),
f=!v&&!t,n=!1;if(aa){if(d){for(;b;){for(r=c;r=r[b];)if(t?r.nodeName.toLowerCase()===e:1===r.nodeType)return!1;var Q=b="only"===a&&!Q&&"nextSibling"}return!0}if(Q=[q?aa.firstChild:aa.lastChild],q&&f)for(n=(F=(g=(v=(u=(r=aa)[R]||(r[R]={}))[r.uniqueID]||(u[r.uniqueID]={}))[a]||[])[0]===A&&g[1])&&g[2],r=F&&aa.childNodes[F];r=++F&&r&&r[b]||(n=F=0)||Q.pop();){if(1===r.nodeType&&++n&&r===c){v[a]=[A,F,n];break}}else if(f&&(n=F=(g=((u=(r=c)[R]||(r[R]={}))[r.uniqueID]||(u[r.uniqueID]={}))[a]||[])[0]===A&&g[1]),
!1===n)for(;(r=++F&&r&&r[b]||(n=F=0)||Q.pop())&&((t?r.nodeName.toLowerCase()!==e:1!==r.nodeType)||!++n||(f&&((v=(u=r[R]||(r[R]={}))[r.uniqueID]||(u[r.uniqueID]={}))[a]=[A,n]),r!==c)););return(n-=l)===h||0==n%h&&0<=n/h}}},PSEUDO:function(a,b){var l,d=B.pseudos[a]||B.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return d[R]?d(b):1<d.length?(l=[a,a,"",b],B.setFilters.hasOwnProperty(a.toLowerCase())?h(function(a,c){for(var h,l=d(a,b),q=l.length;q--;)a[h=S(a,l[q])]=!(c[h]=l[q])}):function(a){return d(a,
0,l)}):d}},pseudos:{not:h(function(a){var c=[],b=[],l=ua(a.replace(N,"$1"));return l[R]?h(function(a,c,b,h){var d;b=l(a,null,h,[]);for(h=a.length;h--;)(d=b[h])&&(a[h]=!(c[h]=d))}):function(a,h,d){return c[0]=a,l(c,null,d,b),c[0]=null,!b.pop()}}),has:h(function(a){return function(b){return 0<c(a,b).length}}),contains:h(function(a){return a=a.replace(ma,ba),function(c){return-1<(c.textContent||Y(c)).indexOf(a)}}),lang:h(function(a){return Ea.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(ma,
ba).toLowerCase(),function(c){var b;do if(b=G?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return(b=b.toLowerCase())===a||0===b.indexOf(a+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(c){var b=a.location&&a.location.hash;return b&&b.slice(1)===c.id},root:function(a){return a===C},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:g(!1),disabled:g(!0),checked:function(a){var c=a.nodeName.toLowerCase();
return"input"===c&&!!a.checked||"option"===c&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!B.pseudos.empty(a)},header:function(a){return na.test(a.nodeName)},input:function(a){return ya.test(a.nodeName)},button:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&"button"===a.type||"button"===c},text:function(a){var c;return"input"===
a.nodeName.toLowerCase()&&"text"===a.type&&(null==(c=a.getAttribute("type"))||"text"===c.toLowerCase())},first:u(function(){return[0]}),last:u(function(a,c){return[c-1]}),eq:u(function(a,c,b){return[0>b?b+c:b]}),even:u(function(a,c){for(var b=0;b<c;b+=2)a.push(b);return a}),odd:u(function(a,c){for(var b=1;b<c;b+=2)a.push(b);return a}),lt:u(function(a,c,b){for(c=0>b?b+c:c<b?c:b;0<=--c;)a.push(c);return a}),gt:u(function(a,c,b){for(b=0>b?b+c:b;++b<c;)a.push(b);return a})}}).pseudos.nth=B.pseudos.eq,
{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})B.pseudos[k]=t(k);for(k in{submit:!0,reset:!0})B.pseudos[k]=v(k);return F.prototype=B.filters=B.pseudos,B.setFilters=new F,L=c.tokenize=function(a,b){var h,l,d,q,t,v;if(t=ia[a+" "])return b?0:t.slice(0);t=a;var g=[];for(v=B.preFilter;t;){for(q in h&&!(l=oa.exec(t))||(l&&(t=t.slice(l[0].length)||t),g.push(d=[])),h=!1,(l=Da.exec(t))&&(h=l.shift(),d.push({value:h,type:l[0].replace(N," ")}),t=t.slice(h.length)),B.filter)!(l=qa[q].exec(t))||v[q]&&!(l=
v[q](l))||(h=l.shift(),d.push({value:h,type:q,matches:l}),t=t.slice(h.length));if(!h)break}return b?t.length:t?c.error(a):ia(a,g).slice(0)},ua=c.compile=function(a,b){var l,d,q,t,v=[],g=[],u=D[a+" "];if(!u){b||(b=L(a));for(l=b.length;l--;)(u=z(b[l]))[R]?v.push(u):g.push(u);(u=D(a,(d=0<v.length,q=0<g.length,t=function(a,b,h,l,t){var u,r,F=0,aa="0",e=a&&[],f=[],n=x,Q=a||q&&B.find.TAG("*",t),z=A+=null==n?1:Math.random()||.1,ka=Q.length;for(t&&(x=b===H||b||t);aa!==ka&&null!=(u=Q[aa]);aa++){if(q&&u){var k=
0;for(b||u.ownerDocument===H||(w(u),h=!G);r=g[k++];)if(r(u,b||H,h)){l.push(u);break}t&&(A=z)}d&&((u=!r&&u)&&F--,a&&e.push(u))}if(F+=aa,d&&aa!==F){for(k=0;r=v[k++];)r(e,f,b,h);if(a){if(0<F)for(;aa--;)e[aa]||f[aa]||(f[aa]=Ba.call(l));f=X(f)}ha.apply(l,f);t&&!a&&0<f.length&&1<F+v.length&&c.uniqueSort(l)}return t&&(A=z,x=n),e},d?h(t):t))).selector=a}return u},V=c.select=function(a,c,b,h){var l,d,q,t,v,g="function"==typeof a&&a,u=!h&&L(a=g.selector||a);if(b=b||[],1===u.length){if(2<(d=u[0]=u[0].slice(0)).length&&
"ID"===(q=d[0]).type&&9===c.nodeType&&G&&B.relative[d[1].type]){if(!(c=(B.find.ID(q.matches[0].replace(ma,ba),c)||[])[0]))return b;g&&(c=c.parentNode);a=a.slice(d.shift().value.length)}for(l=qa.needsContext.test(a)?0:d.length;l--&&(q=d[l],!B.relative[t=q.type]);)if((v=B.find[t])&&(h=v(q.matches[0].replace(ma,ba),fa.test(d[0].type)&&r(c.parentNode)||c))){if(d.splice(l,1),!(a=h.length&&e(d)))return ha.apply(b,h),b;break}}return(g||ua(a,u))(h,c,!G,b,!c||fa.test(a)&&r(c.parentNode)||c),b},E.sortStable=
R.split("").sort(I).join("")===R,E.detectDuplicates=!!y,w(),E.sortDetached=l(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),l(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||d("type|href|height|width",function(a,c,b){if(!b)return a.getAttribute(c,"type"===c.toLowerCase()?1:2)}),E.attributes&&l(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||d("value",
function(a,c,b){if(!b&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),l(function(a){return null==a.getAttribute("disabled")})||d("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,c,b){var h;if(!b)return!0===a[c]?c.toLowerCase():(h=a.getAttributeNode(c))&&h.specified?h.value:null}),c}(b);n.find=pa;n.expr=pa.selectors;n.expr[":"]=n.expr.pseudos;n.uniqueSort=n.unique=pa.uniqueSort;n.text=pa.getText;n.isXMLDoc=
pa.isXML;n.contains=pa.contains;n.escapeSelector=pa.escape;var sa=function(a,c,b){for(var h=[],l=void 0!==b;(a=a[c])&&9!==a.nodeType;)if(1===a.nodeType){if(l&&n(a).is(b))break;h.push(a)}return h},jb=function(a,c){for(var b=[];a;a=a.nextSibling)1===a.nodeType&&a!==c&&b.push(a);return b},kb=n.expr.match.needsContext,lb=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;n.filter=function(a,c,b){var h=c[0];return b&&(a=":not("+a+")"),1===c.length&&1===h.nodeType?n.find.matchesSelector(h,
a)?[h]:[]:n.find.matches(a,n.grep(c,function(a){return 1===a.nodeType}))};n.fn.extend({find:function(a){var c,b=this.length,h=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(c=0;c<b;c++)if(n.contains(h[c],this))return!0}));var l=this.pushStack([]);for(c=0;c<b;c++)n.find(a,h[c],l);return 1<b?n.uniqueSort(l):l},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&
kb.test(a)?n(a):a||[],!1).length}});var Nb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(n.fn.init=function(a,c,b){var h,l;if(!a)return this;if(b=b||Ob,"string"==typeof a){if(!(h="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Nb.exec(a))||!h[1]&&c)return!c||c.jquery?(c||b).find(a):this.constructor(c).find(a);if(h[1]){if(c=c instanceof n?c[0]:c,n.merge(this,n.parseHTML(h[1],c&&c.nodeType?c.ownerDocument||c:I,!0)),lb.test(h[1])&&n.isPlainObject(c))for(h in c)D(this[h])?this[h](c[h]):this.attr(h,
c[h]);return this}return(l=I.getElementById(h[2]))&&(this[0]=l,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):D(a)?void 0!==b.ready?b.ready(a):a(n):n.makeArray(a,this)}).prototype=n.fn;var Ob=n(I);var Pb=/^(?:parents|prev(?:Until|All))/,Qb={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var c=n(a,this),b=c.length;return this.filter(function(){for(var a=0;a<b;a++)if(n.contains(this,c[a]))return!0})},closest:function(a,c){var b,h=0,l=this.length,d=[],q="string"!=
typeof a&&n(a);if(!kb.test(a))for(;h<l;h++)for(b=this[h];b&&b!==c;b=b.parentNode)if(11>b.nodeType&&(q?-1<q.index(b):1===b.nodeType&&n.find.matchesSelector(b,a))){d.push(b);break}return this.pushStack(1<d.length?n.uniqueSort(d):d)},index:function(a){return a?"string"==typeof a?qa.call(n(a),this[0]):qa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,c){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,c))))},addBack:function(a){return this.add(null==
a?this.prevObject:this.prevObject.filter(a))}});n.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return sa(a,"parentNode")},parentsUntil:function(a,c,b){return sa(a,"parentNode",b)},next:function(a){return g(a,"nextSibling")},prev:function(a){return g(a,"previousSibling")},nextAll:function(a){return sa(a,"nextSibling")},prevAll:function(a){return sa(a,"previousSibling")},nextUntil:function(a,c,b){return sa(a,"nextSibling",b)},prevUntil:function(a,c,b){return sa(a,
"previousSibling",b)},siblings:function(a){return jb((a.parentNode||{}).firstChild,a)},children:function(a){return jb(a.firstChild)},contents:function(a){return"undefined"!=typeof a.contentDocument?a.contentDocument:(e(a,"template")&&(a=a.content||a),n.merge([],a.childNodes))}},function(a,c){n.fn[a]=function(b,h){var l=n.map(this,c,b);return"Until"!==a.slice(-5)&&(h=b),h&&"string"==typeof h&&(l=n.filter(h,l)),1<this.length&&(Qb[a]||n.uniqueSort(l),Pb.test(a)&&l.reverse()),this.pushStack(l)}});var ja=
/[^\x20\t\r\n\f]+/g;n.Callbacks=function(a){var c,b;a="string"==typeof a?(c=a,b={},n.each(c.match(ja)||[],function(a,c){b[c]=!0}),b):n.extend({},a);var h,l,d,q,t=[],v=[],g=-1,u=function(){q=q||a.once;for(d=h=!0;v.length;g=-1)for(l=v.shift();++g<t.length;)!1===t[g].apply(l[0],l[1])&&a.stopOnFalse&&(g=t.length,l=!1);a.memory||(l=!1);h=!1;q&&(t=l?[]:"")},r={add:function(){return t&&(l&&!h&&(g=t.length-1,v.push(l)),function Hb(c){n.each(c,function(c,b){D(b)?a.unique&&r.has(b)||t.push(b):b&&b.length&&
"string"!==p(b)&&Hb(b)})}(arguments),l&&!h&&u()),this},remove:function(){return n.each(arguments,function(a,c){for(var b;-1<(b=n.inArray(c,t,b));)t.splice(b,1),b<=g&&g--}),this},has:function(a){return a?-1<n.inArray(a,t):0<t.length},empty:function(){return t&&(t=[]),this},disable:function(){return q=v=[],t=l="",this},disabled:function(){return!t},lock:function(){return q=v=[],l||h||(t=l=""),this},locked:function(){return!!q},fireWith:function(a,c){return q||(c=[a,(c=c||[]).slice?c.slice():c],v.push(c),
h||u()),this},fire:function(){return r.fireWith(this,arguments),this},fired:function(){return!!d}};return r};n.extend({Deferred:function(a){var c=[["notify","progress",n.Callbacks("memory"),n.Callbacks("memory"),2],["resolve","done",n.Callbacks("once memory"),n.Callbacks("once memory"),0,"resolved"],["reject","fail",n.Callbacks("once memory"),n.Callbacks("once memory"),1,"rejected"]],h="pending",l={state:function(){return h},always:function(){return d.done(arguments).fail(arguments),this},"catch":function(a){return l.then(null,
a)},pipe:function(){var a=arguments;return n.Deferred(function(b){n.each(c,function(c,h){var l=D(a[h[4]])&&a[h[4]];d[h[1]](function(){var a=l&&l.apply(this,arguments);a&&D(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[h[0]+"With"](this,l?[a]:arguments)})});a=null}).promise()},then:function(a,h,l){function d(a,c,h,l){return function(){var t=this,v=arguments,g=function(){var b;if(!(a<q)){if((b=h.apply(t,v))===c.promise())throw new TypeError("Thenable self-resolution");var g=
b&&("object"==typeof b||"function"==typeof b)&&b.then;D(g)?l?g.call(b,d(q,c,r,l),d(q,c,z,l)):(q++,g.call(b,d(q,c,r,l),d(q,c,z,l),d(q,c,r,c.notifyWith))):(h!==r&&(t=void 0,v=[b]),(l||c.resolveWith)(t,v))}},u=l?g:function(){try{g()}catch(ib){n.Deferred.exceptionHook&&n.Deferred.exceptionHook(ib,u.stackTrace),q<=a+1&&(h!==z&&(t=void 0,v=[ib]),c.rejectWith(t,v))}};a?u():(n.Deferred.getStackHook&&(u.stackTrace=n.Deferred.getStackHook()),b.setTimeout(u))}}var q=0;return n.Deferred(function(b){c[0][3].add(d(0,
b,D(l)?l:r,b.notifyWith));c[1][3].add(d(0,b,D(a)?a:r));c[2][3].add(d(0,b,D(h)?h:z))}).promise()},promise:function(a){return null!=a?n.extend(a,l):l}},d={};return n.each(c,function(a,b){var q=b[2],t=b[5];l[b[1]]=q.add;t&&q.add(function(){h=t},c[3-a][2].disable,c[3-a][3].disable,c[0][2].lock,c[0][3].lock);q.add(b[3].fire);d[b[0]]=function(){return d[b[0]+"With"](this===d?void 0:this,arguments),this};d[b[0]+"With"]=q.fireWith}),l.promise(d),a&&a.call(d,d),d},when:function(a){var c=arguments.length,b=
c,h=Array(b),l=na.call(arguments),d=n.Deferred(),q=function(a){return function(b){h[a]=this;l[a]=1<arguments.length?na.call(arguments):b;--c||d.resolveWith(h,l)}};if(1>=c&&(B(a,d.done(q(b)).resolve,d.reject,!c),"pending"===d.state()||D(l[b]&&l[b].then)))return d.then();for(;b--;)B(l[b],q(b),d.reject);return d.promise()}});var Rb=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;n.Deferred.exceptionHook=function(a,c){b.console&&b.console.warn&&a&&Rb.test(a.name)&&b.console.warn("jQuery.Deferred exception: "+
a.message,a.stack,c)};n.readyException=function(a){b.setTimeout(function(){throw a;})};var Ya=n.Deferred();n.fn.ready=function(a){return Ya.then(a)["catch"](function(a){n.readyException(a)}),this};n.extend({isReady:!1,readyWait:1,ready:function(a){(!0===a?--n.readyWait:n.isReady)||(n.isReady=!0)!==a&&0<--n.readyWait||Ya.resolveWith(I,[n])}});n.ready.then=Ya.then;"complete"===I.readyState||"loading"!==I.readyState&&!I.documentElement.doScroll?b.setTimeout(n.ready):(I.addEventListener("DOMContentLoaded",
V),b.addEventListener("load",V));var ta=function(a,c,b,h,l,d,q){var t=0,g=a.length,v=null==b;if("object"===p(b))for(t in l=!0,b)ta(a,c,t,b[t],!0,d,q);else if(void 0!==h&&(l=!0,D(h)||(q=!0),v&&(q?(c.call(a,h),c=null):(v=c,c=function(a,c,b){return v.call(n(a),b)})),c))for(;t<g;t++)c(a[t],b,q?h:h.call(a[t],t,c(a[t],b)));return l?a:v?c.call(a):g?c(a[0],b):d},Ab=/^-ms-/,Bb=/-([a-z])/g,Ra=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};x.uid=1;x.prototype={cache:function(a){var c=a[this.expando];
return c||(c={},Ra(a)&&(a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,configurable:!0}))),c},set:function(a,c,b){var h;a=this.cache(a);if("string"==typeof c)a[w(c)]=b;else for(h in c)a[w(h)]=c[h];return a},get:function(a,c){return void 0===c?this.cache(a):a[this.expando]&&a[this.expando][w(c)]},access:function(a,c,b){return void 0===c||c&&"string"==typeof c&&void 0===b?this.get(a,c):(this.set(a,c,b),void 0!==b?b:c)},remove:function(a,c){var b=a[this.expando];if(void 0!==
b){if(void 0!==c){var h=(c=Array.isArray(c)?c.map(w):(c=w(c))in b?[c]:c.match(ja)||[]).length;for(;h--;)delete b[c[h]]}(void 0===c||n.isEmptyObject(b))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){a=a[this.expando];return void 0!==a&&!n.isEmptyObject(a)}};var O=new x,fa=new x,Db=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Cb=/[A-Z]/g;n.extend({hasData:function(a){return fa.hasData(a)||O.hasData(a)},data:function(a,c,b){return fa.access(a,c,b)},removeData:function(a,c){fa.remove(a,
c)},_data:function(a,c,b){return O.access(a,c,b)},_removeData:function(a,c){O.remove(a,c)}});n.fn.extend({data:function(a,c){var b,h,l,d=this[0],q=d&&d.attributes;if(void 0===a){if(this.length&&(l=fa.get(d),1===d.nodeType&&!O.get(d,"hasDataAttrs"))){for(b=q.length;b--;)q[b]&&0===(h=q[b].name).indexOf("data-")&&(h=w(h.slice(5)),G(d,h,l[h]));O.set(d,"hasDataAttrs",!0)}return l}return"object"==typeof a?this.each(function(){fa.set(this,a)}):ta(this,function(c){var b;if(d&&void 0===c)return void 0!==(b=
fa.get(d,a))?b:void 0!==(b=G(d,a))?b:void 0;this.each(function(){fa.set(this,a,c)})},null,c,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){fa.remove(this,a)})}});n.extend({queue:function(a,c,b){var h;if(a)return c=(c||"fx")+"queue",h=O.get(a,c),b&&(!h||Array.isArray(b)?h=O.access(a,c,n.makeArray(b)):h.push(b)),h||[]},dequeue:function(a,c){c=c||"fx";var b=n.queue(a,c),h=b.length,l=b.shift(),d=n._queueHooks(a,c);"inprogress"===l&&(l=b.shift(),h--);l&&("fx"===c&&b.unshift("inprogress"),
delete d.stop,l.call(a,function(){n.dequeue(a,c)},d));!h&&d&&d.empty.fire()},_queueHooks:function(a,c){var b=c+"queueHooks";return O.get(a,b)||O.access(a,b,{empty:n.Callbacks("once memory").add(function(){O.remove(a,[c+"queue",b])})})}});n.fn.extend({queue:function(a,c){var b=2;return"string"!=typeof a&&(c=a,a="fx",b--),arguments.length<b?n.queue(this[0],a):void 0===c?this:this.each(function(){var b=n.queue(this,a,c);n._queueHooks(this,a);"fx"===a&&"inprogress"!==b[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,
a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var b,h=1,l=n.Deferred(),d=this,q=this.length,t=function(){--h||l.resolveWith(d,[d])};"string"!=typeof a&&(c=a,a=void 0);for(a=a||"fx";q--;)(b=O.get(d[q],a+"queueHooks"))&&b.empty&&(h++,b.empty.add(t));return t(),l.promise(c)}});var mb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,za=new RegExp("^(?:([+-])=|)("+mb+")([a-z%]*)$","i"),ra=["Top","Right","Bottom","Left"],Fa=I.documentElement,wa=function(a){return n.contains(a.ownerDocument,
a)},Sb={composed:!0};Fa.getRootNode&&(wa=function(a){return n.contains(a.ownerDocument,a)||a.getRootNode(Sb)===a.ownerDocument});var La=function(a,c){return"none"===(a=c||a).style.display||""===a.style.display&&wa(a)&&"none"===n.css(a,"display")},nb=function(a,c,b,h){var l,d={};for(l in c)d[l]=a.style[l],a.style[l]=c[l];for(l in b=b.apply(a,h||[]),c)a.style[l]=d[l];return b},bb={};n.fn.extend({show:function(){return J(this,!0)},hide:function(){return J(this)},toggle:function(a){return"boolean"==typeof a?
a?this.show():this.hide():this.each(function(){La(this)?n(this).show():n(this).hide()})}});var Ga=/^(?:checkbox|radio)$/i,cb=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,db=/^$|^module$|\/(?:java|ecma)script/i,ba={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ba.optgroup=ba.option;ba.tbody=ba.tfoot=ba.colgroup=
ba.caption=ba.thead;ba.th=ba.td;var Sa,Fb=/<|&#?\w+;/;var Ta=I.createDocumentFragment().appendChild(I.createElement("div"));(Sa=I.createElement("input")).setAttribute("type","radio");Sa.setAttribute("checked","checked");Sa.setAttribute("name","t");Ta.appendChild(Sa);N.checkClone=Ta.cloneNode(!0).cloneNode(!0).lastChild.checked;Ta.innerHTML="<textarea>x</textarea>";N.noCloneChecked=!!Ta.cloneNode(!0).lastChild.defaultValue;var Tb=/^key/,Ub=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ob=/^([^.]*)(?:\.(.+)|)/;
n.event={global:{},add:function(a,c,b,h,l){var d,q,t,g,u,v,r,F,e;if(u=O.get(a))for(b.handler&&(b=(d=b).handler,l=d.selector),l&&n.find.matchesSelector(Fa,l),b.guid||(b.guid=n.guid++),(g=u.events)||(g=u.events={}),(q=u.handle)||(q=u.handle=function(c){return"undefined"!=typeof n&&n.event.triggered!==c.type?n.event.dispatch.apply(a,arguments):void 0}),u=(c=(c||"").match(ja)||[""]).length;u--;){var f=e=(t=ob.exec(c[u])||[])[1];t=(t[2]||"").split(".").sort();f&&(r=n.event.special[f]||{},f=(l?r.delegateType:
r.bindType)||f,r=n.event.special[f]||{},v=n.extend({type:f,origType:e,data:h,handler:b,guid:b.guid,selector:l,needsContext:l&&n.expr.match.needsContext.test(l),namespace:t.join(".")},d),(F=g[f])||((F=g[f]=[]).delegateCount=0,r.setup&&!1!==r.setup.call(a,h,t,q)||a.addEventListener&&a.addEventListener(f,q)),r.add&&(r.add.call(a,v),v.handler.guid||(v.handler.guid=b.guid)),l?F.splice(F.delegateCount++,0,v):F.push(v),n.event.global[f]=!0)}},remove:function(a,c,b,h,l){var d,q,t,g,u,v,r,F,e=O.hasData(a)&&
O.get(a);if(e&&(g=e.events)){for(u=(c=(c||"").match(ja)||[""]).length;u--;)if(v=F=(t=ob.exec(c[u])||[])[1],r=(t[2]||"").split(".").sort(),v){var f=n.event.special[v]||{};var Q=g[v=(h?f.delegateType:f.bindType)||v]||[];t=t[2]&&new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)");for(q=d=Q.length;d--;){var X=Q[d];!l&&F!==X.origType||b&&b.guid!==X.guid||t&&!t.test(X.namespace)||h&&h!==X.selector&&("**"!==h||!X.selector)||(Q.splice(d,1),X.selector&&Q.delegateCount--,f.remove&&f.remove.call(a,X))}q&&
!Q.length&&(f.teardown&&!1!==f.teardown.call(a,r,e.handle)||n.removeEvent(a,v,e.handle),delete g[v])}else for(v in g)n.event.remove(a,v+c[u],b,h,!0);n.isEmptyObject(g)&&O.remove(a,"handle events")}},dispatch:function(a){var c,b,h,l,d=n.event.fix(a),q=Array(arguments.length);var t=(O.get(this,"events")||{})[d.type]||[];var g=n.event.special[d.type]||{};q[0]=d;for(c=1;c<arguments.length;c++)q[c]=arguments[c];if(d.delegateTarget=this,!g.preDispatch||!1!==g.preDispatch.call(this,d)){var u=n.event.handlers.call(this,
d,t);for(c=0;(h=u[c++])&&!d.isPropagationStopped();)for(d.currentTarget=h.elem,t=0;(l=h.handlers[t++])&&!d.isImmediatePropagationStopped();)d.rnamespace&&!1!==l.namespace&&!d.rnamespace.test(l.namespace)||(d.handleObj=l,d.data=l.data,void 0!==(b=((n.event.special[l.origType]||{}).handle||l.handler).apply(h.elem,q))&&!1===(d.result=b)&&(d.preventDefault(),d.stopPropagation()));return g.postDispatch&&g.postDispatch.call(this,d),d.result}},handlers:function(a,c){var b,h,l,d=[],q=c.delegateCount,t=a.target;
if(q&&t.nodeType&&!("click"===a.type&&1<=a.button))for(;t!==this;t=t.parentNode||this)if(1===t.nodeType&&("click"!==a.type||!0!==t.disabled)){var g=[];var u={};for(b=0;b<q;b++)void 0===u[l=(h=c[b]).selector+" "]&&(u[l]=h.needsContext?-1<n(l,this).index(t):n.find(l,this,null,[t]).length),u[l]&&g.push(h);g.length&&d.push({elem:t,handlers:g})}return t=this,q<c.length&&d.push({elem:t,handlers:c.slice(q)}),d},addProp:function(a,c){Object.defineProperty(n.Event.prototype,a,{enumerable:!0,configurable:!0,
get:D(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(c){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:c})}})},fix:function(a){return a[n.expando]?a:new n.Event(a)},special:{load:{noBubble:!0},click:{setup:function(c){c=this||c;return Ga.test(c.type)&&c.click&&e(c,"input")&&a(c,"click",M),!1},trigger:function(c){c=this||c;return Ga.test(c.type)&&c.click&&e(c,"input")&&a(c,
"click"),!0},_default:function(a){a=a.target;return Ga.test(a.type)&&a.click&&e(a,"input")&&O.get(a,"click")||e(a,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};n.removeEvent=function(a,c,b){a.removeEventListener&&a.removeEventListener(c,b)};n.Event=function(a,c){if(!(this instanceof n.Event))return new n.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&
!1===a.returnValue?M:U,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a;c&&n.extend(this,c);this.timeStamp=a&&a.timeStamp||Date.now();this[n.expando]=!0};n.Event.prototype={constructor:n.Event,isDefaultPrevented:U,isPropagationStopped:U,isImmediatePropagationStopped:U,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=M;a&&!this.isSimulated&&a.preventDefault()},
stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=M;a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=M;a&&!this.isSimulated&&a.stopImmediatePropagation();this.stopPropagation()}};n.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,
clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var c=a.button;return null==a.which&&Tb.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==c&&Ub.test(a.type)?1&c?1:2&c?3:4&c?2:0:a.which}},n.event.addProp);n.each({focus:"focusin",blur:"focusout"},function(c,b){n.event.special[c]={setup:function(){return a(this,c,P),!1},trigger:function(){return a(this,c),!0},delegateType:b}});
n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,c){n.event.special[a]={delegateType:c,bindType:c,handle:function(a){var b,h=a.relatedTarget,l=a.handleObj;return h&&(h===this||n.contains(this,h))||(a.type=l.origType,b=l.handler.apply(this,arguments),a.type=c),b}}});n.fn.extend({on:function(a,c,b,h){return S(this,a,c,b,h)},one:function(a,c,b,h){return S(this,a,c,b,h,1)},off:function(a,c,b){var h,l;if(a&&a.preventDefault&&a.handleObj)return h=
a.handleObj,n(a.delegateTarget).off(h.namespace?h.origType+"."+h.namespace:h.origType,h.selector,h.handler),this;if("object"==typeof a){for(l in a)this.off(l,c,a[l]);return this}return!1!==c&&"function"!=typeof c||(b=c,c=void 0),!1===b&&(b=U),this.each(function(){n.event.remove(this,a,b,c)})}});var Vb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Wb=/<script|<style|<link/i,Gb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ib=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
n.extend({htmlPrefilter:function(a){return a.replace(Vb,"<$1></$2>")},clone:function(a,c,b){var l,d,q,t=a.cloneNode(!0),g=wa(a);if(!(N.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a))){var u=K(t);var r=0;for(l=(d=K(a)).length;r<l;r++){var v=d[r];var F=u[r];void 0;"input"===(q=F.nodeName.toLowerCase())&&Ga.test(v.type)?F.checked=v.checked:"input"!==q&&"textarea"!==q||(F.defaultValue=v.defaultValue)}}if(c)if(b)for(d=d||K(a),u=u||K(t),r=0,l=d.length;r<l;r++)h(d[r],u[r]);else h(a,t);return 0<
(u=K(t,"script")).length&&H(u,!g&&K(a,"script")),t},cleanData:function(a){for(var c,b,h,l=n.event.special,d=0;void 0!==(b=a[d]);d++)if(Ra(b)){if(c=b[O.expando]){if(c.events)for(h in c.events)l[h]?n.event.remove(b,h):n.removeEvent(b,h,c.handle);b[O.expando]=void 0}b[fa.expando]&&(b[fa.expando]=void 0)}}});n.fn.extend({detach:function(a){return q(this,a,!0)},remove:function(a){return q(this,a)},text:function(a){return ta(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==
this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return l(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||E(this,a).appendChild(a)})},prepend:function(){return l(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=E(this,a);c.insertBefore(a,c.firstChild)}})},before:function(){return l(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,
this)})},after:function(){return l(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,c=0;null!=(a=this[c]);c++)1===a.nodeType&&(n.cleanData(K(a,!1)),a.textContent="");return this},clone:function(a,c){return a=null!=a&&a,c=null==c?a:c,this.map(function(){return n.clone(this,a,c)})},html:function(a){return ta(this,function(a){var c=this[0]||{},b=0,h=this.length;if(void 0===a&&1===c.nodeType)return c.innerHTML;if("string"==typeof a&&
!Wb.test(a)&&!ba[(cb.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;b<h;b++)1===(c=this[b]||{}).nodeType&&(n.cleanData(K(c,!1)),c.innerHTML=a);c=0}catch(Ua){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return l(this,arguments,function(c){var b=this.parentNode;0>n.inArray(this,a)&&(n.cleanData(K(this)),b&&b.replaceChild(c,this))},a)}});n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},
function(a,c){n.fn[a]=function(a){for(var b=[],h=n(a),l=h.length-1,d=0;d<=l;d++)a=d===l?this:this.clone(!0),n(h[d])[c](a),Ea.apply(b,a.get());return this.pushStack(b)}});var Va=new RegExp("^("+mb+")(?!px)[a-z%]+$","i"),Na=function(a){var c=a.ownerDocument.defaultView;return c&&c.opener||(c=b),c.getComputedStyle(a)},Jb=new RegExp(ra.join("|"),"i");!function(){function a(){if(g){t.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";g.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";
Fa.appendChild(t).appendChild(g);var a=b.getComputedStyle(g);c="1%"!==a.top;q=12===Math.round(parseFloat(a.marginLeft));g.style.right="60%";d=36===Math.round(parseFloat(a.right));h=36===Math.round(parseFloat(a.width));g.style.position="absolute";l=12===Math.round(parseFloat(g.offsetWidth/3));Fa.removeChild(t);g=null}}var c,h,l,d,q,t=I.createElement("div"),g=I.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",N.clearCloneStyle="content-box"===
g.style.backgroundClip,n.extend(N,{boxSizingReliable:function(){return a(),h},pixelBoxStyles:function(){return a(),d},pixelPosition:function(){return a(),c},reliableMarginLeft:function(){return a(),q},scrollboxSize:function(){return a(),l}}))}();var gb=["Webkit","Moz","ms"],fb=I.createElement("div").style,eb={},Xb=/^(none|table(?!-c[ea]).+)/,pb=/^--/,Yb={position:"absolute",visibility:"hidden",display:"block"},qb={letterSpacing:"0",fontWeight:"400"};n.extend({cssHooks:{opacity:{get:function(a,c){if(c)return a=
t(a,"opacity"),""===a?"1":a}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(a,c,b,h){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var l,d,q,t=w(c),g=pb.test(c),r=a.style;if(g||(c=u(t)),q=n.cssHooks[c]||n.cssHooks[t],void 0===b)return q&&
"get"in q&&void 0!==(l=q.get(a,!1,h))?l:r[c];"string"===(d=typeof b)&&(l=za.exec(b))&&l[1]&&(b=C(a,c,l),d="number");null!=b&&b==b&&("number"!==d||g||(b+=l&&l[3]||(n.cssNumber[t]?"":"px")),N.clearCloneStyle||""!==b||0!==c.indexOf("background")||(r[c]="inherit"),q&&"set"in q&&void 0===(b=q.set(a,b,h))||(g?r.setProperty(c,b):r[c]=b))}},css:function(a,c,b,h){var l,d,q,g=w(c);return pb.test(c)||(c=u(g)),(q=n.cssHooks[c]||n.cssHooks[g])&&"get"in q&&(l=q.get(a,!0,b)),void 0===l&&(l=t(a,c,h)),"normal"===
l&&c in qb&&(l=qb[c]),""===b||b?(d=parseFloat(l),!0===b||isFinite(d)?d||0:l):l}});n.each(["height","width"],function(a,c){n.cssHooks[c]={get:function(a,b,h){if(b)return!Xb.test(n.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?ua(a,c,h):nb(a,Yb,function(){return ua(a,c,h)})},set:function(a,b,h){var l,d=Na(a),q=!N.scrollboxSize()&&"absolute"===d.position,t=(q||h)&&"border-box"===n.css(a,"boxSizing",!1,d);h=h?X(a,c,h,t,d):0;return t&&q&&(h-=Math.ceil(a["offset"+c[0].toUpperCase()+
c.slice(1)]-parseFloat(d[c])-X(a,c,"border",!1,d)-.5)),h&&(l=za.exec(b))&&"px"!==(l[3]||"px")&&(a.style[c]=b,b=n.css(a,c)),Q(0,b,h)}}});n.cssHooks.marginLeft=F(N.reliableMarginLeft,function(a,c){if(c)return(parseFloat(t(a,"marginLeft"))||a.getBoundingClientRect().left-nb(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"});n.each({margin:"",padding:"",border:"Width"},function(a,c){n.cssHooks[a+c]={expand:function(b){var h=0,l={};for(b="string"==typeof b?b.split(" "):[b];4>h;h++)l[a+
ra[h]+c]=b[h]||b[h-2]||b[0];return l}};"margin"!==a&&(n.cssHooks[a+c].set=Q)});n.fn.extend({css:function(a,c){return ta(this,function(a,c,b){var h,l={},d=0;if(Array.isArray(c)){b=Na(a);for(h=c.length;d<h;d++)l[c[d]]=n.css(a,c[d],!1,b);return l}return void 0!==b?n.style(a,c,b):n.css(a,c)},a,c,1<arguments.length)}});((n.Tween=Y).prototype={constructor:Y,init:function(a,c,b,h,l,d){this.elem=a;this.prop=b;this.easing=l||n.easing._default;this.options=c;this.start=this.now=this.cur();this.end=h;this.unit=
d||(n.cssNumber[b]?"":"px")},cur:function(){var a=Y.propHooks[this.prop];return a&&a.get?a.get(this):Y.propHooks._default.get(this)},run:function(a){var c,b=Y.propHooks[this.prop];return this.options.duration?this.pos=c=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=c=a,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),b&&b.set?b.set(this):Y.propHooks._default.set(this),this}}).init.prototype=Y.prototype;
(Y.propHooks={_default:{get:function(a){var c;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(c=n.css(a.elem,a.prop,""))&&"auto"!==c?c:0},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||!n.cssHooks[a.prop]&&null==a.elem.style[u(a.prop)]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}}).scrollTop=Y.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};n.easing={linear:function(a){return a},
swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};n.fx=Y.prototype.init;n.fx.step={};var xa,Oa,Zb=/^(?:toggle|show|hide)$/,$b=/queueHooks$/;n.Animation=n.extend(ia,{tweeners:{"*":[function(a,c){var b=this.createTween(a,c);return C(b.elem,a,za.exec(c),b),b}]},tweener:function(a,c){D(a)?(c=a,a=["*"]):a=a.match(ja);for(var b,h=0,l=a.length;h<l;h++)b=a[h],ia.tweeners[b]=ia.tweeners[b]||[],ia.tweeners[b].unshift(c)},prefilters:[function(a,c,b){var h,l,d,q,t,g,u,r="width"in c||"height"in
c,F=this,e={},f=a.style,v=a.nodeType&&La(a),Q=O.get(a,"fxshow");for(h in b.queue||(null==(q=n._queueHooks(a,"fx")).unqueued&&(q.unqueued=0,t=q.empty.fire,q.empty.fire=function(){q.unqueued||t()}),q.unqueued++,F.always(function(){F.always(function(){q.unqueued--;n.queue(a,"fx").length||q.empty.fire()})})),c)if(l=c[h],Zb.test(l)){if(delete c[h],d=d||"toggle"===l,l===(v?"hide":"show")){if("show"!==l||!Q||void 0===Q[h])continue;v=!0}e[h]=Q&&Q[h]||n.style(a,h)}if((c=!n.isEmptyObject(c))||!n.isEmptyObject(e))for(h in r&&
1===a.nodeType&&(b.overflow=[f.overflow,f.overflowX,f.overflowY],null==(g=Q&&Q.display)&&(g=O.get(a,"display")),"none"===(u=n.css(a,"display"))&&(g?u=g:(J([a],!0),g=a.style.display||g,u=n.css(a,"display"),J([a]))),("inline"===u||"inline-block"===u&&null!=g)&&"none"===n.css(a,"float")&&(c||(F.done(function(){f.display=g}),null==g&&(u=f.display,g="none"===u?"":u)),f.display="inline-block")),b.overflow&&(f.overflow="hidden",F.always(function(){f.overflow=b.overflow[0];f.overflowX=b.overflow[1];f.overflowY=
b.overflow[2]})),c=!1,e)c||(Q?"hidden"in Q&&(v=Q.hidden):Q=O.access(a,"fxshow",{display:g}),d&&(Q.hidden=!v),v&&J([a],!0),F.done(function(){for(h in v||J([a]),O.remove(a,"fxshow"),e)n.style(a,h,e[h])})),c=da(v?Q[h]:0,h,F),h in Q||(Q[h]=c.start,v&&(c.end=c.start,c.start=0))}],prefilter:function(a,c){c?ia.prefilters.unshift(a):ia.prefilters.push(a)}});n.speed=function(a,c,b){var h=a&&"object"==typeof a?n.extend({},a):{complete:b||!b&&c||D(a)&&a,duration:a,easing:b&&c||c&&!D(c)&&c};return n.fx.off?h.duration=
0:"number"!=typeof h.duration&&(h.duration in n.fx.speeds?h.duration=n.fx.speeds[h.duration]:h.duration=n.fx.speeds._default),null!=h.queue&&!0!==h.queue||(h.queue="fx"),h.old=h.complete,h.complete=function(){D(h.old)&&h.old.call(this);h.queue&&n.dequeue(this,h.queue)},h};n.fn.extend({fadeTo:function(a,c,b,h){return this.filter(La).css("opacity",0).show().end().animate({opacity:c},a,b,h)},animate:function(a,c,b,h){var l=n.isEmptyObject(a),d=n.speed(c,b,h);c=function(){var c=ia(this,n.extend({},a),
d);(l||O.get(this,"finish"))&&c.stop(!0)};return c.finish=c,l||!1===d.queue?this.each(c):this.queue(d.queue,c)},stop:function(a,c,b){var h=function(a){var c=a.stop;delete a.stop;c(b)};return"string"!=typeof a&&(b=c,c=a,a=void 0),c&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var c=!0,l=null!=a&&a+"queueHooks",d=n.timers,q=O.get(this);if(l)q[l]&&q[l].stop&&h(q[l]);else for(l in q)q[l]&&q[l].stop&&$b.test(l)&&h(q[l]);for(l=d.length;l--;)d[l].elem!==this||null!=a&&d[l].queue!==a||(d[l].anim.stop(b),
c=!1,d.splice(l,1));!c&&b||n.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var c=O.get(this),b=c[a+"queue"];var h=c[a+"queueHooks"];var l=n.timers,d=b?b.length:0;c.finish=!0;n.queue(this,a,[]);h&&h.stop&&h.stop.call(this,!0);for(h=l.length;h--;)l[h].elem===this&&l[h].queue===a&&(l[h].anim.stop(!0),l.splice(h,1));for(h=0;h<d;h++)b[h]&&b[h].finish&&b[h].finish.call(this);delete c.finish})}});n.each(["toggle","show","hide"],function(a,c){var b=n.fn[c];n.fn[c]=function(a,
h,l){return null==a||"boolean"==typeof a?b.apply(this,arguments):this.animate(R(c,!0),a,h,l)}});n.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){n.fn[a]=function(a,b,h){return this.animate(c,a,b,h)}});n.timers=[];n.fx.tick=function(){var a,c=0,b=n.timers;for(xa=Date.now();c<b.length;c++)(a=b[c])()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop();xa=void 0};n.fx.timer=function(a){n.timers.push(a);
n.fx.start()};n.fx.interval=13;n.fx.start=function(){Oa||(Oa=!0,ca())};n.fx.stop=function(){Oa=null};n.fx.speeds={slow:600,fast:200,_default:400};n.fn.delay=function(a,c){return a=n.fx&&n.fx.speeds[a]||a,c=c||"fx",this.queue(c,function(c,h){var l=b.setTimeout(c,a);h.stop=function(){b.clearTimeout(l)}})};var Ha=I.createElement("input");var ac=I.createElement("select").appendChild(I.createElement("option"));Ha.type="checkbox";N.checkOn=""!==Ha.value;N.optSelected=ac.selected;(Ha=I.createElement("input")).value=
"t";Ha.type="radio";N.radioValue="t"===Ha.value;var Ia=n.expr.attrHandle;n.fn.extend({attr:function(a,c){return ta(this,n.attr,a,c,1<arguments.length)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}});n.extend({attr:function(a,c,b){var h,l,d=a.nodeType;if(3!==d&&8!==d&&2!==d)return"undefined"==typeof a.getAttribute?n.prop(a,c,b):(1===d&&n.isXMLDoc(a)||(l=n.attrHooks[c.toLowerCase()]||(n.expr.match.bool.test(c)?bc:void 0)),void 0!==b?null===b?void n.removeAttr(a,c):l&&"set"in
l&&void 0!==(h=l.set(a,b,c))?h:(a.setAttribute(c,b+""),b):l&&"get"in l&&null!==(h=l.get(a,c))?h:null==(h=n.find.attr(a,c))?void 0:h)},attrHooks:{type:{set:function(a,c){if(!N.radioValue&&"radio"===c&&e(a,"input")){var b=a.value;return a.setAttribute("type",c),b&&(a.value=b),c}}}},removeAttr:function(a,c){var b=0,h=c&&c.match(ja);if(h&&1===a.nodeType)for(;c=h[b++];)a.removeAttribute(c)}});var bc={set:function(a,c,b){return!1===c?n.removeAttr(a,b):a.setAttribute(b,b),b}};n.each(n.expr.match.bool.source.match(/\w+/g),
function(a,c){var b=Ia[c]||n.find.attr;Ia[c]=function(a,c,h){var l,d,q=c.toLowerCase();return h||(d=Ia[q],Ia[q]=l,l=null!=b(a,c,h)?q:null,Ia[q]=d),l}});var cc=/^(?:input|select|textarea|button)$/i,dc=/^(?:a|area)$/i;n.fn.extend({prop:function(a,c){return ta(this,n.prop,a,c,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}});n.extend({prop:function(a,c,b){var h,l,d=a.nodeType;if(3!==d&&8!==d&&2!==d)return 1===d&&n.isXMLDoc(a)||(c=n.propFix[c]||
c,l=n.propHooks[c]),void 0!==b?l&&"set"in l&&void 0!==(h=l.set(a,b,c))?h:a[c]=b:l&&"get"in l&&null!==(h=l.get(a,c))?h:a[c]},propHooks:{tabIndex:{get:function(a){var c=n.find.attr(a,"tabindex");return c?parseInt(c,10):cc.test(a.nodeName)||dc.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});N.optSelected||(n.propHooks.selected={get:function(a){a=a.parentNode;return a&&a.parentNode&&a.parentNode.selectedIndex,null},set:function(a){a=a.parentNode;a&&(a.selectedIndex,a.parentNode&&
a.parentNode.selectedIndex)}});n.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){n.propFix[this.toLowerCase()]=this});n.fn.extend({addClass:function(a){var c,b,h,l,d,q,t,g=0;if(D(a))return this.each(function(c){n(this).addClass(a.call(this,c,ha(this)))});if((c=Aa(a)).length)for(;b=this[g++];)if(l=ha(b),h=1===b.nodeType&&" "+oa(l)+" "){for(q=0;d=c[q++];)0>h.indexOf(" "+d+" ")&&(h+=d+" ");l!==(t=oa(h))&&b.setAttribute("class",
t)}return this},removeClass:function(a){var c,b,h,l,d,q,t,g=0;if(D(a))return this.each(function(c){n(this).removeClass(a.call(this,c,ha(this)))});if(!arguments.length)return this.attr("class","");if((c=Aa(a)).length)for(;b=this[g++];)if(l=ha(b),h=1===b.nodeType&&" "+oa(l)+" "){for(q=0;d=c[q++];)for(;-1<h.indexOf(" "+d+" ");)h=h.replace(" "+d+" "," ");l!==(t=oa(h))&&b.setAttribute("class",t)}return this},toggleClass:function(a,c){var b=typeof a,h="string"===b||Array.isArray(a);return"boolean"==typeof c&&
h?c?this.addClass(a):this.removeClass(a):D(a)?this.each(function(b){n(this).toggleClass(a.call(this,b,ha(this),c),c)}):this.each(function(){var c,l;if(h){var d=0;var q=n(this);for(l=Aa(a);c=l[d++];)q.hasClass(c)?q.removeClass(c):q.addClass(c)}else void 0!==a&&"boolean"!==b||((c=ha(this))&&O.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===a?"":O.get(this,"__className__")||""))})},hasClass:function(a){var c,b=0;for(a=" "+a+" ";c=this[b++];)if(1===c.nodeType&&-1<(" "+
oa(ha(c))+" ").indexOf(a))return!0;return!1}});var ec=/\r/g;n.fn.extend({val:function(a){var c,b,h,l=this[0];return arguments.length?(h=D(a),this.each(function(b){var l;1===this.nodeType&&(null==(l=h?a.call(this,b,n(this).val()):a)?l="":"number"==typeof l?l+="":Array.isArray(l)&&(l=n.map(l,function(a){return null==a?"":a+""})),(c=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()])&&"set"in c&&void 0!==c.set(this,l,"value")||(this.value=l))})):l?(c=n.valHooks[l.type]||n.valHooks[l.nodeName.toLowerCase()])&&
"get"in c&&void 0!==(b=c.get(l,"value"))?b:"string"==typeof(b=l.value)?b.replace(ec,""):null==b?"":b:void 0}});n.extend({valHooks:{option:{get:function(a){var c=n.find.attr(a,"value");return null!=c?c:oa(n.text(a))}},select:{get:function(a){var c,b,h=a.options,l=a.selectedIndex,d="select-one"===a.type,q=d?null:[],t=d?l+1:h.length;for(b=0>l?t:d?l:0;b<t;b++)if(!(!(c=h[b]).selected&&b!==l||c.disabled||c.parentNode.disabled&&e(c.parentNode,"optgroup"))){if(a=n(c).val(),d)return a;q.push(a)}return q},
set:function(a,c){var b,h,l=a.options;c=n.makeArray(c);for(var d=l.length;d--;)((h=l[d]).selected=-1<n.inArray(n.valHooks.option.get(h),c))&&(b=!0);return b||(a.selectedIndex=-1),c}}}});n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,c){if(Array.isArray(c))return a.checked=-1<n.inArray(n(a).val(),c)}};N.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});N.focusin="onfocusin"in b;var rb=/^(?:focusinfocus|focusoutblur)$/,sb=function(a){a.stopPropagation()};
n.extend(n.event,{trigger:function(a,c,h,l){var d,q,t,g,u,r,F=[h||I],e=ya.call(a,"type")?a.type:a;var f=ya.call(a,"namespace")?a.namespace.split("."):[];if(d=r=q=h=h||I,3!==h.nodeType&&8!==h.nodeType&&!rb.test(e+n.event.triggered)&&(-1<e.indexOf(".")&&(e=(f=e.split(".")).shift(),f.sort()),t=0>e.indexOf(":")&&"on"+e,(a=a[n.expando]?a:new n.Event(e,"object"==typeof a&&a)).isTrigger=l?2:3,a.namespace=f.join("."),a.rnamespace=a.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=
void 0,a.target||(a.target=h),c=null==c?[a]:n.makeArray(c,[a]),u=n.event.special[e]||{},l||!u.trigger||!1!==u.trigger.apply(h,c))){if(!l&&!u.noBubble&&!la(h)){var Q=u.delegateType||e;for(rb.test(Q+e)||(d=d.parentNode);d;d=d.parentNode)F.push(d),q=d;q===(h.ownerDocument||I)&&F.push(q.defaultView||q.parentWindow||b)}for(f=0;(d=F[f++])&&!a.isPropagationStopped();)r=d,a.type=1<f?Q:u.bindType||e,(g=(O.get(d,"events")||{})[a.type]&&O.get(d,"handle"))&&g.apply(d,c),(g=t&&d[t])&&g.apply&&Ra(d)&&(a.result=
g.apply(d,c),!1===a.result&&a.preventDefault());return a.type=e,l||a.isDefaultPrevented()||u._default&&!1!==u._default.apply(F.pop(),c)||!Ra(h)||t&&D(h[e])&&!la(h)&&((q=h[t])&&(h[t]=null),n.event.triggered=e,a.isPropagationStopped()&&r.addEventListener(e,sb),h[e](),a.isPropagationStopped()&&r.removeEventListener(e,sb),n.event.triggered=void 0,q&&(h[t]=q)),a.result}},simulate:function(a,c,b){a=n.extend(new n.Event,b,{type:a,isSimulated:!0});n.event.trigger(a,null,c)}});n.fn.extend({trigger:function(a,
c){return this.each(function(){n.event.trigger(a,c,this)})},triggerHandler:function(a,c){var b=this[0];if(b)return n.event.trigger(a,c,b,!0)}});N.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,c){var b=function(a){n.event.simulate(c,a.target,n.event.fix(a))};n.event.special[c]={setup:function(){var h=this.ownerDocument||this,l=O.access(h,c);l||h.addEventListener(a,b,!0);O.access(h,c,(l||0)+1)},teardown:function(){var h=this.ownerDocument||this,l=O.access(h,c)-1;l?O.access(h,c,l):(h.removeEventListener(a,
b,!0),O.remove(h,c))}}});var Ja=b.location,tb=Date.now(),Za=/\?/;n.parseXML=function(a){if(!a||"string"!=typeof a)return null;try{var c=(new b.DOMParser).parseFromString(a,"text/xml")}catch(ka){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+a),c};var Kb=/\[\]$/,ub=/\r?\n/g,fc=/^(?:submit|button|image|reset|file)$/i,gc=/^(?:input|select|textarea|keygen)/i;n.param=function(a,c){var b,h=[],l=function(a,c){c=D(c)?c():c;h[h.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==
c?"":c)};if(null==a)return"";if(Array.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){l(this.name,this.value)});else for(b in a)Ba(b,a[b],c,l);return h.join("&")};n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&gc.test(this.nodeName)&&!fc.test(a)&&(this.checked||!Ga.test(a))}).map(function(a,
c){a=n(this).val();return null==a?null:Array.isArray(a)?n.map(a,function(a){return{name:c.name,value:a.replace(ub,"\r\n")}}):{name:c.name,value:a.replace(ub,"\r\n")}}).get()}});var hc=/%20/g,ic=/#.*$/,jc=/([?&])_=[^&]*/,kc=/^(.*?):[ \t]*([^\r\n]*)$/gm,lc=/^(?:GET|HEAD)$/,mc=/^\/\//,vb={},Wa={},wb="*/".concat("*"),$a=I.createElement("a");$a.href=Ja.href;n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ja.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ja.protocol),
global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,c){return c?
Da(Da(a,n.ajaxSettings),c):Da(n.ajaxSettings,a)},ajaxPrefilter:Ca(vb),ajaxTransport:Ca(Wa),ajax:function(a,c){function h(a,c,h,t){var r,F,E,B,Y,L=c;m||(m=!0,g&&b.clearTimeout(g),l=void 0,q=t||"",v.readyState=0<a?4:0,r=200<=a&&300>a||304===a,h&&(B=function(a,c,b){for(var h,l,d,q,t=a.contents,g=a.dataTypes;"*"===g[0];)g.shift(),void 0===h&&(h=a.mimeType||c.getResponseHeader("Content-Type"));if(h)for(l in t)if(t[l]&&t[l].test(h)){g.unshift(l);break}if(g[0]in b)d=g[0];else{for(l in b){if(!g[0]||a.converters[l+
" "+g[0]]){d=l;break}q||(q=l)}d=d||q}if(d)return d!==g[0]&&g.unshift(d),b[d]}(e,v,h)),B=function(a,c,b,h){var l,d,q,t,g,u={},r=a.dataTypes.slice();if(r[1])for(q in a.converters)u[q.toLowerCase()]=a.converters[q];for(d=r.shift();d;)if(a.responseFields[d]&&(b[a.responseFields[d]]=c),!g&&h&&a.dataFilter&&(c=a.dataFilter(c,a.dataType)),g=d,d=r.shift())if("*"===d)d=g;else if("*"!==g&&g!==d){if(!(q=u[g+" "+d]||u["* "+d]))for(l in u)if((t=l.split(" "))[1]===d&&(q=u[g+" "+t[0]]||u["* "+t[0]])){!0===q?q=u[l]:
!0!==u[l]&&(d=t[0],r.unshift(t[1]));break}if(!0!==q)if(q&&a["throws"])c=q(c);else try{c=q(c)}catch(Mb){return{state:"parsererror",error:q?Mb:"No conversion from "+g+" to "+d}}}return{state:"success",data:c}}(e,B,v,r),r?(e.ifModified&&((Y=v.getResponseHeader("Last-Modified"))&&(n.lastModified[d]=Y),(Y=v.getResponseHeader("etag"))&&(n.etag[d]=Y)),204===a||"HEAD"===e.type?L="nocontent":304===a?L="notmodified":(L=B.state,F=B.data,r=!(E=B.error))):(E=L,!a&&L||(L="error",0>a&&(a=0))),v.status=a,v.statusText=
(c||L)+"",r?X.resolveWith(f,[F,L,v]):X.rejectWith(f,[v,L,E]),v.statusCode(k),k=void 0,u&&Q.trigger(r?"ajaxSuccess":"ajaxError",[v,e,r?F:E]),z.fireWith(f,[v,L]),u&&(Q.trigger("ajaxComplete",[v,e]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=void 0);c=c||{};var l,d,q,t,g,u,r,F,e=n.ajaxSetup({},c),f=e.context||e,Q=e.context&&(f.nodeType||f.jquery)?n(f):n.event,X=n.Deferred(),z=n.Callbacks("once memory"),k=e.statusCode||{},E={},B={},Y="canceled",v={readyState:0,getResponseHeader:function(a){var c;
if(m){if(!t)for(t={};c=kc.exec(q);)t[c[1].toLowerCase()+" "]=(t[c[1].toLowerCase()+" "]||[]).concat(c[2]);c=t[a.toLowerCase()+" "]}return null==c?null:c.join(", ")},getAllResponseHeaders:function(){return m?q:null},setRequestHeader:function(a,c){return null==m&&(a=B[a.toLowerCase()]=B[a.toLowerCase()]||a,E[a]=c),this},overrideMimeType:function(a){return null==m&&(e.mimeType=a),this},statusCode:function(a){var c;if(a)if(m)v.always(a[v.status]);else for(c in a)k[c]=[k[c],a[c]];return this},abort:function(a){a=
a||Y;return l&&l.abort(a),h(0,a),this}};if(X.promise(v),e.url=((a||e.url||Ja.href)+"").replace(mc,Ja.protocol+"//"),e.type=c.method||c.type||e.method||e.type,e.dataTypes=(e.dataType||"*").toLowerCase().match(ja)||[""],null==e.crossDomain){a=I.createElement("a");try{a.href=e.url,a.href=a.href,e.crossDomain=$a.protocol+"//"+$a.host!=a.protocol+"//"+a.host}catch(Xa){e.crossDomain=!0}}if(e.data&&e.processData&&"string"!=typeof e.data&&(e.data=n.param(e.data,e.traditional)),Pa(vb,e,c,v),m)return v;for(r in(u=
n.event&&e.global)&&0==n.active++&&n.event.trigger("ajaxStart"),e.type=e.type.toUpperCase(),e.hasContent=!lc.test(e.type),d=e.url.replace(ic,""),e.hasContent?e.data&&e.processData&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&(e.data=e.data.replace(hc,"+")):(F=e.url.slice(d.length),e.data&&(e.processData||"string"==typeof e.data)&&(d+=(Za.test(d)?"&":"?")+e.data,delete e.data),!1===e.cache&&(d=d.replace(jc,"$1"),F=(Za.test(d)?"&":"?")+"_="+tb++ +F),e.url=d+F),e.ifModified&&
(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(e.data&&e.hasContent&&!1!==e.contentType||c.contentType)&&v.setRequestHeader("Content-Type",e.contentType),v.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+("*"!==e.dataTypes[0]?", "+wb+"; q=0.01":""):e.accepts["*"]),e.headers)v.setRequestHeader(r,e.headers[r]);if(e.beforeSend&&(!1===e.beforeSend.call(f,v,e)||m))return v.abort();
if(Y="abort",z.add(e.complete),v.done(e.success),v.fail(e.error),l=Pa(Wa,e,c,v)){if(v.readyState=1,u&&Q.trigger("ajaxSend",[v,e]),m)return v;e.async&&0<e.timeout&&(g=b.setTimeout(function(){v.abort("timeout")},e.timeout));try{var m=!1;l.send(E,h)}catch(Xa){if(m)throw Xa;h(-1,Xa)}}else h(-1,"No Transport");return v},getJSON:function(a,c,b){return n.get(a,c,b,"json")},getScript:function(a,c){return n.get(a,void 0,c,"script")}});n.each(["get","post"],function(a,c){n[c]=function(a,b,h,l){return D(b)&&
(l=l||h,h=b,b=void 0),n.ajax(n.extend({url:a,type:c,dataType:l,data:b,success:h},n.isPlainObject(a)&&a))}});n._evalUrl=function(a,c){return n.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(a){n.globalEval(a,c)}})};n.fn.extend({wrapAll:function(a){var c;return this[0]&&(D(a)&&(a=a.call(this[0])),c=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var a=this;a.firstElementChild;)a=
a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return D(a)?this.each(function(c){n(this).wrapInner(a.call(this,c))}):this.each(function(){var c=n(this),b=c.contents();b.length?b.wrapAll(a):c.append(a)})},wrap:function(a){var c=D(a);return this.each(function(b){n(this).wrapAll(c?a.call(this,b):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){n(this).replaceWith(this.childNodes)}),this}});n.expr.pseudos.hidden=function(a){return!n.expr.pseudos.visible(a)};
n.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)};n.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(v){}};var nc={0:200,1223:204},Ka=n.ajaxSettings.xhr();N.cors=!!Ka&&"withCredentials"in Ka;N.ajax=Ka=!!Ka;n.ajaxTransport(function(a){var c,h;if(N.cors||Ka&&!a.crossDomain)return{send:function(l,d){var q,t=a.xhr();if(t.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(q in a.xhrFields)t[q]=a.xhrFields[q];for(q in a.mimeType&&
t.overrideMimeType&&t.overrideMimeType(a.mimeType),a.crossDomain||l["X-Requested-With"]||(l["X-Requested-With"]="XMLHttpRequest"),l)t.setRequestHeader(q,l[q]);c=function(a){return function(){c&&(c=h=t.onload=t.onerror=t.onabort=t.ontimeout=t.onreadystatechange=null,"abort"===a?t.abort():"error"===a?"number"!=typeof t.status?d(0,"error"):d(t.status,t.statusText):d(nc[t.status]||t.status,t.statusText,"text"!==(t.responseType||"text")||"string"!=typeof t.responseText?{binary:t.response}:{text:t.responseText},
t.getAllResponseHeaders()))}};t.onload=c();h=t.onerror=t.ontimeout=c("error");void 0!==t.onabort?t.onabort=h:t.onreadystatechange=function(){4===t.readyState&&b.setTimeout(function(){c&&h()})};c=c("abort");try{t.send(a.hasContent&&a.data||null)}catch(Eb){if(c)throw Eb;}},abort:function(){c&&c()}}});n.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)});n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},
converters:{"text script":function(a){return n.globalEval(a),a}}});n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});n.ajaxTransport("script",function(a){var c,b;if(a.crossDomain||a.scriptAttrs)return{send:function(h,l){c=n("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",b=function(a){c.remove();b=null;a&&l("error"===a.type?404:200,a.type)});I.head.appendChild(c[0])},abort:function(){b&&b()}}});var xb,
yb=[],ab=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=yb.pop()||n.expando+"_"+tb++;return this[a]=!0,a}});n.ajaxPrefilter("json jsonp",function(a,c,h){var l,d,q,t=!1!==a.jsonp&&(ab.test(a.url)?"url":"string"==typeof a.data&&0===(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&ab.test(a.data)&&"data");if(t||"jsonp"===a.dataTypes[0])return l=a.jsonpCallback=D(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,t?a[t]=a[t].replace(ab,"$1"+l):!1!==a.jsonp&&
(a.url+=(Za.test(a.url)?"&":"?")+a.jsonp+"="+l),a.converters["script json"]=function(){return q||n.error(l+" was not called"),q[0]},a.dataTypes[0]="json",d=b[l],b[l]=function(){q=arguments},h.always(function(){void 0===d?n(b).removeProp(l):b[l]=d;a[l]&&(a.jsonpCallback=c.jsonpCallback,yb.push(l));q&&D(d)&&d(q[0]);q=d=void 0}),"script"});N.createHTMLDocument=((xb=I.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===xb.childNodes.length);n.parseHTML=function(a,c,
b){return"string"!=typeof a?[]:("boolean"==typeof c&&(b=c,c=!1),c||(N.createHTMLDocument?((h=(c=I.implementation.createHTMLDocument("")).createElement("base")).href=I.location.href,c.head.appendChild(h)):c=I),d=!b&&[],(l=lb.exec(a))?[c.createElement(l[1])]:(l=T([a],c,d),d&&d.length&&n(d).remove(),n.merge([],l.childNodes)));var h,l,d};n.fn.load=function(a,c,b){var h,l,d,q=this,t=a.indexOf(" ");return-1<t&&(h=oa(a.slice(t)),a=a.slice(0,t)),D(c)?(b=c,c=void 0):c&&"object"==typeof c&&(l="POST"),0<q.length&&
n.ajax({url:a,type:l||"GET",dataType:"html",data:c}).done(function(a){d=arguments;q.html(h?n("<div>").append(n.parseHTML(a)).find(h):a)}).always(b&&function(a,c){q.each(function(){b.apply(this,d||[a.responseText,c,a])})}),this};n.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,c){n.fn[c]=function(a){return this.on(c,a)}});n.expr.pseudos.animated=function(a){return n.grep(n.timers,function(c){return a===c.elem}).length};n.offset={setOffset:function(a,c,b){var h,
l,d,q=n.css(a,"position"),t=n(a),g={};"static"===q&&(a.style.position="relative");var u=t.offset();var r=n.css(a,"top");var e=n.css(a,"left");("absolute"===q||"fixed"===q)&&-1<(r+e).indexOf("auto")?(d=(h=t.position()).top,l=h.left):(d=parseFloat(r)||0,l=parseFloat(e)||0);D(c)&&(c=c.call(a,b,n.extend({},u)));null!=c.top&&(g.top=c.top-u.top+d);null!=c.left&&(g.left=c.left-u.left+l);"using"in c?c.using.call(a,g):t.css(g)}};n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(c){n.offset.setOffset(this,
a,c)});var c,b,h=this[0];return h?h.getClientRects().length?(c=h.getBoundingClientRect(),b=h.ownerDocument.defaultView,{top:c.top+b.pageYOffset,left:c.left+b.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var a,c=this[0],b={top:0,left:0};if("fixed"===n.css(c,"position"))var h=c.getBoundingClientRect();else{h=this.offset();var l=c.ownerDocument;for(a=c.offsetParent||l.documentElement;a&&(a===l.body||a===l.documentElement)&&"static"===n.css(a,"position");)a=a.parentNode;a&&a!==
c&&1===a.nodeType&&((b=n(a).offset()).top+=n.css(a,"borderTopWidth",!0),b.left+=n.css(a,"borderLeftWidth",!0))}return{top:h.top-b.top-n.css(c,"marginTop",!0),left:h.left-b.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===n.css(a,"position");)a=a.offsetParent;return a||Fa})}});n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var b="pageYOffset"===c;n.fn[a]=function(h){return ta(this,function(a,h,l){var d;
if(la(a)?d=a:9===a.nodeType&&(d=a.defaultView),void 0===l)return d?d[c]:a[h];d?d.scrollTo(b?d.pageXOffset:l,b?l:d.pageYOffset):a[h]=l},a,h,arguments.length)}});n.each(["top","left"],function(a,c){n.cssHooks[c]=F(N.pixelPosition,function(a,b){if(b)return b=t(a,c),Va.test(b)?n(a).position()[c]+"px":b})});n.each({Height:"height",Width:"width"},function(a,c){n.each({padding:"inner"+a,content:c,"":"outer"+a},function(b,h){n.fn[h]=function(l,d){var q=arguments.length&&(b||"boolean"!=typeof l),t=b||(!0===
l||!0===d?"margin":"border");return ta(this,function(c,b,l){var d;return la(c)?0===h.indexOf("outer")?c["inner"+a]:c.document.documentElement["client"+a]:9===c.nodeType?(d=c.documentElement,Math.max(c.body["scroll"+a],d["scroll"+a],c.body["offset"+a],d["offset"+a],d["client"+a])):void 0===l?n.css(c,b,t):n.style(c,b,l,t)},c,q?l:void 0,q)}})});n.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(a,c){n.fn[c]=function(a,b){return 0<arguments.length?this.on(c,null,a,b):this.trigger(c)}});n.fn.extend({hover:function(a,c){return this.mouseenter(a).mouseleave(c||a)}});n.fn.extend({bind:function(a,c,b){return this.on(a,null,c,b)},unbind:function(a,c){return this.off(a,null,c)},delegate:function(a,c,b,h){return this.on(c,a,b,h)},undelegate:function(a,c,b){return 1===arguments.length?this.off(a,"**"):this.off(c,a||"**",b)}});n.proxy=function(a,c){var b,h,l;if("string"==typeof c&&(b=a[c],
c=a,a=b),D(a))return h=na.call(arguments,2),(l=function(){return a.apply(c||this,h.concat(na.call(arguments)))}).guid=a.guid=a.guid||n.guid++,l};n.holdReady=function(a){a?n.readyWait++:n.ready(!0)};n.isArray=Array.isArray;n.parseJSON=JSON.parse;n.nodeName=e;n.isFunction=D;n.isWindow=la;n.camelCase=w;n.type=p;n.now=Date.now;n.isNumeric=function(a){var c=n.type(a);return("number"===c||"string"===c)&&!isNaN(a-parseFloat(a))};"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});
var oc=b.jQuery,pc=b.$;return n.noConflict=function(a){return b.$===n&&(b.$=pc),a&&b.jQuery===n&&(b.jQuery=oc),n},k||(b.jQuery=b.$=n),n});
var dvJQuery=jQuery.noConflict(!0),DocuViewarejQueryPlugins={areRegistered:function(){return dvJQuery&&dvJQuery.fn&&dvJQuery.fn.HasDocuViewarePlugins?!0:!1},register:function(){DocuViewarejQueryPlugins.areRegistered()||(dvJQuery&&dvJQuery.fn&&dvJQuery.fn.jquery&&3<=parseInt(dvJQuery.fn.jquery)&&("undefined"==typeof dvJQuery.migrateMute&&(dvJQuery.migrateMute=!0),function(b,k){function m(a){f[a]||(f[a]=!0,b.migrateWarnings.push(a))}function p(a,b,d,c){Object.defineProperty(a,b,{configurable:!0,enumerable:!0,
get:function(){m(c);return d}})}b.migrateVersion="3.0.0";var f={};b.migrateWarnings=[];void 0===b.migrateTrace&&(b.migrateTrace=!0);b.migrateReset=function(){f={};b.migrateWarnings.length=0};"BackCompat"===document.compatMode&&m("jQuery is not compatible with Quirks Mode");var e=b.fn.init,d=b.isNumeric,g=b.find,r=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,z=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;b.fn.init=function(a){var b=Array.prototype.slice.call(arguments);"string"===
typeof a&&"#"===a&&(m("jQuery( '#' ) is not a valid selector"),b[0]=[]);return e.apply(this,b)};b.fn.init.prototype=b.fn;b.find=function(a){var b=Array.prototype.slice.call(arguments);if("string"===typeof a&&r.test(a))try{document.querySelector(a)}catch(L){a=a.replace(z,function(a,b,l,d){return"["+b+l+'"'+d+'"]'});try{document.querySelector(a),m("Attribute selector with '#' must be quoted: "+b[0]),b[0]=a}catch(c){m("Attribute selector with '#' was not fixed: "+b[0])}}return g.apply(this,b)};for(var B in g)Object.prototype.hasOwnProperty.call(g,
B)&&(b.find[B]=g[B]);b.fn.size=function(){m("jQuery.fn.size() is deprecated; use the .length property");return this.length};b.parseJSON=function(){m("jQuery.parseJSON is deprecated; use JSON.parse");return JSON.parse.apply(null,arguments)};b.isNumeric=function(a){var g=d(a),r=a&&a.toString();a=!b.isArray(a)&&0<=r-parseFloat(r)+1;g!==a&&m("jQuery.isNumeric() should not be called on constructed objects");return a};p(b,"unique",b.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort");p(b.expr,
"filters",b.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos");p(b.expr,":",b.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var V=b.ajax;b.ajax=function(){var a=V.apply(this,arguments);a.promise&&(p(a,"success",a.done,"jQXHR.success is deprecated and removed"),p(a,"error",a.fail,"jQXHR.error is deprecated and removed"),p(a,"complete",a.always,"jQXHR.complete is deprecated and removed"));return a};var y=b.fn.removeAttr,w=b.fn.toggleClass,x=/\S+/g;b.fn.removeAttr=function(a){var d=
this;b.each(a.match(x),function(a,c){b.expr.match.bool.test(c)&&(m("jQuery.fn.removeAttr no longer sets boolean properties: "+c),d.prop(c,!1))});return y.apply(this,arguments)};b.fn.toggleClass=function(a){if(void 0!==a&&"boolean"!==typeof a)return w.apply(this,arguments);m("jQuery.fn.toggleClass( boolean ) is deprecated");return this.each(function(){var d=this.getAttribute&&this.getAttribute("class")||"";d&&b.data(this,"__className__",d);this.setAttribute&&this.setAttribute("class",d||!1===a?"":
b.data(this,"__className__")||"")})};var G=!1;b.swap&&b.each(["height","width","reliableMarginRight"],function(a,d){var g=b.cssHooks[d]&&b.cssHooks[d].get;g&&(b.cssHooks[d].get=function(){G=!0;var a=g.apply(this,arguments);G=!1;return a})});b.swap=function(a,b,d,c){var h,l={};G||m("jQuery.swap() is undocumented and deprecated");for(h in b)l[h]=a.style[h],a.style[h]=b[h];d=d.apply(a,c||[]);for(h in b)a.style[h]=l[h];return d};var C=b.data;b.data=function(a,d,g){var c;return d&&d!==b.camelCase(d)&&
(c=b.hasData(a)&&C.call(this,a))&&d in c?(m("jQuery.data() always sets/gets camelCased names: "+d),2<arguments.length&&(c[d]=g),c[d]):C.apply(this,arguments)};var J=b.Tween.prototype.run;b.Tween.prototype.run=function(a){1<b.easing[this.easing].length&&(m('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument'),b.easing[this.easing]=b.easing[this.easing].bind(b.easing,a,this.options.duration*a,0,1,this.options.duration));J.apply(this,arguments)};var K=b.fn.load,
H=b.event.fix;b.event.props=[];b.event.fixHooks={};b.event.fix=function(a){var d=a.type;var g=this.fixHooks[d],c=b.event.props;if(c.length)for(m("jQuery.event.props are deprecated and removed: "+c.join());c.length;)b.event.addProp(c.pop());if(g&&!g._migrated_&&(g._migrated_=!0,m("jQuery.event.fixHooks are deprecated and removed: "+d),(c=g.props)&&c.length))for(;c.length;)b.event.addProp(c.pop());d=H.call(this,a);return g&&g.filter?g.filter(d,a):d};b.each(["load","unload","error"],function(a,d){b.fn[d]=
function(){var a=Array.prototype.slice.call(arguments,0);if("load"===d&&"string"===typeof a[0])return K.apply(this,a);m("jQuery.fn."+d+"() is deprecated");a.splice(0,0,d);if(arguments.length)return this.on.apply(this,a);this.triggerHandler.apply(this,a);return this}});b(function(){b(document).triggerHandler("ready")});b.event.special.ready={setup:function(){this===document&&m("'ready' event is deprecated")}};b.fn.extend({bind:function(a,b,d){m("jQuery.fn.bind() is deprecated");return this.on(a,null,
b,d)},unbind:function(a,b){m("jQuery.fn.unbind() is deprecated");return this.off(a,null,b)},delegate:function(a,b,d,c){m("jQuery.fn.delegate() is deprecated");return this.on(b,a,d,c)},undelegate:function(a,b,d){m("jQuery.fn.undelegate() is deprecated");return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",d)}});var T=b.fn.offset;b.fn.offset=function(){var a=this[0],d={top:0,left:0};return a&&a.nodeType?b.contains((a.ownerDocument||document).documentElement,a)?T.apply(this,arguments):(m("jQuery.fn.offset() requires an element connected to a document"),
d):(m("jQuery.fn.offset() requires a valid DOM element"),d)};var M=b.param;b.param=function(a,d){var g=b.ajaxSettings&&b.ajaxSettings.traditional;void 0===d&&g&&(m("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),d=g);return M.call(this,a,d)};var U=b.fn.andSelf||b.fn.addBack;b.fn.andSelf=function(){m("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return U.apply(this,arguments)};var P=b.Deferred,S=[["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),"resolved"],
["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory"),b.Callbacks("memory")]];b.Deferred=function(a){var d=P(),g=d.promise();d.pipe=g.pipe=function(){var a=arguments;m("deferred.pipe() is deprecated");return b.Deferred(function(c){b.each(S,function(h,q){var l=b.isFunction(a[h])&&a[h];d[q[1]](function(){var a=l&&l.apply(this,arguments);if(a&&b.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);
else c[q[0]+"With"](this===g?c.promise():this,l?[a]:arguments)})});a=null}).promise()};a&&a.call(d,d);return d}}(dvJQuery,window)),function(b){function k(d,g){var r,e,f,k=d.nodeName.toLowerCase();return"area"===k?(r=d.parentNode,e=r.name,d.href&&e&&"map"===r.nodeName.toLowerCase()?(f=b("img[usemap='#"+e+"']")[0],!!f&&m(f)):!1):(/input|select|textarea|button|object/.test(k)?!d.disabled:"a"===k?d.href||g:g)&&m(d)}function m(d){return b.expr.filters.visible(d)&&!b(d).parents().addBack().filter(function(){return"hidden"===
b.css(this,"visibility")}).length}b.dvUi=b.dvUi||{};b.extend(b.dvUi,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({scrollParent:function(d){var g=this.css("position"),r="absolute"===g,e=d?/(auto|scroll|hidden)/:/(auto|scroll)/;d=this.parents().filter(function(){var d=b(this);return r&&"static"===d.css("position")?!1:e.test(d.css("overflow")+d.css("overflow-y")+
d.css("overflow-x"))}).eq(0);return"fixed"!==g&&d.length?d:b(this[0].ownerDocument||document)},uniqueId:function(){var b=0;return function(){return this.each(function(){this.id||(this.id="dvUi-id-"+ ++b)})}}(),removeUniqueId:function(){return this.each(function(){/^dvUi-id-\d+$/.test(this.id)&&b(this).removeAttr("id")})}});b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(d){return function(g){return!!b.data(g,d)}}):function(d,g,r){return!!b.data(d,r[3])},focusable:function(d){return k(d,
!isNaN(b.attr(d,"tabindex")))},tabbable:function(d){var g=b.attr(d,"tabindex"),r=isNaN(g);return(r||0<=g)&&k(d,!r)}});b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(d,g){function r(d,g,r,f){return b.each(e,function(){g-=parseFloat(b.css(d,"padding"+this))||0;r&&(g-=parseFloat(b.css(d,"border"+this+"Width"))||0);f&&(g-=parseFloat(b.css(d,"margin"+this))||0)}),g}var e="Width"===g?["Left","Right"]:["Top","Bottom"],f=g.toLowerCase(),k={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,
outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+g]=function(d){return void 0===d?k["inner"+g].call(this):this.each(function(){b(this).css(f,r(this,d)+"px")})};b.fn["outer"+g]=function(d,e){return"number"!=typeof d?k["outer"+g].call(this,d):this.each(function(){b(this).css(f,r(this,d,!0,e)+"px")})}});b.fn.addBack||(b.fn.addBack=function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))});b("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(b.fn.removeData=
function(d){return function(g){return arguments.length?d.call(this,b.camelCase(g)):d.call(this)}}(b.fn.removeData));b.dvUi.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.fn.extend({focus:function(d){return function(g,r){return"number"==typeof g?this.each(function(){var d=this;setTimeout(function(){b(d).focus();r&&r.call(d)},g)}):d.apply(this,arguments)}}(b.fn.focus),disableSelection:function(){var b="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(b+
".dvUi-disableSelection",function(b){b.preventDefault()})}}(),enableSelection:function(){return this.unbind(".dvUi-disableSelection")},zIndex:function(d){if(void 0!==d)return this.css("zIndex",d);if(this.length){var g,r;for(d=b(this[0]);d.length&&d[0]!==document;){if(g=d.css("position"),("absolute"===g||"relative"===g||"fixed"===g)&&(r=parseInt(d.css("zIndex"),10),!isNaN(r)&&0!==r))return r;d=d.parent()}}return 0}});b.dvUi.plugin={add:function(d,g,r){var e;d=b.dvUi[d].prototype;for(e in r)d.plugins[e]=
d.plugins[e]||[],d.plugins[e].push([g,r[e]])},call:function(b,g,r,e){if((g=b.plugins[g])&&(e||b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType))for(e=0;g.length>e;e++)b.options[g[e][0]]&&g[e][1].apply(b.element,r)}};var p=0,f=Array.prototype.slice;b.cleanData=function(d){return function(g){var r,e,f;for(f=0;null!=(e=g[f]);f++)try{(r=b._data(e,"events"))&&r.remove&&b(e).triggerHandler("remove")}catch(V){}d(g)}}(b.cleanData);b.widget=function(d,g,r){var e,f,k,m,p={},x=d.split(".")[0];
return d=d.split(".")[1],e=x+"-"+d,r||(r=g,g=b.Widget),b.expr[":"][e.toLowerCase()]=function(d){return!!b.data(d,e)},b[x]=b[x]||{},f=b[x][d],k=b[x][d]=function(b,d){return this._createWidget?(arguments.length&&this._createWidget(b,d),void 0):new k(b,d)},b.extend(k,f,{version:r.version,_proto:b.extend({},r),_childConstructors:[]}),m=new g,m.options=b.widget.extend({},m.options),b.each(r,function(d,r){return b.isFunction(r)?(p[d]=function(){var b=function(){return g.prototype[d].apply(this,arguments)},
e=function(b){return g.prototype[d].apply(this,b)};return function(){var d,g=this._super,f=this._superApply;return this._super=b,this._superApply=e,d=r.apply(this,arguments),this._super=g,this._superApply=f,d}}(),void 0):(p[d]=r,void 0)}),k.prototype=b.widget.extend(m,{widgetEventPrefix:f?m.widgetEventPrefix||d:d},p,{constructor:k,namespace:x,widgetName:d,widgetFullName:e}),f?(b.each(f._childConstructors,function(d,g){d=g.prototype;b.widget(d.namespace+"."+d.widgetName,k,g._proto)}),delete f._childConstructors):
g._childConstructors.push(k),b.widget.bridge(d,k),k};b.widget.extend=function(d){for(var g,r,e=f.call(arguments,1),k=0,m=e.length;m>k;k++)for(g in e[k])r=e[k][g],e[k].hasOwnProperty(g)&&void 0!==r&&(d[g]=b.isPlainObject(r)?b.isPlainObject(d[g])?b.widget.extend({},d[g],r):b.widget.extend({},r):r);return d};b.widget.bridge=function(d,g){var r=g.prototype.widgetFullName||d;b.fn[d]=function(e){var k="string"==typeof e,z=f.call(arguments,1),m=this;return e=!k&&z.length?b.widget.extend.apply(null,[e].concat(z)):
e,k?this.each(function(){var g,f=b.data(this,r);return"instance"===e?(m=f,!1):f?b.isFunction(f[e])&&"_"!==e.charAt(0)?(g=f[e].apply(f,z),g!==f&&void 0!==g?(m=g&&g.jquery?m.pushStack(g.get()):g,!1):void 0):b.error("no such method '"+e+"' for "+d+" widget instance"):b.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+e+"'")}):this.each(function(){var d=b.data(this,r);d?(d.option(e||{}),d._init&&d._init()):b.data(this,r,new g(e,this))}),m}};b.Widget=function(){};
b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(d,g){g=b(g||this.defaultElement||this)[0];this.element=b(g);this.uuid=p++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=b();this.hoverable=b();this.focusable=b();g!==this&&(b.data(g,this.widgetFullName,this),this._on(!0,this.element,{remove:function(b){b.target===g&&this.destroy()}}),this.document=b(g.style?g.ownerDocument:
g.document||g),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this.options=b.widget.extend({},this.options,this._getCreateOptions(),d);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+
"-disabled dvUi-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("dvUi-state-hover");this.focusable.removeClass("dvUi-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(d,g){var r,e,f=d;if(0===arguments.length)return b.widget.extend({},this.options);if("string"==typeof d)if(f={},r=d.split("."),d=r.shift(),r.length){var k=f[d]=b.widget.extend({},this.options[d]);for(e=0;r.length-1>e;e++)k[r[e]]=k[r[e]]||{},k=k[r[e]];if(d=r.pop(),
1===arguments.length)return void 0===k[d]?null:k[d];k[d]=g}else{if(1===arguments.length)return void 0===this.options[d]?null:this.options[d];f[d]=g}return this._setOptions(f),this},_setOptions:function(b){for(var d in b)this._setOption(d,b[d]);return this},_setOption:function(b,g){return this.options[b]=g,"disabled"===b&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!g),g&&(this.hoverable.removeClass("dvUi-state-hover"),this.focusable.removeClass("dvUi-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},
disable:function(){return this._setOptions({disabled:!0})},_on:function(d,g,r){var e,f=this;"boolean"!=typeof d&&(r=g,g=d,d=!1);r?(g=e=b(g),this.bindings=this.bindings.add(g)):(r=g,g=this.element,e=this.widget());b.each(r,function(r,k){function z(){return d||!0!==f.options.disabled&&!b(this).hasClass("dvUi-state-disabled")?("string"==typeof k?f[k]:k).apply(f,arguments):void 0}"string"!=typeof k&&(z.guid=k.guid=k.guid||z.guid||b.guid++);var B=r.match(/^([\w:-]*)\s*(.*)$/);r=B[1]+f.eventNamespace;(B=
B[2])?e.delegate(B,r,z):g.bind(r,z)})},_off:function(d,g){g=(g||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;d.unbind(g).undelegate(g);this.bindings=b(this.bindings.not(d).get());this.focusable=b(this.focusable.not(d).get());this.hoverable=b(this.hoverable.not(d).get())},_delay:function(b,g){var d=this;return setTimeout(function(){return("string"==typeof b?d[b]:b).apply(d,arguments)},g||0)},_hoverable:function(d){this.hoverable=this.hoverable.add(d);this._on(d,{mouseenter:function(d){b(d.currentTarget).addClass("dvUi-state-hover")},
mouseleave:function(d){b(d.currentTarget).removeClass("dvUi-state-hover")}})},_focusable:function(d){this.focusable=this.focusable.add(d);this._on(d,{focusin:function(d){b(d.currentTarget).addClass("dvUi-state-focus")},focusout:function(d){b(d.currentTarget).removeClass("dvUi-state-focus")}})},_trigger:function(d,g,r){var e,f=this.options[d];if(r=r||{},g=b.Event(g),g.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase(),g.target=this.element[0],d=g.originalEvent)for(e in d)e in
g||(g[e]=d[e]);return this.element.trigger(g,r),!(b.isFunction(f)&&!1===f.apply(this.element[0],[g].concat(r))||g.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(d,g){b.Widget.prototype["_"+d]=function(r,e,f){"string"==typeof e&&(e={effect:e});var k=e?!0===e||"number"==typeof e?g:e.effect||g:d;e=e||{};"number"==typeof e&&(e={duration:e});var z=!b.isEmptyObject(e);e.complete=f;e.delay&&r.delay(e.delay);z&&b.effects&&b.effects.effect[k]?r[d](e):k!==d&&r[k]?r[k](e.duration,e.easing,
f):r.queue(function(g){b(this)[d]();f&&f.call(r[0]);g()})}});b.widget;var e=!1;b(document).mouseup(function(){e=!1});b.widget("dvUi.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(b){return d._mouseDown(b)}).bind("click."+this.widgetName,function(g){return!0===b.data(g.target,d.widgetName+".preventClickEvent")?(b.removeData(g.target,d.widgetName+".preventClickEvent"),
g.stopImmediatePropagation(),!1):void 0});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!e){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var g=this,r=1===d.which,f="string"==typeof this.options.cancel&&d.target.nodeName?b(d.target).closest(this.options.cancel).length:
!1;return r&&!f&&this._mouseCapture(d)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=!1!==this._mouseStart(d),!this._mouseStarted)?(d.preventDefault(),!0):(!0===b.data(d.target,this.widgetName+".preventClickEvent")&&b.removeData(d.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return g._mouseMove(b)},
this._mouseUpDelegate=function(b){return g._mouseUp(b)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),d.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(d){return this._mouseMoved&&(b.dvUi.ie&&(!document.documentMode||9>document.documentMode)&&!d.button||!d.which)?this._mouseUp(d):((d.which||d.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(d),d.preventDefault()):(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&
(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,d),this._mouseStarted?this._mouseDrag(d):this._mouseUp(d)),!this._mouseStarted))},_mouseUp:function(d){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,d.target===this._mouseDownEvent.target&&b.data(d.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(d)),e=!1,!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-
b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function d(b,d,g){return[parseFloat(b[0])*(J.test(b[0])?d/100:1),parseFloat(b[1])*(J.test(b[1])?g/100:1)]}function g(d){var g=d[0];return 9===g.nodeType?{width:d.width(),height:d.height(),offset:{top:0,left:0}}:b.isWindow(g)?{width:d.width(),height:d.height(),
offset:{top:d.scrollTop(),left:d.scrollLeft()}}:g.preventDefault?{width:0,height:0,offset:{top:g.pageY,left:g.pageX}}:{width:d.outerWidth(),height:d.outerHeight(),offset:d.offset()}}b.dvUi=b.dvUi||{};var e,f,k=Math.max,m=Math.abs,p=Math.round,w=/left|center|right/,x=/top|center|bottom/,G=/[\+\-]\d+(\.[\d]+)?%?/,C=/^\w+/,J=/%$/,K=b.fn.position;b.position={scrollbarWidth:function(){if(void 0!==e)return e;var d,g,r=b("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
f=r.children()[0];return b("body").append(r),d=f.offsetWidth,r.css("overflow","scroll"),g=f.offsetWidth,d===g&&(g=r[0].clientWidth),r.remove(),e=d-g},getScrollInfo:function(d){var g=d.isWindow||d.isDocument?"":d.element.css("overflow-x"),e=d.isWindow||d.isDocument?"":d.element.css("overflow-y");g="scroll"===g||"auto"===g&&d.width<d.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&d.height<d.element[0].scrollHeight?b.position.scrollbarWidth():0,height:g?b.position.scrollbarWidth():0}},
getWithinInfo:function(d){d=b(d||window);var g=b.isWindow(d[0]),e=!!d[0]&&9===d[0].nodeType;return{element:d,isWindow:g,isDocument:e,offset:d.offset()||{left:0,top:0},scrollLeft:d.scrollLeft(),scrollTop:d.scrollTop(),width:g||e?d.width():d.outerWidth(),height:g||e?d.height():d.outerHeight()}}};b.fn.position=function(e){if(!e||!e.of)return K.apply(this,arguments);e=b.extend({},e);var r,z,B,V,y,a,E=b(e.of),L=b.position.getWithinInfo(e.within),c=b.position.getScrollInfo(L),h=(e.collision||"flip").split(" "),
l={};return a=g(E),E[0].preventDefault&&(e.at="left top"),z=a.width,B=a.height,V=a.offset,y=b.extend({},V),b.each(["my","at"],function(){var a=(e[this]||"").split(" ");1===a.length&&(a=w.test(a[0])?a.concat(["center"]):x.test(a[0])?["center"].concat(a):["center","center"]);a[0]=w.test(a[0])?a[0]:"center";a[1]=x.test(a[1])?a[1]:"center";var c=G.exec(a[0]);var b=G.exec(a[1]);l[this]=[c?c[0]:0,b?b[0]:0];e[this]=[C.exec(a[0])[0],C.exec(a[1])[0]]}),1===h.length&&(h[1]=h[0]),"right"===e.at[0]?y.left+=z:
"center"===e.at[0]&&(y.left+=z/2),"bottom"===e.at[1]?y.top+=B:"center"===e.at[1]&&(y.top+=B/2),r=d(l.at,z,B),y.left+=r[0],y.top+=r[1],this.each(function(){var a,t=b(this),g=t.outerWidth(),u=t.outerHeight(),Q=parseInt(b.css(this,"marginLeft"),10)||0,X=parseInt(b.css(this,"marginTop"),10)||0,ua=g+Q+(parseInt(b.css(this,"marginRight"),10)||0)+c.width,Y=u+X+(parseInt(b.css(this,"marginBottom"),10)||0)+c.height,x=b.extend({},y),C=d(l.my,t.outerWidth(),t.outerHeight());"right"===e.my[0]?x.left-=g:"center"===
e.my[0]&&(x.left-=g/2);"bottom"===e.my[1]?x.top-=u:"center"===e.my[1]&&(x.top-=u/2);x.left+=C[0];x.top+=C[1];f||(x.left=p(x.left),x.top=p(x.top));var w={marginLeft:Q,marginTop:X};b.each(["left","top"],function(a,c){b.dvUi.position[h[a]]&&b.dvUi.position[h[a]][c](x,{targetWidth:z,targetHeight:B,elemWidth:g,elemHeight:u,collisionPosition:w,collisionWidth:ua,collisionHeight:Y,offset:[r[0]+C[0],r[1]+C[1]],my:e.my,at:e.at,within:L,elem:t})});e.using&&(a=function(a){var c=V.left-x.left,b=c+z-g,h=V.top-
x.top,l=h+B-u,d={target:{element:E,left:V.left,top:V.top,width:z,height:B},element:{element:t,left:x.left,top:x.top,width:g,height:u},horizontal:0>b?"left":0<c?"right":"center",vertical:0>l?"top":0<h?"bottom":"middle"};g>z&&z>m(c+b)&&(d.horizontal="center");u>B&&B>m(h+l)&&(d.vertical="middle");d.important=k(m(c),m(b))>k(m(h),m(l))?"horizontal":"vertical";e.using.call(this,a,d)});t.offset(b.extend(x,{using:a}))})};b.dvUi.position={fit:{left:function(b,d){var g,e=d.within,r=e.isWindow?e.scrollLeft:
e.offset.left;e=e.width;var f=b.left-d.collisionPosition.marginLeft,a=r-f,z=f+d.collisionWidth-e-r;d.collisionWidth>e?0<a&&0>=z?(g=b.left+a+d.collisionWidth-e-r,b.left+=a-g):b.left=0<z&&0>=a?r:a>z?r+e-d.collisionWidth:r:0<a?b.left+=a:0<z?b.left-=z:b.left=k(b.left-f,b.left)},top:function(b,d){var g,e=d.within;e=e.isWindow?e.scrollTop:e.offset.top;var r=d.within.height,f=b.top-d.collisionPosition.marginTop,a=e-f,z=f+d.collisionHeight-r-e;d.collisionHeight>r?0<a&&0>=z?(g=b.top+a+d.collisionHeight-r-
e,b.top+=a-g):b.top=0<z&&0>=a?e:a>z?e+r-d.collisionHeight:e:0<a?b.top+=a:0<z?b.top-=z:b.top=k(b.top-f,b.top)}},flip:{left:function(b,d){var g,e,r=d.within,f=r.offset.left+r.scrollLeft,a=r.width;r=r.isWindow?r.scrollLeft:r.offset.left;var k=b.left-d.collisionPosition.marginLeft,z=k-r;k=k+d.collisionWidth-a-r;var c="left"===d.my[0]?-d.elemWidth:"right"===d.my[0]?d.elemWidth:0,h="left"===d.at[0]?d.targetWidth:"right"===d.at[0]?-d.targetWidth:0,l=-2*d.offset[0];0>z?(g=b.left+c+h+l+d.collisionWidth-a-
f,(0>g||m(z)>g)&&(b.left+=c+h+l)):0<k&&(e=b.left-d.collisionPosition.marginLeft+c+h+l-r,(0<e||k>m(e))&&(b.left+=c+h+l))},top:function(b,d){var g,e,r=d.within,f=r.offset.top+r.scrollTop,a=r.height;r=r.isWindow?r.scrollTop:r.offset.top;var k=b.top-d.collisionPosition.marginTop,z=k-r;k=k+d.collisionHeight-a-r;var c="top"===d.my[1]?-d.elemHeight:"bottom"===d.my[1]?d.elemHeight:0,h="top"===d.at[1]?d.targetHeight:"bottom"===d.at[1]?-d.targetHeight:0,l=-2*d.offset[1];0>z?(e=b.top+c+h+l+d.collisionHeight-
a-f,b.top+c+h+l>z&&(0>e||m(z)>e)&&(b.top+=c+h+l)):0<k&&(g=b.top-d.collisionPosition.marginTop+c+h+l-r,b.top+c+h+l>k&&(0<g||k>m(g))&&(b.top+=c+h+l))}},flipfit:{left:function(){b.dvUi.position.flip.left.apply(this,arguments);b.dvUi.position.fit.left.apply(this,arguments)},top:function(){b.dvUi.position.flip.top.apply(this,arguments);b.dvUi.position.fit.top.apply(this,arguments)}}};(function(){var d,g=document.getElementsByTagName("body")[0];var e=document.createElement("div");var r=document.createElement(g?
"div":"body");var k={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};g&&b.extend(k,{position:"absolute",left:"-1000px",top:"-1000px"});for(d in k)r.style[d]=k[d];r.appendChild(e);k=g||document.documentElement;k.insertBefore(r,k.firstChild);e.style.cssText="position: absolute; left: 10.7432222px;";e=b(e).offset().left;f=10<e&&11>e;r.innerHTML="";k.removeChild(r)})()})();b.dvUi.position;b.widget("dvUi.draggable",b.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,
appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this.element.addClass("dvUi-draggable");this.options.disabled&&
this.element.addClass("dvUi-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(b,g){this._super(b,g);"handle"===b&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".dvUi-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("dvUi-draggable dvUi-draggable-dragging dvUi-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(d){var g=
this.options;return this._blurActiveElement(d),this.helper||g.disabled||0<b(d.target).closest(".dvUi-resizable-handle").length?!1:(this.handle=this._getHandle(d),this.handle?(this._blockFrames(!0===g.iframeFix?"iframe":g.iframeFix),!0):!1)},_blockFrames:function(d){this.iframeBlocks=this.document.find(d).map(function(){var d=b(this);return b("<div>").css("position","absolute").appendTo(d.parent()).outerWidth(d.outerWidth()).outerHeight(d.outerHeight()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&
(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(d){var g=this.document[0];if(this.handleElement.is(d.target))try{g.activeElement&&"body"!==g.activeElement.nodeName.toLowerCase()&&b(g.activeElement).blur()}catch(r){}},_mouseStart:function(d){var g=this.options;return this.helper=this._createHelper(d),this.helper.addClass("dvUi-draggable-dragging"),this._cacheHelperProportions(),b.dvUi.ddmanager&&(b.dvUi.ddmanager.current=this),this._cacheMargins(),this.cssPosition=
this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===b(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(d),this.originalPosition=this.position=this._generatePosition(d,!1),this.originalPageX=d.pageX,this.originalPageY=d.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this._setContainment(),!1===this._trigger("start",
d)?(this._clear(),!1):(this._cacheHelperProportions(),b.dvUi.ddmanager&&!g.dropBehaviour&&b.dvUi.ddmanager.prepareOffsets(this,d),this._normalizeRightBottom(),this._mouseDrag(d,!0),b.dvUi.ddmanager&&b.dvUi.ddmanager.dragStart(this,d),!0)},_refreshOffsets:function(b){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:b.pageX-this.offset.left,top:b.pageY-
this.offset.top}},_mouseDrag:function(d,g){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(d,!0),this.positionAbs=this._convertPositionTo("absolute"),!g){g=this._uiHash();if(!1===this._trigger("drag",d,g))return this._mouseUp({}),!1;this.position=g.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",b.dvUi.ddmanager&&b.dvUi.ddmanager.drag(this,d),!1},_mouseStop:function(d){var g=
this,e=!1;return b.dvUi.ddmanager&&!this.options.dropBehaviour&&(e=b.dvUi.ddmanager.drop(this,d)),this.dropped&&(e=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!e||"valid"===this.options.revert&&e||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)?b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==g._trigger("stop",d)&&g._clear()}):!1!==this._trigger("stop",d)&&this._clear(),!1},
_mouseUp:function(d){return this._unblockFrames(),b.dvUi.ddmanager&&b.dvUi.ddmanager.dragStop(this,d),this.handleElement.is(d.target)&&this.element.focus(),b.dvUi.mouse.prototype._mouseUp.call(this,d)},cancel:function(){return this.helper.is(".dvUi-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(d){return this.options.handle?!!b(d.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?
this.element.find(this.options.handle):this.element;this.handleElement.addClass("dvUi-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("dvUi-draggable-handle")},_createHelper:function(d){var g=this.options,e=b.isFunction(g.helper);d=e?b(g.helper.apply(this.element[0],[d])):"clone"===g.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===g.appendTo?this.element[0].parentNode:g.appendTo),e&&d[0]===this.element[0]&&
this._setPositionRelative(),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(d){"string"==typeof d&&(d=d.split(" "));b.isArray(d)&&(d={left:+d[0],top:+d[1]||0});"left"in d&&(this.offset.click.left=d.left+this.margins.left);"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+
this.margins.left);"top"in d&&(this.offset.click.top=d.top+this.margins.top);"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_isRootNode:function(b){return/(html|body)/i.test(b.tagName)||b===this.document[0]},_getParentOffset:function(){var d=this.offsetParent.offset(),g=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==g&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=
this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var b=this.element.position(),g=this._isRootNode(this.scrollParent[0]);return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+(g?0:this.scrollParent.scrollTop()),left:b.left-(parseInt(this.helper.css("left"),
10)||0)+(g?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,g,e,f=this.options,k=this.document[0];return this.relativeContainer=
null,f.containment?"window"===f.containment?(this.containment=[b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,b(window).scrollLeft()+b(window).width()-this.helperProportions.width-this.margins.left,b(window).scrollTop()+(b(window).height()||k.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===f.containment?(this.containment=[0,0,b(k).width()-this.helperProportions.width-
this.margins.left,(b(k).height()||k.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):f.containment.constructor===Array?(this.containment=f.containment,void 0):("parent"===f.containment&&(f.containment=this.helper[0].parentNode),g=b(f.containment),e=g[0],e&&(d=/(scroll|auto)/.test(g.css("overflow")),this.containment=[(parseInt(g.css("borderLeftWidth"),10)||0)+(parseInt(g.css("paddingLeft"),10)||0),(parseInt(g.css("borderTopWidth"),10)||0)+(parseInt(g.css("paddingTop"),
10)||0),(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(g.css("borderRightWidth"),10)||0)-(parseInt(g.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(g.css("borderBottomWidth"),10)||0)-(parseInt(g.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=g),void 0):(this.containment=null,void 0)},_convertPositionTo:function(b,
g){g||(g=this.position);b="absolute"===b?1:-1;var d=this._isRootNode(this.scrollParent[0]);return{top:g.top+this.offset.relative.top*b+this.offset.parent.top*b-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*b,left:g.left+this.offset.relative.left*b+this.offset.parent.left*b-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*b}},_generatePosition:function(b,g){var d,e,f,k,m=this.options,p=this._isRootNode(this.scrollParent[0]),x=b.pageX,
G=b.pageY;return p&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),g&&(this.containment&&(this.relativeContainer?(e=this.relativeContainer.offset(),d=[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):d=this.containment,b.pageX-this.offset.click.left<d[0]&&(x=d[0]+this.offset.click.left),b.pageY-this.offset.click.top<d[1]&&(G=d[1]+this.offset.click.top),b.pageX-this.offset.click.left>
d[2]&&(x=d[2]+this.offset.click.left),b.pageY-this.offset.click.top>d[3]&&(G=d[3]+this.offset.click.top)),m.grid&&(f=m.grid[1]?this.originalPageY+Math.round((G-this.originalPageY)/m.grid[1])*m.grid[1]:this.originalPageY,G=d?f-this.offset.click.top>=d[1]||f-this.offset.click.top>d[3]?f:f-this.offset.click.top>=d[1]?f-m.grid[1]:f+m.grid[1]:f,k=m.grid[0]?this.originalPageX+Math.round((x-this.originalPageX)/m.grid[0])*m.grid[0]:this.originalPageX,x=d?k-this.offset.click.left>=d[0]||k-this.offset.click.left>
d[2]?k:k-this.offset.click.left>=d[0]?k-m.grid[0]:k+m.grid[0]:k),"y"===m.axis&&(x=this.originalPageX),"x"===m.axis&&(G=this.originalPageY)),{top:G-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:p?0:this.offset.scroll.top),left:x-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:p?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("dvUi-draggable-dragging");
this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto"));"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(d,g,e){return e=
e||this._uiHash(),b.dvUi.plugin.call(this,d,[g,e,this],!0),/^(drag|start|stop)/.test(d)&&(this.positionAbs=this._convertPositionTo("absolute"),e.offset=this.positionAbs),b.Widget.prototype._trigger.call(this,d,g,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.dvUi.plugin.add("draggable","connectToSortable",{start:function(d,g,e){var r=b.extend({},g,{item:e.element});e.sortables=[];b(e.options.connectToSortable).each(function(){var g=
b(this).sortable("instance");g&&!g.options.disabled&&(e.sortables.push(g),g.refreshPositions(),g._trigger("activate",d,r))})},stop:function(d,g,e){var r=b.extend({},g,{item:e.element});e.cancelHelperRemoval=!1;b.each(e.sortables,function(){this.isOver?(this.isOver=0,e.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(d),this.options.helper=this.options._helper):
(this.cancelHelperRemoval=!0,this._trigger("deactivate",d,r))})},drag:function(d,g,e){b.each(e.sortables,function(){var r=!1,f=this;f.positionAbs=e.positionAbs;f.helperProportions=e.helperProportions;f.offset.click=e.offset.click;f._intersectsWith(f.containerCache)&&(r=!0,b.each(e.sortables,function(){return this.positionAbs=e.positionAbs,this.helperProportions=e.helperProportions,this.offset.click=e.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&b.contains(f.element[0],this.element[0])&&
(r=!1),r}));r?(f.isOver||(f.isOver=1,f.currentItem=g.helper.appendTo(f.element).data("dvUi-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return g.helper[0]},d.target=f.currentItem[0],f._mouseCapture(d,!0),f._mouseStart(d,!0,!0),f.offset.click.top=e.offset.click.top,f.offset.click.left=e.offset.click.left,f.offset.parent.left-=e.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=e.offset.parent.top-f.offset.parent.top,e._trigger("toSortable",d),e.dropped=
f.element,b.each(e.sortables,function(){this.refreshPositions()}),e.currentItem=e.element,f.fromOutside=e),f.currentItem&&(f._mouseDrag(d),g.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",d,f._uiHash(f)),f._mouseStop(d,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),e._refreshOffsets(d),g.position=e._generatePosition(d,!0),e._trigger("fromSortable",
d),e.dropped=!1,b.each(e.sortables,function(){this.refreshPositions()}))})}});b.dvUi.plugin.add("draggable","cursor",{start:function(d,g,e){d=b("body");e=e.options;d.css("cursor")&&(e._cursor=d.css("cursor"));d.css("cursor",e.cursor)},stop:function(d,g,e){d=e.options;d._cursor&&b("body").css("cursor",d._cursor)}});b.dvUi.plugin.add("draggable","opacity",{start:function(d,g,e){d=b(g.helper);e=e.options;d.css("opacity")&&(e._opacity=d.css("opacity"));d.css("opacity",e.opacity)},stop:function(d,g,e){d=
e.options;d._opacity&&b(g.helper).css("opacity",d._opacity)}});b.dvUi.plugin.add("draggable","scroll",{start:function(b,g,e){e.scrollParentNotHidden||(e.scrollParentNotHidden=e.helper.scrollParent(!1));e.scrollParentNotHidden[0]!==e.document[0]&&"HTML"!==e.scrollParentNotHidden[0].tagName&&(e.overflowOffset=e.scrollParentNotHidden.offset())},drag:function(d,g,e){g=e.options;var f=!1,r=e.scrollParentNotHidden[0],k=e.document[0];r!==k&&"HTML"!==r.tagName?(g.axis&&"x"===g.axis||(e.overflowOffset.top+
r.offsetHeight-d.pageY<g.scrollSensitivity?r.scrollTop=f=r.scrollTop+g.scrollSpeed:d.pageY-e.overflowOffset.top<g.scrollSensitivity&&(r.scrollTop=f=r.scrollTop-g.scrollSpeed)),g.axis&&"y"===g.axis||(e.overflowOffset.left+r.offsetWidth-d.pageX<g.scrollSensitivity?r.scrollLeft=f=r.scrollLeft+g.scrollSpeed:d.pageX-e.overflowOffset.left<g.scrollSensitivity&&(r.scrollLeft=f=r.scrollLeft-g.scrollSpeed))):(g.axis&&"x"===g.axis||(d.pageY-b(k).scrollTop()<g.scrollSensitivity?f=b(k).scrollTop(b(k).scrollTop()-
g.scrollSpeed):b(window).height()-(d.pageY-b(k).scrollTop())<g.scrollSensitivity&&(f=b(k).scrollTop(b(k).scrollTop()+g.scrollSpeed))),g.axis&&"y"===g.axis||(d.pageX-b(k).scrollLeft()<g.scrollSensitivity?f=b(k).scrollLeft(b(k).scrollLeft()-g.scrollSpeed):b(window).width()-(d.pageX-b(k).scrollLeft())<g.scrollSensitivity&&(f=b(k).scrollLeft(b(k).scrollLeft()+g.scrollSpeed))));!1!==f&&b.dvUi.ddmanager&&!g.dropBehaviour&&b.dvUi.ddmanager.prepareOffsets(e,d)}});b.dvUi.plugin.add("draggable","snap",{start:function(d,
g,e){d=e.options;e.snapElements=[];b(d.snap.constructor!==String?d.snap.items||":data(dvUi-draggable)":d.snap).each(function(){var d=b(this),g=d.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:d.outerWidth(),height:d.outerHeight(),top:g.top,left:g.left})})},drag:function(d,g,e){var f,r,k,m,p,x,G=e.options,C=G.snapTolerance,J=g.offset.left,K=J+e.helperProportions.width,H=g.offset.top,T=H+e.helperProportions.height;for(p=e.snapElements.length-1;0<=p;p--){var M=e.snapElements[p].left-
e.margins.left;var U=M+e.snapElements[p].width;var P=e.snapElements[p].top-e.margins.top;var S=P+e.snapElements[p].height;M-C>K||J>U+C||P-C>T||H>S+C||!b.contains(e.snapElements[p].item.ownerDocument,e.snapElements[p].item)?(e.snapElements[p].snapping&&e.options.snap.release&&e.options.snap.release.call(e.element,d,b.extend(e._uiHash(),{snapItem:e.snapElements[p].item})),e.snapElements[p].snapping=!1):("inner"!==G.snapMode&&(f=C>=Math.abs(P-T),r=C>=Math.abs(S-H),k=C>=Math.abs(M-K),m=C>=Math.abs(U-
J),f&&(g.position.top=e._convertPositionTo("relative",{top:P-e.helperProportions.height,left:0}).top),r&&(g.position.top=e._convertPositionTo("relative",{top:S,left:0}).top),k&&(g.position.left=e._convertPositionTo("relative",{top:0,left:M-e.helperProportions.width}).left),m&&(g.position.left=e._convertPositionTo("relative",{top:0,left:U}).left)),x=f||r||k||m,"outer"!==G.snapMode&&(f=C>=Math.abs(P-H),r=C>=Math.abs(S-T),k=C>=Math.abs(M-J),m=C>=Math.abs(U-K),f&&(g.position.top=e._convertPositionTo("relative",
{top:P,left:0}).top),r&&(g.position.top=e._convertPositionTo("relative",{top:S-e.helperProportions.height,left:0}).top),k&&(g.position.left=e._convertPositionTo("relative",{top:0,left:M}).left),m&&(g.position.left=e._convertPositionTo("relative",{top:0,left:U-e.helperProportions.width}).left)),!e.snapElements[p].snapping&&(f||r||k||m||x)&&e.options.snap.snap&&e.options.snap.snap.call(e.element,d,b.extend(e._uiHash(),{snapItem:e.snapElements[p].item})),e.snapElements[p].snapping=f||r||k||m||x)}}});
b.dvUi.plugin.add("draggable","stack",{start:function(d,g,e){var f;d=b.makeArray(b(e.options.stack)).sort(function(d,g){return(parseInt(b(d).css("zIndex"),10)||0)-(parseInt(b(g).css("zIndex"),10)||0)});d.length&&(f=parseInt(b(d[0]).css("zIndex"),10)||0,b(d).each(function(d){b(this).css("zIndex",f+d)}),this.css("zIndex",f+d.length))}});b.dvUi.plugin.add("draggable","zIndex",{start:function(d,g,e){d=b(g.helper);e=e.options;d.css("zIndex")&&(e._zIndex=d.css("zIndex"));d.css("zIndex",e.zIndex)},stop:function(d,
g,e){d=e.options;d._zIndex&&b(g.helper).css("zIndex",d._zIndex)}});b.dvUi.draggable;b.widget("dvUi.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var d,g=this.options,e=g.accept;this.isover=!1;this.isout=!0;this.accept=b.isFunction(e)?e:function(b){return b.is(e)};this.proportions=function(){return arguments.length?
(d=arguments[0],void 0):d?d:d={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(g.scope);g.addClasses&&this.element.addClass("dvUi-droppable")},_addToManager:function(d){b.dvUi.ddmanager.droppables[d]=b.dvUi.ddmanager.droppables[d]||[];b.dvUi.ddmanager.droppables[d].push(this)},_splice:function(b){for(var d=0;b.length>d;d++)b[d]===this&&b.splice(d,1)},_destroy:function(){this._splice(b.dvUi.ddmanager.droppables[this.options.scope]);this.element.removeClass("dvUi-droppable dvUi-droppable-disabled")},
_setOption:function(d,g){"accept"===d?this.accept=b.isFunction(g)?g:function(b){return b.is(g)}:"scope"===d&&(this._splice(b.dvUi.ddmanager.droppables[this.options.scope]),this._addToManager(g));this._super(d,g)},_activate:function(d){var g=b.dvUi.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);g&&this._trigger("activate",d,this.ui(g))},_deactivate:function(d){var g=b.dvUi.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);
g&&this._trigger("deactivate",d,this.ui(g))},_over:function(d){var g=b.dvUi.ddmanager.current;g&&(g.currentItem||g.element)[0]!==this.element[0]&&this.accept.call(this.element[0],g.currentItem||g.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",d,this.ui(g)))},_out:function(d){var g=b.dvUi.ddmanager.current;g&&(g.currentItem||g.element)[0]!==this.element[0]&&this.accept.call(this.element[0],g.currentItem||g.element)&&(this.options.hoverClass&&
this.element.removeClass(this.options.hoverClass),this._trigger("out",d,this.ui(g)))},_drop:function(d,g){var e=g||b.dvUi.ddmanager.current,f=!1;return e&&(e.currentItem||e.element)[0]!==this.element[0]?(this.element.find(":data(dvUi-droppable)").not(".dvUi-draggable-dragging").each(function(){var g=b(this).droppable("instance");return g.options.greedy&&!g.options.disabled&&g.options.scope===e.options.scope&&g.accept.call(g.element[0],e.currentItem||e.element)&&b.dvUi.intersect(e,b.extend(g,{offset:g.element.offset()}),
g.options.tolerance,d)?(f=!0,!1):void 0}),f?!1:this.accept.call(this.element[0],e.currentItem||e.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",d,this.ui(e)),this.element):!1):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}});b.dvUi.intersect=function(){return function(b,g,e,f){if(!g.offset)return!1;
var d=(b.positionAbs||b.position.absolute).left+b.margins.left,r=(b.positionAbs||b.position.absolute).top+b.margins.top,k=d+b.helperProportions.width,m=r+b.helperProportions.height,z=g.offset.left,p=g.offset.top,C=z+g.proportions().width,J=p+g.proportions().height;switch(e){case "fit":return d>=z&&C>=k&&r>=p&&J>=m;case "intersect":return d+b.helperProportions.width/2>z&&C>k-b.helperProportions.width/2&&r+b.helperProportions.height/2>p&&J>m-b.helperProportions.height/2;case "pointer":b=f.pageY;e=g.proportions().height;
if(p=b>=p&&p+e>b)f=f.pageX,g=g.proportions().width,p=f>=z&&z+g>f;return p;case "touch":return(r>=p&&J>=r||m>=p&&J>=m||p>r&&m>J)&&(d>=z&&C>=d||k>=z&&C>=k||z>d&&k>C);default:return!1}}}();b.dvUi.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(d,g){var e,f=b.dvUi.ddmanager.droppables[d.options.scope]||[],k=g?g.type:null,m=(d.currentItem||d.element).find(":data(dvUi-droppable)").addBack();var p=0;a:for(;f.length>p;p++)if(!(f[p].options.disabled||d&&!f[p].accept.call(f[p].element[0],
d.currentItem||d.element))){for(e=0;m.length>e;e++)if(m[e]===f[p].element[0]){f[p].proportions().height=0;continue a}f[p].visible="none"!==f[p].element.css("display");f[p].visible&&("mousedown"===k&&f[p]._activate.call(f[p],g),f[p].offset=f[p].element.offset(),f[p].proportions({width:f[p].element[0].offsetWidth,height:f[p].element[0].offsetHeight}))}},drop:function(d,g){var e=!1;return b.each((b.dvUi.ddmanager.droppables[d.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&
this.visible&&b.dvUi.intersect(d,this,this.options.tolerance,g)&&(e=this._drop.call(this,g)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,g)))}),e},dragStart:function(d,g){d.element.parentsUntil("body").bind("scroll.droppable",function(){d.options.refreshPositions||b.dvUi.ddmanager.prepareOffsets(d,g)})},drag:function(d,g){d.options.refreshPositions&&b.dvUi.ddmanager.prepareOffsets(d,g);
b.each(b.dvUi.ddmanager.droppables[d.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var e,f,k,m=b.dvUi.intersect(d,this,this.options.tolerance,g);(m=!m&&this.isover?"isout":m&&!this.isover?"isover":null)&&(this.options.greedy&&(f=this.options.scope,k=this.element.parents(":data(dvUi-droppable)").filter(function(){return b(this).droppable("instance").options.scope===f}),k.length&&(e=b(k[0]).droppable("instance"),e.greedyChild="isover"===m)),e&&"isover"===
m&&(e.isover=!1,e.isout=!0,e._out.call(e,g)),this[m]=!0,this["isout"===m?"isover":"isout"]=!1,this["isover"===m?"_over":"_out"].call(this,g),e&&"isout"===m&&(e.isout=!1,e.isover=!0,e._over.call(e,g)))}})},dragStop:function(d,g){d.element.parentsUntil("body").unbind("scroll.droppable");d.options.refreshPositions||b.dvUi.ddmanager.prepareOffsets(d,g)}};b.dvUi.droppable;b.widget("dvUi.resizable",b.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",
animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(b){return parseInt(b,10)||0},_isNumber:function(b){return!isNaN(parseInt(b,10))},_hasScroll:function(d,g){if("hidden"===b(d).css("overflow"))return!1;g=g&&"left"===g?"scrollLeft":"scrollTop";var e=!1;return 0<d[g]?!0:(d[g]=1,e=0<d[g],d[g]=0,e)},_create:function(){var d,g=this,e=this.options;
if(this.element.addClass("dvUi-resizable"),b.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"dvUi-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(b("<div class='dvUi-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("dvUi-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=
this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=e.handles||(b(".dvUi-resizable-handle",this.element).length?{n:".dvUi-resizable-n",e:".dvUi-resizable-e",s:".dvUi-resizable-s",w:".dvUi-resizable-w",se:".dvUi-resizable-se",sw:".dvUi-resizable-sw",ne:".dvUi-resizable-ne",
nw:".dvUi-resizable-nw"}:"e,s,se"),this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var f=this.handles.split(",");this.handles={};for(d=0;f.length>d;d++){var k=b.trim(f[d]);var m="dvUi-resizable-"+k;var p=b("<div class='dvUi-resizable-handle "+m+"'></div>");p.css({zIndex:e.zIndex});"se"===k&&p.addClass("dvUi-icon dvUi-icon-gripsmall-diagonal-se");this.handles[k]=".dvUi-resizable-"+k;this.element.append(p)}}this._renderAxis=function(d){var g,e,f,r;d=d||
this.element;for(g in this.handles)this.handles[g].constructor===String&&(this.handles[g]=this.element.children(this.handles[g]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(e=b(this.handles[g],this.element),r=/sw|ne|nw|se|n|s/.test(g)?e.outerHeight():e.outerWidth(),f=["padding",/ne|nw|n/.test(g)?"Top":/se|sw|s/.test(g)?"Bottom":/^e$/.test(g)?"Right":"Left"].join(""),d.css(f,r),this._proportionallyResize()),b(this.handles[g]).length};
this._renderAxis(this.element);this._handles=b(".dvUi-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){g.resizing||(this.className&&(p=this.className.match(/dvUi-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=p&&p[1]?p[1]:"se")});e.autoHide&&(this._handles.hide(),b(this.element).addClass("dvUi-resizable-autohide").mouseenter(function(){e.disabled||(b(this).removeClass("dvUi-resizable-autohide"),g._handles.show())}).mouseleave(function(){e.disabled||g.resizing||(b(this).addClass("dvUi-resizable-autohide"),
g._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var d,g=function(d){b(d).removeClass("dvUi-resizable dvUi-resizable-disabled dvUi-resizable-resizing").removeData("resizable").removeData("dvUi-resizable").unbind(".resizable").find(".dvUi-resizable-handle").remove()};return this.elementIsWrapper&&(g(this.element),d=this.element,this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d),
d.remove()),this.originalElement.css("resize",this.originalResizeStyle),g(this.originalElement),this},_mouseCapture:function(d){var g,e=!1;for(g in this.handles){var f=b(this.handles[g])[0];(f===d.target||b.contains(f,d.target))&&(e=!0)}return!this.options.disabled&&e},_mouseStart:function(d){var g,e,f,k=this.options,m=this.element;return this.resizing=!0,this._renderProxy(),g=this._num(this.helper.css("left")),e=this._num(this.helper.css("top")),k.containment&&(g+=b(k.containment).scrollLeft()||
0,e+=b(k.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:e},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:m.width(),height:m.height()},this.originalSize=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()},this.sizeDiff={width:m.outerWidth()-m.width(),height:m.outerHeight()-m.height()},this.originalPosition={left:g,top:e},this.originalMousePosition={left:d.pageX,top:d.pageY},this.aspectRatio=
"number"==typeof k.aspectRatio?k.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=b(".dvUi-resizable-"+this.axis).css("cursor"),b("body").css("cursor","auto"===f?this.axis+"-resize":f),m.addClass("dvUi-resizable-resizing"),this._propagate("start",d),!0},_mouseDrag:function(d){var g,e,f=this.originalMousePosition,k=d.pageX-f.left||0;f=d.pageY-f.top||0;var m=this._change[this.axis];return this._updatePrevProperties(),m?(g=m.apply(this,[d,k,f]),this._updateVirtualBoundaries(d.shiftKey),
(this._aspectRatio||d.shiftKey)&&(g=this._updateRatio(g,d)),g=this._respectSize(g,d),this._updateCache(g),this._propagate("resize",d),e=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),b.isEmptyObject(e)||(this._updatePrevProperties(),this._trigger("resize",d,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(d){this.resizing=!1;var g,e,f,k,m,p,w,x=this.options;return this._helper&&(g=this._proportionallyResizeElements,e=g.length&&
/textarea/i.test(g[0].nodeName),f=e&&this._hasScroll(g[0],"left")?0:this.sizeDiff.height,k=e?0:this.sizeDiff.width,m={width:this.helper.width()-k,height:this.helper.height()-f},p=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,w=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,x.animate||this.element.css(b.extend(m,{top:w,left:p})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&
!x.animate&&this._proportionallyResize()),b("body").css("cursor","auto"),this.element.removeClass("dvUi-resizable-resizing"),this._propagate("stop",d),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var b={};return this.position.top!==this.prevPosition.top&&(b.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&
(b.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(b.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(b.height=this.size.height+"px"),this.helper.css(b),b},_updateVirtualBoundaries:function(b){var d,e,f,k;var m=this.options;m={minWidth:this._isNumber(m.minWidth)?m.minWidth:0,maxWidth:this._isNumber(m.maxWidth)?m.maxWidth:1/0,minHeight:this._isNumber(m.minHeight)?m.minHeight:0,maxHeight:this._isNumber(m.maxHeight)?m.maxHeight:1/0};(this._aspectRatio||b)&&
(d=m.minHeight*this.aspectRatio,f=m.minWidth/this.aspectRatio,e=m.maxHeight*this.aspectRatio,k=m.maxWidth/this.aspectRatio,d>m.minWidth&&(m.minWidth=d),f>m.minHeight&&(m.minHeight=f),m.maxWidth>e&&(m.maxWidth=e),m.maxHeight>k&&(m.maxHeight=k));this._vBoundaries=m},_updateCache:function(b){this.offset=this.helper.offset();this._isNumber(b.left)&&(this.position.left=b.left);this._isNumber(b.top)&&(this.position.top=b.top);this._isNumber(b.height)&&(this.size.height=b.height);this._isNumber(b.width)&&
(this.size.width=b.width)},_updateRatio:function(b){var d=this.position,e=this.size,f=this.axis;return this._isNumber(b.height)?b.width=b.height*this.aspectRatio:this._isNumber(b.width)&&(b.height=b.width/this.aspectRatio),"sw"===f&&(b.left=d.left+(e.width-b.width),b.top=null),"nw"===f&&(b.top=d.top+(e.height-b.height),b.left=d.left+(e.width-b.width)),b},_respectSize:function(b){var d=this._vBoundaries,e=this.axis,f=this._isNumber(b.width)&&d.maxWidth&&d.maxWidth<b.width,k=this._isNumber(b.height)&&
d.maxHeight&&d.maxHeight<b.height,m=this._isNumber(b.width)&&d.minWidth&&d.minWidth>b.width,p=this._isNumber(b.height)&&d.minHeight&&d.minHeight>b.height,w=this.originalPosition.left+this.originalSize.width,x=this.position.top+this.size.height,G=/sw|nw|w/.test(e);e=/nw|ne|n/.test(e);return m&&(b.width=d.minWidth),p&&(b.height=d.minHeight),f&&(b.width=d.maxWidth),k&&(b.height=d.maxHeight),m&&G&&(b.left=w-d.minWidth),f&&G&&(b.left=w-d.maxWidth),p&&e&&(b.top=x-d.minHeight),k&&e&&(b.top=x-d.maxHeight),
b.width||b.height||b.left||!b.top?b.width||b.height||b.top||!b.left||(b.left=null):b.top=null,b},_getPaddingPlusBorderDimensions:function(b){var d=0,e=[],f=[b.css("borderTopWidth"),b.css("borderRightWidth"),b.css("borderBottomWidth"),b.css("borderLeftWidth")];for(b=[b.css("paddingTop"),b.css("paddingRight"),b.css("paddingBottom"),b.css("paddingLeft")];4>d;d++)e[d]=parseInt(f[d],10)||0,e[d]+=parseInt(b[d],10)||0;return{height:e[0]+e[2],width:e[1]+e[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b,
g=0,e=this.helper||this.element;this._proportionallyResizeElements.length>g;g++)b=this._proportionallyResizeElements[g],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(b)),b.css({height:e.height()-this.outerDimensions.height||0,width:e.width()-this.outerDimensions.width||0})},_renderProxy:function(){var d=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||b("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++d.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(b,g){return{width:this.originalSize.width+g}},w:function(b,g){return{left:this.originalPosition.left+g,width:this.originalSize.width-g}},n:function(b,g,e){return{top:this.originalPosition.top+e,height:this.originalSize.height-e}},s:function(b,e,f){return{height:this.originalSize.height+
f}},se:function(d,e,f){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,e,f]))},sw:function(d,e,f){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,e,f]))},ne:function(d,e,f){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,e,f]))},nw:function(d,e,f){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,e,f]))}},_propagate:function(d,e){b.dvUi.plugin.call(this,d,[e,this.ui()]);
"resize"!==d&&this._trigger(d,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.dvUi.plugin.add("resizable","animate",{stop:function(d){var e=b(this).resizable("instance"),f=e.options,k=e._proportionallyResizeElements,m=k.length&&/textarea/i.test(k[0].nodeName),p=m&&e._hasScroll(k[0],"left")?0:e.sizeDiff.height;m=
{width:e.size.width-(m?0:e.sizeDiff.width),height:e.size.height-p};p=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null;var y=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(b.extend(m,y&&p?{top:y,left:p}:{}),{duration:f.animateDuration,easing:f.animateEasing,step:function(){var g={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),10),left:parseInt(e.element.css("left"),
10)};k&&k.length&&b(k[0]).css({width:g.width,height:g.height});e._updateCache(g);e._propagate("resize",d)}})}});b.dvUi.plugin.add("resizable","containment",{start:function(){var d,e,f,k,m,p,y,w=b(this).resizable("instance"),x=w.element,G=w.options.containment;(x=G instanceof b?G.get(0):/parent/.test(G)?x.parent().get(0):G)&&(w.containerElement=b(x),/document/.test(G)||G===document?(w.containerOffset={left:0,top:0},w.containerPosition={left:0,top:0},w.parentData={element:b(document),left:0,top:0,width:b(document).width(),
height:b(document).height()||document.body.parentNode.scrollHeight}):(d=b(x),e=[],b(["Top","Right","Left","Bottom"]).each(function(b,g){e[b]=w._num(d.css("padding"+g))}),w.containerOffset=d.offset(),w.containerPosition=d.position(),w.containerSize={height:d.innerHeight()-e[3],width:d.innerWidth()-e[1]},f=w.containerOffset,k=w.containerSize.height,m=w.containerSize.width,p=w._hasScroll(x,"left")?x.scrollWidth:m,y=w._hasScroll(x)?x.scrollHeight:k,w.parentData={element:x,left:f.left,top:f.top,width:p,
height:y}))},resize:function(d){var e=b(this).resizable("instance");var f=e.options;var k=e.containerOffset;var m=e.position;d=e._aspectRatio||d.shiftKey;var p={top:0,left:0},y=e.containerElement,w=!0;y[0]!==document&&/static/.test(y.css("position"))&&(p=k);m.left<(e._helper?k.left:0)&&(e.size.width+=e._helper?e.position.left-k.left:e.position.left-p.left,d&&(e.size.height=e.size.width/e.aspectRatio,w=!1),e.position.left=f.helper?k.left:0);m.top<(e._helper?k.top:0)&&(e.size.height+=e._helper?e.position.top-
k.top:e.position.top,d&&(e.size.width=e.size.height*e.aspectRatio,w=!1),e.position.top=e._helper?k.top:0);f=e.containerElement.get(0)===e.element.parent().get(0);m=/relative|absolute/.test(e.containerElement.css("position"));f&&m?(e.offset.left=e.parentData.left+e.position.left,e.offset.top=e.parentData.top+e.position.top):(e.offset.left=e.element.offset().left,e.offset.top=e.element.offset().top);f=Math.abs(e.sizeDiff.width+(e._helper?e.offset.left-p.left:e.offset.left-k.left));k=Math.abs(e.sizeDiff.height+
(e._helper?e.offset.top-p.top:e.offset.top-k.top));f+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-f,d&&(e.size.height=e.size.width/e.aspectRatio,w=!1));k+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-k,d&&(e.size.width=e.size.height*e.aspectRatio,w=!1));w||(e.position.left=e.prevPosition.left,e.position.top=e.prevPosition.top,e.size.width=e.prevSize.width,e.size.height=e.prevSize.height)},stop:function(){var d=b(this).resizable("instance"),e=d.options,
f=d.containerOffset,k=d.containerPosition,m=d.containerElement,p=b(d.helper),y=p.offset(),w=p.outerWidth()-d.sizeDiff.width;p=p.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(m.css("position"))&&b(this).css({left:y.left-k.left-f.left,width:w,height:p});d._helper&&!e.animate&&/static/.test(m.css("position"))&&b(this).css({left:y.left-k.left-f.left,width:w,height:p})}});b.dvUi.plugin.add("resizable","alsoResize",{start:function(){var d=b(this).resizable("instance").options,e=
function(d){b(d).each(function(){var d=b(this);d.data("dvUi-resizable-alsoresize",{width:parseInt(d.width(),10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10)})})};"object"!=typeof d.alsoResize||d.alsoResize.parentNode?e(d.alsoResize):d.alsoResize.length?(d.alsoResize=d.alsoResize[0],e(d.alsoResize)):b.each(d.alsoResize,function(b){e(b)})},resize:function(d,e){d=b(this).resizable("instance");var g=d.options,f=d.originalSize,k=d.originalPosition,m={height:d.size.height-
f.height||0,width:d.size.width-f.width||0,top:d.position.top-k.top||0,left:d.position.left-k.left||0},p=function(d,g){b(d).each(function(){var d=b(this),f=b(this).data("dvUi-resizable-alsoresize"),k={},r=g&&g.length?g:d.parents(e.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(r,function(b,d){(b=(f[d]||0)+(m[d]||0))&&0<=b&&(k[d]=b||null)});d.css(k)})};"object"!=typeof g.alsoResize||g.alsoResize.nodeType?p(g.alsoResize):b.each(g.alsoResize,function(b,d){p(b,d)})},
stop:function(){b(this).removeData("resizable-alsoresize")}});b.dvUi.plugin.add("resizable","ghost",{start:function(){var d=b(this).resizable("instance"),e=d.options,f=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("dvUi-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:"");d.ghost.appendTo(d.helper)},resize:function(){var d=b(this).resizable("instance");d.ghost&&d.ghost.css({position:"relative",
height:d.size.height,width:d.size.width})},stop:function(){var d=b(this).resizable("instance");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}});b.dvUi.plugin.add("resizable","grid",{resize:function(){var d,e=b(this).resizable("instance"),f=e.options,k=e.size,m=e.originalSize,p=e.originalPosition,y=e.axis,w="number"==typeof f.grid?[f.grid,f.grid]:f.grid,x=w[0]||1,G=w[1]||1,C=Math.round((k.width-m.width)/x)*x;k=Math.round((k.height-m.height)/G)*G;var J=m.width+C,K=m.height+k,H=f.maxWidth&&
J>f.maxWidth,T=f.maxHeight&&K>f.maxHeight,M=f.minWidth&&f.minWidth>J,U=f.minHeight&&f.minHeight>K;f.grid=w;M&&(J+=x);U&&(K+=G);H&&(J-=x);T&&(K-=G);/^(se|s|e)$/.test(y)?(e.size.width=J,e.size.height=K):/^(ne)$/.test(y)?(e.size.width=J,e.size.height=K,e.position.top=p.top-k):/^(sw)$/.test(y)?(e.size.width=J,e.size.height=K,e.position.left=p.left-C):((0>=K-G||0>=J-x)&&(d=e._getPaddingPlusBorderDimensions(this)),0<K-G?(e.size.height=K,e.position.top=p.top-k):(K=G-d.height,e.size.height=K,e.position.top=
p.top+m.height-K),0<J-x?(e.size.width=J,e.position.left=p.left-C):(J=G-d.height,e.size.width=J,e.position.left=p.left+m.width-J))}});b.dvUi.resizable;b.widget("dvUi.selectable",b.dvUi.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var d,e=this;this.element.addClass("dvUi-selectable");this.dragged=!1;this.refresh=function(){d=b(e.options.filter,
e.element[0]);d.addClass("dvUi-selectee");d.each(function(){var d=b(this),e=d.offset();b.data(this,"selectable-item",{element:this,$element:d,left:e.left,top:e.top,right:e.left+d.outerWidth(),bottom:e.top+d.outerHeight(),startselected:!1,selected:d.hasClass("dvUi-selected"),selecting:d.hasClass("dvUi-selecting"),unselecting:d.hasClass("dvUi-unselecting")})})};this.refresh();this.selectees=d.addClass("dvUi-selectee");this._mouseInit();this.helper=b("<div class='dvUi-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("dvUi-selectee").removeData("selectable-item");
this.element.removeClass("dvUi-selectable dvUi-selectable-disabled");this._mouseDestroy()},_mouseStart:function(d){var e=this,f=this.options;this.opos=[d.pageX,d.pageY];this.options.disabled||(this.selectees=b(f.filter,this.element[0]),this._trigger("start",d),b(f.appendTo).append(this.helper),this.helper.css({left:d.pageX,top:d.pageY,width:0,height:0}),f.autoRefresh&&this.refresh(),this.selectees.filter(".dvUi-selected").each(function(){var g=b.data(this,"selectable-item");g.startselected=!0;d.metaKey||
d.ctrlKey||(g.$element.removeClass("dvUi-selected"),g.selected=!1,g.$element.addClass("dvUi-unselecting"),g.unselecting=!0,e._trigger("unselecting",d,{unselecting:g.element}))}),b(d.target).parents().addBack().each(function(){var g,f=b.data(this,"selectable-item");return f?(g=!d.metaKey&&!d.ctrlKey||!f.$element.hasClass("dvUi-selected"),f.$element.removeClass(g?"dvUi-unselecting":"dvUi-selected").addClass(g?"dvUi-selecting":"dvUi-unselecting"),f.unselecting=!g,f.selecting=g,f.selected=g,g?e._trigger("selecting",
d,{selecting:f.element}):e._trigger("unselecting",d,{unselecting:f.element}),!1):void 0}))},_mouseDrag:function(d){if(this.dragged=!0,!this.options.disabled){var e,f=this,k=this.options,m=this.opos[0],p=this.opos[1],y=d.pageX,w=d.pageY;return m>y&&(e=y,y=m,m=e),p>w&&(e=w,w=p,p=e),this.helper.css({left:m,top:p,width:y-m,height:w-p}),this.selectees.each(function(){var e=b.data(this,"selectable-item"),g=!1;e&&e.element!==f.element[0]&&("touch"===k.tolerance?g=!(e.left>y||m>e.right||e.top>w||p>e.bottom):
"fit"===k.tolerance&&(g=e.left>m&&y>e.right&&e.top>p&&w>e.bottom),g?(e.selected&&(e.$element.removeClass("dvUi-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("dvUi-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("dvUi-selecting"),e.selecting=!0,f._trigger("selecting",d,{selecting:e.element}))):(e.selecting&&((d.metaKey||d.ctrlKey)&&e.startselected?(e.$element.removeClass("dvUi-selecting"),e.selecting=!1,e.$element.addClass("dvUi-selected"),e.selected=!0):(e.$element.removeClass("dvUi-selecting"),
e.selecting=!1,e.startselected&&(e.$element.addClass("dvUi-unselecting"),e.unselecting=!0),f._trigger("unselecting",d,{unselecting:e.element}))),e.selected&&(d.metaKey||d.ctrlKey||e.startselected||(e.$element.removeClass("dvUi-selected"),e.selected=!1,e.$element.addClass("dvUi-unselecting"),e.unselecting=!0,f._trigger("unselecting",d,{unselecting:e.element})))))}),!1}},_mouseStop:function(d){var e=this;return this.dragged=!1,b(".dvUi-unselecting",this.element[0]).each(function(){var g=b.data(this,
"selectable-item");g.$element.removeClass("dvUi-unselecting");g.unselecting=!1;g.startselected=!1;e._trigger("unselected",d,{unselected:g.element})}),b(".dvUi-selecting",this.element[0]).each(function(){var g=b.data(this,"selectable-item");g.$element.removeClass("dvUi-selecting").addClass("dvUi-selected");g.selecting=!1;g.selected=!0;g.startselected=!0;e._trigger("selected",d,{selected:g.element})}),this._trigger("stop",d),this.helper.remove(),!1}});b.widget("dvUi.sortable",b.dvUi.mouse,{version:"1.11.2",
widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},
_isOverAxis:function(b,e,f){return b>=e&&e+f>b},_isFloating:function(b){return/left|right/.test(b.css("float"))||/inline|table-cell/.test(b.css("display"))},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("dvUi-sortable");this.refresh();this.floating=this.items.length?"x"===b.axis||this._isFloating(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(b,e){this._super(b,e);"handle"===
b&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");b.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("dvUi-sortable-handle")})},_destroy:function(){this.element.removeClass("dvUi-sortable dvUi-sortable-disabled").find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData(this.widgetName+
"-item");return this},_mouseCapture:function(d,e){var g=null,f=!1,k=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(d),b(d.target).parents().each(function(){return b.data(this,k.widgetName+"-item")===k?(g=b(this),!1):void 0}),b.data(d.target,k.widgetName+"-item")===k&&(g=b(d.target)),g?!this.options.handle||e||(b(this.options.handle,g).find("*").addBack().each(function(){this===d.target&&(f=!0)}),f)?(this.currentItem=g,this._removeCurrentsFromItems(),
!0):!1:!1)},_mouseStart:function(d,e,f){var g;e=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(d),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},b.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),
this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(d),this.originalPageX=d.pageX,this.originalPageY=d.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&"auto"!==e.cursor&&(g=this.document.find("body"),
this.storedCursor=g.css("cursor"),g.css("cursor",e.cursor),this.storedStylesheet=b("<style>*{ cursor: "+e.cursor+" !important; }</style>").appendTo(g)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),
this._trigger("start",d,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!f)for(f=this.containers.length-1;0<=f;f--)this.containers[f]._trigger("activate",d,this._uiHash(this));return b.dvUi.ddmanager&&(b.dvUi.ddmanager.current=this),b.dvUi.ddmanager&&!e.dropBehaviour&&b.dvUi.ddmanager.prepareOffsets(this,d),this.dragging=!0,this.helper.addClass("dvUi-sortable-helper"),this._mouseDrag(d),!0},_mouseDrag:function(d){var e,f,k;var m=this.options;var p=!1;this.position=
this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-d.pageY<m.scrollSensitivity?this.scrollParent[0].scrollTop=p=this.scrollParent[0].scrollTop+m.scrollSpeed:d.pageY-this.overflowOffset.top<m.scrollSensitivity&&(this.scrollParent[0].scrollTop=p=this.scrollParent[0].scrollTop-
m.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<m.scrollSensitivity?this.scrollParent[0].scrollLeft=p=this.scrollParent[0].scrollLeft+m.scrollSpeed:d.pageX-this.overflowOffset.left<m.scrollSensitivity&&(this.scrollParent[0].scrollLeft=p=this.scrollParent[0].scrollLeft-m.scrollSpeed)):(d.pageY-b(document).scrollTop()<m.scrollSensitivity?p=b(document).scrollTop(b(document).scrollTop()-m.scrollSpeed):b(window).height()-(d.pageY-b(document).scrollTop())<m.scrollSensitivity&&
(p=b(document).scrollTop(b(document).scrollTop()+m.scrollSpeed)),d.pageX-b(document).scrollLeft()<m.scrollSensitivity?p=b(document).scrollLeft(b(document).scrollLeft()-m.scrollSpeed):b(window).width()-(d.pageX-b(document).scrollLeft())<m.scrollSensitivity&&(p=b(document).scrollLeft(b(document).scrollLeft()+m.scrollSpeed))),!1!==p&&b.dvUi.ddmanager&&!m.dropBehaviour&&b.dvUi.ddmanager.prepareOffsets(this,d));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||
(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(m=this.items.length-1;0<=m;m--)if(e=this.items[m],f=e.item[0],k=this._intersectsWithPointer(e),k&&e.instance===this.currentContainer&&f!==this.currentItem[0]&&this.placeholder[1===k?"next":"prev"]()[0]!==f&&!b.contains(this.placeholder[0],f)&&("semi-dynamic"===this.options.type?!b.contains(this.element[0],f):!0)){if(this.direction=1===k?"down":"up",
"pointer"!==this.options.tolerance&&!this._intersectsWithSides(e))break;this._rearrange(d,e);this._trigger("change",d,this._uiHash());break}return this._contactContainers(d),b.dvUi.ddmanager&&b.dvUi.ddmanager.drag(this,d),this._trigger("sort",d,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(d,e){if(d){if(b.dvUi.ddmanager&&!this.options.dropBehaviour&&b.dvUi.ddmanager.drop(this,d),this.options.revert){var g=this;e=this.placeholder.offset();var f=this.options.axis,k={};
f&&"x"!==f||(k.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));f&&"y"!==f||(k.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;b(this.helper).animate(k,parseInt(this.options.revert,10)||500,function(){g._clear(d)})}else this._clear(d,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?
this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper"):this.currentItem.show();for(var d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("deactivate",null,this._uiHash(this)),this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",null,this._uiHash(this)),this.containers[d].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&
this.helper&&this.helper[0].parentNode&&this.helper.remove(),b.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?b(this.domPosition.prev).after(this.currentItem):b(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(d){var e=this._getItemsAsjQuery(d&&d.connected),f=[];return d=d||{},b(e).each(function(){var e=(b(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[\-=_](.+)/);e&&f.push((d.key||e[1]+"[]")+"="+(d.key&&
d.expression?e[1]:e[2]))}),!f.length&&d.key&&f.push(d.key+"="),f.join("&")},toArray:function(d){var e=this._getItemsAsjQuery(d&&d.connected),f=[];return d=d||{},e.each(function(){f.push(b(d.item||this).attr(d.attribute||"id")||"")}),f},_intersectsWith:function(b){var d=this.positionAbs.left,e=d+this.helperProportions.width,f=this.positionAbs.top,k=f+this.helperProportions.height,m=b.left,p=m+b.width,w=b.top,x=w+b.height,G=this.offset.click.top,C=this.offset.click.left;G="x"===this.options.axis||f+
G>w&&x>f+G;C="y"===this.options.axis||d+C>m&&p>d+C;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?G&&C:d+this.helperProportions.width/2>m&&p>e-this.helperProportions.width/2&&f+this.helperProportions.height/2>w&&x>k-this.helperProportions.height/2},_intersectsWithPointer:function(b){var d="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+
this.offset.click.top,b.top,b.height);b="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);d=d&&b;b=this._getDragVerticalDirection();var e=this._getDragHorizontalDirection();return d?this.floating?e&&"right"===e||"down"===b?2:1:b&&("down"===b?2:1):!1},_intersectsWithSides:function(b){var d=this._isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=this._isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+
b.width/2,b.width);var e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&b||"left"===f&&!b:e&&("down"===e&&d||"up"===e&&!d)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!==b&&(0<b?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return 0!==b&&(0<b?"right":"left")},refresh:function(b){return this._refreshItems(b),this._setHandleClassName(),
this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor===String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(d){function e(){m.push(this)}var f,k,m=[],p=[],y=this._connectWith();if(y&&d)for(d=y.length-1;0<=d;d--){var w=b(y[d]);for(f=w.length-1;0<=f;f--)(k=b.data(w[f],this.widgetFullName))&&k!==this&&!k.options.disabled&&p.push([b.isFunction(k.options.items)?k.options.items.call(k.element):b(k.options.items,k.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),
k])}p.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),this]);for(d=p.length-1;0<=d;d--)p[d][0].each(e);return b(m)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=b.grep(this.items,function(b){for(var e=0;d.length>e;e++)if(d[e]===b.item[0])return!1;return!0})},
_refreshItems:function(d){this.items=[];this.containers=[this];var e,f,k,m,p=this.items,y=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],d,{item:this.currentItem}):b(this.options.items,this.element),this]];if((m=this._connectWith())&&this.ready)for(e=m.length-1;0<=e;e--){var w=b(m[e]);for(f=w.length-1;0<=f;f--)(k=b.data(w[f],this.widgetFullName))&&k!==this&&!k.options.disabled&&(y.push([b.isFunction(k.options.items)?k.options.items.call(k.element[0],d,{item:this.currentItem}):
b(k.options.items,k.element),k]),this.containers.push(k))}for(e=y.length-1;0<=e;e--)for(d=y[e][1],w=y[e][0],f=0,m=w.length;m>f;f++)k=b(w[f]),k.data(this.widgetName+"-item",d),p.push({item:k,instance:d,width:0,height:0,left:0,top:0})},refreshPositions:function(d){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var e,f,k;for(e=this.items.length-1;0<=e;e--){var m=this.items[e];m.instance!==this.currentContainer&&this.currentContainer&&m.item[0]!==this.currentItem[0]||(f=
this.options.toleranceElement?b(this.options.toleranceElement,m.item):m.item,d||(m.width=f.outerWidth(),m.height=f.outerHeight()),k=f.offset(),m.left=k.left,m.top=k.top)}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)k=this.containers[e].element.offset(),this.containers[e].containerCache.left=k.left,this.containers[e].containerCache.top=k.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),
this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(d){d=d||this;var e,f=d.options;f.placeholder&&f.placeholder.constructor!==String||(e=f.placeholder,f.placeholder={element:function(){var f=d.currentItem[0].nodeName.toLowerCase(),g=b("<"+f+">",d.document[0]).addClass(e||d.currentItem[0].className+" dvUi-sortable-placeholder").removeClass("dvUi-sortable-helper");return"tr"===f?d.currentItem.children().each(function(){b("<td>&#160;</td>",
d.document[0]).attr("colspan",b(this).attr("colspan")||1).appendTo(g)}):"img"===f&&g.attr("src",d.currentItem.attr("src")),e||g.css("visibility","hidden"),g},update:function(b,g){(!e||f.forcePlaceholderSize)&&(g.height()||g.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10)),g.width()||g.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||0,10)))}});
d.placeholder=b(f.placeholder.element.call(d.element,d.currentItem));d.currentItem.after(d.placeholder);f.placeholder.update(d,d.placeholder)},_contactContainers:function(d){var e,f,k,m,p,y=k=null;for(e=this.containers.length-1;0<=e;e--)b.contains(this.currentItem[0],this.containers[e].element[0])||(this._intersectsWith(this.containers[e].containerCache)?k&&b.contains(this.containers[e].element[0],k.element[0])||(k=this.containers[e],y=e):this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",
d,this._uiHash(this)),this.containers[e].containerCache.over=0));if(k)if(1===this.containers.length)this.containers[y].containerCache.over||(this.containers[y]._trigger("over",d,this._uiHash(this)),this.containers[y].containerCache.over=1);else{e=1E4;var w=null;k=(f=k.floating||this._isFloating(this.currentItem))?"left":"top";var x=f?"width":"height";var G=f?"clientX":"clientY";for(f=this.items.length-1;0<=f;f--)b.contains(this.containers[y].element[0],this.items[f].item[0])&&this.items[f].item[0]!==
this.currentItem[0]&&(m=this.items[f].item.offset()[k],p=!1,d[G]-m>this.items[f][x]/2&&(p=!0),e>Math.abs(d[G]-m)&&(e=Math.abs(d[G]-m),w=this.items[f],this.direction=p?"up":"down"));if(w||this.options.dropOnEmpty){if(this.currentContainer===this.containers[y])return this.currentContainer.containerCache.over||(this.containers[y]._trigger("over",d,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;w?this._rearrange(d,w,null,!0):this._rearrange(d,null,this.containers[y].element,!0);this._trigger("change",
d,this._uiHash());this.containers[y]._trigger("change",d,this._uiHash(this));this.currentContainer=this.containers[y];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[y]._trigger("over",d,this._uiHash(this));this.containers[y].containerCache.over=1}}},_createHelper:function(d){var e=this.options;d=b.isFunction(e.helper)?b(e.helper.apply(this.element[0],[d,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||
b("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||e.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||e.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(d){"string"==
typeof d&&(d=d.split(" "));b.isArray(d)&&(d={left:+d[0],top:+d[1]||0});"left"in d&&(this.offset.click.left=d.left+this.margins.left);"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left);"top"in d&&(this.offset.click.top=d.top+this.margins.top);"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();return"absolute"===
this.cssPosition&&this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&b.dvUi.ie)&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===
this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var d,e,f,k=this.options;"parent"===k.containment&&(k.containment=this.helper[0].parentNode);"document"!==k.containment&&"window"!==k.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b("document"===k.containment?document:window).width()-this.helperProportions.width-this.margins.left,(b("document"===k.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top]);/^(document|window|parent)$/.test(k.containment)||(d=b(k.containment)[0],e=b(k.containment).offset(),f="hidden"!==b(d).css("overflow"),this.containment=[e.left+(parseInt(b(d).css("borderLeftWidth"),10)||0)+(parseInt(b(d).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(b(d).css("borderTopWidth"),10)||0)+(parseInt(b(d).css("paddingTop"),10)||0)-this.margins.top,e.left+(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(b(d).css("borderLeftWidth"),10)||0)-
(parseInt(b(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(b(d).css("borderTopWidth"),10)||0)-(parseInt(b(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,e){e||(e=this.position);d="absolute"===d?1:-1;var f="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:
this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:e.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d,left:e.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d}},_generatePosition:function(d){var e,f,k=this.options,m=d.pageX,p=d.pageY,y="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],
this.offsetParent[0])?this.scrollParent:this.offsetParent,w=/(html|body)/i.test(y[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(d.pageX-this.offset.click.left<this.containment[0]&&(m=this.containment[0]+this.offset.click.left),d.pageY-this.offset.click.top<this.containment[1]&&(p=this.containment[1]+this.offset.click.top),d.pageX-
this.offset.click.left>this.containment[2]&&(m=this.containment[2]+this.offset.click.left),d.pageY-this.offset.click.top>this.containment[3]&&(p=this.containment[3]+this.offset.click.top)),k.grid&&(e=this.originalPageY+Math.round((p-this.originalPageY)/k.grid[1])*k.grid[1],p=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-k.grid[1]:e+k.grid[1]:e,f=this.originalPageX+Math.round((m-this.originalPageX)/
k.grid[0])*k.grid[0],m=this.containment?f-this.offset.click.left>=this.containment[0]&&f-this.offset.click.left<=this.containment[2]?f:f-this.offset.click.left>=this.containment[0]?f-k.grid[0]:f+k.grid[0]:f)),{top:p-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():w?0:y.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():
w?0:y.scrollLeft())}},_rearrange:function(b,e,f,k){f?f[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling);var d=this.counter=this.counter?++this.counter:1;this._delay(function(){d===this.counter&&this.refreshPositions(!k)})},_clear:function(b,e){function d(b,d,e){return function(f){e._trigger(b,f,d._uiHash(d))}}this.reverting=!1;var f,g=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),
this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(f in this._storedCSS)"auto"!==this._storedCSS[f]&&"static"!==this._storedCSS[f]||(this._storedCSS[f]="");this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper")}else this.currentItem.show();this.fromOutside&&!e&&g.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".dvUi-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||
e||g.push(function(b){this._trigger("update",b,this._uiHash())});this!==this.currentContainer&&(e||(g.push(function(b){this._trigger("remove",b,this._uiHash())}),g.push(function(b){return function(d){b._trigger("receive",d,this._uiHash(this))}}.call(this,this.currentContainer)),g.push(function(b){return function(d){b._trigger("update",d,this._uiHash(this))}}.call(this,this.currentContainer))));for(f=this.containers.length-1;0<=f;f--)e||g.push(d("deactivate",this,this.containers[f])),this.containers[f].containerCache.over&&
(g.push(d("out",this,this.containers[f])),this.containers[f].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||
(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(f=0;g.length>f;f++)g[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===b.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(d){var e=d||this;return{helper:e.helper,placeholder:e.placeholder||b([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:d?
d.element:null}}})}(dvJQuery),dvJQuery&&function(b){(function(){function k(a){var d=a.css("color"),e;a=a[0];for(var c=!1;a&&!e&&!c;){try{var h=b(a).css("background-color")}catch(t){h="transparent"}"transparent"!==h&&"rgba(0, 0, 0, 0)"!==h&&(e=h);c=a.body;a=a.parentNode}a=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/;c=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/;var l;h=void 0;(h=d.match(a))?l={r:parseInt(h[1],10),g:parseInt(h[2],10),b:parseInt(h[3],10)}:(h=d.match(c))&&(l={r:parseInt(h[1],
16),g:parseInt(h[2],16),b:parseInt(h[3],16)});var q;e?(h=void 0,(h=e.match(a))?q={r:parseInt(h[1],10),g:parseInt(h[2],10),b:parseInt(h[3],10)}:(h=e.match(c))&&(q={r:parseInt(h[1],16),g:parseInt(h[2],16),b:parseInt(h[3],16)})):q=l?127<Math.max.apply(null,[l.r,l.g,l.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255}:{r:255,g:255,b:255};h=function(a){return"rgb("+[a.r,a.g,a.b].join(", ")+")"};l&&q?(a=Math.max.apply(null,[l.r,l.g,l.b]),l=Math.max.apply(null,[q.r,q.g,q.b]),l=Math.round(l+-.75*(l-a)),l={r:l,g:l,b:l}):
l?(l=Math.max.apply(null,[l.r,l.g,l.b]),a=1,127<l&&(a=-1),l=Math.round(l+96*a),l={r:l,g:l,b:l}):l={r:191,g:191,b:191};return{color:d,"background-color":q?h(q):e,"decor-color":h(l)}}function m(a,b){this.x=a;this.y=b;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var d=function(a){return Math.round(a/Math.abs(a))};this.resizeTo=function(a){if(0===
this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=a,this.y=a*d(this.y);else if(0===this.y)this._length=a,this.x=a*d(this.x);else{var c=Math.abs(this.y/this.x),b=Math.sqrt(Math.pow(a,2)/(1+Math.pow(c,2)));c*=b;this._length=a;this.x=b*d(this.x);this.y=c*d(this.y)}return this};this.angleTo=function(a){var c=this.getLength()*a.getLength();return 0===c?0:Math.acos(Math.min(Math.max((this.x*a.x+this.y*a.y)/c,-1),1))/Math.PI}}function p(a,b){this.x=a;this.y=b;this.getVectorToCoordinates=
function(a,c){return new m(a-this.x,c-this.y)};this.getVectorFromCoordinates=function(a,c){return this.getVectorToCoordinates(a,c).reverse()};this.getVectorToPoint=function(a){return new m(a.x-this.x,a.y-this.y)};this.getVectorFromPoint=function(a){return this.getVectorToPoint(a).reverse()}}function f(a,b,d,c,h){this.data=a;this.context=b;if(a.length)for(var l=a.length,e,t,f=0;f<l;f++){e=a[f];t=e.x.length;d.call(b,e);for(var u=1;u<t;u++)c.call(b,e,u);h.call(b,e)}this.changed=function(){};this.startStrokeFn=
d;this.addToStrokeFn=c;this.endStrokeFn=h;this.inStroke=!1;this._stroke=this._lastPoint=null;this.startStroke=function(a){if(a&&"number"==typeof a.x&&"number"==typeof a.y){this._stroke={x:[a.x],y:[a.y]};this.data.push(this._stroke);this._lastPoint=a;this.inStroke=!0;var c=this._stroke,b=this.startStrokeFn,h=this.context;setTimeout(function(){b.call(h,c)},3);return a}return null};this.addToStroke=function(a){if(this.inStroke&&"number"===typeof a.x&&"number"===typeof a.y&&4<Math.abs(a.x-this._lastPoint.x)+
Math.abs(a.y-this._lastPoint.y)){var c=this._stroke.x.length;this._stroke.x.push(a.x);this._stroke.y.push(a.y);this._lastPoint=a;var b=this._stroke,h=this.addToStrokeFn,l=this.context;setTimeout(function(){h.call(l,b,c)},3);return a}return null};this.endStroke=function(){var a=this.inStroke;this.inStroke=!1;this._lastPoint=null;if(a){var c=this._stroke,b=this.endStrokeFn,h=this.context,l=this.changed;setTimeout(function(){b.call(h,c);l.call(h)},3);return!0}return null}}function e(a,e,f){var c=this.$parent=
b(a);a=this.eventTokens={};this.events=new r(this);var h=b.fn[d]("globalEvents"),l={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};b.extend(l,k(c));e&&b.extend(l,e);this.settings=l;for(var q in f)f.hasOwnProperty(q)&&f[q].call(this,q);this.events.publish(d+".initializing");this.$controlbarUpper=b('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(c);
this.isCanvasEmulator=!1;f=this.canvas=this.initializeCanvas(l);e=b(f);this.$controlbarLower=b('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(c);this.canvasContext=f.getContext("2d");e.data(d+".this",this);c=(c=l.lineWidth)?c:Math.max(Math.round(f.width/400),2);l.lineWidth=c;this.lineCurveThreshold=3*l.lineWidth;l.cssclass&&""!=b.trim(l.cssclass)&&e.addClass(l.cssclass);
this.fatFingerCompensation=0;c=function(a){var c,h,l=function(b){b=b.changedTouches&&0<b.changedTouches.length?b.changedTouches[0]:b;return new p(Math.round(b.pageX+c),Math.round(b.pageY+h)+a.fatFingerCompensation)},d=new g(750,function(){a.dataEngine.endStroke()});this.drawEndHandler=function(c){try{c.preventDefault()}catch(oa){}d.clear();a.dataEngine.endStroke()};this.drawStartHandler=function(e){e.preventDefault();var q=b(a.canvas).offset();c=-1*q.left;h=-1*q.top;a.dataEngine.startStroke(l(e));
d.kick()};this.drawMoveHandler=function(c){c.preventDefault();a.dataEngine.inStroke&&(a.dataEngine.addToStroke(l(c)),d.kick())};return this}.call({},this);var t=c.drawEndHandler,F=c.drawStartHandler,u=c.drawMoveHandler,m=this.canvas;e=b(m);this.isCanvasEmulator?(e.bind("mousemove."+d,u),e.bind("mouseup."+d,t),e.bind("mousedown."+d,F)):(m.ontouchstart=function(a){m.onmousedown=void 0;m.onmouseup=void 0;m.onmousemove=void 0;this.fatFingerCompensation=l.minFatFingerCompensation&&-3*l.lineWidth>l.minFatFingerCompensation?
-3*l.lineWidth:l.minFatFingerCompensation;F(a);m.ontouchend=t;m.ontouchstart=F;m.ontouchmove=u},m.onmousedown=function(a){m.ontouchstart=void 0;m.ontouchend=void 0;m.ontouchmove=void 0;F(a);m.onmousedown=F;m.onmouseup=t;m.onmousemove=u});a[d+".windowmouseup"]=h.subscribe(d+".windowmouseup",c.drawEndHandler);this.events.publish(d+".attachingEventHandlers");var X=this;a=l.width.toString(10);var E=d;if("ratio"===a||"%"===a.split("")[a.length-1])this.eventTokens[E+".parentresized"]=h.subscribe(E+".parentresized",
function(a,c,b){return function(){var l=c.width();if(l!==b){for(var d in a)a.hasOwnProperty(d)&&(h.unsubscribe(a[d]),delete a[d]);var e=X.settings;X.$parent.children().remove();for(d in X)X.hasOwnProperty(d)&&delete X[d];d=e.data;l=1*l/b;var q=[],t,f;var u=0;for(t=d.length;u<t;u++){var g=d[u];var k={x:[],y:[]};var F=0;for(f=g.x.length;F<f;F++)k.x.push(g.x[F]*l),k.y.push(g.y[F]*l);q.push(k)}e.data=q;c[E](e)}}}(this.eventTokens,this.$parent,this.$parent.width(),1*this.canvas.width/this.canvas.height));
this.resetCanvas(l.data);this.events.publish(d+".initialized");return this}var d="jSignature",g=function(a,b){var d;this.kick=function(){clearTimeout(d);d=setTimeout(b,a)};this.clear=function(){clearTimeout(d)};return this},r=function(a){this.topics={};this.context=a?a:this;this.publish=function(a,b,c,h){if(this.topics[a]){var l=this.topics[a],d=Array.prototype.slice.call(arguments,1),e=[],f;var u=0;for(f=l.length;u<f;u++){var g=l[u];var k=g[0];g[1]&&(g[0]=function(){},e.push(u));k.apply(this.context,
d)}u=0;for(f=e.length;u<f;u++)l.splice(e[u],1)}};this.subscribe=function(a,b,c){this.topics[a]?this.topics[a].push([b,c]):this.topics[a]=[[b,c]];return{topic:a,callback:b}};this.unsubscribe=function(a){if(this.topics[a.topic])for(var b=this.topics[a.topic],c=0,h=b.length;c<h;c++)b[c][0]===a.callback&&b.splice(c,1)}},z=function(a){var b=this.canvasContext,d=a.x[0];a=a.y[0];var c=this.settings.lineWidth,h=b.fillStyle;b.fillStyle=b.strokeStyle;b.fillRect(d+c/-2,a+c/-2,c,c);b.fillStyle=h},B=function(a,
b){var d=new p(a.x[b-1],a.y[b-1]),c=new p(a.x[b],a.y[b]),h=d.getVectorToPoint(c);if(1<b){var l=new p(a.x[b-2],a.y[b-2]),e=l.getVectorToPoint(d);if(e.getLength()>this.lineCurveThreshold){var t=2<b?(new p(a.x[b-3],a.y[b-3])).getVectorToPoint(l):new m(0,0);a=.35*e.getLength();b=e.angleTo(t.reverse());var f=h.angleTo(e.reverse());t=(new m(t.x+e.x,t.y+e.y)).resizeTo(Math.max(.05,b)*a);var u=(new m(e.x+h.x,e.y+h.y)).reverse().resizeTo(Math.max(.05,f)*a);e=this.canvasContext;a=l.x;f=l.y;b=d.x;var g=d.y,
k=l.x+t.x;l=l.y+t.y;t=d.x+u.x;u=d.y+u.y;e.beginPath();e.moveTo(a,f);e.bezierCurveTo(k,l,t,u,b,g);e.stroke()}}h.getLength()<=this.lineCurveThreshold&&(h=this.canvasContext,l=d.x,d=d.y,t=c.x,c=c.y,h.beginPath(),h.moveTo(l,d),h.lineTo(t,c),h.stroke())},V=function(a){var b=a.x.length-1;if(0<b){var d=new p(a.x[b],a.y[b]),c=new p(a.x[b-1],a.y[b-1]),h=c.getVectorToPoint(d);if(h.getLength()>this.lineCurveThreshold){if(1<b){a=(new p(a.x[b-2],a.y[b-2])).getVectorToPoint(c);var l=(new m(a.x+h.x,a.y+h.y)).resizeTo(h.getLength()/
2);h=this.canvasContext;a=c.x;b=c.y;var e=d.x,t=d.y,f=c.x+l.x;c=c.y+l.y;l=d.x;d=d.y;h.beginPath();h.moveTo(a,b);h.bezierCurveTo(f,c,l,d,e,t)}else h=this.canvasContext,a=c.x,c=c.y,b=d.x,d=d.y,h.beginPath(),h.moveTo(a,c),h.lineTo(b,d);h.stroke()}}};e.prototype.resetCanvas=function(a){var e=this.canvas,g=this.settings,c=this.canvasContext,h=this.isCanvasEmulator,l=e.width,q=e.height;c.clearRect(0,0,l+30,q+30);c.shadowColor=c.fillStyle=g["background-color"];h&&c.fillRect(0,0,l+30,q+30);c.lineWidth=Math.ceil(parseInt(g.lineWidth,
10));c.lineCap=c.lineJoin="round";c.strokeStyle=g["decor-color"];c.shadowOffsetX=0;c.shadowOffsetY=0;var t=Math.round(q/5),k=1.5*t,u=q-t;l-=1.5*t;q-=t;c.beginPath();c.moveTo(k,u);c.lineTo(l,q);c.stroke();c.strokeStyle=g.color;h||(c.shadowColor=c.strokeStyle,c.shadowOffsetX=.5*c.lineWidth,c.shadowOffsetY=-.6*c.lineWidth,c.shadowBlur=0);a||(a=[]);c=this.dataEngine=new f(a,this,z,B,V);g.data=a;b(e).data(d+".data",a).data(d+".settings",g);var m=this.$parent,X=this.events,r=d;c.changed=function(){X.publish(r+
".change");m.trigger("change")};c.changed();return!0};e.prototype.initializeCanvas=function(a){var e=document.createElement("canvas"),f=b(e);a.width===a.height&&"ratio"===a.height&&(a.width="100%");f.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==a.height&&a.height?a.height.toString(10):1).css("width","ratio"!==a.width&&a.width?a.width.toString(10):1);f.appendTo(this.$parent);"ratio"===a.height?f.css("height",Math.round(f.width()/a.sizeRatio)):"ratio"===a.width&&f.css("width",
Math.round(f.height()*a.sizeRatio));f.addClass(d);e.width=f.width();e.height=f.height();a=e;if(a.getContext)a=!1;else{f=a.ownerDocument.parentWindow;var c=f.FlashCanvas?a.ownerDocument.parentWindow.FlashCanvas:"undefined"===typeof FlashCanvas?void 0:FlashCanvas;if(c){a=c.initElement(a);c=1;f&&f.screen&&f.screen.deviceXDPI&&f.screen.logicalXDPI&&(c=1*f.screen.deviceXDPI/f.screen.logicalXDPI);if(1!==c)try{b(a).children("object").get(0).resize(Math.ceil(a.width*c),Math.ceil(a.height*c)),a.getContext("2d").scale(c,
c)}catch(h){}a=!0}else throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");}this.isCanvasEmulator=a;e.onselectstart=function(a){a&&a.preventDefault&&a.preventDefault();a&&a.stopPropagation&&a.stopPropagation();return!1};return e};var y=window,w=function(a,b){var d=new Image,c=this;d.onload=function(){c.getContext("2d").drawImage(d,0,0,d.width<c.width?d.width:c.width,d.height<c.height?d.height:c.height)};d.src="data:"+b+","+a},x=function(a){this.find("canvas."+d).add(this.filter("canvas."+
d)).data(d+".this").resetCanvas(a);return this},G=function(a,b){if(void 0!==b||"string"!==typeof a||"data:"!==a.substr(0,5)||(b=a.slice(5).split(",")[0],a=a.slice(6+b.length),b!==a)){var e=this.find("canvas."+d).add(this.filter("canvas."+d));if(U.hasOwnProperty(b))0!==e.length&&U[b].call(e[0],a,b,function(a){return function(){return a.resetCanvas.apply(a,arguments)}}(e.data(d+".this")));else throw Error(d+" is unable to find import plugin with for format '"+String(b)+"'");return this}},C=new r,J=
d,K,H=function(){C.publish(J+".parentresized")};b(y).bind("resize."+J,function(){K&&clearTimeout(K);K=setTimeout(H,500)}).bind("mouseup."+J,function(){C.publish(J+".windowmouseup")});var T={},M={"default":function(){return this.toDataURL()},"native":function(a){return a},image:function(){var a=this.toDataURL();if("string"===typeof a&&4<a.length&&"data:"===a.slice(0,5)&&-1!==a.indexOf(",")){var b=a.indexOf(",");return[a.slice(5,b),a.substr(b+1)]}return[]}},U={"native":function(a,b,d){d(a)},image:w,
"image/png;base64":w,"image/jpeg;base64":w,"image/jpg;base64":w},P={"export":M,"import":U,instance:T},S={init:function(a){return this.each(function(){var b,d=!1;for(b=this.parentNode;b&&!d;)d=b.body,b=b.parentNode;!d||new e(this,a,T)})},getSettings:function(){return this.find("canvas."+d).add(this.filter("canvas."+d)).data(d+".this").settings},clear:x,reset:x,addPlugin:function(a,b,d){P.hasOwnProperty(a)&&(P[a][b]=d);return this},listPlugins:function(a){var b=[];if(P.hasOwnProperty(a)){a=P[a];for(var d in a)a.hasOwnProperty(d)&&
b.push(d)}return b},getData:function(a){var b=this.find("canvas."+d).add(this.filter("canvas."+d));void 0===a&&(a="default");if(0!==b.length&&M.hasOwnProperty(a))return M[a].call(b.get(0),b.data(d+".data"))},importData:G,setData:G,globalEvents:function(){return C},events:function(){return this.find("canvas."+d).add(this.filter("canvas."+d)).data(d+".this").events}};b.fn[d]=function(a){if(!a||"object"===typeof a)return S.init.apply(this,arguments);if("string"===typeof a&&S[a])return S[a].apply(this,
Array.prototype.slice.call(arguments,1));b.error("Method "+String(a)+" does not exist on dvJQuery."+d)}})();(function(){b.fn.jSignature("addPlugin","instance","UndoButton",function(k){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[k]){var m=this.settings[k];"function"!==typeof m&&(m=function(){var d=b('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),e=d.width();
d.css("left",Math.round((this.canvas.width-e)/2));e!==d.width()&&d.width(e);return d});var p=m.call(this),f=this;f.events.subscribe("jSignature.change",function(){f.dataEngine.data.length?p.show():p.hide()});var e=this,d=(this.events.topics.hasOwnProperty("jSignature.undo")?k:"jSignature")+".undo";p.bind("click",function(){e.events.publish(d)});e.events.subscribe(d,function(){var b=e.dataEngine.data;b.length&&(b.pop(),e.resetCanvas(b))})}})})})();(function(){for(var b={},m={},p="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),
f=p.length/2,e=f-1;-1<e;e--)b[p[e]]=p[e+f],m[p[e+f]]=p[e];var d=function(d){d=d.split("");for(var e=d.length,f=1;f<e;f++)d[f]=b[d[f]];return d.join("")},g=function(b){for(var e=[],g=0,k=1,m=b.length,r,p,z=0;z<m;z++)r=Math.round(b[z]),p=r-g,g=r,0>p&&0<k?(k=-1,e.push("Z")):0<p&&0>k&&(k=1,e.push("Y")),r=Math.abs(p),r>=f?e.push(d(r.toString(f))):e.push(r.toString(f));return e.join("")},r=function(d){var e=[];d=d.split("");for(var g=d.length,k,r=1,p=[],z=0,y=0;y<g;y++)k=d[y],k in b||"Z"===k||"Y"===k?(0!==
p.length&&(p=parseInt(p.join(""),f)*r+z,e.push(p),z=p),"Z"===k?(r=-1,p=[]):"Y"===k?(r=1,p=[]):p=[k]):p.push(m[k]);e.push(parseInt(p.join(""),f)*r+z);return e},z=function(b){for(var d=[],e=b.length,f,k=0;k<e;k++)f=b[k],d.push(g(f.x)),d.push(g(f.y));return d.join("_")},B=function(b){var d=[];b=b.split("_");for(var e=b.length/2,f=0;f<e;f++)d.push({x:r(b[2*f]),y:r(b[2*f+1])});return d};p=function(b){return["image/jsignature;base30",z(b)]};e=function(b,d,e){"string"===typeof b&&("image/jsignature;base30"===
b.substring(0,23).toLowerCase()&&(b=b.substring(24)),e(B(b)))};if(null==this.dvJQuery)throw Error("We need dvJQuery for some of the functionality. dvJQuery is not detected. Failing to initialize...");var V=this.dvJQuery.fn.jSignature;V("addPlugin","export","base30",p);V("addPlugin","export","image/jsignature;base30",p);V("addPlugin","import","base30",e);V("addPlugin","import","image/jsignature;base30",e);this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:d,compressstrokeleg:g,uncompressstrokeleg:r,
compressstrokes:z,uncompressstrokes:B,charmap:b})}).call("undefined"!==typeof window?window:this);(function(){function k(b,d){this.x=b;this.y=d;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var e=function(b){return Math.round(b/Math.abs(b))};this.resizeTo=function(b){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=
b,this.y=b*e(this.y);else if(0===this.y)this._length=b,this.x=b*e(this.x);else{var d=Math.abs(this.y/this.x),f=Math.sqrt(Math.pow(b,2)/(1+Math.pow(d,2)));d*=f;this._length=b;this.x=f*e(this.x);this.y=d*e(this.y)}return this};this.angleTo=function(b){var d=this.getLength()*b.getLength();return 0===d?0:Math.acos(Math.min(Math.max((this.x*b.x+this.y*b.y)/d,-1),1))/Math.PI}}function m(b,d){this.x=b;this.y=d;this.getVectorToCoordinates=function(b,d){return new k(b-this.x,d-this.y)};this.getVectorFromCoordinates=
function(b,d){return this.getVectorToCoordinates(b,d).reverse()};this.getVectorToPoint=function(b){return new k(b.x-this.x,b.y-this.y)};this.getVectorFromPoint=function(b){return this.getVectorToPoint(b).reverse()}}function p(b,d){d=Math.pow(10,d);return Math.round(b*d)/d}function f(b,d,e){d+=1;var f=new m(b.x[d-1],b.y[d-1]),g=new m(b.x[d],b.y[d]);g=f.getVectorToPoint(g);var r=new m(b.x[d-2],b.y[d-2]);f=r.getVectorToPoint(f);return f.getLength()>e?(e=2<d?(new m(b.x[d-3],b.y[d-3])).getVectorToPoint(r):
new k(0,0),b=.35*f.getLength(),r=f.angleTo(e.reverse()),d=g.angleTo(f.reverse()),e=(new k(e.x+f.x,e.y+f.y)).resizeTo(Math.max(.05,r)*b),g=(new k(f.x+g.x,f.y+g.y)).reverse().resizeTo(Math.max(.05,d)*b),g=new k(f.x+g.x,f.y+g.y),["c",p(e.x,2),p(e.y,2),p(g.x,2),p(g.y,2),p(f.x,2),p(f.y,2)]):["l",p(f.x,2),p(f.y,2)]}function e(b,d){var e=b.x.length-1,f=new m(b.x[e],b.y[e]),g=new m(b.x[e-1],b.y[e-1]);f=g.getVectorToPoint(f);return 1<e&&f.getLength()>d?(e=(new m(b.x[e-2],b.y[e-2])).getVectorToPoint(g),g=f.angleTo(e.reverse()),
b=.35*f.getLength(),e=(new k(e.x+f.x,e.y+f.y)).resizeTo(Math.max(.05,g)*b),["c",p(e.x,2),p(e.y,2),p(f.x,2),p(f.y,2),p(f.x,2),p(f.y,2)]):["l",p(f.x,2),p(f.y,2)]}function d(b,d,g){d=["M",p(b.x[0]-d,2),p(b.y[0]-g,2)];g=1;for(var k=b.x.length-1;g<k;g++)d.push.apply(d,f(b,g,1));0<k?d.push.apply(d,e(b,g,1)):0===k&&d.push.apply(d,["l",1,1]);return d.join(" ")}function g(b){var e=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],
f,g=b.length,k,m=[],r=[],p=k=f=0,z=0,x=[];if(0!==g){for(f=0;f<g;f++){p=b[f];z=[];k={x:[],y:[]};var w;var a=0;for(w=p.x.length;a<w;a++)z.push({x:p.x[a],y:p.y[a]});z=simplify(z,.7,!0);a=0;for(w=z.length;a<w;a++)k.x.push(z[a].x),k.y.push(z[a].y);x.push(k);m=m.concat(k.x);r=r.concat(k.y)}b=Math.min.apply(null,m)-1;g=Math.max.apply(null,m)+1;m=Math.min.apply(null,r)-1;r=Math.max.apply(null,r)+1;p=0>b?0:b;z=0>m?0:m;f=g-b;k=r-m}e.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+f.toString()+
'" height="'+k.toString()+'">');f=0;for(g=x.length;f<g;f++)k=x[f],e.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+d(k,p,z)+'"/>');e.push("</svg>");return e.join("")}function r(b){return[y,g(b)]}function z(b){return[w,V(g(b))]}var B=window;"use strict";("undefined"!=typeof exports?exports:B).simplify=function(b,d,e){d=void 0!==d?d*d:1;if(!e){var f=b.length,g=b[0],k=[g];for(e=1;e<f;e++){var m=b[e];var r=m.x-g.x,p=m.y-g.y;r*r+p*p>d&&(k.push(m),
g=m)}b=(g!==m&&k.push(m),k)}m=b;e=m.length;f=new ("undefined"!=typeof Uint8Array?Uint8Array:Array)(e);g=0;k=e-1;var z,x=[],a=[],E=[];for(f[g]=f[k]=1;k;){p=0;for(r=g+1;r<k;r++){var L=m[r];var c=m[g],h=m[k],l=c.x,q=c.y;c=h.x-l;var t=h.y-q;if(0!==c||0!==t){var F=((L.x-l)*c+(L.y-q)*t)/(c*c+t*t);1<F?(l=h.x,q=h.y):0<F&&(l+=c*F,q+=t*F)}L=(c=L.x-l,t=L.y-q,c*c+t*t);L>p&&(z=r,p=L)}p>d&&(f[z]=1,x.push(g),a.push(z),x.push(z),a.push(k));g=x.pop();k=a.pop()}for(r=0;r<e;r++)f[r]&&E.push(m[r]);return b=E,b};if("function"!==
typeof V)var V=function(b){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),e=0,f=0;var g=[];do{var k=b.charCodeAt(e++);var m=b.charCodeAt(e++);var r=b.charCodeAt(e++);var p=k<<16|m<<8|r;k=p>>18&63;m=p>>12&63;r=p>>6&63;p&=63;g[f++]=d[k]+d[m]+d[r]+d[p]}while(e<b.length);g=g.join("");b=b.length%3;return(b?g.slice(0,b-3):g)+"===".slice(b||3)};var y="image/svg+xml",w="image/svg+xml;base64";if("undefined"===typeof b)throw Error("We need dvJQuery for some of the functionality. dvJQuery is not detected. Failing to initialize...");
B=b.fn.jSignature;B("addPlugin","export","svg",r);B("addPlugin","export",y,r);B("addPlugin","export","svgbase64",z);B("addPlugin","export",w,z)})()}(dvJQuery),dvJQuery&&function(b){var k=!1,m={x:null,y:null},p=null,f={init:function(e){function d(){"none"!==b("#"+e.idMenu).css("display")&&(b("#"+e.idMenu).css("opacity",1),clearTimeout(p),p=null)}function g(){"none"!==b("#"+e.idMenu).css("display")&&(b("#"+e.idMenu).css("opacity",.85),clearTimeout(p),p=setTimeout(function(){b("#"+e.idMenu).hide()},
2E3))}"string"===typeof e&&(e={idMenu:e});e=b.extend(!0,{},b.fn.dvContextMenu.defaults,e);e.idMenu?null===document.getElementById(e.idMenu)&&b.error("The menu specified does not exist"):b.error("No menu specified");f.destroy.call(this);this.data("dv-context-menu",e);var r="dv-context-menu-"+e.idMenu;b("html").on("contextmenu."+r+" click."+r,function(){k?k=!1:b("#"+e.idMenu).hide()});b(e.referrer).on("contextmenu."+r+" scroll."+r,function(d){if("none"!==b("#"+e.idMenu).css("display")){var f={x:d.target.scrollLeft,
y:d.target.scrollTop};d=f.x-m.x;var g=f.y-m.y;m=f;f=parseInt(b("#"+e.idMenu).css("top").slice(0,-2))-g;d=parseInt(b("#"+e.idMenu).css("left").slice(0,-2))-d;b("#"+e.idMenu).css({left:d+"px",top:f+"px"})}});b("#"+e.idMenu).on("contextmenu."+r+" mouseenter."+r,d);b("#"+e.idMenu).on("contextmenu."+r+" mouseleave."+r,g);this.on("contextmenu."+r,function(f){f.preventDefault();f.stopPropagation();if(null==e.beforeShow||"function"!==typeof e.beforeShow||e.beforeShow()){var p={x:f.clientX,y:f.clientY};null!=
e.translateMouse&&"function"===typeof e.translateMouse&&e.translateMouse(p);b("#"+e.idMenu).css({left:p.x+"px",top:p.y+"px"});b("#"+e.idMenu).css("opacity",1);b("#"+e.idMenu).show();m={x:f.currentTarget.scrollLeft,y:f.currentTarget.scrollTop};f.skipNextCloseEvent&&(k=f.skipNextCloseEvent);e.dependsOnTextSelection&&(f=b(e.referrer).children('[data-dv-sel-type="us"]'),f.on("contextmenu."+r+" mouseenter."+r,d),f.on("contextmenu."+r+" mouseleave."+r,g))}});return this},destroy:function(){this.each(function(){var e=
b(this),d=e.data("dv-context-menu");void 0!==d&&(b("#"+d.idMenu).hide(),e.removeData("dv-context-menu").off(".dv-context-menu-"+d.idMenu))});b("html").off(".dv-context-menu");return this}};b.fn.dvContextMenu=function(e){if(f[e])return f[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof e&&"string"!==typeof e&&e)b.error("Method "+e+" does not exist on dvJQuery.dvContextMenu");else return f.init.apply(this,arguments)};b.fn.dvContextMenu.defaults={idMenu:null,translateMouse:null,
beforeShow:null,dependsOnTextSelection:!1}}(dvJQuery),dvJQuery&&function(b){function k(a,d){S();var e=b('<div class="minicolors" />'),c=b.minicolors.defaults,h;if(!a.data("minicolors-initialized")){d=b.extend(!0,{},c,d);e.addClass("minicolors-theme-"+d.theme).toggleClass("minicolors-with-opacity",d.opacity);void 0!==d.position&&b.each(d.position.split(" "),function(){e.addClass("minicolors-position-"+this)});c="rgb"===d.format?d.opacity?"25":"20":d.keywords?"11":"7";a.addClass("minicolors-input").data("minicolors-initialized",
!1).data("minicolors-settings",d).prop("size",c).wrap(e).after('<div class="minicolors-panel minicolors-slider-'+d.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>');d.inline||(a.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),
a.next(".minicolors-input-swatch").on("click",function(c){c.preventDefault();a.focus()}));c=a.parent().find(".minicolors-panel");c.on("selectstart",function(){return!1}).end();if(d.swatches&&0!==d.swatches.length)for(c.addClass("minicolors-with-swatches"),c=b('<ul class="minicolors-swatches"></ul>').appendTo(c),h=0;h<d.swatches.length;++h){var l=d.swatches[h];l=J(l)?x(l,!0):P(w(l,!0));b('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(c).data("swatch-color",
d.swatches[h]).find(".minicolors-swatch-color").css({backgroundColor:T(l),opacity:l.a});d.swatches[h]=l}d.inline&&a.parent().addClass("minicolors-inline");r(a,!1);a.data("minicolors-initialized",!0)}}function m(a){var d=a.parent();a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");d.before(a).remove();b(d).off(".minicolors")}function p(a){var b=a.parent(),d=b.find(".minicolors-panel"),c=a.data("minicolors-settings");!a.data("minicolors-initialized")||
a.prop("disabled")||b.hasClass("minicolors-inline")||b.hasClass("minicolors-focus")||(f(),b.addClass("minicolors-focus"),d.stop(!0,!0).fadeIn(c.showSpeed,function(){c.show&&c.show.call(a.get(0))}))}function f(){b(".minicolors-focus").each(function(){var a=b(this),d=a.find(".minicolors-input"),e=a.find(".minicolors-panel"),c=d.data("minicolors-settings");e.fadeOut(c.hideSpeed,function(){c.hide&&"function"===typeof c.hide&&c.hide.call(d.get(0));a.removeClass("minicolors-focus")})})}function e(a,b,e){var c=
a.parents(".minicolors").find(".minicolors-input"),h=c.data("minicolors-settings"),l=a.find("[class$=-picker]"),q=a.offset().left,t=a.offset().top,f=Math.round(b.pageX-q),u=Math.round(b.pageY-t);e=e?h.animationSpeed:0;b.originalEvent.changedTouches&&(f=b.originalEvent.changedTouches[0].pageX-q,u=b.originalEvent.changedTouches[0].pageY-t);0>f&&(f=0);0>u&&(u=0);f>a.width()&&(f=a.width());u>a.height()&&(u=a.height());a.parent().is(".minicolors-slider-wheel")&&l.parent().is(".minicolors-grid")&&(q=75-
f,t=75-u,b=Math.sqrt(q*q+t*t),q=Math.atan2(t,q),0>q&&(q+=2*Math.PI),75<b&&(b=75,f=75-75*Math.cos(q),u=75-75*Math.sin(q)),f=Math.round(f),u=Math.round(u));a.is(".minicolors-grid")?l.stop(!0).animate({top:u+"px",left:f+"px"},e,h.animationEasing,function(){d(c,a)}):l.stop(!0).animate({top:u+"px"},e,h.animationEasing,function(){d(c,a)})}function d(a,b){function d(a,c){if(!a.length||!c)return null;var b=a.offset().left;var h=a.offset().top;return{x:b-c.offset().left+a.outerWidth()/2,y:h-c.offset().top+
a.outerHeight()/2}}var c=a.val();var h=a.attr("data-opacity");var l=a.parent();var e=a.data("minicolors-settings"),t=l.find(".minicolors-input-swatch");var f=l.find(".minicolors-grid");var u=l.find(".minicolors-slider"),k=l.find(".minicolors-opacity-slider");var m=f.find("[class$=-picker]");var r=u.find("[class$=-picker]"),p=k.find("[class$=-picker]");m=d(m,f);r=d(r,u);p=d(p,k);if(b.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(e.control){case "wheel":c=f.width()/
2-m.x;l=f.height()/2-m.y;f=Math.sqrt(c*c+l*l);c=Math.atan2(l,c);0>c&&(c+=2*Math.PI);75<f&&(f=75,m.x=69-75*Math.cos(c),m.y=69-75*Math.sin(c));b=C(f/.75,0,100);h=C(180*c/Math.PI,0,360);m=C(100-Math.floor(r.y*(100/u.height())),0,100);c=M({h:h,s:b,b:m});u.css("backgroundColor",M({h:h,s:b,b:100}));break;case "saturation":h=C(parseInt(m.x*(360/f.width()),10),0,360);b=C(100-Math.floor(r.y*(100/u.height())),0,100);m=C(100-Math.floor(m.y*(100/f.height())),0,100);c=M({h:h,s:b,b:m});u.css("backgroundColor",
M({h:h,s:100,b:m}));l.find(".minicolors-grid-inner").css("opacity",b/100);break;case "brightness":h=C(parseInt(m.x*(360/f.width()),10),0,360);b=C(100-Math.floor(m.y*(100/f.height())),0,100);m=C(100-Math.floor(r.y*(100/u.height())),0,100);c=M({h:h,s:b,b:m});u.css("backgroundColor",M({h:h,s:b,b:100}));l.find(".minicolors-grid-inner").css("opacity",1-m/100);break;default:h=C(360-parseInt(r.y*(360/u.height()),10),0,360),b=C(Math.floor(m.x*(100/f.width())),0,100),m=C(100-Math.floor(m.y*(100/f.height())),
0,100),c=M({h:h,s:b,b:m}),f.css("backgroundColor",M({h:h,s:100,b:100}))}h=e.opacity?parseFloat(1-p.y/k.height()).toFixed(2):1;g(a,c,h)}else t.find("span").css({backgroundColor:c,opacity:h}),z(a,c,h)}function g(a,b,d){var c=a.parent(),h=a.data("minicolors-settings");c=c.find(".minicolors-input-swatch");h.opacity&&a.attr("data-opacity",d);if("rgb"===h.format){b=J(b)?x(b,!0):P(w(b,!0));d=""===a.attr("data-opacity")?1:C(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);if(isNaN(d)||!h.opacity)d=1;b=
1>=a.minicolors("rgbObject").a&&b&&h.opacity?"rgba("+b.r+", "+b.g+", "+b.b+", "+parseFloat(d)+")":"rgb("+b.r+", "+b.g+", "+b.b+")"}else J(b)&&(b=H(b)),b=y(b,h.letterCase);a.val(b);c.find("span").css({backgroundColor:b,opacity:d});z(a,b,d)}function r(a,d){var e;var c=a.parent();var h=a.data("minicolors-settings");var l=c.find(".minicolors-input-swatch");var q=c.find(".minicolors-grid"),t=c.find(".minicolors-slider"),f=c.find(".minicolors-opacity-slider"),u=q.find("[class$=-picker]"),g=t.find("[class$=-picker]"),
k=f.find("[class$=-picker]");if(J(a.val())){var m=H(a.val());(e=C(parseFloat(K(a.val())).toFixed(2),0,1))&&a.attr("data-opacity",e)}else m=y(w(a.val(),!0),h.letterCase);m||(m=y(G(h.defaultValue,!0),h.letterCase));e=U(m);var r=h.keywords?b.map(h.keywords.split(","),function(a){return b.trim(a.toLowerCase())}):[];r=""!==a.val()&&-1<b.inArray(a.val().toLowerCase(),r)?y(a.val()):J(a.val())?x(a.val()):m;d||a.val(r);if(h.opacity){var p=""===a.attr("data-opacity")?1:C(parseFloat(a.attr("data-opacity")).toFixed(2),
0,1);isNaN(p)&&(p=1);a.attr("data-opacity",p);l.find("span").css("opacity",p);d=C(f.height()-f.height()*p,0,f.height());k.css("top",d+"px")}"transparent"===a.val().toLowerCase()&&l.find("span").css("opacity",0);l.find("span").css("backgroundColor",m);switch(h.control){case "wheel":c=C(Math.ceil(.75*e.s),0,q.height()/2);l=e.h*Math.PI/180;h=C(75-Math.cos(l)*c,0,q.width());d=C(75-Math.sin(l)*c,0,q.height());u.css({top:d+"px",left:h+"px"});d=150-e.b/(100/q.height());""===m&&(d=0);g.css("top",d+"px");
t.css("backgroundColor",M({h:e.h,s:e.s,b:100}));break;case "saturation":h=C(5*e.h/12,0,150);d=C(q.height()-Math.ceil(e.b/(100/q.height())),0,q.height());u.css({top:d+"px",left:h+"px"});d=C(t.height()-e.s*(t.height()/100),0,t.height());g.css("top",d+"px");t.css("backgroundColor",M({h:e.h,s:100,b:e.b}));c.find(".minicolors-grid-inner").css("opacity",e.s/100);break;case "brightness":h=C(5*e.h/12,0,150);d=C(q.height()-Math.ceil(e.s/(100/q.height())),0,q.height());u.css({top:d+"px",left:h+"px"});d=C(t.height()-
e.b*(t.height()/100),0,t.height());g.css("top",d+"px");t.css("backgroundColor",M({h:e.h,s:e.s,b:100}));c.find(".minicolors-grid-inner").css("opacity",1-e.b/100);break;default:h=C(Math.ceil(e.s/(100/q.width())),0,q.width()),d=C(q.height()-Math.ceil(e.b/(100/q.height())),0,q.height()),u.css({top:d+"px",left:h+"px"}),d=C(t.height()-e.h/(360/t.height()),0,t.height()),g.css("top",d+"px"),q.css("backgroundColor",M({h:e.h,s:100,b:100}))}a.data("minicolors-initialized")&&z(a,r,p)}function z(a,b,d){var c=
a.data("minicolors-settings"),h=a.data("minicolors-lastChange"),l;if(!h||h.value!==b||h.opacity!==d){a.data("minicolors-lastChange",{value:b,opacity:d});if(c.swatches&&0!==c.swatches.length){h=J(b)?x(b,!0):P(b);var e=-1;for(l=0;l<c.swatches.length;++l)if(h.r===c.swatches[l].r&&h.g===c.swatches[l].g&&h.b===c.swatches[l].b&&h.a===c.swatches[l].a){e=l;break}a.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected");-1!==e&&a.parent().find(".minicolors-swatches .minicolors-swatch").eq(l).addClass("selected")}c.change&&
(c.changeDelay?(clearTimeout(a.data("minicolors-changeTimeout")),a.data("minicolors-changeTimeout",setTimeout(function(){c.change.call(a.get(0),b,d)},c.changeDelay))):c.change.call(a.get(0),b,d));a.trigger("change").trigger("input")}}function B(a){var d=b(a).attr("data-opacity");J(b(a).val())?a=x(b(a).val(),!0):(a=w(b(a).val(),!0),a=P(a));if(!a)return null;void 0!==d&&b.extend(a,{a:parseFloat(d)});return a}function V(a,d){var e=b(a).attr("data-opacity");J(b(a).val())?a=x(b(a).val(),!0):(a=w(b(a).val(),
!0),a=P(a));if(!a)return null;void 0===e&&(e=1);return d?"rgba("+a.r+", "+a.g+", "+a.b+", "+parseFloat(e)+")":"rgb("+a.r+", "+a.g+", "+a.b+")"}function y(a,b){return"uppercase"===b?a.toUpperCase():a.toLowerCase()}function w(a,b){a=a.replace(/^#/g,"");if(!a.match(/^[A-F0-9]{3,6}/ig)||3!==a.length&&6!==a.length)return"";3===a.length&&b&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a}function x(a,b){a=a.replace(/[^\d,.]/g,"").split(",");a[0]=C(parseInt(a[0],10),0,255);a[1]=C(parseInt(a[1],10),0,255);
a[2]=C(parseInt(a[2],10),0,255);a[3]&&(a[3]=C(parseFloat(a[3],10),0,1));return b?a[3]?{r:a[0],g:a[1],b:a[2],a:a[3]}:{r:a[0],g:a[1],b:a[2]}:"undefined"!==typeof a[3]&&1>=a[3]?"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")":"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function G(a,b){return J(a)?x(a):w(a,b)}function C(a,b,d){a<b&&(a=b);a>d&&(a=d);return a}function J(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?!0:!1}function K(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&
6===a.length?a[4]:"1"}function H(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function T(a){var d=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];b.each(d,function(a,c){1===c.length&&(d[a]="0"+c)});return"#"+d.join("")}function M(a){var b=T,d,c;var h=Math.round(a.h);var l=Math.round(255*
a.s/100);a=Math.round(255*a.b/100);if(0===l)h=d=c=a;else{l=(255-l)*a/255;var e=h%60*(a-l)/60;360===h&&(h=0);60>h?(h=a,c=l,d=l+e):120>h?(d=a,c=l,h=a-e):180>h?(d=a,h=l,c=l+e):240>h?(c=a,h=l,d=a-e):300>h?(c=a,d=l,h=l+e):360>h?(h=a,d=l,c=a-e):c=d=h=0}return b({r:Math.round(h),g:Math.round(d),b:Math.round(c)})}function U(a){a=P(a);var b={h:0,s:0,b:0},d=Math.max(a.r,a.g,a.b),c=d-Math.min(a.r,a.g,a.b);b.b=d;b.s=0!==d?255*c/d:0;b.h=0!==b.s?a.r===d?(a.g-a.b)/c:a.g===d?2+(a.b-a.r)/c:4+(a.r-a.g)/c:-1;b.h*=60;
0>b.h&&(b.h+=360);b.s*=100/255;b.b*=100/255;0===b.s&&(b.h=360);return b}function P(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}}function S(){b([document]).on("mousedown.minicolors touchstart.minicolors",function(a){b(a.target).parents().add(a.target).hasClass("minicolors")||f()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(a){var d=b(this);a.preventDefault();b(a.delegateTarget).data("minicolors-target",
d);e(d,a,!0)}).on("mousemove.minicolors touchmove.minicolors",function(a){var d=b(a.delegateTarget).data("minicolors-target");d&&e(d,a)}).on("mouseup.minicolors touchend.minicolors",function(){b(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(a){a.preventDefault();var d=b(this);a=d.parents(".minicolors").find(".minicolors-input");d=d.data("swatch-color");g(a,d,K(d));r(a)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(a){var d=
b(this).parent().find(".minicolors-input");a.preventDefault();p(d)}).on("focus.minicolors",".minicolors-input",function(){var a=b(this);a.data("minicolors-initialized")&&p(a)}).on("blur.minicolors",".minicolors-input",function(){var a=b(this),d=a.data("minicolors-settings");if(a.data("minicolors-initialized")){var e=d.keywords?b.map(d.keywords.split(","),function(a){return b.trim(a.toLowerCase())}):[];if(""!==a.val()&&-1<b.inArray(a.val().toLowerCase(),e))var c=a.val();else e=J(a.val())?x(a.val(),
!0):(e=w(a.val(),!0))?P(e):null,c=null===e?d.defaultValue:"rgb"===d.format?d.opacity?x("rgba("+e.r+","+e.g+","+e.b+","+a.attr("data-opacity")+")"):x("rgb("+e.r+","+e.g+","+e.b+")"):T(e);e=d.opacity?a.attr("data-opacity"):1;"transparent"===c.toLowerCase()&&(e=0);a.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",e);a.val(c);""===a.val()&&a.val(G(d.defaultValue,!0));a.val(y(a.val(),d.letterCase))}}).on("keydown.minicolors",".minicolors-input",function(a){var d=b(this);if(d.data("minicolors-initialized"))switch(a.keyCode){case 9:f();
break;case 13:case 27:f(),d.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var a=b(this);a.data("minicolors-initialized")&&r(a,!0)}).on("paste.minicolors",".minicolors-input",function(){var a=b(this);a.data("minicolors-initialized")&&setTimeout(function(){r(a,!0)},1)})}b.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,
position:"bottom right",show:null,showSpeed:100,theme:"default",swatches:[]}};b.extend(b.fn,{minicolors:function(a,d){switch(a){case "destroy":return b(this).each(function(){m(b(this))}),b(this);case "hide":return f(),b(this);case "opacity":if(void 0===d)return b(this).attr("data-opacity");b(this).each(function(){r(b(this).attr("data-opacity",d))});return b(this);case "rgbObject":return B(b(this),"rgbaObject"===a);case "rgbString":case "rgbaString":return V(b(this),"rgbaString"===a);case "settings":if(void 0===
d)return b(this).data("minicolors-settings");b(this).each(function(){var a=b(this).data("minicolors-settings")||{};m(b(this));b(this).minicolors(b.extend(!0,a,d))});return b(this);case "show":return p(b(this).eq(0)),b(this);case "value":if(void 0===d)return b(this).val();b(this).each(function(){"object"===typeof d&&null!==d?(d.opacity&&b(this).attr("data-opacity",C(d.opacity,0,1)),d.color&&b(this).val(d.color)):b(this).val(d);r(b(this))});return b(this);default:return"create"!==a&&(d=a),b(this).each(function(){k(b(this),
d)}),b(this)}}})}(dvJQuery),dvJQuery&&function(b){var k,m=function(){var f=b(this);setTimeout(function(){f.find(":dvUi-dvButton").dvButton("refresh")},1)},p=function(f){var e=f.name,d=f.form,g=b([]);e&&(e=e.replace(/'/g,"\\'"),g=d?b(d).find("[name='"+e+"'][type=radio]"):b("[name='"+e+"'][type=radio]",f.ownerDocument).filter(function(){return!this.form}));return g};b.widget("dvUi.dvButton",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null},
setActive:null},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var f=this,e=this.options,d="checkbox"===this.type||"radio"===this.type,g=d?"":"dvUi-state-active";null===e.label&&(e.label="input"===this.type?
this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){e.disabled||this===k&&b(this).addClass("dvUi-state-active")}).bind("mouseleave"+this.eventNamespace,function(){e.disabled||b(this).removeClass(g)}).bind("click"+this.eventNamespace,function(b){e.disabled&&(b.preventDefault(),b.stopImmediatePropagation())});
this._on({focus:function(){this.buttonElement.addClass("dvUi-state-focus")},blur:function(){this.buttonElement.removeClass("dvUi-state-focus")}});d&&this.element.bind("change"+this.eventNamespace,function(){f.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled)return!1;b(this).addClass("dvUi-state-active");f.buttonElement.attr("aria-pressed",
"true");var d=f.element[0];p(d).not(d).map(function(){return b(this).dvButton("widget")[0]}).removeClass("dvUi-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(e.disabled)return!1;b(this).addClass("dvUi-state-active");k=this;f.document.one("mouseup",function(){k=null})}).bind("mouseup"+this.eventNamespace,function(){if(e.disabled)return!1;b(this).removeClass("dvUi-state-active")}).bind("keydown"+this.eventNamespace,function(d){if(e.disabled)return!1;
d.keyCode!==b.dvUi.keyCode.SPACE&&d.keyCode!==b.dvUi.keyCode.ENTER||b(this).addClass("dvUi-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){b(this).removeClass("dvUi-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(d){d.keyCode===b.dvUi.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",e.disabled);this._resetButton()},_determineButtonType:function(){this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?
this.type="radio":this.element.is("input")?this.type="input":this.type="button";if("checkbox"===this.type||"radio"===this.type){var b=this.element.parents().last();var e="label[for='"+this.element.attr("id")+"']";this.buttonElement=b.find(e);this.buttonElement.length||(b=b.length?b.siblings():this.element.siblings(),this.buttonElement=b.filter(e),this.buttonElement.length||(this.buttonElement=b.find(e)));this.element.addClass("dvUi-helper-hidden-accessible");(b=this.element.is(":checked"))&&this.buttonElement.addClass("dvUi-state-active");
this.buttonElement.prop("aria-pressed",b)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("dvUi-helper-hidden-accessible");this.buttonElement.removeClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all dvUi-state-active dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".dvUi-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(b,e){this._super(b,e);"disabled"===b?(this.widget().toggleClass("dvUi-state-disabled",!!e),this.element.prop("disabled",!!e),e&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("dvUi-state-focus"):this.buttonElement.removeClass("dvUi-state-focus dvUi-state-active"))):this._resetButton()},refresh:function(){var f=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("dvUi-button-disabled"),
e=this;f!==this.options.disabled&&this._setOption("disabled",f);"radio"===this.type?p(this.element[0]).each(function(){b(this).is(":checked")?(b(this).dvButton("widget").addClass("dvUi-state-active").attr("aria-pressed","true"),e._trigger("setActive")):b(this).dvButton("widget").removeClass("dvUi-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?(this.buttonElement.addClass("dvUi-state-active").attr("aria-pressed","true"),e._trigger("setActive")):this.buttonElement.removeClass("dvUi-state-active").attr("aria-pressed",
"false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var f=this.buttonElement.removeClass("dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only"),e=b("<span></span>",this.document[0]).addClass("dvUi-button-text").html(this.options.label).appendTo(f.empty()).text(),d=this.options.icons,g=d.primary&&d.secondary,k=[];d.primary||d.secondary?
(this.options.text&&k.push("dvUi-button-text-icon"+(g?"s":d.primary?"-primary":"-secondary")),d.primary&&f.prepend("<span class='dvUi-button-icon-primary dvUi-icon "+d.primary+"'></span>"),d.secondary&&f.append("<span class='dvUi-button-icon-secondary dvUi-icon "+d.secondary+"'></span>"),this.options.text||(k.push(g?"dvUi-button-icons-only":"dvUi-button-icon-only"),this.hasTitle||f.attr("title",b.trim(e)))):k.push("dvUi-button-text-only");f.addClass(k.join(" "))}}});b.widget("dvUi.dvButtonset",{version:"1.11.2",
options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(dvUi-dvButton)",setActive:null},_create:function(){this.element.addClass("dvUi-buttonset");this.refresh()},_init:function(){this.refresh()},_setOption:function(b,e){"disabled"===b&&this.buttons.dvButton("option",b,e);this._super(b,e)},refresh:function(){var f="rtl"===this.element.css("direction"),e=this.element.find(this.options.items),d=e.filter(":dvUi-dvButton");e.not(":dvUi-dvButton").dvButton({setActive:this.options.setActive});
d.dvButton("refresh");this.buttons=e.map(function(){return b(this).dvButton("widget")[0]}).removeClass("dvUi-corner-all dvUi-corner-left dvUi-corner-right").filter(":first").addClass(f?"dvUi-corner-right":"dvUi-corner-left").end().filter(":last").addClass(f?"dvUi-corner-left":"dvUi-corner-right").end().end()},_destroy:function(){this.element.removeClass("dvUi-buttonset");this.buttons.map(function(){return b(this).dvButton("widget")[0]}).removeClass("dvUi-corner-left dvUi-corner-right").end().dvButton("destroy")}});
b.widget("dvUi.dvDialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(f){var e=b(this).css(f).offset().top;0>e&&b(this).css("top",f.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,
resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),
index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("dvUi-dialog-content dvUi-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&b.fn.draggable&&this._makeDraggable();this.options.resizable&&b.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},
_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var f=this.options.appendTo;return f&&(f.jquery||f.nodeType)?b(f):this.document.find(f||"body").eq(0)},_destroy:function(){var b=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("dvUi-dialog-content dvUi-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var e=b.parent.children().eq(b.index);
e.length&&e[0]!==this.element[0]?e.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:b.noop,enable:b.noop,close:function(f){var e,d=this;if(this._isOpen&&!1!==this._trigger("beforeClose",f)){this._isOpen=!1;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").focus().length)try{(e=this.document[0].activeElement)&&"body"!==e.nodeName.toLowerCase()&&b(e).blur()}catch(g){}this._hide(this.uiDialog,
this.options.hide,function(){d._trigger("close",f)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(f,e){var d=!1,g=this.uiDialog.siblings(".dvUi-front:visible").map(function(){return+b(this).css("z-index")}).get();g=Math.max.apply(null,g);g>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",g+1),d=!0);d&&!e&&this._trigger("focus",f);return d},open:function(){var f=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=
!0,this.opener=b(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){f._focusTabbable();f._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},refresh:function(b){b&&(this._setOption("maxHeight",b),this._size());this._position()},_focusTabbable:function(){var b=this._focusedElement;b||(b=this.element.find("[autofocus]"));
b.length||(b=this.element.find(":tabbable"));b.length||(b=this.uiDialogButtonPane.find(":tabbable"));b.length||(b=this.uiDialogTitlebarClose.filter(":tabbable"));b.length||(b=this.uiDialog);b.eq(0).focus()},_keepFocus:function(f){function e(){var d=this.document[0].activeElement;this.uiDialog[0]===d||b.contains(this.uiDialog[0],d)||this._focusTabbable()}f.preventDefault();e.call(this);this._delay(e)},_createWrapper:function(){this.uiDialog=b("<div>").addClass("dvUi-dialog dvUi-widget dvUi-widget-content dvUi-corner-all dvUi-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(f){if(this.options.closeOnEscape&&!f.isDefaultPrevented()&&f.keyCode&&f.keyCode===b.dvUi.keyCode.ESCAPE)f.preventDefault(),this.close(f);else if(f.keyCode===b.dvUi.keyCode.TAB&&!f.isDefaultPrevented()){var e=this.uiDialog.find(":tabbable"),d=e.filter(":first"),g=e.filter(":last");f.target!==g[0]&&f.target!==this.uiDialog[0]||f.shiftKey?f.target!==d[0]&&f.target!==
this.uiDialog[0]||!f.shiftKey||(this._delay(function(){g.focus()}),f.preventDefault()):(this._delay(function(){d.focus()}),f.preventDefault())}},mousedown:function(b){this._moveToTop(b)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){this.uiDialogTitlebar=b("<div>").addClass("dvUi-dialog-titlebar dvUi-widget-header dvUi-corner-all dvUi-helper-clearfix").prependTo(this.uiDialog);
this._on(this.uiDialogTitlebar,{mousedown:function(e){b(e.target).closest(".dvUi-dialog-titlebar-close")||this.uiDialog.focus()}});this.uiDialogTitlebarClose=b('<div class="dvUi-button"><svg width="100%" height="100%" viewbox="0 0 512 512"><path d="M490.767,471.211L275.512,255.989L490.658,40.79c5.4-5.402,5.4-14.153,0-19.555c-5.402-5.401-14.152-5.401-19.556,0l-215.148,215.2L40.79,21.302c-5.402-5.402-14.153-5.402-19.555,0c-5.401,5.402-5.401,14.153,0,19.555l215.167,215.135L21.234,471.211c-5.401,5.401-5.401,14.152,0,19.556c5.402,5.4,14.153,5.4,19.555,0l215.169-215.221l215.252,215.221c5.402,5.4,14.152,5.4,19.556,0C496.167,485.363,496.167,476.612,490.767,471.211z"/></svg></div>').addClass("dvUi-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);
this._on(this.uiDialogTitlebarClose,{click:function(b){b.preventDefault();this.close(b)}});var f=b("<span>").uniqueId().addClass("dvUi-dialog-title").prependTo(this.uiDialogTitlebar);this._title(f);this.uiDialog.attr({"aria-labelledby":f.attr("id")})},_title:function(b){this.options.title||b.html("&#160;");b.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=b("<div>").addClass("dvUi-dialog-buttonpane dvUi-widget-content dvUi-helper-clearfix");this.uiDialogButtonSpacer=
b("<div>").addClass("dvUi-dialog-spacer");this.uiButtonSet=b("<div>").addClass("dvUi-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var f=this,e=this.options.buttons;this.uiDialogButtonPane.remove();this.uiDialogButtonSpacer.remove();this.uiButtonSet.empty();b.isEmptyObject(e)||b.isArray(e)&&!e.length?this.uiDialog.removeClass("dvUi-dialog-buttons"):(b.each(e,function(d,e){e=b.isFunction(e)?{click:e,text:d}:e;e=b.extend({type:"button"},e);var g=
e.click;e.click=function(){g.apply(f.element[0],arguments)};d={icons:e.icons,text:e.showText};delete e.icons;delete e.showText;b("<button></button>",e).dvButton(d).appendTo(f.uiButtonSet)}),this.uiDialog.addClass("dvUi-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),this.uiDialogButtonSpacer.insertBefore(this.uiDialogButtonPane))},_makeDraggable:function(){function f(b){return{position:b.position,offset:b.offset}}var e=this,d=this.options;this.uiDialog.draggable({cancel:".dvUi-dialog-content, .dvUi-dialog-titlebar-close",
handle:".dvUi-dialog-titlebar",containment:"document",start:function(d,k){b(this).addClass("dvUi-dialog-dragging");e._blockFrames();e._trigger("dragStart",d,f(k))},drag:function(b,d){e._trigger("drag",b,f(d))},stop:function(g,k){var m=k.offset.left-e.document.scrollLeft(),r=k.offset.top-e.document.scrollTop();d.position={my:"left top",at:"left"+(0<=m?"+":"")+m+" top"+(0<=r?"+":"")+r,of:e.window};b(this).removeClass("dvUi-dialog-dragging");e._unblockFrames();e._trigger("dragStop",g,f(k))}})},_makeResizable:function(){function f(b){return{originalPosition:b.originalPosition,
originalSize:b.originalSize,position:b.position,size:b.size}}var e=this,d=this.options,g=d.resizable,k=this.uiDialog.css("position");g="string"===typeof g?g:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".dvUi-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,g){b(this).addClass("dvUi-dialog-resizing");e._blockFrames();e._trigger("resizeStart",d,f(g))},resize:function(b,
d){e._trigger("resize",b,f(d))},stop:function(g,k){var m=e.uiDialog.offset(),r=m.left-e.document.scrollLeft();m=m.top-e.document.scrollTop();d.height=e.uiDialog.height();d.width=e.uiDialog.width();d.position={my:"left top",at:"left"+(0<=r?"+":"")+r+" top"+(0<=m?"+":"")+m,of:e.window};b(this).removeClass("dvUi-dialog-resizing");e._unblockFrames();e._trigger("resizeStop",g,f(k))}}).css("position",k)},_trackFocus:function(){this._on(this.widget(),{focusin:function(f){this._makeFocusTarget();this._focusedElement=
b(f.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var f=this._trackingInstances(),e=b.inArray(this,f);-1!==e&&f.splice(e,1)},_trackingInstances:function(){var b=this.document.data("dvUi-dvDialog-instances");b||(b=[],this.document.data("dvUi-dvDialog-instances",b));return b},_minHeight:function(){var b=this.options;return"auto"===b.height?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(){var b=this.uiDialog.is(":visible");
b||this.uiDialog.show();this.uiDialog.position(this.options.position);b||this.uiDialog.hide()},_setOptions:function(f){var e=this,d=!1,g={};b.each(f,function(b,f){e._setOption(b,f);b in e.sizeRelatedOptions&&(d=!0);b in e.resizableRelatedOptions&&(g[b]=f)});d&&(this._size(),this._position());this.uiDialog.is(":data(dvUi-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(b,e){var d,f=this.uiDialog;"dialogClass"===b&&f.removeClass(this.options.dialogClass).addClass(e);"disabled"!==
b&&(this._super(b,e),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),"buttons"===b&&this._createButtons(),"draggable"===b&&((d=f.is(":data(dvUi-draggable)"))&&!e&&f.draggable("destroy"),!d&&e&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&((d=f.is(":data(dvUi-resizable)"))&&!e&&f.resizable("destroy"),d&&"string"===typeof e&&f.resizable("option","handles",e),d||!1===e||this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".dvUi-dialog-title")))},
_size:function(){var b=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});b.minWidth>b.width&&(b.width=b.minWidth);var e=this.uiDialog.css({height:"auto",width:b.width}).outerHeight();var d=Math.max(0,b.minHeight-e);var g="number"===typeof b.maxHeight?Math.max(0,b.maxHeight-e):"none";"auto"===b.height?this.element.css({minHeight:d,maxHeight:g,height:"auto"}):this.element.height(Math.max(0,b.height-e));this.uiDialog.is(":data(dvUi-resizable)")&&this.uiDialog.resizable("option",
"minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var f=b(this);return b("<div>").css({position:"absolute",width:f.outerWidth(),height:f.outerHeight()}).appendTo(f.parent()).offset(f.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(f){return b(f.target).closest(".dvUi-dialog").length?!0:!!b(f.target).closest(".dvUi-datepicker").length},_createOverlay:function(){if(this.options.modal){var f=
!0;this._delay(function(){f=!1});this.document.data("dvUi-dvDialog-overlays")||this._on(this.document,{focusin:function(b){f||this._allowInteraction(b)||(b.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=b("<div>").addClass("dvUi-widget-overlay dvUi-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("dvUi-dvDialog-overlays",(this.document.data("dvUi-dvDialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&
this.overlay){var b=this.document.data("dvUi-dvDialog-overlays")-1;b?this.document.data("dvUi-dvDialog-overlays",b):this.document.unbind("focusin").removeData("dvUi-dvDialog-overlays");this.overlay.remove();this.overlay=null}}});b.widget("dvUi.dvMenu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"dvUi-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;
this.mouseHandled=!1;this.element.uniqueId().addClass("dvUi-menu dvUi-widget dvUi-widget-content").toggleClass("dvUi-menu-icons",!!this.element.find(".dvUi-icon").length).attr({role:this.options.role,tabIndex:0});this.options.disabled&&this.element.addClass("dvUi-state-disabled").attr("aria-disabled","true");this._on({"mousedown .dvUi-menu-item":function(b){b.preventDefault()},"click .dvUi-menu-item":function(f){var e=b(f.target);!this.mouseHandled&&e.not(".dvUi-state-disabled").length&&(this.select(f),
f.isPropagationStopped()||(this.mouseHandled=!0),e.has(".dvUi-menu").length?this.expand(f):!this.element.is(":focus")&&b(this.document[0].activeElement).closest(".dvUi-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".dvUi-menu").length&&clearTimeout(this.timer)))},"mouseenter .dvUi-menu-item":function(f){if(!this.previousFilter){var e=b(f.currentTarget);e.siblings(".dvUi-state-active").removeClass("dvUi-state-active");this.focus(f,e)}},mouseleave:"collapseAll",
"mouseleave .dvUi-menu":"collapseAll",focus:function(b,e){var d=this.active||this.element.find(this.options.items).eq(0);e||this.focus(b,d)},blur:function(f){this._delay(function(){b.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(f)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){this._closeOnDocumentClick(b)&&this.collapseAll(b);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".dvUi-menu").addBack().removeClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-menu-icons dvUi-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".dvUi-menu-item").removeClass("dvUi-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("dvUi-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var f=b(this);f.data("dvUi-dvMenu-submenu-carat")&&f.remove()});this.element.find(".dvUi-menu-divider").removeClass("dvUi-menu-divider dvUi-widget-content")},_keydown:function(f){var e=!0;switch(f.keyCode){case b.dvUi.keyCode.PAGE_UP:this.previousPage(f);
break;case b.dvUi.keyCode.PAGE_DOWN:this.nextPage(f);break;case b.dvUi.keyCode.HOME:this._move("first","first",f);break;case b.dvUi.keyCode.END:this._move("last","last",f);break;case b.dvUi.keyCode.UP:this.previous(f);break;case b.dvUi.keyCode.DOWN:this.next(f);break;case b.dvUi.keyCode.LEFT:this.collapse(f);break;case b.dvUi.keyCode.RIGHT:this.active&&!this.active.is(".dvUi-state-disabled")&&this.expand(f);break;case b.dvUi.keyCode.ENTER:case b.dvUi.keyCode.SPACE:this._activate(f);break;case b.dvUi.keyCode.ESCAPE:this.collapse(f);
break;default:e=!1;var d=this.previousFilter||"";var g=String.fromCharCode(f.keyCode);var k=!1;clearTimeout(this.filterTimer);g===d?k=!0:g=d+g;d=this._filterMenuItems(g);d=k&&-1!==d.index(this.active.next())?this.active.nextAll(".dvUi-menu-item"):d;d.length||(g=String.fromCharCode(f.keyCode),d=this._filterMenuItems(g));d.length?(this.focus(f,d),this.previousFilter=g,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}e&&f.preventDefault()},_activate:function(b){this.active.is(".dvUi-state-disabled")||
(this.active.is("[aria-haspopup='true']")?this.expand(b):this.select(b))},refresh:function(){var f=this,e=this.options.icons.submenu;var d=this.element.find(this.options.menus);this.element.toggleClass("dvUi-menu-icons",!!this.element.find(".dvUi-icon").length);d.filter(":not(.dvUi-menu)").addClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var d=b(this),f=d.parent(),k=b("<span>").addClass("dvUi-menu-icon dvUi-icon "+
e).data("dvUi-dvMenu-submenu-carat",!0);f.attr("aria-haspopup","true").prepend(k);d.attr("aria-labelledby",f.attr("id"))});d=d.add(this.element).find(this.options.items);d.not(".dvUi-menu-item").each(function(){var d=b(this);f._isDivider(d)&&d.addClass("dvUi-widget-content dvUi-menu-divider")});d.not(".dvUi-menu-item, .dvUi-menu-divider").addClass("dvUi-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});d.filter(".dvUi-state-disabled").attr("aria-disabled","true");this.active&&!b.contains(this.element[0],
this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(b,e){"icons"===b&&this.element.find(".dvUi-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu);"disabled"===b&&this.element.toggleClass("dvUi-state-disabled",!!e).attr("aria-disabled",e);this._super(b,e)},focus:function(b,e){this.blur(b,b&&"focus"===b.type);this._scrollIntoView(e);this.active=e.first();var d=this.active.addClass("dvUi-state-focus").removeClass("dvUi-state-active");
this.options.role&&this.element.attr("aria-activedescendant",d.attr("id"));this.active.parent().closest(".dvUi-menu-item").addClass("dvUi-state-active");b&&"keydown"===b.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);d=e.children(".dvUi-menu");d.length&&b&&/^mouse/.test(b.type)&&this._startOpening(d);this.activeMenu=e.parent();this._trigger("focus",b,{item:e})},_scrollIntoView:function(f){if(this._hasScroll()){var e=parseFloat(b.css(this.activeMenu[0],"borderTopWidth"))||
0;var d=parseFloat(b.css(this.activeMenu[0],"paddingTop"))||0;e=f.offset().top-this.activeMenu.offset().top-e-d;d=this.activeMenu.scrollTop();var g=this.activeMenu.height();f=f.outerHeight();0>e?this.activeMenu.scrollTop(d+e):e+f>g&&this.activeMenu.scrollTop(d+e-g+f)}},blur:function(b,e){e||clearTimeout(this.timer);this.active&&(this.active.removeClass("dvUi-state-focus"),this.active=null,this._trigger("blur",b,{item:this.active}))},_startOpening:function(b){clearTimeout(this.timer);"true"===b.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(b)},this.delay))},_open:function(f){var e=b.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".dvUi-menu").not(f.parents(".dvUi-menu")).hide().attr("aria-hidden","true");f.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(f,e){clearTimeout(this.timer);this.timer=this._delay(function(){var d=e?this.element:b(f&&f.target).closest(this.element.find(".dvUi-menu"));
d.length||(d=this.element);this._close(d);this.blur(f);this.activeMenu=d},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element);b.find(".dvUi-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".dvUi-state-active").not(".dvUi-state-focus").removeClass("dvUi-state-active")},_closeOnDocumentClick:function(f){return!b(f.target).closest(".dvUi-menu").length},_isDivider:function(b){return!/[^\-\u2014\u2013\s]/.test(b.text())},collapse:function(b){var e=
this.active&&this.active.parent().closest(".dvUi-menu-item",this.element);e&&e.length&&(this._close(),this.focus(b,e))},expand:function(b){var e=this.active&&this.active.children(".dvUi-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(b,e)}))},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".dvUi-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".dvUi-menu-item").length},_move:function(b,e,d){var f;this.active&&(f="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".dvUi-menu-item").eq(-1):this.active[b+"All"](".dvUi-menu-item").eq(0));f&&f.length&&this.active||(f=this.activeMenu.find(this.options.items)[e]());this.focus(d,f)},nextPage:function(f){var e;if(!this.active)this.next(f);else if(!this.isLastItem())if(this._hasScroll()){var d=this.active.offset().top;var g=this.element.height();this.active.nextAll(".dvUi-menu-item").each(function(){e=
b(this);return 0>e.offset().top-d-g});this.focus(f,e)}else this.focus(f,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())},previousPage:function(f){var e;if(!this.active)this.next(f);else if(!this.isFirstItem())if(this._hasScroll()){var d=this.active.offset().top;var g=this.element.height();this.active.prevAll(".dvUi-menu-item").each(function(){e=b(this);return 0<e.offset().top-d+g});this.focus(f,e)}else this.focus(f,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(f){this.active=this.active||b(f.target).closest(".dvUi-menu-item");var e={item:this.active};this.active.has(".dvUi-menu").length||this.collapseAll(f,!0);this._trigger("select",f,e)},_filterMenuItems:function(f){f=f.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var e=new RegExp("^"+f,"i");return this.activeMenu.find(this.options.items).filter(".dvUi-menu-item").filter(function(){return e.test(b.trim(b(this).text()))})}});b.widget("dvUi.dvSelectmenu",
{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"dvUi-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"};this._drawButton();this._drawMenu();this.options.disabled&&this.disable()},_drawButton:function(){var f=this,e=this.element.attr("tabindex");
this.label=b("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(b){this.button.focus();b.preventDefault()}});this.element.hide();this.button=b("<span>",{"class":"dvUi-selectmenu-button dvUi-widget dvUi-state-default dvUi-corner-all",tabindex:e||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);b("<span>",{"class":"dvUi-icon "+
this.options.icons.button}).prependTo(this.button);this.buttonText=b("<span>",{"class":"dvUi-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){f.menuItems||f._refreshMenu()});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var f=this;this.menu=b("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,
id:this.ids.menu});this.menuWrap=b("<div>",{"class":"dvUi-selectmenu-menu dvUi-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.dvMenu({role:"listbox",select:function(b,d){b.preventDefault();f._setSelection();f._select(d.item.data("dvUi-dvSelectmenu-item"),b)},focus:function(b,d){d=d.item.data("dvUi-dvSelectmenu-item");null!=f.focusIndex&&d.index!==f.focusIndex&&(f._trigger("focus",b,{item:d}),f.isOpen||f._select(d,b));f.focusIndex=d.index;f.button.attr("aria-activedescendant",
f.menuItems.eq(d.index).attr("id"))}}).dvMenu("instance");this.menu.addClass("dvUi-corner-bottom").removeClass("dvUi-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var b=this.element.find("option");
b.length&&(this._parseOptions(b),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".dvUi-selectmenu-optgroup"),b=this._getSelectedItem(),this.menuInstance.focus(null,b),this._setAria(b.data("dvUi-dvSelectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(b){this.options.disabled||(this.menuItems?(this.menu.find(".dvUi-state-focus").removeClass("dvUi-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):
this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",b))},_position:function(){this.menuWrap.position(b.extend({of:this.button},this.options.position))},close:function(b){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",b))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(f,e){var d=this,
g="";b.each(e,function(e,k){k.optgroup!==g&&(b("<li>",{"class":"dvUi-selectmenu-optgroup dvUi-menu-divider"+(k.element.parent("optgroup").prop("disabled")?" dvUi-state-disabled":""),text:k.optgroup}).appendTo(f),g=k.optgroup);d._renderItemData(f,k)})},_renderItemData:function(b,e){return this._renderItem(b,e).data("dvUi-dvSelectmenu-item",e)},_renderItem:function(f,e){var d=b("<li>",{text:e.label});e.disabled&&d.addClass("dvUi-state-disabled");e.element.attr("data-class")&&d.addClass("dv-SelectIcon").addClass(e.element.attr("data-class"));
return d.appendTo(f)},_setText:function(b,e){e?b.text(e):b.html("&#160;")},_move:function(b,e){var d=".dvUi-menu-item";if(this.isOpen)var f=this.menuItems.eq(this.focusIndex);else f=this.menuItems.eq(this.element[0].selectedIndex),d+=":not(.dvUi-state-disabled)";b="first"===b||"last"===b?f["first"===b?"prevAll":"nextAll"](d).eq(-1):f[b+"All"](d).eq(0);b.length&&this.menuInstance.focus(e,b)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(b){this[this.isOpen?
"close":"open"](b)},_setSelection:function(){if(this.range){if(window.getSelection){var b=window.getSelection();b.removeAllRanges();b.addRange(this.range)}else this.range.select();this.button.focus()}},_documentClick:{mousedown:function(f){this.isOpen&&(b(f.target).closest(".dvUi-selectmenu-menu, #"+this.ids.button).length||this.close(f))}},_buttonEvents:{mousedown:function(){if(window.getSelection){var b=window.getSelection();b.rangeCount&&(this.range=b.getRangeAt(0))}else this.range=document.selection.createRange()},
click:function(b){this._setSelection();this._toggle(b)},keydown:function(f){var e=!0;switch(f.keyCode){case b.dvUi.keyCode.TAB:case b.dvUi.keyCode.ESCAPE:this.close(f);e=!1;break;case b.dvUi.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(f);break;case b.dvUi.keyCode.UP:f.altKey?this._toggle(f):this._move("prev",f);break;case b.dvUi.keyCode.DOWN:f.altKey?this._toggle(f):this._move("next",f);break;case b.dvUi.keyCode.SPACE:this.isOpen?this._selectFocusedItem(f):this._toggle(f);break;case b.dvUi.keyCode.LEFT:this._move("prev",
f);break;case b.dvUi.keyCode.RIGHT:this._move("next",f);break;case b.dvUi.keyCode.HOME:case b.dvUi.keyCode.PAGE_UP:this._move("first",f);break;case b.dvUi.keyCode.END:case b.dvUi.keyCode.PAGE_DOWN:this._move("last",f);break;default:this.menu.trigger(f),e=!1}e&&f.preventDefault()}},_selectFocusedItem:function(b){var e=this.menuItems.eq(this.focusIndex);e.hasClass("dvUi-state-disabled")||this._select(e.data("dvUi-dvSelectmenu-item"),b)},_select:function(b,e){var d=this.element[0].selectedIndex;this.element[0].selectedIndex=
b.index;this._setText(this.buttonText,b.label);this._setAria(b);this._trigger("select",e,{item:b});b.index!==d&&this._trigger("change",e,{item:b});this.close(e)},_setAria:function(b){b=this.menuItems.eq(b.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b});this.menu.attr("aria-activedescendant",b)},_setOption:function(b,e){"icons"===b&&this.button.find("span.dvUi-icon").removeClass(this.options.icons.button).addClass(e.button);this._super(b,e);"appendTo"===b&&this.menuWrap.appendTo(this._appendTo());
"disabled"===b&&(this.menuInstance.option("disabled",e),this.button.toggleClass("dvUi-state-disabled",e).attr("aria-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0));"width"===b&&this._resizeButton()},_appendTo:function(){var f=this.options.appendTo;f&&(f=f.jquery||f.nodeType?b(f):this.document.find(f).eq(0));f&&f[0]||(f=this.element.closest(".dvUi-front"));f.length||(f=this.document[0].body);return f},_toggleAttr:function(){this.button.toggleClass("dvUi-corner-top",
this.isOpen).toggleClass("dvUi-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("dvUi-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var b=this.options.width;b||(b=this.element.show().outerWidth(),this.element.hide());this.button.outerWidth(b)},_resizeMenu:function(){},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(f){var e=[];f.each(function(d,f){f=b(f);var g=
f.parent("optgroup");e.push({element:f,index:d,value:f.attr("value"),label:f.text(),optgroup:g.attr("label")||"",disabled:g.prop("disabled")||f.prop("disabled")})});this.items=e},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}})}(dvJQuery),dvJQuery.fn.HasDocuViewarePlugins=!0)}},DocuViewareConstants={MAX_PAGE_TRANSFER_RETRIES:10,IE_MAX_SCROLL_TOP_LIMIT:153E4},DocuViewareEncodingUtilities={File:{New:function(b,
k,m){b={blob:new Blob([new Uint8Array(b)],{type:k}),type:k,lastModified:new Date(Date.now()),name:m,slice:function(b,f){return this.blob.slice(b,f)}};b.size=b.blob.size;return b}},TypedArray:{Uint8Array:function(b){return window.Uint8Array?new window.Uint8Array(b):new DocuViewareEncodingUtilities.TypedArray.TypedArray(b)},subarray:function(b,k){return this.slice(b,k)},set_:function(b,k){2>arguments.length&&(k=0);for(var m=0,p=b.length;m<p;++m,++k)this[k]=b[m]&255},TypedArray:function(b){if("number"===
typeof b){var k=Array(b);for(var m=0;m<b;++m)k[m]=0}else k=b.slice(0);k.subarray=DocuViewareEncodingUtilities.TypedArray.subarray;k.buffer=k;k.byteLength=k.length;k.set=DocuViewareEncodingUtilities.TypedArray.set_;"object"===typeof b&&b.buffer&&(k.buffer=b.buffer);return k}},base64:{PADCHAR:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",getbyte64:function(b,k){return DocuViewareEncodingUtilities.base64.ALPHA.indexOf(b.charAt(k))},decode:function(b){if(window.atob)return window.atob(b);
b=""+b;var k=DocuViewareEncodingUtilities.base64.getbyte64,m,p=b.length;if(0===p)return b;var f=0;b.charAt(p-1)===DocuViewareEncodingUtilities.base64.PADCHAR&&(f=1,b.charAt(p-2)===DocuViewareEncodingUtilities.base64.PADCHAR&&(f=2),p-=4);var e=[];for(m=0;m<p;m+=4){var d=k(b,m)<<18|k(b,m+1)<<12|k(b,m+2)<<6|k(b,m+3);e.push(String.fromCharCode(d>>16,d>>8&255,d&255))}switch(f){case 1:d=k(b,m)<<18|k(b,m+1)<<12|k(b,m+2)<<6;e.push(String.fromCharCode(d>>16,d>>8&255));break;case 2:d=k(b,m)<<18|k(b,m+1)<<12,
e.push(String.fromCharCode(d>>16))}return e.join("")},getbyte:function(b,k){return b.charCodeAt(k)},encode:function(b){if(window.btoa)return window.btoa(b);var k=DocuViewareEncodingUtilities.base64.PADCHAR,m=DocuViewareEncodingUtilities.base64.ALPHA,p=DocuViewareEncodingUtilities.base64.getbyte,f,e=[];b=""+b;var d=b.length-b.length%3;if(0===b.length)return b;for(f=0;f<d;f+=3){var g=p(b,f)<<16|p(b,f+1)<<8|p(b,f+2);e.push(m.charAt(g>>18));e.push(m.charAt(g>>12&63));e.push(m.charAt(g>>6&63));e.push(m.charAt(g&
63))}switch(b.length-d){case 1:g=p(b,f)<<16;e.push(m.charAt(g>>18)+m.charAt(g>>12&63)+k+k);break;case 2:g=p(b,f)<<16|p(b,f+1)<<8,e.push(m.charAt(g>>18)+m.charAt(g>>12&63)+m.charAt(g>>6&63)+k)}return e.join("")},base64toArrayBuffer:function(b){b=this.decode(b);for(var k=b.length,m=new Uint8Array(k),p=0;p<k;p++)m[p]=b.charCodeAt(p);return m.buffer},base64toBlob:function(b,k,m){k=k||"";b=DocuViewareEncodingUtilities.base64.decode(b);for(var p=b.length,f=Math.ceil(p/m),e=Array(f),d=0;d<f;++d){for(var g=
d*m,r=Math.min(g+m,p),z=Array(r-g),B=0;g<r;++B,++g)z[B]=b[g].charCodeAt(0);e[d]=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(z)}return new Blob(e,{type:k})}}},DocuViewareUtilities={addEvent:function(b,k,m){b.attachEvent?(b["e"+k+m]=m,b[k+m]=function(){b["e"+k+m](window.event)},b.attachEvent("on"+k,b[k+m])):b.addEventListener(k,m,!1)},removeEvent:function(b,k,m){b.detachEvent?(b.detachEvent("on"+k,b[k+m]),b[k+m]=null):b.removeEventListener(k,m,!1)},getWindowsVersion:function(){var b=window.navigator.userAgent.toLowerCase().match(/windows nt ([0-9]?[0-9]\.[0-9])/);
return null!=b?2==b.length||3==b.length?parseFloat(b[1]):0:0},getInternetExplorerVersion:function(){var b=-1;if("Microsoft Internet Explorer"==navigator.appName){var k=navigator.userAgent,m=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=m.exec(k)&&(b=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(k=navigator.userAgent,m=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=m.exec(k)&&(b=parseFloat(RegExp.$1)));return b},getScrollbarWidth:function(){var b=document.createElement("div");b.style.position="absolute";
b.style.top="-1000px";b.style.left="-1000px";b.style.width="100px";b.style.height="50px";b.style.overflow="hidden";var k=document.createElement("div");k.style.width="100%";k.style.height="200px";b.appendChild(k);document.body.appendChild(b);var m=k.offsetWidth;b.style.overflow="auto";b=k.offsetWidth;document.body.removeChild(document.body.lastChild);return m-b},getDevicePixelRatio:function(){var b=1;void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?
b=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(b=window.devicePixelRatio);return b},isValidURL:function(b){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(b)},clonePageCanvasSizes:function(b){if(null!=
b){for(var k=[],m=0;m<b.length;m++)k.push({PageNo:b[m].PageNo,Width:b[m].Width,Height:b[m].Height,OffsetX:b[m].OffsetX,OffsetY:b[m].OffsetY});return k}return null},getPageCanvasSize:function(b){var k={width:0,height:0};if(null!=b)for(var m=0;m<b.length;m++){var p=b[m].OffsetX+b[m].Width,f=b[m].OffsetY+b[m].Height;p>k.width&&(k.width=p);f>k.height&&(k.height=f)}return k},isBetaEnabled:function(b){return"touchZoom"==b?!0:!1}},DocuViewareAnnotationsUtilities={getAnnotationDefaultProperties:function(b){switch(b){case 0:return{type:0,
borderWidth:.2,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",fontName:"Arial",fontStyle:1,foreColor:"#FF0000",opacity:1,radiusFactor:.25,rotation:0,stroke:!0,strokeColor:"#FF0000",text:"STAMP",autoCreate:!1};case 1:return{type:1,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FFFFFF",opacity:1,radiusFactor:0,rotation:0,squaredBox:!1,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 2:return{type:2,fillColor:"#FFFF00",rotation:0,squaredBox:!1,autoCreate:!1};case 3:return{type:3,borderWidth:.04,
dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:"#000000",autoCreate:!1};case 4:return{type:4,arrowFilled:!0,arrowHeight:10,arrowWidth:5,borderWidth:.04,dashCap:0,dashStyle:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 5:return{type:5,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 6:return{type:6,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FFFFFF",
opacity:1,rotation:0,squaredBox:!1,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 7:return{type:7,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#FFFFFF",autoCreate:!1,keepAspectRatio:!1,bitmapData:""};case 8:return{type:8,alignment:0,autoSize:!1,borderWidth:.01,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FFFFFF",fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",lineAlignment:0,opacity:1,radiusFactor:0,rotation:0,
stroke:!1,strokeColor:"#000000",text:"Text",canEditText:!0,autoCreate:!1};case 9:return{type:9,alignment:0,autoSize:!1,borderWidth:.01,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FDFD32",fontName:"Arial",fontSize:20,fontStyle:1,foreColor:"#000000",lineAlignment:0,opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",text:"Text",canEditText:!0,autoCreate:!1};case 10:return{type:10,borderWidth:.04,dashStyle:0,dashCap:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 11:return{type:11,borderWidth:.2,
rotation:0,strokeColor:"#FFFF00",autoCreate:!1};case 12:return{type:11,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FF0000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 13:return{type:13,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",fontName:"Arial",fontStyle:3,foreColor:"#0000FF",link:"",opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#000000",autoCreate:!1,text:""};case 14:return{type:14,borderWidth:.04,dashCap:0,dashStyle:0,
fill:!0,fillColor:"#FF0000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 15:return{type:15,borderWidth:.02,dashCap:0,dashStyle:0,fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",measurementUnit:1,measurementUnitCustomString:"",ticksPerUnit:10,opacity:1,rotation:0,strokeColor:"#000000",scale:1,autoCreate:!1};case 16:return{type:16,borderWidth:.02,dashCap:0,dashStyle:0,fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",measurementUnit:1,measurementUnitCustomString:"",
fill:!1,fillColor:"#000000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",scale:1,autoCreate:!1};case 17:return{type:17,title:"",fillColor:"#010101",autoCreate:!1};case 2048:return{type:2048,allowReview:!0,allowAnswer:!0,reviewStatus:0,fontName:"Arial",fontSize:9,fontStyle:0,foreColor:"#000000"};default:return null}},getAnnotationDefaultPropertiesDisplay:function(b){switch(b){case 0:return"borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor opacity radiusFactor rotation stroke strokeColor text".split(" ");
case 1:return"borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation squaredBox stroke strokeColor".split(" ");case 2:return["fillColor","rotation","squaredBox"];case 3:return"borderWidth dashCap dashStyle endCap opacity rotation startCap strokeColor".split(" ");case 4:return"arrowFilled arrowHeight arrowWidth borderWidth dashCap dashStyle opacity rotation strokeColor".split(" ");case 5:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");
case 6:return"borderWidth dashCap dashStyle fill fillColor opacity rotation squaredBox stroke strokeColor".split(" ");case 7:return"borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation stroke strokeColor".split(" ");case 8:return"alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity radiusFactor rotation stroke strokeColor text".split(" ");case 9:return"alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity rotation stroke strokeColor text".split(" ");
case 10:return"borderWidth dashStyle dashCap opacity rotation strokeColor".split(" ");case 11:return["borderWidth","rotation","strokeColor"];case 12:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 13:return"borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor link opacity radiusFactor rotation stroke strokeColor text".split(" ");case 14:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");
case 15:return"borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit opacity rotation strokeColor scale".split(" ");case 16:return"borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit fill fillColor opacity rotation stroke strokeColor scale".split(" ");case 17:return["title","fillColor"];case 2048:return"allowReview allowAnswer reviewStatus fontName fontSize fontStyle foreColor".split(" ");default:return null}}},JSON=JSON||{};
JSON.stringify=JSON.stringify||function(b){var k=typeof b;if("object"!=k||null===b)return"string"==k&&(b='"'+b+'"'),String(b);var m,p=[],f=b&&b.constructor==Array;for(m in b){var e=b[m];k=typeof e;"string"==k?e='"'+e+'"':"object"==k&&null!==e&&(e=JSON.stringify(e));p.push((f?"":'"'+m+'":')+String(e))}return(f?"[":"{")+String(p)+(f?"]":"}")};
var DocuViewareAPI={Constants:{SINGLE_COLUMN_MOBILE_MENU_WIDTH:126,TWO_COLUMNS_MOBILE_MENU_WIDTH:188},Status:{OK:0,GenericError:1,PasswordRequired:27,InvalidPassword:29},Toolbar:{None:0,Standard:1,Mobile:2},SearchPageSelection:{CurrentPage:0,AllPages:1},RotateFlipType:{Rotate90FlipNone:1,Rotate180FlipNone:2,Rotate270FlipNone:3},LocalServiceStatus:{Ready:0,NotFound:1,WrongVersion:2},TwainCapabilities:{ACAP_AUDIOFILEFORMAT:4609,ACAP_XFERMECH:4610,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTHOR:4096,
CAP_AUTOFEED:4103,CAP_AUTOMATICCAPTURE:4122,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_AUTOSCAN:4112,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_CAMERAPREVIEWUI:4129,CAP_CAMERASIDE:4148,CAP_CAPTION:4097,CAP_CLEARBUFFERS:4125,CAP_CLEARPAGE:4104,CAP_CUSTOMBASE:32768,CAP_CUSTOMDSDATA:4117,CAP_CUSTOMINTERFACEGUID:4156,CAP_DEVICEEVENT:4130,CAP_DEVICEONLINE:4111,CAP_DEVICETIMEDATE:4127,CAP_DOUBLEFEEDDETECTION:4159,CAP_DOUBLEFEEDDETECTIONLENGTH:4160,CAP_DOUBLEFEEDDETECTIONRESPONSE:4162,
CAP_DOUBLEFEEDDETECTIONSENSITIVITY:4161,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_ENDORSER:4118,CAP_EXTENDEDCAPS:4102,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_FEEDERORDER:4142,CAP_FEEDERPOCKET:4154,CAP_FEEDERPREP:4153,CAP_FEEDPAGE:4105,CAP_INDICATORS:4107,CAP_INDICATORSMODE:4164,CAP_JOBCONTROL:4119,CAP_LANGUAGE:4140,CAP_MAXBATCHBUFFERS:4126,CAP_MICRENABLED:4152,CAP_PAPERDETECTABLE:4109,CAP_PAPERHANDLING:4163,CAP_POWERSAVETIME:4166,CAP_POWERSUPPLY:4128,
CAP_PRINTER:4134,CAP_PRINTERCHARROTATION:4167,CAP_PRINTERENABLED:4135,CAP_PRINTERFONTSTYLE:4168,CAP_PRINTERINDEX:4136,CAP_PRINTERINDEXLEADCHAR:4169,CAP_PRINTERINDEXMAXVALUE:4170,CAP_PRINTERINDEXNUMDIGITS:4171,CAP_PRINTERINDEXSTEP:4172,CAP_PRINTERINDEXTRIGGER:4173,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSTRINGPREVIEW:4174,CAP_PRINTERSUFFIX:4139,CAP_PRINTERVERTICALOFFSET:4165,CAP_REACQUIREALLOWED:4144,CAP_REWINDPAGE:4106,CAP_SEGMENTED:4149,CAP_SERIALNUMBER:4132,CAP_SUPPORTEDCAPS:4101,
CAP_SUPPORTEDCAPSEXT:4108,CAP_SUPPORTEDCAPSSEGMENTUNIQUE:4157,CAP_SUPPORTEDDATS:4158,CAP_THUMBNAILSENABLED:4113,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_TIMEDATE:4100,CAP_UICONTROLLABLE:4110,CAP_XFERCOUNT:1,ICAP_AUTOBRIGHT:4352,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICROTATE:4434,
ICAP_AUTOSIZE:4438,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODETIMEOUT:4413,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_BITORDER:4380,ICAP_BITORDERCODES:4390,ICAP_BRIGHTNESS:4353,ICAP_CCITTKFACTOR:4381,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_COMPRESSION:256,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_EXTIMAGEINFO:4399,ICAP_FEEDERTYPE:4436,
ICAP_FILMTYPE:4447,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_FLASHUSED2:4422,ICAP_FLIPROTATION:4406,ICAP_FRAMES:4372,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_ICCPROFILE:4437,ICAP_IMAGEDATASET:4398,ICAP_IMAGEFILEFORMAT:4364,ICAP_IMAGEFILTER:4423,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_JPEGPIXELTYPE:4392,ICAP_JPEGQUALITY:4435,ICAP_JPEGSUBSAMPLING:4449,ICAP_LAMPSTATE:4365,ICAP_LIGHTPATH:4382,ICAP_LIGHTSOURCE:4366,ICAP_MAXFRAMES:4378,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,
ICAP_MIRROR:4448,ICAP_NOISEFILTER:4424,ICAP_ORIENTATION:4368,ICAP_OVERSCAN:4425,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODETIMEOUT:4421,ICAP_PHYSICALHEIGHT:4370,ICAP_PHYSICALWIDTH:4369,ICAP_PIXELFLAVOR:4383,ICAP_PIXELFLAVORCODES:4391,ICAP_PIXELTYPE:257,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SHADOW:4371,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_SUPPORTEDEXTIMAGEINFO:4446,
ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_TILES:4379,ICAP_TIMEFILL:4394,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_UNITS:258,ICAP_XFERMECH:259,ICAP_XNATIVERESOLUTION:4374,ICAP_XRESOLUTION:4376,ICAP_XSCALING:4388,ICAP_YNATIVERESOLUTION:4375,ICAP_YRESOLUTION:4377,ICAP_YSCALING:4389,ICAP_ZOOMFACTOR:4414},GetSessionID:function(b){return(b=document.getElementById(b))&&b.control?b.control.ajax.sessionID:null},IsInitialized:function(b){return(b=document.getElementById(b))&&
b.control?!0:!1},IsLoaded:function(b){return(b=document.getElementById(b))&&b.control&&!b.control.waitForInit&&!b.control.hasPendingResize()},IsTwainSupportAvailable:function(b){return(b=document.getElementById(b))&&b.control?b.control.IsTwainSupportAvailable():!1},PostCustomServerAction:function(b,k,m,p,f,e){return(b=document.getElementById(b))&&b.control?b.control.PostCustomServerAction(k,m,p,f,e):DocuViewareAPI.Status.GenericError},SetMaxUploadThreads:function(b,k){return(b=document.getElementById(b))&&
b.control?b.control.SetMaxUploadThreads(k):DocuViewareAPI.Status.GenericError},LoadFromByteArray:function(b,k,m,p,f,e){return(b=document.getElementById(b))&&b.control?b.control.LoadFromByteArray(k,m,p,f,e):DocuViewareAPI.Status.GenericError},LoadFromBase64:function(b,k,m,p,f,e){return(b=document.getElementById(b))&&b.control?b.control.LoadFromBase64(k,m,p,f,e):DocuViewareAPI.Status.GenericError},LoadFromFile:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.LoadFromFile(k,
m):DocuViewareAPI.Status.GenericError},LoadFromUri:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.LoadFromUri(k,"",m,p):DocuViewareAPI.Status.GenericError},LoadFromUriEx:function(b,k,m,p,f){return(b=document.getElementById(b))&&b.control?b.control.LoadFromUri(k,m,p,f):DocuViewareAPI.Status.GenericError},ToggleLoadFromUriDialog:function(b){return(b=document.getElementById(b))&&b.control?b.control.ToggleLoadFromUriDialog():DocuViewareAPI.Status.GenericError},Save:function(b,
k,m){return(b=document.getElementById(b))&&b.control?b.control.ToggleSaveDialog(k,m):DocuViewareAPI.Status.GenericError},DirectSave:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.DirectSave(k,m,p):DocuViewareAPI.Status.GenericError},Print:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.TogglePrintDialog(k,m):DocuViewareAPI.Status.GenericError},DirectPrint:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.LaunchDirectPrint(k,
m,p):DocuViewareAPI.Status.GenericError},TwainAcquire:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.TwainToggleAcquisitionDialog(k,m):DocuViewareAPI.Status.GenericError},TwainSetConfig:function(b,k,m,p,f,e,d,g){return(b=document.getElementById(b))&&b.control?b.control.TwainSetConfig(k,m,p,f,e,d,g):DocuViewareAPI.Status.GenericError},TwainDownloadServiceSetup:function(b){return(b=document.getElementById(b))&&b.control?b.control.DownloadTwainServiceSetup():DocuViewareAPI.Status.GenericError},
TwainGetLocalServiceStatus:function(b){return(b=document.getElementById(b))&&b.control?b.control.TwainGetLocalServiceStatus():DocuViewareAPI.Status.GenericError},TwainGetSources:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetTwainSourceList():DocuViewareAPI.Status.GenericError},TwainGetClientInfo:function(b){return(b=document.getElementById(b))&&b.control?b.control.TwainGetClientInfo():DocuViewareAPI.Status.GenericError},TwainAcquireToNewDocument:function(b,k,m,p){return(b=
document.getElementById(b))&&b.control?b.control.TwainAcquireToNewDocument(k,m,p):DocuViewareAPI.Status.GenericError},TwainAcquireToCurrentDocument:function(b,k,m,p,f){return(b=document.getElementById(b))&&b.control?b.control.TwainAcquireToCurrentDocument(k,m,p,f):DocuViewareAPI.Status.GenericError},GetDocumentType:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetDocumentType():-1},GetDocumentName:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetDocumentName():
""},GetPageCount:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetPageCount():-1},GetPageWidth:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.GetPageWidth(k):-1},GetPageHeight:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.GetPageHeight(k):-1},GetSelectedTextAreas:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetSelectedTextArea():DocuViewareAPI.Status.GenericError},GetDisplayedArea:function(b){return(b=
document.getElementById(b))&&b.control?b.control.GetDisplayedArea():{left:0,top:0,width:0,height:0}},GetViewerScrollLeft:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetViewerScrollLeft():-1},GetViewerScrollTop:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetViewerScrollTop():-1},SetViewerScrollLeft:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.SetViewerScrollLeft(k):DocuViewareAPI.Status.GenericError},SetViewerScrollTop:function(b,
k){return(b=document.getElementById(b))&&b.control?b.control.SetViewerScrollTop(k):DocuViewareAPI.Status.GenericError},GetSelectionAreaCoordinates:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetSelectionAreaCoordinates():{left:0,top:0,width:0,height:0}},SetSelectionAreaCoordinates:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.SetSelectionAreaCoordinates(k):DocuViewareAPI.Status.GenericError},ClearSelectionArea:function(b){return(b=document.getElementById(b))&&
b.control?b.control.ClearSelectionArea():DocuViewareAPI.Status.GenericError},GetMouseMode:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetMouseMode():DocuViewareAPI.Status.GenericError},SetMouseMode:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.SetMouseMode(k):DocuViewareAPI.Status.GenericError},GetCurrentPage:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetCurrentPage():-1},GetSelectedThumbnailItems:function(b){return(b=
document.getElementById(b))&&b.control?b.control.GetSelectedThumbnailItems():null},SetThumbnailSelected:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.SetThumbnailSelected(k,m):null},GetCurrentZoom:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetCurrentZoom():-1},SetCurrentZoom:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.SetCurrentZoom(k):DocuViewareAPI.Status.GenericError},SelectPage:function(b,k){return(b=document.getElementById(b))&&
b.control?b.control.SelectPage(k):DocuViewareAPI.Status.GenericError},ZoomIN:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.ZoomIN(1,!0,!1,k,m):DocuViewareAPI.Status.GenericError},ZoomOUT:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.ZoomOUT(1,!0,!1,k,m):DocuViewareAPI.Status.GenericError},ZoomRect:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.ZoomRect(k,m,p):DocuViewareAPI.Status.GenericError},RotateView:function(b,
k){if((b=document.getElementById(b))&&b.control){var m=!1;"number"!=typeof k||k!=this.RotateFlipType.Rotate90FlipNone&&k!=this.RotateFlipType.Rotate180FlipNone&&k!=this.RotateFlipType.Rotate270FlipNone||(m=!0);return m?b.control.Rotate(k,0):DocuViewareAPI.Status.GenericError}return DocuViewareAPI.Status.GenericError},RotatePage:function(b,k,m,p){return this.RotatePages(b,this.GetCurrentPage(b),k,m,p)},RotatePages:function(b,k,m,p,f){return(b=document.getElementById(b))&&b.control?"number"!=typeof k&&
"object"!=typeof k||"number"!=typeof m||m!=this.RotateFlipType.Rotate90FlipNone&&m!=this.RotateFlipType.Rotate180FlipNone&&m!=this.RotateFlipType.Rotate270FlipNone?DocuViewareAPI.Status.GenericError:b.control.RotatePage(k,m,p,f):DocuViewareAPI.Status.GenericError},SwapPages:function(b,k,m,p,f){return(b=document.getElementById(b))&&b.control?b.control.SwapPages(k,m,p,f):DocuViewareAPI.Status.GenericError},DeletePage:function(b,k,m){return this.DeletePages(b,this.GetCurrentPage(b),k,m)},DeletePages:function(b,
k,m,p){return(b=document.getElementById(b))&&b.control?"number"==typeof k||"object"==typeof k?b.control.DeletePage(k,m,p):DocuViewareAPI.Status.GenericError:DocuViewareAPI.Status.GenericError},ToggleSinglePageViewMode:function(b){return(b=document.getElementById(b))&&b.control?b.control.ToggleSinglePageViewMode():DocuViewareAPI.Status.GenericError},SetZoomWidthViewer:function(b){return(b=document.getElementById(b))&&b.control?b.control.SetZoomMode(3):DocuViewareAPI.Status.GenericError},SetZoomFitViewer:function(b){return(b=
document.getElementById(b))&&b.control?b.control.SetZoomMode(2):DocuViewareAPI.Status.GenericError},CloseDocument:function(b){return(b=document.getElementById(b))&&b.control?b.control.CloseDocument():DocuViewareAPI.Status.GenericError},SelectThumbnailSnapIn:function(b){return(b=document.getElementById(b))&&b.control?b.control.ShowThumbnailsSnapIn():DocuViewareAPI.Status.GenericError},SelectBookmarksSnapIn:function(b){return(b=document.getElementById(b))&&b.control?b.control.ShowBookmarksSnapIn():
DocuViewareAPI.Status.GenericError},SelectSearchSnapIn:function(b){return(b=document.getElementById(b))&&b.control?b.control.ShowSearchSnapIn():DocuViewareAPI.Status.GenericError},SelectAnnotationsSnapIn:function(b){return(b=document.getElementById(b))&&b.control?b.control.ShowAnnotationsSnapIn():DocuViewareAPI.Status.GenericError},SelectCommentsSnapIn:function(b){return(b=document.getElementById(b))&&b.control?b.control.ShowCommentsSnapIn():DocuViewareAPI.Status.GenericError},SelectRedactionSnapIn:function(b){return(b=
document.getElementById(b))&&b.control?b.control.ShowRedactionSnapIn():DocuViewareAPI.Status.GenericError},SelectSnapIn:function(b,k){return(b=document.getElementById(b))&&""!==k?b.control.SelectSnapIn(k,!1):DocuViewareAPI.Status.GenericError},ShowSnapIn:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.ToggleSnapIn(k,!0):DocuViewareAPI.Status.GenericError},HideSnapIn:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.ToggleSnapIn(k,!1):DocuViewareAPI.Status.GenericError},
CollapseSnapInPanel:function(b){return(b=document.getElementById(b))&&b.control?b.control.SetSnapinsPanelVisibility(!1):DocuViewareAPI.Status.GenericError},AddCustomSnapIn:function(b,k,m,p,f,e,d){return(b=document.getElementById(b))&&b.control?b.control.AddCustomSnapIn(k,m,p,f,e,d):DocuViewareAPI.Status.GenericError},GetSnapInPanelWidth:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetSnapInPanelWidth():0},SetSnapInPanelWidth:function(b,k){return(b=document.getElementById(b))&&
b.control?b.control.SetSnapInPanelWidth(k):DocuViewareAPI.Status.GenericError},GetSelectedText:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetSelectedText():""},HighlightSelectedText:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.HighlightSelectedText(k):DocuViewareAPI.Status.GenericError},StrikeoutSelectedText:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.StrikeoutSelectedText(k):DocuViewareAPI.Status.GenericError},UnderlineSelectedText:function(b,
k){return(b=document.getElementById(b))&&b.control?b.control.UnderlineSelectedText(k):DocuViewareAPI.Status.GenericError},RedactSelectedText:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RedactSelectedText(k):DocuViewareAPI.Status.GenericError},AddSelectedTextContextMenuItem:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddSelectedTextContextMenuItem(k,m,p):DocuViewareAPI.Status.GenericError},ResetSelectedTextContextMenu:function(b){return(b=
document.getElementById(b))&&b.control?b.control.ResetSelectedTextContextMenu():DocuViewareAPI.Status.GenericError},AddAnnotationsActionButton:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotationsActionButton(k,m,p):DocuViewareAPI.Status.GenericError},Search:function(b,k,m,p,f,e){if((b=document.getElementById(b))&&b.control){var d=!1;"string"===typeof k&&("undefined"===typeof e&&(e=!1),"boolean"==typeof m&&"boolean"==typeof p&&"boolean"==typeof e&&("number"!=typeof f||
f!==this.SearchPageSelection.AllPages&&f!==this.SearchPageSelection.CurrentPage||(d=!0)));return d?b.control.Search(k,m,p,e,f):DocuViewareAPI.Status.GenericError}return DocuViewareAPI.Status.GenericError},SetSearchSettings:function(b,k,m,p,f){return(b=document.getElementById(b))&&b.control?"boolean"==typeof k&&"boolean"==typeof m&&"boolean"==typeof p?"number"!=typeof f||f!==this.SearchPageSelection.AllPages&&f!==this.SearchPageSelection.CurrentPage?DocuViewareAPI.Status.GenericError:b.control.SetSearchSettings(k,
m,p,f):DocuViewareAPI.Status.GenericError:null},SearchNavigateToOccurrence:function(b,k){return(b=document.getElementById(b))&&b.control?Number.isInteger(k)?b.control.SearchNavigateToOccurrence(k):DocuViewareAPI.Status.GenericError:null},GetSearchResultsCount:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetSearchResultsCount():0},GetCurrentSearchOccurrenceIdx:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetCurrentSearchOccurrenceIdx():0},ClearSearch:function(b){return(b=
document.getElementById(b))&&b.control?b.control.ClearSearch():DocuViewareAPI.Status.GenericError},UpdateLayout:function(b){return(b=document.getElementById(b))&&b.control?b.control.UpdateLayout():DocuViewareAPI.Status.GenericError},ExitAnnotationDrawingMode:function(b){return(b=document.getElementById(b))&&b.control?b.control.ExitAnnotationDrawingMode():DocuViewareAPI.Status.GenericError},DisplayMessageBox:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.DisplayMessageBox(k):
DocuViewareAPI.Status.GenericError},DisplayPendingActionNotification:function(b){if((b=document.getElementById(b))&&b.control)b.control.DisplayPendingActionNotification();else return DocuViewareAPI.Status.GenericError},HidePendingActionNotification:function(b){if((b=document.getElementById(b))&&b.control)b.control.HidePendingActionNotification();else return DocuViewareAPI.Status.GenericError},ApplyAllRedactions:function(b){return(b=document.getElementById(b))&&b.control?b.control.ApplyAllRedactions():
DocuViewareAPI.Status.GenericError},RegisterOnViewerScroll:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnViewerScroll(k):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationSelectedStateChanged:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnAnnotationSelectedStateChanged(k):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationAdded:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnAnnotationAdded(k):
DocuViewareAPI.Status.GenericError},RegisterOnAnnotationEdited:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnAnnotationEdited(k):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMoved:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnAnnotationMoved(k):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationDeleted:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnAnnotationDeleted(k):DocuViewareAPI.Status.GenericError},
RegisterOnDocumentSigned:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnDocumentSigned(k):DocuViewareAPI.Status.GenericError},RegisterOnFormFieldChanged:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnFormFieldChanged(k):DocuViewareAPI.Status.GenericError},RegisterOnPageChanged:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnPageChanged(k):DocuViewareAPI.Status.GenericError},RegisterOnZoomChanged:function(b,
k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnZoomChanged(k):DocuViewareAPI.Status.GenericError},RegisterOnRotationChanged:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnRotationChanged(k):DocuViewareAPI.Status.GenericError},RegisterOnNewDocumentLoaded:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnNewDocumentLoaded(k):DocuViewareAPI.Status.GenericError},RegisterOnDocumentClosed:function(b,k){return(b=document.getElementById(b))&&
b.control?b.control.RegisterOnDocumentClosed(k):DocuViewareAPI.Status.GenericError},RegisterOnDocumentPrinted:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnDocumentPrinted(k):DocuViewareAPI.Status.GenericError},RegisterOnDocumentSaved:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnDocumentSaved(k):DocuViewareAPI.Status.GenericError},RegisterOnTwainAcquisitionDialogAcquireButtonClick:function(b,k){return(b=document.getElementById(b))&&
b.control?b.control.RegisterOnTwainAcquisitionDialogAcquireButtonClick(k):DocuViewareAPI.Status.GenericError},RegisterOnTwainAcquisitionDialogCancelButtonClick:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnTwainAcquisitionDialogCancelButtonClick(k):DocuViewareAPI.Status.GenericError},RegisterOnThumbnailsOrderChanged:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnThumbnailsOrderChanged(k):DocuViewareAPI.Status.GenericError},RegisterOnTextSelected:function(b,
k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnTextSelected(k):DocuViewareAPI.Status.GenericError},RegisterOnTextUnselected:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnTextUnselected(k):DocuViewareAPI.Status.GenericError},RegisterOnAreaSelected:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnAreaSelected(k):DocuViewareAPI.Status.GenericError},RegisterOnCommentAdded:function(b,k){return(b=document.getElementById(b))&&
b.control?b.control.RegisterOnCommentAdded(k):DocuViewareAPI.Status.GenericError},RegisterOnCommentEdited:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnCommentEdited(k):DocuViewareAPI.Status.GenericError},RegisterOnCommentDeleted:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnCommentDeleted(k):DocuViewareAPI.Status.GenericError},RegisterOnFullscreenModeChanged:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnFullscreenModeChanged(k):
DocuViewareAPI.Status.GenericError},RegisterOnSearchInvoked:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnSearchInvoked(k):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMouseEnter:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnAnnotationMouseEnter(k):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMouseLeave:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnAnnotationMouseLeave(k):
DocuViewareAPI.Status.GenericError},RegisterOnTextAnnotated:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnTextAnnotated(k):DocuViewareAPI.Status.GenericError},RegisterOnThumbnailsSnapInSelected:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnThumbnailsSnapInSelected(k):DocuViewareAPI.Status.GenericError},RegisterOnBookmarksSnapInSelected:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnBookmarksSnapInSelected(k):
DocuViewareAPI.Status.GenericError},RegisterOnSearchSnapInSelected:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnSearchSnapInSelected(k):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationsSnapInSelected:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnAnnotationsSnapInSelected(k):DocuViewareAPI.Status.GenericError},RegisterOnCommentsSnapInSelected:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnCommentsSnapInSelected(k):
DocuViewareAPI.Status.GenericError},RegisterOnSnapInPanelResized:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnSnapInPanelResized(k):DocuViewareAPI.Status.GenericError},RegisterOnRedactionMarksApplied:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnRedactionMarksApplied(k):DocuViewareAPI.Status.GenericError},SetSignatureAppearance:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?null!=k?b.control.Internal.DigiSign.setSignatureAppearanceImage(k):
null!=m&&null!=p?b.control.Internal.DigiSign.setSignatureAppearanceText(m,p):DocuViewareAPI.Status.GenericError:DocuViewareAPI.Status.GenericError},SetSignatureCertificate:function(b,k,m,p,f,e){return(b=document.getElementById(b))&&b.control?(b.control.Internal.DigiSign.setCertificate(k,m,p),b.control.Internal.DigiSign.sendSignatureRequest(f,e)):DocuViewareAPI.Status.GenericError},SetSignatureTimeStamp:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.Internal.DigiSign.setTimeStamp(k,
m,p):DocuViewareAPI.Status.GenericError},AddSignatureInteractive:function(b){return(b=document.getElementById(b))&&b.control?b.control.Internal.DigiSign.beginAddSignatureInteractive(!1):DocuViewareAPI.Status.GenericError},AddSignature:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.Internal.DigiSign.addSignature(k,m):DocuViewareAPI.Status.GenericError},RegisterOnSnapInPanelToggle:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.RegisterOnSnapInPanelToggle(k):
DocuViewareAPI.Status.GenericError},SetAnnotationsInteractionState:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.SetAnnotationsInteractionState(k):DocuViewareAPI.Status.GenericError},SetAnnotationsVisibility:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.SetAnnotationsVisibility(k):DocuViewareAPI.Status.GenericError},AddRubberStampAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(0,k,
m,p):DocuViewareAPI.Status.GenericError},AddRectangleAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(1,k,m,p):DocuViewareAPI.Status.GenericError},AddRectangleHighlighterAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(2,k,m,p):DocuViewareAPI.Status.GenericError},AddLineAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(3,
k,m,p):DocuViewareAPI.Status.GenericError},AddConnectedLineAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(5,k,m,p):DocuViewareAPI.Status.GenericError},AddLineArrowAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(4,k,m,p):DocuViewareAPI.Status.GenericError},AddEllipseAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(6,
k,m,p):DocuViewareAPI.Status.GenericError},AddTextAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(8,k,m,p):DocuViewareAPI.Status.GenericError},AddStickyNoteAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(9,k,m,p):DocuViewareAPI.Status.GenericError},AddFreeHandAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(10,
k,m,p):DocuViewareAPI.Status.GenericError},AddFreeHandHighLighterAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(11,k,m,p):DocuViewareAPI.Status.GenericError},AddLinkAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(13,k,m,p):DocuViewareAPI.Status.GenericError},AddRulerAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(15,
k,m,p):DocuViewareAPI.Status.GenericError},AddPolyRulerAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(16,k,m,p):DocuViewareAPI.Status.GenericError},AddRedactionMarkAnnotInteractive:function(b,k,m,p){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(17,k,m,p):DocuViewareAPI.Status.GenericError},AddAnnot:function(b,k,m,p){if((b=document.getElementById(b))&&b.control){if(Array.isArray(k))return b.control.AddAnnot(k,
!1,m,p);var f=[];f.push(k);return b.control.AddAnnot(f,!1,m,p)}return DocuViewareAPI.Status.GenericError},RemoveAnnotById:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.DeleteAnnotationById(k,"undefined"===typeof m?!1:m):DocuViewareAPI.Status.GenericError},UnselectAllAnnotations:function(b){return(b=document.getElementById(b))&&b.control?b.control.UnselectAllAnnotations():DocuViewareAPI.Status.GenericError},UpdateAnnotById:function(b,k,m){return(b=document.getElementById(b))&&
b.control?b.control.UpdateAnnotationById(k,m):DocuViewareAPI.Status.GenericError},GetAnnotProperties:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.GetAnnotationProperties(k):DocuViewareAPI.Status.GenericError},GetPageAnnotCount:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.GetPageAnnotCount(k):DocuViewareAPI.Status.GenericError},GetPageAnnotId:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.GetPageAnnotId(k,m):DocuViewareAPI.Status.GenericError},
GetAnnotClientTag:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.GetAnnotationClientTag(k):DocuViewareAPI.Status.GenericError},SetAnnotClientTag:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.SetAnnotationClientTag(k,m):DocuViewareAPI.Status.GenericError},GetPageFormFields:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.GetPageFormFields(k):DocuViewareAPI.Status.GenericError},UpdateFormFields:function(b,k,m,p){if((b=document.getElementById(b))&&
b.control){if(Array.isArray(k))return b.control.UpdateFormFields(k,m,p);var f=[];f.push(k);return b.control.UpdateFormFields(f,m,p)}return DocuViewareAPI.Status.GenericError},HasPendingRedactionMark:function(b){return(b=document.getElementById(b))&&b.control?b.control.HasPendingRedactionMark():DocuViewareAPI.Status.GenericError},EnableAnnotEditionOnDblClick:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.EnableAnnotEditionOnDblClick(k):DocuViewareAPI.Status.GenericError},ResetAnnotAutoCreateProperty:function(b,
k){return(b=document.getElementById(b))&&b.control?b.control.ResetAnnotAutoCreate(k):DocuViewareAPI.Status.GenericError},ResetAnnotToDefault:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.ResetAnnotToDefault(k):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesValues:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.SetAnnotPropertiesValues(k,m):DocuViewareAPI.Status.GenericError},GetAnnotPropertiesValues:function(b,k){return(b=document.getElementById(b))&&
b.control?b.control.GetAnnotPropertiesValues(k):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesToDisplay:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.SetAnnotPropertiesToDisplay(k,m):DocuViewareAPI.Status.GenericError},ResetAnnotPropertiesToDisplayDefault:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.ResetAnnotPropertiesToDisplayDefault(k):DocuViewareAPI.Status.GenericError},SetAnnotDefaultAuthor:function(b,k,m){return(b=document.getElementById(b))&&
b.control?b.control.SetAnnotDefaultAuthor(k,m):DocuViewareAPI.Status.GenericError},EnsureAnnotVisibility:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.FocusAnnot(k,m,!0):DocuViewareAPI.Status.GenericError},EnableAnnotMultiSelect:function(b,k){return(b=document.getElementById(b))&&b.control?(b.control.EnableAnnotMultiSelect(k),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},SelectAnnot:function(b,k,m){return(b=document.getElementById(b))&&b.control?b.control.FocusAnnot(k,
!0,m):DocuViewareAPI.Status.GenericError},UnselectAnnot:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.UnselectAnnot(k):DocuViewareAPI.Status.GenericError},GetAnnotBBoxOnViewer:function(b,k){return(b=document.getElementById(b))&&b.control?b.control.GetAnnotBBoxOnViewer(k):DocuViewareAPI.Status.GenericError}},DOCUVIEWARE_JS_VERSION=30039,DocuViewareProgressbar=function(){var b={width:"100%",height:"4px",zIndex:16777271},k={width:0,height:"100%",clear:"both",transition:"height .3s"};
var m=function(b,d){for(var e in d)b.style[e]=d[e];b.style.float="left"};var p=function(){var b=this,d=this.width-this.here;.1>d&&-.1<d?(f.call(this,this.here),this.moving=!1,100==this.width&&(this.el.style.height=0,setTimeout(function(){b.cont.el.removeChild(b.el)},300))):(f.call(this,this.width-d/4),setTimeout(function(){b.go()},16))};var f=function(b){this.width=b;this.el.style.width=this.width+"%"};var e=function(){var b=new d(this);this.bars.unshift(b)};var d=function(b){this.el=document.createElement("div");
this.el.style.backgroundColor=b.opts.bg;this.here=this.width=0;this.moving=!1;this.cont=b;m(this.el,k);b.el.appendChild(this.el)};d.prototype.go=function(b){b?(this.here=b,this.moving||(this.moving=!0,p.call(this))):this.moving&&p.call(this)};var g=function(d){d=this.opts=d||{};d.bg=d.bg||"#000";this.bars=[];var f=this.el=document.createElement("div");m(this.el,b);d.id&&(f.id=d.id);f.style.position=d.target?"absolute":"fixed";d.target?d.target.insertBefore(f,d.target.firstChild):document.getElementsByTagName("body")[0].appendChild(f);
e.call(this)};g.prototype.value=function(){return this.bars[0].here};g.prototype.go=function(b){this.bars[0].go(b);100==b&&e.call(this)};return g}(),CreateDocuViewareCursorManager=function(b,k){return{target:b,isIE:k,cursor:null,customCursorClass:null,setStdCursor:function(b){b!=this.cursor&&(this.dropCurrentCursor(),this.cursor=b,this.target.style.cursor=this.cursor)},setCustomCursorClass:function(b){this.isIE&&(b+="IE");b!=this.customCursorClass&&(this.dropCurrentCursor(),this.customCursorClass=
b,dvJQuery(this.target).addClass(this.customCursorClass))},dropCurrentCursor:function(){this.customCursorClass&&(dvJQuery(this.target).removeClass(this.customCursorClass),this.customCursorClass=null);null!=this.cursor&&(this.cursor=null,this.target.style.cursor="")}}},CreateDocuViewareController=function(b,k,m,p,f,e,d,g,r,z,B,V,y,w,x,G,C,J,K,H,T,M,U){function P(a){null!=a.dom.openfile&&DocuViewareUtilities.addEvent(a.dom.openfile,"change",function(c){if(null!=c.target.files&&0!=c.target.files.length){c=
c.target.files[0];var b=dvJQuery(a.dom.openfile);b.val("");b.replaceWith(b.clone());P(a);a.Internal.Files.uploadFile(c,0)}},!0)}function S(){"tiff"===dvJQuery(a.dom.saveDialog).find("select[name='save_extension_select"+a.uniqueID+"']").val()&&"0"===dvJQuery(a.dom.saveDialog).find("select[name='save_content_select"+a.uniqueID+"']").val()?dvJQuery("#saveDialog"+a.uniqueID+" > div:nth-child(1) > div:nth-child(4)").css("visibility","visible"):(dvJQuery("#saveDialog"+a.uniqueID+" > div:nth-child(1) > div:nth-child(4)").css("visibility",
"hidden"),dvJQuery(a.dom.saveDialog).find("input[name='save_content_burn_annot"+a.uniqueID+"']").prop("checked",!1))}if(b!=DOCUVIEWARE_JS_VERSION)x=document.getElementById("main"+e),null!=x&&(x.style.visibility="visible"),document.write("The version of the DocuVieware javascript used is incorrect. The JavaScript version version is: "+DOCUVIEWARE_JS_VERSION+". The expected version is: "+b+". Please refresh this page or contact the webmaster if the problem persists.");else{DocuViewarejQueryPlugins.register();
var a={viewerWidth:null,viewerHeight:null,waitForInit:!1,appControllerPath:k,useIdInRoot:m,uniqueID:e,maxUploadSize:g,packetSize:r,favorMultipartUpload:d,debug:z,localization:eval("("+B+")"),certificateNames:eval("("+V+")"),UIconfig:y,snapIns:eval("("+w+")"),attachedDebugger:G,twainServiceUri32:C,twainServiceUri64:J,twainServiceSupportedVersion:K,twainSourceConfig:JSON.parse(H),isWindows:-1<navigator.platform.indexOf("Win"),windowsVersion:DocuViewareUtilities.getWindowsVersion(),isIOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?
!0:!1,isSafari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),isIE:-1!=DocuViewareUtilities.getInternetExplorerVersion(),isIE9:9==DocuViewareUtilities.getInternetExplorerVersion(),isIE10:10==DocuViewareUtilities.getInternetExplorerVersion(),isIE11:11==DocuViewareUtilities.getInternetExplorerVersion(),isIEorEdge:-1!=DocuViewareUtilities.getInternetExplorerVersion()||"Netscape"==navigator.appName&&-1<navigator.appVersion.indexOf("Edge"),isFirefox:"undefined"!==typeof InstallTrigger,
fastMode:!0,log:function(a){this.debug&&(dvJQuery("#logDebug"+this.uniqueID).val(dvJQuery("#logDebug"+this.uniqueID).val()+a+"\n"),dvJQuery("#logDebug"+this.uniqueID).scrollTop(dvJQuery("#logDebug"+this.uniqueID)[0].scrollHeight),dvJQuery("#debugBar"+this.uniqueID).show())},Internal:{Libs:{pica:{FILTER_INFO:[{win:.5,filter:function(a){return-.5<=a&&.5>a?1:0}},{win:1,filter:function(a){if(-1>=a||1<=a)return 0;if(-1.1920929E-7<a&&1.1920929E-7>a)return 1;a*=Math.PI;return Math.sin(a)/a*(.54+.46*Math.cos(a/
1))}},{win:2,filter:function(a){if(-2>=a||2<=a)return 0;if(-1.1920929E-7<a&&1.1920929E-7>a)return 1;a*=Math.PI;return Math.sin(a)/a*Math.sin(a/2)/(a/2)}},{win:3,filter:function(a){if(-3>=a||3<=a)return 0;if(-1.1920929E-7<a&&1.1920929E-7>a)return 1;a*=Math.PI;return Math.sin(a)/a*Math.sin(a/3)/(a/3)}}],toFixedPoint:function(a){return Math.floor(16384*a)},createFilters:function(a,b,d){var c=this.FILTER_INFO[a].filter,h=d/b,l=1/h;h=Math.min(1,h);a=this.FILTER_INFO[a].win/h;var e,f,g=new Int16Array((Math.floor(2*
(a+1))+2)*d),k=0;for(e=0;e<d;e++){var m=(e+.5)*l;var p=Math.max(0,Math.floor(m-a));var r=Math.min(b-1,Math.ceil(m+a));var R=r-p+1;var da=new Float32Array(R);R=new Int16Array(R);var w=0;var x=p;for(f=0;x<=r;x++,f++){var z=c((x+.5-m)*h);w+=z;da[f]=z}for(f=m=0;f<da.length;f++)r=this.toFixedPoint(da[f]/w),m+=r,R[f]=r;R[d>>1]+=this.toFixedPoint(1)-m;for(da=0;da<R.length&&0===R[da];)da++;if(da<R.length){for(w=R.length-1;0<w&&0===R[w];)w--;p+=da;f=w-da+1;g[k++]=p;g[k++]=f;g.set(R.subarray(da,w+1),k);k+=
f}else g[k++]=0,g[k++]=0}return g},convolveHorizontally:function(a,b,d,e,t,f,u){var c,h,l,q,g,k,F=0,m=0;for(g=0;g<t;g++){for(k=q=0;k<f;k++){var p=u[q++];var r=u[q++];var w=F+4*p|0;for(p=c=h=l=0;0<r;r--){var x=u[q++];0!=x&&(a&&(l=l+x*b[w+3]|0),h=h+x*b[w+2]|0,c=c+x*b[w+1]|0,p=p+x*b[w]|0);w=w+4|0}d[m+3]=a&&4169728>l?l+8192>>14:255;d[m+2]=4169728>h?h+8192>>14:255;d[m+1]=4169728>c?c+8192>>14:255;d[m]=4169728>p?p+8192>>14:255;m=m+4*t|0}m=4*(g+1)|0;F=(g+1)*e*4|0}},convolveVertically:function(a,b,d,e,t,f,
u){var c,h,l,q,g,k,m=0,F=0;for(g=0;g<t;g++){for(k=q=0;k<f;k++){var p=u[q++];var r=u[q++];var w=m+4*p|0;for(p=c=h=l=0;0<r;r--){var x=u[q++];0!=x&&(a&&(l=l+x*b[w+3]|0),h=h+x*b[w+2]|0,c=c+x*b[w+1]|0,p=p+x*b[w]|0);w=w+4|0}d[F+3]=a&&4169728>l?l+8192>>14:255;d[F+2]=4169728>h?h+8192>>14:255;d[F+1]=4169728>c?c+8192>>14:255;d[F]=4169728>p?p+8192>>14:255;F=F+4*t|0}F=4*(g+1)|0;m=(g+1)*e*4|0}},resize:function(a){var c=a.width,b=a.height,d=a.toWidth,e=a.toHeight,f=a.dest||new DocuViewareEncodingUtilities.TypedArray.Uint8Array(d*
e*4),u="undefined"===typeof a.quality?3:a.quality,g=a.alpha||!1;if(1>c||1>b||1>d||1>e)return[];var k=this.createFilters(u,c,d);u=this.createFilters(u,b,e);var m=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(d*b*4);this.convolveHorizontally(g,a.src,m,c,b,d,k);this.convolveVertically(g,m,f,b,d,e,u);return f}}},Capabilities:{_hasWebPSupport:null,hasWebPSupport:function(){if(null===this._hasWebPSupport){if(-1!=navigator.userAgent.indexOf("Firefox")){var a=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);
a=a?parseInt(a[1]):0;0!=a&&(this._hasWebPSupport=65<=a)}1!=this._hasWebPSupport&&(a=document.createElement("canvas"),a.getContext&&a.getContext("2d")?this._hasWebPSupport=0==a.toDataURL("image/webp").indexOf("data:image/webp"):this._hasWebPSupport=!1)}return this._hasWebPSupport},hasTiffSupport:function(){return a.isIE}},Utilities:{normalizeRotation:function(a){a%=360;0>a&&(a+=360);return a},rgb2hex:function(a,b,d){return"#"+(16777216+(d|b<<8|a<<16)).toString(16).slice(1)},color2Hex:function(a){return"#"===
a.substr(0,1)?a:(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""},color2Object:function(a){"#"===a.substr(0,1)&&(a=this.hex2Rgb(a));return(a=a.match(/^(?:rgb|rgba)\s*\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(\d?\.\d+))?\s*\)$/i))&&5===a.length?{r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3]),a:a[4]?
parseFloat(a[4]):1}:null},hex2Rgb:function(a){return"#"!==a.substr(0,1)?"":"rgb("+(a>>16)+","+(a>>8&255)+","+(a&255)+")"},roundEx:function(a,b){b=Math.pow(10,b);return Math.round(a*b)/b},pageRangeChecker:function(a,b){if(""!=b&&"*"!=b){b=b.split(";");var c=/([0-9])/,h;for(h in b){var d=b[h].split("-");if(2>=d.length)for(var e in d){if(1!=c.test(d[e])||0==parseInt(d[e])||parseInt(d[e])>a)return!1}else return!1}}return!0},pageRangeToArrayConverter:function(c){var b=a.serverCtx.pageCount,d=(c+"").replace(/\s+/g,
""),e=[];if("*"==c||""==c){for(d=1;d<=b;d++)e.push(d);return e}c=-1!=c.indexOf(";")?";":",";d=d.split(c);for(c=0;c<d.length;c++){var t=d[c].split("-");if(1===t.length)e.push(parseInt(t[0],10));else if(2===t.length){var f=parseInt(t[0],10);t=parseInt(t[1],10);if(!(t<f))for(;f<=t;f++)e.push(f)}}return e=e.filter(function(a,c,h){return h.indexOf(a)===c&&0<a&&a<=b}).sort(function(a,c){return a-c})}},Thumbnails:{lastUpdatedPageThumbnail:-1,selectedItems:[],THUMBNAIL_SHADOW_OFFSET:3,THUMBNAIL_SHADOW_BLUR:6,
THUMBNAIL_SHADOW_COLOR:"gray",getThumbnailPage:function(a){if(null!=a){var c=a.getAttribute("data-pageNo");if(c)return parseInt(c);if(null!=a.parentNode&&a.parentNode.getAttribute("data-pageNo"))return parseInt(a.parentNode.getAttribute("data-pageNo"))}return 0},setThumbnailPageDest:function(a,b){return null!=a?(a.setAttribute("data-pageNo",b.toString()),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},setThumbnailText:function(a,b){return null!=a?(a.children[1].innerHTML="<p align=center style='margin: 0 0 0 0;'><font size='-3'>"+
b+"</font></p>",DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},getThumbnailFromPageNo:function(c){c=dvJQuery(a.dom.thumbnailArea).children("[data-pageNo="+c+"]");return 0<c.length?c:null},resetThumbnailFromPageNo:function(a){a=this.getThumbnailFromPageNo(a);null!=a&&(a.attr("data-loaded","false"),a.attr("data-loading","false"))},getThumbnailAt:function(c,b){for(var h=a.dom.thumbnailArea.childElementCount,d=!1,e=0;e<h;e++){var f=a.dom.thumbnailArea.children[e];if(0!=a.Internal.Thumbnails.getThumbnailPage(f)){var u=
dvJQuery(f).position().top;if(u+dvJQuery(f).innerHeight()>=b&&u<=b){u=dvJQuery(f).position().left;if(u+dvJQuery(f).innerWidth()>=c&&u<=c)return f;d|=1}else if(d)break}}return null},createThumbnail:function(c){var b=document.createElement("div");a.Internal.Thumbnails.setThumbnailPageDest(b,c);b.setAttribute("data-loaded","false");b.setAttribute("data-loading","false");b.setAttribute("data-moving","false");b.onmouseover=a.events.onThumbnailItemMouseOverHandler;b.onmouseout=a.events.onThumbnailItemMouseOutHandler;
b.onclick=a.events.onThumbnailItemClickHandler;var d=document.createElement("canvas");d.className="spinner-thumb";d.width=a.dom.UIconfig.thumbnailWidth*DocuViewareUtilities.getDevicePixelRatio()+2*this.THUMBNAIL_SHADOW_OFFSET;d.height=a.dom.UIconfig.thumbnailHeight*DocuViewareUtilities.getDevicePixelRatio()+2*this.THUMBNAIL_SHADOW_OFFSET;d.style.width=a.dom.UIconfig.thumbnailWidth+2*this.THUMBNAIL_SHADOW_OFFSET+"px";d.style.height=a.dom.UIconfig.thumbnailHeight+2*this.THUMBNAIL_SHADOW_OFFSET+"px";
b.appendChild(d);d=document.createElement("div");d.style.position="relative";b.appendChild(d);a.Internal.Thumbnails.setThumbnailText(b,c.toString());return b},getSelectedThumbnails:function(c){var b=a.Internal.Thumbnails.selectedItems.slice();c&&b.sort(function(a,c){return a-c});return b},setThumbnailSelected:function(a,b){return b?this.selectThumbnail(a):this.unselectThumbnail(a)},selectThumbnail:function(c){if(1>c||c>a.GetPageCount())return DocuViewareAPI.Status.GenericError;-1==this.selectedItems.indexOf(c)&&
(this.selectedItems.push(c),a.dom.updateThumbStyle(c));return DocuViewareAPI.Status.OK},unselectThumbnail:function(c){if(1>c||c>a.GetPageCount())return DocuViewareAPI.Status.GenericError;this.selectedItems&&-1<this.selectedItems.indexOf(c)&&(this.selectedItems.splice(this.selectedItems.indexOf(c),1),a.dom.updateThumbStyle(c));return DocuViewareAPI.Status.OK},isThumbnailSelected:function(a){return this.selectedItems?-1<this.selectedItems.indexOf(a):!1},toggleThumbnailSelection:function(c){return 1>
c||c>a.GetPageCount()?DocuViewareAPI.Status.GenericError:this.isThumbnailSelected(c)?this.unselectThumbnail(c):this.selectThumbnail(c)},reinitThumbnailsSelection:function(){var c=this.selectedItems;this.selectedItems=[];if(0!=c.length)for(var b=0;b<c.length;b++)a.dom.updateThumbStyle(c[b])},reinitThumbnails:function(){a.Internal.Thumbnails.reinitThumbnailsSelection();for(var c=a.dom.thumbnailArea.childElementCount,b=0;b<c;b++){var d=a.dom.thumbnailArea.children[b];a.Internal.Thumbnails.setThumbnailPageDest(d,
b+1);a.Internal.Thumbnails.setThumbnailText(d,(b+1).toString())}},removeAllThumbnails:function(){this.selectedItems=[];if(a.dom.thumbnailArea)for(;a.dom.thumbnailArea.hasChildNodes();)a.dom.thumbnailArea.removeChild(a.dom.thumbnailArea.lastChild)}},Files:{MAX_UPLOAD_THREADS:3,uploadThreads:0,uploadStates:[],uploading:!1,uploadChunks:0,file:null,updateProgress:function(){for(var c=0,b=0;b<a.Internal.Files.uploadStates.length;b++)c+=a.Internal.Files.uploadStates[b];b=Math.min(c/(100*a.Internal.Files.uploadStates.length)*
100,99.9);if("undefined"===typeof a.dom.progressbar.value100||a.dom.progressbar.value100<b)a.dom.progressbar.go(b),a.dom.progressbar.value100=b,c=dvJQuery(a.dom.mainSpinnerContent),b=parseFloat(Math.round(100*b)/100).toFixed(2),c.children(c.children.length-1).text(a.Localize("label__loading_progress")+" ("+b+"%)")},uploadFile:function(c,b,d,e){var h=c.size;if(0!=h)if(a.Internal.Files.file=c,0<a.dom.maxUploadSize&&a.dom.maxUploadSize<h)c=alert,b=a.Localize("error__upload_max_size"),d=a.dom.maxUploadSize,
e=1099511627776,d=0<=d&&1024>d?d+" B":1024<=d&&1048576>d?(d/1024).toFixed(2)+" KB":1048576<=d&&1073741824>d?(d/1048576).toFixed(2)+" MB":1073741824<=d&&d<e?(d/1073741824).toFixed(2)+" GB":d>=e?(d/e).toFixed(2)+" TB":d+" B",c(b+d+".");else{for(var l=[],q=0,f=0,g=a.dom.packetSize>h?h:a.dom.packetSize;f<h;)q++,l.push(c.slice(f,g)),f=g,g=f+a.dom.packetSize;f=0;g=Date.now();for(a.debug&&console.log("DocuVieware: uploadFile::creating packets");f<q;)this.uploadChunk(g,c.name,l[f],q,f+1,h,b,d,e),f++;a.debug&&
console.log("DocuVieware: uploadFile::"+q+" packets generated")}},uploadChunk:function(c,b,d,e,t,f,u,g,k){function h(c,b){dvJQuery(a.dom.mainSpinner).show();a.ajax.transferID=c;a.Internal.Files.uploading=!0;a.Internal.Files.uploadStates=Array(e);for(c=0;c<e;c++)a.Internal.Files.uploadStates[c]=0;a.Internal.Files.uploadThreads=0;a.Internal.Files.uploadChunks=b;a.dom.progressbar.go(0);a.dom.progressbar.value100=0;b=dvJQuery(a.dom.mainSpinnerContent);b.children(b.children.length-1).text(a.Localize("label__loading_progress"))}
a.ajax.transferID!=c&&h(c,e);if(1==a.Internal.Files.uploading)if(a.Internal.Files.uploadThreads>=a.Internal.Files.MAX_UPLOAD_THREADS)setTimeout(function(){a.Internal.Files.uploadChunk(c,b,d,e,t,f,u,g,k)},10);else{a.Internal.Files.uploadThreads++;var l=new FileReader;if(a.favorMultipartUpload)l.onload=function(h){a.Internal.Files.transferChunk(c,b,d,null,e,t,f,u,g,k)},l.readAsArrayBuffer(d);else if(null==l.readAsBinaryString)if(a.isIE11){l=URL.createObjectURL(d);var q=new XMLHttpRequest;q.open("get",
l,!0);q.responseType="arraybuffer";q.onload=function(){if(200==this.status){for(var h=new Uint8Array(this.response),l=h.length,q=Array(l);l--;)q[l]=String.fromCharCode(h[l]);h=window.btoa(q.join(""));a.Internal.Files.transferChunk(c,b,d,h,e,t,f,u,g,k)}};q.send()}else l.onload=function(h){h=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(this.result);h=DocuViewareEncodingUtilities.base64.encode(function(a){for(var c=a.length,b=Array(c);c--;)b[c]=String.fromCharCode(a[c]);return b.join("")}(h));
a.Internal.Files.transferChunk(c,b,d,h,e,t,f,u,g,k)},l.readAsArrayBuffer(d);else l.onload=function(h){h=DocuViewareEncodingUtilities.base64.encode(h.target.result);a.Internal.Files.transferChunk(c,b,d,h,e,t,f,u,g,k)},l.readAsBinaryString(d)}},transferChunk:function(c,b,d,e,t,f,u,g,k,m){function h(c){a.Internal.Files.uploading=!1;a.dom.progressbar.go(100);a.dom.progressbar.value100=100;dvJQuery(a.dom.mainSpinner).hide();if(c){if(a.callbacks.onFileOpenSuccess)a.callbacks.onFileOpenSuccess()}else if(a.callbacks.onFileOpenError)a.callbacks.onFileOpenError()}
var l={url:a.appControllerPath+(a.favorMultipartUpload?"/loadfromfilemultipart":"/loadfromfile")+(a.useIdInRoot?"/1":""),async:!0,beforeSend:function(){a.Internal.Files.uploadStates[f-1]=0;return a.Internal.Files.uploading},success:function(c){a.Internal.Files.uploading?(c="string"===typeof c?eval("("+c+")"):c)&&c.status==DocuViewareAPI.Status.OK?(a.Internal.Files.uploadThreads--,c.isTransfering?(a.Internal.Files.uploadStates[f-1]=100,a.Internal.Files.updateProgress()):(h(!0),a.ajax.SetNewServerCtx(c))):
c&&c.status!=DocuViewareAPI.Status.OK&&null!=c.responseType&&"DocuVieware"===c.responseType&&c.allowRetry?(console.log("DocuVieware: Failed to upload packet: "+f.toString()+". Retrying..."),a.ajax.PostAjaxRequestForDocuViewareAction(l)):(h(!1),a.Internal.Files.uploadThreads--,a.ajax.HandleError(c)):a.Internal.Files.uploadThreads--},error:function(c){a.ajax.HandleError(c);h(!1);a.Internal.Files.uploadThreads--},xhr:function(){var c=dvJQuery.ajaxSettings.xhr();c.upload&&c.upload.addEventListener("progress",
function(c){c.lengthComputable&&(a.Internal.Files.uploadStates[f-1]=c.loaded/c.total*100,a.Internal.Files.updateProgress())},!1);return c}};a.favorMultipartUpload?(c=new FormData,c.append("transferID",a.ajax.transferID),c.append("sessionID",a.ajax.sessionID),c.append("appendMode",g),c.append("fileName",b),c.append("fileSize",u),c.append("data",d,"fileblob"),c.append("chunkCount",t),c.append("chunkID",f),c.append("password",k),c.append("contentEncoding",m),l.data=c,l.cache=!1,l.contentType=!1,l.processData=
!1):(b=JSON.stringify({transferID:a.ajax.transferID,sessionID:a.ajax.sessionID,appendMode:g,fileName:b,fileSize:u,data:e,chunkCount:t,chunkID:f,password:k,contentEncoding:m}),l.data=b,l.contentType="application/json");a.ajax.PostAjaxRequestForDocuViewareAction(l)}},FilePassword:{dialog:null,createAndShowDialog:function(c,b){null!=a.Internal.FilePassword.dialog&&a.Internal.FilePassword.dialog.remove();a.Internal.FilePassword.dialog=dvJQuery(a.dom.dvpassword).clone();var h=a.Internal.FilePassword.dialog;
dvJQuery(a.dom.mainSpinner).hide();dvJQuery(a.dom.modalOverlayArea).show();h.appendTo(dvJQuery(a.dom.mainArea));h.css("display","block");h.find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.headerColor);h.find(".dvUi-dialog-content").css("background-color",a.dom.UIconfig.panelBackColor);h.find(".password-dialog-submit-button").click(function(){c(h.find("input[type=password]").val())});h.find(".password-dialog-close-button").click(function(){b()})},showError:function(c){var b=a.Internal.FilePassword.dialog.find(".dvUi-state-error-text");
b.text(c);b.css({"font-weight":"bold"});setTimeout(function(){b.css({"font-weight":"normal"})},1E3)},destroyDialog:function(){a.Internal.FilePassword.dialog.remove();dvJQuery(a.dom.modalOverlayArea).hide()},setPassword:function(c,b){a.ajax.PostBaseRequest("setpassword",{data:{password:c},success:function(c){(c="string"===typeof c?eval("("+c+")"):c)&&c.status==DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(c),a.Internal.FilePassword.destroyDialog()):c.status!==DocuViewareAPI.Status.InvalidPassword&&
c.status!==DocuViewareAPI.Status.PasswordRequired||!b?a.ajax.HandleError(c):a.Internal.FilePassword.showError(a.Localize("dialog_password_incorrect"))},error:function(c){a.ajax.HandleError(c)}},!1,!0)}},Print:{MAX_PRINTING_THREADS:5,printThreads:0,isPrinting:!1,printPages:function(c,b,d,e,t,f){if(a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.isIE&&a.IsFullScreenMode()&&a.ToggleFullscreen();if(b&&!a.Internal.Utilities.pageRangeChecker(a.GetPageCount(),b))return a.DisplayError(a.Localize("error__invalid_page_range")),
DocuViewareAPI.Status.GenericError;if("0"==d)if(a.Internal.Utilities.pageRangeToArrayConverter(b)){d=function(){a.Internal.Print.isPrinting=!1;f&&f()};var h=function(c,b){if(a.Internal.Print.isPrinting&&(q[c-1]=b,g++,e&&e(g,l.length),g==l.length)){var h=document.createElement("iframe");document.body.appendChild(h);h.contentWindow.document.open();h.contentWindow.document.write("<!doctype html>");a.isFirefox?h.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>"+a.serverCtx.fileName+
"</title><style media='print'>@page{size:auto;margin:0;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>"):h.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>"+a.serverCtx.fileName+"</title><style media='print'>@page{size:auto;margin:10mm;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>");
for(c=0;c<g;c++)0<c&&h.contentWindow.document.write("<div style='page-break-before:always;width:0;height:0;margin:0;padding:0'></div>"),h.contentWindow.document.write(q[l[c]-1]),"function"==typeof CollectGarbage&&CollectGarbage();h.contentWindow.document.write("</body></html>");h.contentWindow.document.close();setTimeout(function(){document.body.removeChild(h)},6E3);a.Internal.Print.isPrinting=!1;t&&t();if(a.callbacks.onDocumentPrinted)a.callbacks.onDocumentPrinted()}},l=a.Internal.Utilities.pageRangeToArrayConverter(b),
q=[],g=0;a.Internal.Print.isPrinting=!0;for(b=0;b<l.length;b++)this.getPageForPrint(c,l[b],l.length,h,d)}else return DocuViewareAPI.Status.GenericError;else if(window.open(a.appControllerPath+"/print"+(a.useIdInRoot?"/1":"")+"?sessionID="+a.ajax.sessionID+"&pageRange="+(b?b:"*")+"&printAnnotations="+c,"_blank"),t&&t(),a.callbacks.onDocumentPrinted)a.callbacks.onDocumentPrinted();return DocuViewareAPI.Status.OK},getPageForPrint:function(c,b,d,e,t){1==a.Internal.Print.isPrinting&&(a.Internal.Print.printThreads>=
a.Internal.Print.MAX_PRINTING_THREADS?setTimeout(function(){a.Internal.Print.getPageForPrint(c,b,d,e,t)},10):(a.Internal.Print.printThreads++,a.ajax.PostBaseRequest("print",{data:{entries:[b],printAnnotations:c,pageCount:d},success:function(c){if((c="string"===typeof c?eval("("+c+")"):c)&&c.status==DocuViewareAPI.Status.OK&&c.contextID==a.ajax.contextID)for(var b=0;b<c.images.length;b++){var h=null;if(c.images[b].getFromCache){var d=a.cache.getPageObject(c.images[b].pageNo);d&&(h=d.bitmap,h.style.display=
"block",h.style.maxWidth="99.5%",h.style.maxHeight="99.5%",h.style.margin="0 auto",h.style.padding="0",h.style.height="auto",h.style.width="auto",h=h.outerHTML)}else c.images[b].mime&&c.images[b].data&&(h="<img src='data:"+c.images[b].mime+";base64,"+c.images[b].data+"' style='display: block; max-width: 99.5%; max-height: 99.5%; margin: 0 auto; padding: 0; height: auto; width: auto;'>",c.images[b].setInCache&&a.cache.cachePageBitmap(c.images[b].pageNo,c.images[b].mime,c.images[b].data,c.images[b].scale,
c.images[b].hasTransparency));e&&e(c.images[b].pageNo,h)}"function"==typeof CollectGarbage&&CollectGarbage()},error:function(c){a.ajax.HandleError(c);t&&t()},complete:function(c){a.Internal.Print.printThreads--}},!1,!0)))}},Selection:{getSelectionAreaCoordinates:function(){var c={left:0,top:0,width:0,height:0};if((3==a.events.mouseMode||4==a.events.mouseMode)&&0<dvJQuery(a.dom.rselect).width()&&dvJQuery(a.dom.rselect).height()){var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),d=a.dom.viewerArea.getBoundingClientRect(),
e=a.dom.rselect.getBoundingClientRect();d={left:e.left-d.left-b.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),top:e.top-d.top-b.pageTop+a.Internal.Coordinates.getViewerScrollTop(),width:dvJQuery(a.dom.rselect).width(),height:dvJQuery(a.dom.rselect).height()};b=a.Internal.Matrix.scale(a.Internal.Matrix.invert(b.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(b,0,d);c.left=a.Internal.Utilities.roundEx(d.left,7);c.top=a.Internal.Utilities.roundEx(d.top,7);c.width=a.Internal.Utilities.roundEx(d.width,
7);c.height=a.Internal.Utilities.roundEx(d.height,7)}return c},setSelectionAreaCoordinates:function(c){if(!a.serverCtx.documentLoaded||"object"!==typeof c||!c.left&&0!=c.left||!c.top&&0!=c.top||!c.width||!c.height)return DocuViewareAPI.Status.GenericError;var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),d=a.Internal.Matrix.scale(b.contentMatrix,96,96,!1);a.Internal.Matrix.transformBBox(d,0,c);d=c.left+b.pageLeft;var e=c.top+b.pageTop,t=c.width;c=c.height;if(d<b.pageLeft||d+t>b.pageLeft+
b.pageWidth||e<b.pageTop||e+c>b.pageTop+b.pageHeight)return DocuViewareAPI.Status.GenericError;3!=a.events.mouseMode&&4!=a.events.mouseMode&&a.SetMouseMode(3);this.selectionArea.startNewSelectionBox(d,e,!0);a.dom.rselect.style.height=c+"px";a.dom.rselect.style.width=t+"px";a.dom.rselect.height=c;a.dom.rselect.width=t;this.selectionArea.show();return DocuViewareAPI.Status.OK},clearSelectionArea:function(){this.selectionArea.reset()},selectionArea:{isMoving:!1,isSelected:!1,isOver:!1,resizingMode:-1,
lineMode:0,startX:0,endX:0,startY:0,endY:0,antOffset:0,dashList:[4,4,4,4],dashLength:0,init:function(c){a.dom.rselect=document.createElement("canvas");a.dom.rselect.style.zIndex=a.dom.zindexManager.getSelectionAreaZindex();a.dom.rselect.style.display="block";a.dom.rselect.style.position="absolute";a.dom.rselect.style.height="0px";a.dom.rselect.style.width="0px";a.dom.rselect.style.left="0px";a.dom.rselect.style.top="0px";a.dom.rselect.style.padding="0px";a.dom.rselect.style.margin="0px";a.dom.rselect.style.visibility=
"hidden";window.PointerEvent?(a.dom.rselect.onpointerup=function(c){switch(c.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseUp(c);break;case "pen":a.Internal.Selection.selectionArea.mouseUp(c,!0);break;case "touch":a.Internal.Selection.selectionArea.mouseDown(c,!0);break;default:a.Internal.Selection.selectionArea.mouseUp(c)}},a.dom.rselect.onpointerdown=function(c){switch(c.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseDown(c);break;case "pen":a.Internal.Selection.selectionArea.mouseDown(c,
!0);break;case "touch":a.Internal.Selection.selectionArea.mouseDown(c,!0);break;default:a.Internal.Selection.selectionArea.mouseDown(c)}},a.dom.rselect.onpointermove=function(c){switch(c.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseMove(c);break;case "pen":a.Internal.Selection.selectionArea.mouseMove(c,!0);break;case "touch":a.Internal.Selection.selectionArea.mouseMove(c,!0);break;default:a.Internal.Selection.selectionArea.mouseMove(c)}},a.dom.rselect.onpointerleave=function(c){switch(c.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseLeave(c);
break;case "pen":a.Internal.Selection.selectionArea.mouseLeave(c);break;default:a.Internal.Selection.selectionArea.mouseLeave(c)}},a.dom.rselect.onpointerenter=function(c){switch(c.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseEnter(c);break;case "pen":a.Internal.Selection.selectionArea.mouseEnter(c);break;default:a.Internal.Selection.selectionArea.mouseEnter(c)}}):(a.dom.rselect.onmouseup=function(c,b){return a.Internal.Selection.selectionArea.mouseUp(c,b)},a.dom.rselect.onmousedown=
function(c,b){return a.Internal.Selection.selectionArea.mouseDown(c,b)},a.dom.rselect.onmouseenter=function(c,b){return a.Internal.Selection.selectionArea.mouseEnter(c,b)},a.dom.rselect.onmousemove=function(c,b){return a.Internal.Selection.selectionArea.mouseMove(c,b)},a.dom.rselect.onmouseleave=function(c,b){return a.Internal.Selection.selectionArea.mouseLeave(c,b)});c.appendChild(a.dom.rselect)},reset:function(){if(3==a.events.mouseMode||4==a.events.mouseMode)this.isOver=this.isSelected=this.isMoving=
!1,this.resizingMode=-1,a.dom.rselect.style.height="0px",a.dom.rselect.style.width="0px",a.dom.rselect.height=0,a.dom.rselect.width=0,this.hide()},show:function(){a.dom.rselect&&(a.dom.rselect.style.visibility="visible")},hide:function(){a.dom.rselect&&(a.dom.rselect.style.visibility="hidden")},getCornerHitTest:function(a,b,d,e){return a>=d.left-e&&a<=d.left+e&&b>=d.top-e&&b<=d.top+e?0:a>=d.right-e&&a<=d.right+e&&b>=d.top-e&&b<=d.top+e?1:a>=d.right-e&&a<=d.right+e&&b<=d.bottom+e&&b>=d.bottom-e?2:
a>=d.left-e&&a<=d.left+e&&b<=d.bottom+e&&b>=d.bottom-e?3:a>=d.left-e&&a<=d.left+e?4:b>=d.top-e&&b<=d.top+e?5:a>=d.right-e&&a<=d.right+e?6:b<=d.bottom+e&&b>=d.bottom-e?7:-1},getGripSize:function(a){return 6*(a?3:1)},getStartPosition:function(){var c=a.Internal.Pages.getRenderingState(a.GetCurrentPage());return{x:this.startX-c.pageLeft,y:this.startY-c.pageTop}},getEndPosition:function(){var c=a.Internal.Pages.getRenderingState(a.GetCurrentPage());return{x:this.endX-c.pageLeft,y:this.endY-c.pageTop}},
getPageBounds:function(c){c=a.Internal.Pages.getRenderingState(c);var b=a.dom.viewerArea.getBoundingClientRect(),d=a.dom.rselect.getBoundingClientRect();return{left:d.left-b.left-c.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),top:d.top-b.top-c.pageTop+a.Internal.Coordinates.getViewerScrollTop(),width:d.width,height:d.height}},setCursor:function(c){if(this.isSelected&&this.isOver||this.isSelected&&this.isMoving){if(this.isMoving)c=this.resizingMode;else{c=this.getGripSize(c);var b=a.dom.rselect.getBoundingClientRect();
c=this.getCornerHitTest(a.events.mouseX,a.events.mouseY,b,c)}switch(c){case 0:a.dom.viewerArea.cursorMgr.setStdCursor("nw-resize");break;case 1:a.dom.viewerArea.cursorMgr.setStdCursor("ne-resize");break;case 2:a.dom.viewerArea.cursorMgr.setStdCursor("nwse-resize");break;case 3:a.dom.viewerArea.cursorMgr.setStdCursor("nesw-resize");break;case 4:a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");break;case 5:a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");break;case 6:a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");
break;case 7:a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");break;default:a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll")}}else this.isOver&&!this.isDrawing?a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll"):a.dom.viewerArea.cursorMgr.setStdCursor("crosshair")},setSelectionRectangleStyle:function(c){a.dom.rselect&&(c?(a.dom.rselect.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor,a.dom.rselect.style.borderStyle="none",a.dom.rselect.style.borderWidth="0px"):(a.dom.rselect.style.backgroundColor=
"rgba(0,0,255,0.2)",a.dom.rselect.style.borderStyle="solid",a.dom.rselect.style.borderColor="red",a.dom.rselect.style.borderWidth="1px"))},setLineMode:function(a){this.lineMode=a},startNewAnnotBox:function(c,b){this.stopDrawingAnts();this.startX=c;this.startY=b;a.dom.rselect.style.left=c+"px";a.dom.rselect.style.top=b+"px";a.dom.rselect.style.height="1px";a.dom.rselect.style.width="1px";a.dom.rselect.height=dvJQuery(a.dom.rselect).height();a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.getContext("2d").clearRect(0,
0,a.dom.rselect.width,a.dom.rselect.height);this.show();this.isDrawing=!0},setAnnotBoxEndPoint:function(a,b){this.endX=a;this.endY=b},startNewSelectionBox:function(c,b,d){this.stopDrawingAnts();this.isSelected=!1;this.startX=c;this.startY=b;a.dom.rselect.style.left=c+"px";a.dom.rselect.style.top=b+"px";a.dom.rselect.style.height="0px";a.dom.rselect.style.width="0px";a.dom.rselect.height=dvJQuery(a.dom.rselect).height();a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.getContext("2d").clearRect(0,
0,a.dom.rselect.width,a.dom.rselect.height);for(c=this.dashLength=this.antOffset=0;c<this.dashList.length;c++)this.dashLength+=this.dashList[c];this.drawingAnts();d||(this.isDrawing=!0)},drawingAnts:function(){a.Internal.Selection.selectionArea.antOffset++;a.Internal.Selection.selectionArea.antOffset>a.Internal.Selection.selectionArea.dashLength&&(a.Internal.Selection.selectionArea.antOffset=0);a.Internal.Selection.selectionArea.draw();a.Internal.Selection.selectionArea.drawingAntsOn=setTimeout(a.Internal.Selection.selectionArea.drawingAnts,
20)},stopDrawingAnts:function(){this.drawingAntsOn&&(clearTimeout(this.drawingAntsOn),this.drawingAntsOn=null)},draw:function(){if(3==a.events.mouseMode||4==a.events.mouseMode){var c=a.dom.rselect.getContext("2d");c.clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);c.lineWidth="1";c.strokeStyle=a.dom.UIconfig.activeSelectedColor;c.setLineDash?(c.setLineDash(this.dashList),c.lineDashOffset=-this.antOffset,c.strokeRect(0,0,a.dom.rselect.width,a.dom.rselect.height)):(c.beginPath(),this.drawDashedLine(c,
0,0,a.dom.rselect.width,0,this.dashList,this.antOffset),this.drawDashedLine(c,a.dom.rselect.width,0,a.dom.rselect.width,a.dom.rselect.height,this.dashList,this.antOffset),this.drawDashedLine(c,a.dom.rselect.width,a.dom.rselect.height,0,a.dom.rselect.height,this.dashList,this.antOffset),this.drawDashedLine(c,0,a.dom.rselect.height,0,0,this.dashList,this.antOffset),c.closePath(),c.stroke())}},drawDashedLine:function(a,b,d,e,t,f,g){var c=f.length,h=0;for(L=0;L<c;L++)h+=parseInt(f[L]);e-=b;t-=d;var l=
e?t/e:1E15;g=h*(1-g/h);g=Math.sqrt(g*g/(1+l*l));if(0>e||0>t)g=-g;b-=g;e+=g;d-=l*g;t+=l*g;a.moveTo(b,d);g=Math.sqrt(e*e+t*t);h=0;for(var q=!0;.1<=g;){var u=f[h++%c];u>g&&(u=g);var k=Math.sqrt(u*u/(1+l*l));if(0>e||0>t)k=-k;b+=k;d+=l*k;a[q?"lineTo":"moveTo"](b,d);g-=u;q=!q}},mouseUp:function(c,b){if(1==a.events.mouseMode&&this.isDrawing){b=a.dom.viewerArea.getBoundingClientRect();var h=a.Internal.Coordinates.getViewerScrollLeft(),d=a.Internal.Coordinates.getViewerScrollTop();a.Internal.Selection.selectionArea.setAnnotBoxEndPoint(c.clientX+
h-b.left,c.clientY+d-b.top);this.isDrawing=!1;this.hide();a.Internal.DigiSign.isAddingSignature?a.Internal.DigiSign.addSignatureInteractive():a.Internal.Annotations.addAnnotInteractive();return!0}if(4==a.events.mouseMode&&this.isDrawing)return c=a.GetSelectionAreaCoordinates(),this.reset(),this.isDrawing=!1,a.ZoomRect(c),!0;if(3==a.events.mouseMode&&this.isDrawing){this.isDrawing=!1;if(0==dvJQuery(a.dom.rselect).width()&&0==dvJQuery(a.dom.rselect).height())this.hide();else if(this.isSelected=!0,a.callbacks.onAreaSelected)a.callbacks.onAreaSelected();
return!0}return 3==a.events.mouseMode&&this.isMoving?(this.isMoving=!1,0==dvJQuery(a.dom.rselect).width()&&0==dvJQuery(a.dom.rselect).height()&&this.hide(),-1!=this.resizingMode&&(this.resizingMode=-1,this.setCursor()),!0):!1},mouseDown:function(c,b){a.events.mouseX=c.clientX;a.events.mouseY=c.clientY;a.events.mouseDownClientX=c.clientX;a.events.mouseDownClientY=c.clientY;this.isSelected=this.isMoving=!0;b=this.getGripSize(b);var h=a.dom.rselect.getBoundingClientRect();this.resizingMode=this.getCornerHitTest(c.clientX,
c.clientY,h,b);c.stopImmediatePropagation();c.preventDefault();return!1},mouseMove:function(c,b){this.setCursor(b);if(1==a.events.mouseMode){var h=a.dom.viewerArea.getBoundingClientRect();b=c.clientX-a.events.mouseDownX+a.Internal.Coordinates.getViewerScrollLeft();var d=c.clientY-a.events.mouseDownY+a.Internal.Coordinates.getViewerScrollTop();a.dom.rselect.style.width=Math.abs(b)+"px";a.dom.rselect.style.height=Math.abs(d)+"px";a.dom.rselect.width=Math.abs(b);a.dom.rselect.height=Math.abs(d);a.dom.rselect.style.left=
0>b?c.clientX-h.left+a.Internal.Coordinates.getViewerScrollLeft()+"px":a.events.mouseDownX-h.left+"px";a.dom.rselect.style.top=0>d?c.clientY-h.top+a.Internal.Coordinates.getViewerScrollTop()+"px":a.events.mouseDownY-h.top+"px";1==this.lineMode&&(c=a.dom.rselect.getContext("2d"),c.lineWidth=96*a.Internal.Annotations.currentInteractiveAnnotProperties.borderWidth*a.GetCurrentZoom(),c.strokeStyle=a.Internal.Annotations.currentInteractiveAnnotProperties.strokeColor,c.clearRect(0,0,a.dom.rselect.width,
a.dom.rselect.height),c.beginPath(),c.moveTo(0<b?0:a.dom.rselect.width,0<d?0:a.dom.rselect.height),c.lineTo(0>b?0:a.dom.rselect.width,0>d?0:a.dom.rselect.height),c.stroke());return!0}if((3==a.events.mouseMode||4==a.events.mouseMode)&&this.isDrawing){h=a.dom.viewerArea.getBoundingClientRect();var e=c.clientX-h.left+a.Internal.Coordinates.getViewerScrollLeft(),f=c.clientY-h.top+a.Internal.Coordinates.getViewerScrollTop(),g=this.startX,k=this.startY+a.Internal.Coordinates.getViewerScrollTop(),m=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),
p=null;g>=m.pageLeft&&g<=m.pageLeft+m.pageWidth?p=this.startX+h.left:g<m.pageLeft?p=h.left+m.pageLeft:g>m.pageLeft+m.pageWidth&&(p=h.left+m.pageLeft+m.pageWidth);var r=null;k>=a.Internal.Coordinates.getViewerScrollTop()+m.pageTop&&k<=a.Internal.Coordinates.getViewerScrollTop()+m.pageTop+m.pageHeight?r=this.startY+h.top:k<a.Internal.Coordinates.getViewerScrollTop()+m.pageTop?r=h.top+m.pageTop:k>a.Internal.Coordinates.getViewerScrollTop()+m.pageTop+m.pageHeight&&(r=h.top+m.pageTop+m.pageHeight);p&&
r&&(b=c.clientX-p+a.Internal.Coordinates.getViewerScrollLeft(),d=c.clientY-r+a.Internal.Coordinates.getViewerScrollTop(),e<=m.pageLeft+m.pageWidth?a.dom.rselect.style.width=e>=m.pageLeft?Math.abs(b)+"px":dvJQuery(a.dom.rselect).position().left+dvJQuery(a.dom.rselect).width()-m.pageLeft+"px":g<=a.Internal.Coordinates.getViewerScrollLeft()+m.pageLeft+m.pageWidth?a.dom.rselect.style.width=m.pageLeft+m.pageWidth-dvJQuery(a.dom.rselect).position().left+"px":a.dom.rselect.style.width="0px",f<=m.pageTop+
m.pageHeight?a.dom.rselect.style.height=f>=m.pageTop?Math.abs(d)+"px":dvJQuery(a.dom.rselect).position().top+dvJQuery(a.dom.rselect).height()-m.pageTop+"px":k<=a.Internal.Coordinates.getViewerScrollTop()+m.pageTop+m.pageHeight?a.dom.rselect.style.height=m.pageTop+m.pageHeight-dvJQuery(a.dom.rselect).position().top+"px":a.dom.rselect.style.height="0px",a.dom.rselect.style.left=0>b?e>=m.pageLeft?c.clientX-h.left+a.Internal.Coordinates.getViewerScrollLeft()+"px":m.pageLeft+"px":p-h.left+"px",a.dom.rselect.style.top=
0>d?f>=m.pageTop?c.clientY-h.top+a.Internal.Coordinates.getViewerScrollTop()+"px":m.pageTop+"px":r-h.top+"px");a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.height=dvJQuery(a.dom.rselect).height();0<dvJQuery(a.dom.rselect).width()&&0<dvJQuery(a.dom.rselect).height()&&this.show();return!0}if((3==a.events.mouseMode||4==a.events.mouseMode)&&this.isMoving){m=a.Internal.Pages.getRenderingState(a.GetCurrentPage());h=a.dom.viewerArea.getBoundingClientRect();e=a.dom.rselect.getBoundingClientRect();
if(-1!=this.resizingMode&&8!=this.resizingMode){f=c.pageX-h.left+a.Internal.Coordinates.getViewerScrollLeft();h=c.pageY-h.top+a.Internal.Coordinates.getViewerScrollTop();b=c.clientX-e.left;d=c.clientY-e.top;switch(this.resizingMode){case 0:0<dvJQuery(a.dom.rselect).width()-b&&(f<m.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+(dvJQuery(a.dom.rselect).position().left-m.pageLeft)),a.dom.rselect.style.left=m.pageLeft+"px"):(a.dom.rselect.style.left=f+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-
b)));0<dvJQuery(a.dom.rselect).height()-d&&(h<m.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+(dvJQuery(a.dom.rselect).position().top-m.pageTop)),a.dom.rselect.style.top=m.pageTop+"px"):(a.dom.rselect.style.top=h+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-d)));break;case 1:b=c.clientX-e.right;0<dvJQuery(a.dom.rselect).width()+b&&(f>m.pageLeft+m.pageWidth?dvJQuery(a.dom.rselect).width(m.pageLeft+m.pageWidth-dvJQuery(a.dom.rselect).position().left):
dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+b));0<dvJQuery(a.dom.rselect).height()-d&&(h<m.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+(dvJQuery(a.dom.rselect).position().top-m.pageTop)),a.dom.rselect.style.top=m.pageTop+"px"):(a.dom.rselect.style.top=h+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-d)));break;case 2:b=c.clientX-e.right;0<dvJQuery(a.dom.rselect).width()+b&&(f>m.pageLeft+m.pageWidth?dvJQuery(a.dom.rselect).width(m.pageLeft+
m.pageWidth-dvJQuery(a.dom.rselect).position().left):dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+b));d=c.clientY-e.bottom;0<dvJQuery(a.dom.rselect).height()+d&&(h>m.pageTop+m.pageHeight?dvJQuery(a.dom.rselect).height(m.pageTop+m.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+d));break;case 3:0<dvJQuery(a.dom.rselect).width()-b&&(f<m.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+(dvJQuery(a.dom.rselect).position().left-
m.pageLeft)),a.dom.rselect.style.left=m.pageLeft+"px"):(a.dom.rselect.style.left=f+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-b)));d=c.clientY-e.bottom;0<dvJQuery(a.dom.rselect).height()+d&&(h>m.pageTop+m.pageHeight?dvJQuery(a.dom.rselect).height(m.pageTop+m.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+d));break;case 4:0<dvJQuery(a.dom.rselect).width()-b&&(f<m.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+
(dvJQuery(a.dom.rselect).position().left-m.pageLeft)),a.dom.rselect.style.left=m.pageLeft+"px"):(a.dom.rselect.style.left=f+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-b)));break;case 5:0<dvJQuery(a.dom.rselect).height()-d&&(h<m.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+(dvJQuery(a.dom.rselect).position().top-m.pageTop)),a.dom.rselect.style.top=m.pageTop+"px"):(a.dom.rselect.style.top=h+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-
d)));break;case 6:b=c.clientX-e.right;0<dvJQuery(a.dom.rselect).width()+b&&(f>m.pageLeft+m.pageWidth?dvJQuery(a.dom.rselect).width(m.pageLeft+m.pageWidth-dvJQuery(a.dom.rselect).position().left):dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+b));break;case 7:d=c.clientY-e.bottom,0<dvJQuery(a.dom.rselect).height()+d&&(h>m.pageTop+m.pageHeight?dvJQuery(a.dom.rselect).height(m.pageTop+m.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+
d))}a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.height=dvJQuery(a.dom.rselect).height()}else b=c.clientX-a.events.mouseDownClientX,d=c.clientY-a.events.mouseDownClientY,dvJQuery(a.dom.rselect).position().left+b>=m.pageLeft&&dvJQuery(a.dom.rselect).position().left+b+dvJQuery(a.dom.rselect).width()<=m.pageLeft+m.pageWidth?(a.dom.rselect.style.left=dvJQuery(a.dom.rselect).position().left+b+"px",a.events.mouseDownClientX+=b):dvJQuery(a.dom.rselect).position().left+b<=m.pageLeft?
a.dom.rselect.style.left=m.pageLeft+"px":dvJQuery(a.dom.rselect).position().left+b+dvJQuery(a.dom.rselect).width()>=m.pageLeft+m.pageWidth&&(a.dom.rselect.style.left=m.pageLeft+m.pageWidth-dvJQuery(a.dom.rselect).width()+"px"),dvJQuery(a.dom.rselect).position().top+d>=m.pageTop&&dvJQuery(a.dom.rselect).position().top+d+dvJQuery(a.dom.rselect).height()<=m.pageTop+m.pageHeight?(a.dom.rselect.style.top=dvJQuery(a.dom.rselect).position().top+d+"px",a.events.mouseDownClientY+=d):dvJQuery(a.dom.rselect).position().top+
d<=m.pageTop?a.dom.rselect.style.top=m.pageTop+"px":dvJQuery(a.dom.rselect).position().top+d+dvJQuery(a.dom.rselect).height()>=m.pageTop+m.pageHeight&&(a.dom.rselect.style.top=m.pageTop+m.pageHeight-dvJQuery(a.dom.rselect).height()+"px");return!0}return!1},mouseEnter:function(a,b){return this.isOver=!0},mouseLeave:function(a,b){this.isOver=!1;return!0}}},Pages:{getPage:function(c){if(null!=a.cache.Pages)for(var b=0;b<a.cache.Pages.length;b++)if(a.cache.Pages[b].pageNo==c)return a.cache.Pages[b];return null},
selectByDestination:function(c){return a.ajax.PostBaseRequest("rundestination",{data:{destinationName:c},success:function(c){a.ajax.HandleServerContextResponse("string"===typeof c?eval("("+c+")"):c,!0,!0);a.dom.updateSelectedPageFader(0,a.GetCurrentPage())}},!1)},getVisiblePageNumbers:function(){var c=a.Internal.Coordinates.getViewerScrollTop(),b=c+dvJQuery(a.dom.viewerArea).innerHeight();return this.getVisiblePageNumbersEx(c,b)},getVisiblePageNumbersEx:function(c,b){var h=[];if(0==a.dom.viewerArea.offsetWidth||
0==a.dom.viewerArea.offsetHeight||null==a.cache.canvas)return h;if(c>b){var d=c;c=b;b=d}d=!1;for(var e=0;e<a.cache.canvas.length;e++){var f=a.cache.canvas[e],g=f.pageNo,k=f.canvas.length,m=parseFloat(f.canvas[0].tile.style.top);f=f.canvas[k-1];f=parseFloat(f.tile.style.top)+parseFloat(f.tile.style.height);if(a.Internal.Coordinates.hasVerticalIntersection(m,f,c,b))h.push(g),d=!0;else if(d)break}0<h.length&&h.sort(function(a,c){return a-c});return h},getText:function(c){return(c=a.Internal.Pages.getPage(c))?
c.text:null},getPageWidth:function(c){return(c=a.Internal.Pages.getPage(c))?c.width:0},getPageHeight:function(c){return(c=a.Internal.Pages.getPage(c))?c.height:0},isPageVisible:function(c){var b=a.cache.getPageCanvas(c);if(b){c=a.Internal.Coordinates.getViewerScrollTop();var d=c+dvJQuery(a.dom.viewerArea).innerHeight(),e=b.canvas.length,t=parseFloat(b.canvas[0].tile.style.top);b=parseFloat(b.canvas[e-1].tile.style.top)+parseFloat(b.canvas[e-1].tile.style.height);if(a.Internal.Coordinates.hasVerticalIntersection(t,
b,c,d))return!0}return!1},isPageRendered:function(c){return(c=a.Internal.Pages.getPage(c))?c.drawn||c.drawing:!1},getRenderRotation:function(c){return(c=a.Internal.Pages.getPage(c))?c.renderRotation:0},getPageRotation:function(c){return(c=a.Internal.Pages.getPage(c))?c.pageRotation:0},getRenderingState:function(c){for(var b,d,e,t,f,g,k,m=0;m<a.cache.canvas.length;m++)if(a.cache.canvas[m].pageNo==c){b=a.cache.canvas[m].left;d=a.cache.canvas[m].top;e=a.cache.canvas[m].right-b;t=a.cache.canvas[m].bottom-
d;break}if(c=a.Internal.Pages.getPage(c))f=c.contentMatrix,g=c.matrix,k=c.zoom;return{pageLeft:b,pageTop:d,pageWidth:e,pageHeight:t,zoom:k,matrix:g,contentMatrix:f}},pageView:function(c,b,d){function h(){if(null!=a.ajax.pendingPageViewRequests)for(var c=0;c<e.length;c++)for(var b=e[c],h=0;h<a.ajax.pendingPageViewRequests.length;h++)if(a.ajax.pendingPageViewRequests[h]==b){a.ajax.pendingPageViewRequests.splice(h,1);break}}if(!a.serverCtx.documentLoaded||!a.cache.canvas)return 0;for(var e=[],l=0;l<
c.length;l++){var f=c[l],g=!1,k=a.Internal.Pages.getPage(f);k&&(k.drawn||k.drawing||k.renderStatus!=DocuViewareAPI.Status.OK&&!d)&&(g=!0);if(!g){g=!1;if(null!=a.ajax.pendingPageViewRequests)for(k=0;k<a.ajax.pendingPageViewRequests.length;k++)if(a.ajax.pendingPageViewRequests[k]==f){g=!0;break}g||(null==a.ajax.pendingPageViewRequests&&(a.ajax.pendingPageViewRequests=[]),a.ajax.pendingPageViewRequests.push(f),e.push(f))}}0<e.length&&(b&&a.DisplayPendingActionNotification(),a.ajax.pageViewRequestNo+=
1,a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!0,contentType:"application/json",data:JSON.stringify({requestName:"pageview",requestData:{sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,zoom:a.serverCtx.zoom,forceReload:d,entries:e,requestNo:a.ajax.pageViewRequestNo}}),success:function(c){b&&a.HidePendingActionNotification();h();if((c="string"===typeof c?eval("("+c+")"):c)&&c.status==DocuViewareAPI.Status.OK&&c.contextID==a.ajax.contextID){var d=
!0,e=!1,l=!1;c.checkZoom&&Math.round(1E3*a.cache.pageCanvasZoom)!=Math.round(1E3*c.zoom)&&(a.debug&&console.log("DocuVieware pageview: result ignored because of zoom inconsistency. ctxzoom: "+a.serverCtx.zoom+". response zoom: "+c.zoom+"."),l=!0,d=!1);d&&a.serverCtx.viewRotation!=c.viewRotation&&(a.debug&&console.log("DocuVieware pageview: page state rejected because of rotation inconsistency. Ctx view rotation: "+a.serverCtx.viewRotation+". Content view rotation: "+c.viewRotation),e=!0);a.serverCtx.page=
c.images;a.UpdateUI(!1,!0,d,!1,l,e)}},error:function(c){a.ajax.HandleError(c);a.debug&&console.log("DocuVieware pageview error");h()}}));return e.length}},Coordinates:{getViewerScrollLeft:function(){return a.dom.viewerArea.scrollLeft},getViewerScrollLeftMax:function(){return a.dom.viewerArea.scrollWidth-a.dom.viewerArea.clientWidth},getViewerScrollTop:function(){return a.dom.viewerArea.scrollTop},getViewerScrollTopMax:function(){return a.dom.viewerArea.scrollHeight-a.dom.viewerArea.clientHeight},
setViewerScrollLeft:function(c,b){c=Math.round(c);if(null!=b&&Math.abs(a.dom.viewerArea.scrollLeft-c)<b)return DocuViewareAPI.Status.OK;a.dom.viewerArea.scrollLeft=c;return DocuViewareAPI.Status.OK},setViewerScrollTop:function(c,b){c=Math.round(c);if(null!=b&&Math.abs(a.dom.viewerArea.scrollTop-c)<b)return DocuViewareAPI.Status.OK;a.dom.viewerArea.scrollTop=c;return DocuViewareAPI.Status.OK},clienttodocument:function(c,b,d,e,t){c=a.Internal.Pages.getRenderingState(c);var h=a.dom.viewerArea.getBoundingClientRect();
t="undefined"===typeof t?!0:t;b={x:b-h.left-c.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),y:d-h.top-c.pageTop+a.Internal.Coordinates.getViewerScrollTop()};e=1==e?1/96:1;c=c.contentMatrix;t&&(c=a.Internal.Matrix.invert(c));e=a.Internal.Matrix.scale(c,e,e,!1);a.Internal.Matrix.transformPoint(e,b);return b},documentToViewer:function(c,b,d){c=a.Internal.Pages.getRenderingState(c);b={x:b,y:d};a.Internal.Matrix.transformPoint(c.contentMatrix,b);b.x+=c.pageLeft;b.y+=c.pageTop;return b},documentToViewerBox:function(c,
b){c=a.Internal.Pages.getRenderingState(c);a.Internal.Matrix.transformBBox(c.contentMatrix,0,b);b.left+=c.pageLeft;b.top+=c.pageTop},hasVerticalIntersection:function(a,b,d,e){return Math.min(b,e)>=Math.max(a,d)},hasIntersection:function(a,b,d,e,t,f,g,k){return Math.min(d,g)>=Math.max(a,t)&&Math.min(e,k)>=Math.max(b,f)},newRectangle:function(a,b,d,e){return{Left:a,Top:b,Right:a+d,Bottom:b+e,Width:d,Height:e}},rectUnion:function(a,b,d,e,t,f,g,k){a=Math.min(a,t);b=Math.min(b,f);return this.newRectangle(a,
b,Math.max(d,g)-a,Math.max(e,k)-b)},isPointInsideRect:function(a,b,d){return a.x>=b.Left-d&&a.x<=b.Right+d&&a.y>=b.Top-d&&a.y<=b.Bottom+d}},Rotations:{getRotateFlipTypeAngle:function(a){switch(a){case 1:return 90;case 2:return 180;case 3:return 270}return 0}},Text:{_selectedText:null,clearSelection:function(){a.callbacks.onTextUnselected&&null!==this._selectedText?(this._selectedText=null,a.callbacks.onTextUnselected()):this._selectedText=null},removeSelectedText:function(c,b){var h=this.getSelectedTextAreas();
if(!h.length)return DocuViewareAPI.Status.GenericError;a.ajax.PostBaseRequest("removetext",{data:{areas:h},success:function(h){var d="string"===typeof h?eval("("+h+")"):h;d&&d.status===DocuViewareAPI.Status.OK?(a.ajax.HandleServerContextResponse("string"===typeof h?eval("("+h+")"):h,!1),a.dom.SelectedTextRegions.clear(),c&&c()):(a.ajax.HandleError(h),b&&b())},error:function(c){a.ajax.HandleError(c);b&&b()}},!1);return DocuViewareAPI.Status.OK},anyWordHitTest:function(c,b,d){var h=a.Internal.Pages.getVisiblePageNumbers();
if(null!=h)for(var e=0;e<h.length;e++)if(a.Internal.Pages.isPageRendered(h[e])){var l=a.Internal.Pages.getText(h[e]);if(null!=l){var f=a.Internal.Coordinates.clienttodocument(h[e],c,b,0);f.x*=l.scale;f.y*=l.scale;if(l.textBlock.Matrix){var g=a.Internal.Matrix.invert(l.textBlock.Matrix);a.Internal.Matrix.transformPoint(g,f)}g=f.x;f=f.y;for(var k=l.textBlock.words,m=k.length,p=0;p<m;p++)if(-1!=k[p].PId&&k[p].BBox.Left-d<=g&&k[p].BBox.Right+d>=g&&k[p].BBox.Top-d<=f&&k[p].BBox.Bottom+d>=f)return{page:h[e],
textRotate:l.textBlock.Rotation}}}return null},getSelectedText:function(){return this._selectedText},getSelectedTextCoordinatesOnDocument:function(){var c=[];if(0<a.dom.SelectedTextRegions._cache.length)for(var b=0;b<a.dom.SelectedTextRegions._cache.length;b++){var d=a.Internal.Pages.getRenderingState(a.dom.SelectedTextRegions._cache[b].pageNo),e={left:a.dom.SelectedTextRegions._cache[b].offsetLeft-d.pageLeft,top:a.dom.SelectedTextRegions._cache[b].offsetTop-d.pageTop,width:a.dom.SelectedTextRegions._cache[b].offsetWidth,
height:a.dom.SelectedTextRegions._cache[b].offsetHeight};d=a.Internal.Matrix.scale(a.Internal.Matrix.invert(d.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(d,0,e);e={pageNo:a.dom.SelectedTextRegions._cache[b].pageNo,left:a.Internal.Utilities.roundEx(e.left,7),top:a.Internal.Utilities.roundEx(e.top,7),height:a.Internal.Utilities.roundEx(e.height,7),width:a.Internal.Utilities.roundEx(e.width,7)};c.push(e)}return c},getSelectedTextAreas:function(){var c=a.Internal.Text.getSelectedTextCoordinatesOnDocument(),
b=[];if(0<c.length)for(var d=0;d<c.length;d++)b.push({pageNo:c[d].pageNo,coordinates:{left:c[d].left,top:c[d].top,height:c[d].height,width:c[d].width}});return b},captureSelectedText:function(c,b,d,e,t,f){function h(a,c,b){var h=a._selectedText.length;0<h&&(b?a._selectedText+="\r\n":" "!=a._selectedText[h-1]&&"\t"!=a._selectedText[h-1]&&" "!=c[0]&&"\t"!=c[0]&&(a._selectedText+=" "))}function l(c,b){for(var h=[],d=c.Paragraphs.length,e=0;e<d;e++){var l=c.Paragraphs[e];a.Internal.Coordinates.hasIntersection(b.Left,
b.Top,b.Right,b.Bottom,l.BBox.Left,l.BBox.Top,l.BBox.Right,l.BBox.Bottom)&&h.push(l.Id)}return h}this._selectedText="";var q=[],g=a.dom.viewerArea.getBoundingClientRect(),k=a.Internal.Coordinates.getViewerScrollTop()-g.top;k=(g=-1==c&&-1==d&&-1==b&&-1==e)?[a.GetCurrentPage()]:a.Internal.Pages.getVisiblePageNumbersEx(b+k,e+k);if(null!=k)for(var m=!0,F=1==k.length,p=-1,r=-1,w=0;w<k.length;w++){var x=0==w,z=w==k.length-1,C=k[w];if(a.Internal.Pages.isPageRendered(C)){var y=[],B=[],G=a.Internal.Pages.getText(C);
if(null!=G){var J=f;0==G.textBlock.Rotation||g||(J=!0);var Z=a.Internal.Coordinates.clienttodocument(C,c,b,0);Z.x*=G.scale;Z.y*=G.scale;var I=a.Internal.Coordinates.clienttodocument(C,d,e,0);I.x*=G.scale;I.y*=G.scale;if(G.textBlock.Matrix){var H=a.Internal.Matrix.invert(G.textBlock.Matrix);a.Internal.Matrix.transformPoint(H,Z);a.Internal.Matrix.transformPoint(H,I)}H=Z.x;var E=Z.y;Z=I.x;I=I.y;if(E>I){var K=H;H=Z;Z=K;K=E;E=I;I=K}I=a.Internal.Coordinates.newRectangle(Math.min(H,Z),Math.min(E,I),Math.abs(H-
Z),Math.abs(E-I));I.Right=I.Left+I.Width;I.Bottom=I.Top+I.Height;E=l(G.textBlock,I);K=G.textBlock.words;for(var M=K.length,L=-1,T=0,W=!1,V=null,U=0;U<M;U++){var A=K[U];if(-1!=A.PId&&(g||-1!=E.indexOf(A.PId)))if(J){if(a.Internal.Coordinates.hasIntersection(I.Left,I.Top,I.Right,I.Bottom,A.BBox.Left,A.BBox.Top,A.BBox.Right,A.BBox.Bottom)){null!=V?(W=V.LineNo==A.LineNo,D=!W):D=W=!1;if(W&&B[B.length-1]===A.PId){var N=y[y.length-1];y[y.length-1]=a.Internal.Coordinates.rectUnion(N.Left,N.Top,N.Right,N.Bottom,
A.BBox.Left,A.BBox.Top,A.BBox.Right,A.BBox.Bottom)}else y.push(a.Internal.Coordinates.newRectangle(A.BBox.Left,A.BBox.Top,A.BBox.Width,A.BBox.Height)),B.push(A.PId);h(this,A.Content,D);this._selectedText+=A.Content;W=!0;V=A}}else{var D=T!=A.LineNo;D&&(T=A.LineNo,W=!1,L=-1);if(g||!x||-1!=p&&p!=A.LineNo||-1!=L){if(g)L=A.LineNo;else if(-1==L||-1!=L&&A.LineNo!=L&&-1==r)L=A.BBox.Bottom<I.Bottom?A.LineNo:-1;if(-1!=L)D||B[B.length-1]!==A.PId?(y.push(a.Internal.Coordinates.newRectangle(A.BBox.Left,A.BBox.Top,
A.BBox.Width,A.BBox.Height)),B.push(A.PId)):(N=y[y.length-1],y[y.length-1]=a.Internal.Coordinates.rectUnion(N.Left,N.Top,N.Right,N.Bottom,A.BBox.Left,A.BBox.Top,A.BBox.Right,A.BBox.Bottom)),h(this,A.Content,D),this._selectedText+=A.Content;else if(-1==r||r==A.LineNo){if(A.BBox.Top<I.Bottom)if(A.BBox.Right<Z)W&&B[B.length-1]===A.PId?(N=y[y.length-1],y[y.length-1]=a.Internal.Coordinates.rectUnion(N.Left,N.Top,N.Right,N.Bottom,A.BBox.Left,A.BBox.Top,A.BBox.Right,A.BBox.Bottom)):(y.push(a.Internal.Coordinates.newRectangle(A.BBox.Left,
A.BBox.Top,A.BBox.Width,A.BBox.Height)),B.push(A.PId)),h(this,A.Content,D),this._selectedText+=A.Content,W=!0;else{if(a.Internal.Coordinates.hasIntersection(I.Left,I.Top,I.Right,I.Bottom,A.BBox.Left,A.BBox.Top,A.BBox.Right,A.BBox.Bottom))for(h(this,A.Content,D),D=0;D<=A.GlyphBoxes.length-1;D++)A.GlyphBoxes[D].x+A.GlyphBoxes[D].width/2<Z&&(W&&B[B.length-1]===A.PId?(W=y[y.length-1],y[y.length-1]=a.Internal.Coordinates.rectUnion(W.Left,W.Top,W.Right,W.Bottom,A.GlyphBoxes[D].x,A.GlyphBoxes[D].y,A.GlyphBoxes[D].x+
A.GlyphBoxes[D].width,A.GlyphBoxes[D].y+A.GlyphBoxes[D].height)):(y.push(a.Internal.Coordinates.newRectangle(A.GlyphBoxes[D].x,A.GlyphBoxes[D].y,A.GlyphBoxes[D].width,A.GlyphBoxes[D].height)),B.push(A.PId)),W=!0,this._selectedText+=A.GlyphBoxes[D].glyph);break}else break;-1==r&&z&&(r=A.LineNo)}else break}else if(a.Internal.Coordinates.hasIntersection(I.Left,I.Top,I.Right,I.Bottom,A.BBox.Left,A.BBox.Top,A.BBox.Right,A.BBox.Bottom)){if(m&&1==k.length){for(m=U;m<M;){if(K[m].LineNo!=T){F=K[m].BBox.Top>
I.Bottom;break}m+=1}m=!1}h(this,A.Content,D);for(D=0;D<=A.GlyphBoxes.length-1;D++)t?N=!0:F?W?(N=A.GlyphBoxes[D].x+A.GlyphBoxes[D].width/2,N=a.Internal.Coordinates.hasIntersection(I.Left,I.Top,I.Right,I.Bottom,A.GlyphBoxes[D].x,A.GlyphBoxes[D].y,A.GlyphBoxes[D].x+A.GlyphBoxes[D].width,A.GlyphBoxes[D].y+A.GlyphBoxes[D].height)&&N<I.Right):N=a.Internal.Coordinates.hasIntersection(I.Left,I.Top,I.Right,I.Bottom,A.GlyphBoxes[D].x,A.GlyphBoxes[D].y,A.GlyphBoxes[D].x+A.GlyphBoxes[D].width,A.GlyphBoxes[D].y+
A.GlyphBoxes[D].height):(N=-1!=L?!0:(W?A.GlyphBoxes[D].x+A.GlyphBoxes[D].width/2:A.GlyphBoxes[D].x+A.GlyphBoxes[D].width)>H)&&-1==p&&(p=A.LineNo,L=A.BBox.Bottom<I.Bottom?A.LineNo:-1),N&&(W&&B[B.length-1]===A.PId?(W=y[y.length-1],y[y.length-1]=a.Internal.Coordinates.rectUnion(W.Left,W.Top,W.Right,W.Bottom,A.GlyphBoxes[D].x,A.GlyphBoxes[D].y,A.GlyphBoxes[D].x+A.GlyphBoxes[D].width,A.GlyphBoxes[D].y+A.GlyphBoxes[D].height)):(y.push(a.Internal.Coordinates.newRectangle(A.GlyphBoxes[D].x,A.GlyphBoxes[D].y,
A.GlyphBoxes[D].width,A.GlyphBoxes[D].height)),B.push(A.PId)),this._selectedText+=A.GlyphBoxes[D].glyph,W=!0)}}}if(null!=G.textBlock.Matrix)for(x=0;x<y.length;x++)a.Internal.Matrix.transformRect(G.textBlock.Matrix,y[x]);q.push({regions:y,regionPids:B,pageNo:C,scale:G.scale})}}}return q},captureAndHighlightSelectedText:function(c,b,d,e,t,f){if((c=a.Internal.Text.captureSelectedText(c,b,d,e,t,f))&&0<c.length){for(b=0;b<c.length;b++)for(d=0;d<c[b].regions.length;d++)a.dom.SelectedTextRegions.addNew(c[b].pageNo,
{left:c[b].regions[d].Left/c[b].scale,top:c[b].regions[d].Top/c[b].scale,width:c[b].regions[d].Width/c[b].scale,height:c[b].regions[d].Height/c[b].scale},"rgba(0,0,201,0.3)",null,1);a.callbacks.onTextSelected&&(c=a.Internal.Text.getSelectedTextAreas(),a.callbacks.onTextSelected(c))}}},Matrix:{transformPoint:function(a,b){var c=a.b*b.x+a.d*b.y+a.f;b.x=a.a*b.x+a.c*b.y+a.e;b.y=c},equal:function(a,b){return a.a===b.a&&a.b===b.b&&a.c===b.c&&a.d===b.d&&a.e===b.e&&a.f===b.f},combine:function(a,b){return{a:a.a*
b.a+a.b*b.c,b:a.a*b.b+a.b*b.d,c:a.c*b.a+a.d*b.c,d:a.c*b.b+a.d*b.d,e:a.e*b.a+a.f*b.c+b.e,f:a.e*b.b+a.f*b.d+b.f}},invert:function(a){var b=1/(a.a*a.d-a.b*a.c);b={a:a.d*b,b:-a.b*b,c:-a.c*b,d:a.a*b};b.e=-a.e*b.a-a.f*b.c;b.f=-a.e*b.b-a.f*b.d;return b},translate:function(a,b,d){return this.combine(a,{a:1,b:0,c:0,d:1,e:b,f:d})},isRotatedOrFlipped:function(a){return 0!=a.b||0!=a.c||0>a.a||0>a.d},scale:function(a,b,d,e){return e?this.combine({a:b,b:0,c:0,d:d,e:0,f:0},a):this.combine(a,{a:b,b:0,c:0,d:d,e:0,
f:0})},rotateAt:function(a,b,d,e,t){b=Math.PI*b/180;b={a:Math.cos(b),b:Math.sin(b),c:-Math.sin(b),d:Math.cos(b),e:d,f:e};if(t)return d=this.combine({a:1,b:0,c:0,d:1,e:-d,f:-e},b),this.combine(d,a);a=this.combine(a,{a:1,b:0,c:0,d:1,e:-d,f:-e});return this.combine(a,b)},transformBBox:function(a,b,d,e){var c=0==b?a:null==e?this.rotateAt(a,b,d.left+d.width/2,d.top+d.height/2,!0):this.rotateAt(a,b,e.x,e.y,!0);a={x:d.left,y:d.top};b={x:d.left+d.width,y:d.top};e={x:d.left+d.width,y:d.top+d.height};var h=
{x:d.left,y:d.top+d.height};this.transformPoint(c,a);this.transformPoint(c,b);this.transformPoint(c,e);this.transformPoint(c,h);c=Math.min(a.x,b.x,e.x,h.x);var l=Math.max(a.x,b.x,e.x,h.x),q=Math.min(a.y,b.y,e.y,h.y);a=Math.max(a.y,b.y,e.y,h.y);d.left=c;d.top=q;d.width=l-c;d.height=a-q},transformRect:function(a,b){var c={x:b.Left,y:b.Top},d={x:b.Left+b.Width,y:b.Top},h={x:b.Left+b.Width,y:b.Top+b.Height},e={x:b.Left,y:b.Top+b.Height};this.transformPoint(a,c);this.transformPoint(a,d);this.transformPoint(a,
h);this.transformPoint(a,e);a=Math.min(c.x,d.x,h.x,e.x);var f=Math.max(c.x,d.x,h.x,e.x),g=Math.min(c.y,d.y,h.y,e.y);c=Math.max(c.y,d.y,h.y,e.y);b.Left=a;b.Top=g;b.Width=f-a;b.Height=c-g}},Search:{_currentOccurence:null,_occurences:null,_firstResult:null,clearResults:function(){this._currentOccurence=this._occurences=this._firstResult=null;if(a.dom.searchResults&&a.dom.searchResults.hasChildNodes())for(var b=a.dom.searchResults.children.length-1;0<=b;b--)a.dom.searchResults.removeChild(a.dom.searchResults.children[b]);
a.dom.SelectedTextRegions.clear(2)},addResults:function(b,d){this.clearResults();this._occurences=d;a.dom.SelectedTextRegions.clear(2);this.occurences=d;var c=null!=d?d.length:0;if(0<c)for(var h=1,e,f=0,g=0;g<c;g++){var k=document.createElement("div");k.id=a.uniqueID+"searchResultItem"+g;k.setAttribute("data-idx",g);0==g?this._firstResult=k:d[g].page!=e&&(h=1);e=d[g].page;k.pageOccurence=h++;k.className="searchResultItem";var m=d[g].context.content,p=d[g].context.resultStart,r=d[g].context.resultLen;
k.innerHTML=m.substr(0,p)+'<strong style="color:'+a.dom.UIconfig.activeSelectedColor+';">'+m.substr(p,r)+"</strong>"+m.substr(p+r);k.pageNo=d[g].page;m=d[g].resultBoxes[d[g].resultBoxes.length-1];k.wordLeft=m.Left;k.wordTop=m.Top;k.wordWidth=m.Width;k.wordHeight=m.Height;k.searchedValue=b;a.dom.searchArea&&(k.onmouseenter=this.resultOnMouseEnterHandler,k.onmouseleave=this.resultOnMouseLeaveHandler,k.onclick=this.resultOnClickHandler);if(a.dom.searchArea&&f!=e){m=d.slice(g+1);f=1;if(0!==m.length)for(p=
0;m[p]&&m[p].page===e;p++)f++;m=document.createElement("div");m.className="searchResultItemPage";m.style.backgroundColor=a.dom.UIconfig.panelDarkerBackColor;p=document.createElement("span");p.className="matches";p.innerText=f.toString()+" "+(1===f?a.Localize("label_match"):a.Localize("label_matches"));f=document.createElement("span");f.className="pageNumber";f.innerText=a.Localize("label_page")+" "+e;r=document.createElement("div");r.className="separator";m.appendChild(p);m.appendChild(f);m.appendChild(r);
f=e;a.dom.searchResults.appendChild(m)}a.dom.searchArea&&a.dom.searchResults.appendChild(k)}},highlightResults:function(b){a.dom.SelectedTextRegions.clear(2,b);if(null!=this._occurences){var c=this._occurences.length;if(0<c)for(var d=1,e=0;e<c;e++)if(this._occurences[e].page==b){var t=this._occurences[e].resultBoxes.map(function(a){return{left:96*a.Left,top:96*a.Top,width:96*a.Width,height:96*a.Height}});null!=this._currentOccurence&&this._currentOccurence.pageNo==b&&this._currentOccurence.pageOccurence==
d?a.dom.SelectedTextRegions.addNews(this._occurences[e].page,t,"rgba(0,200,0,0.3)","rgba(255,0,0,1)",2):a.dom.SelectedTextRegions.addNews(this._occurences[e].page,t,"rgba(0,200,0,0.3)",null,2);d++}}},navigateToFirstResult:function(){this._firstResult&&(this.navigateToResult(this._firstResult),a.dom.searchResults.parentElement.scrollTop=0)},resultOnClickHandler:function(b){a.Internal.Search.navigateToResult(b.currentTarget)},resultOnMouseEnterHandler:function(b){b.target.style.borderColor=a.dom.UIconfig.activeSelectedColor},
resultOnMouseLeaveHandler:function(b){b.target.style.borderLeftColor="transparent";b.target.style.borderRightColor="transparent";b.target.style.borderTopColor="transparent";b.target.style.borderBottomColor=a.dom.UIconfig.miscBorderColor},navigateToResult:function(b){a.Internal.Search._currentOccurence=b;a.dom.searchArea&&(dvJQuery(a.dom.searchResults).find(".searchResultItem").each(function(){dvJQuery(this).removeClass("active");dvJQuery(this).css("border-left-color","transparent");dvJQuery(this).css("border-right-color",
"transparent");dvJQuery(this).css("border-top-color","transparent");dvJQuery(this).css("border-bottom-color",a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("background-color","transparent")}),b.style.borderColor="transparent",b.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor,dvJQuery(b).addClass("active"),a.Internal.Search.scrollContainerToItem(b));a.SelectPageEx(b.pageNo,!0,!0,!0,!1,!0,function(){a.EnsurePageRegionVisibility(b.pageNo,b.wordLeft,b.wordTop,b.wordWidth,b.wordHeight)})},
scrollContainerToItem:function(b){var c=a.dom.searchResultsContainer.getBoundingClientRect(),d=a.dom.searchResultsContainer.clientHeight;b=b.getBoundingClientRect();b.top>=c.top&&b.top<=c.top+d||(a.dom.searchResultsContainer.scrollTop=b.top+a.dom.searchResultsContainer.scrollTop-c.top)}},FormFields:{existFormField:function(b){if(!b.control)return!1;if(a.dom.viewerArea.hasChildNodes())for(var c=a.dom.viewerArea.children.length-1;0<=c;c--)if(a.dom.viewerArea.children[c]===b.control)return!0;return!1},
removePageFormFields:function(b){if(null!=a.cache.FormFields)for(var c=0;c<a.cache.FormFields.length;c++){var d=a.cache.FormFields[c];d.formFieldApp.pageNo==b&&(this.removeFormField(d),a.cache.FormFields.splice(c,1),c--)}},removeAll:function(b){if(null!=a.cache.FormFields){for(b=0;b<a.cache.FormFields.length;b++)this.removeFormField(a.cache.FormFields[b]);a.cache.FormFields=null}},removeFormField:function(b){b.control&&b.control.parentNode==a.dom.viewerArea&&a.dom.viewerArea.removeChild(b.control);
if(b.children)for(var c=0;c<b.children.length;c++)this.removeFormField(b.children[c])},removeFormFieldFromCache:function(b){if(null!=a.cache.FormFields)for(var c=0;c<a.cache.FormFields.length;c++)a.cache.FormFields[c].formFieldApp.id===b&&(a.cache.FormFields.splice(c,1),c--)},newController:function(b){var c={};c.formFieldApp=b;c.updateNo=0;c.pendingUpdate=0;c.stopEditing=function(){this.isEditing()&&this.isModified()&&this.updateFormField(null)};c.updateFormField=function(b){if(a.hasPendingAction(!0,
!0))return DocuViewareAPI.Status.GenericError;var c={};c.properties=this.formFieldApp.properties;c.sessionID=a.ajax.sessionID;c.contextID=a.ajax.contextID;c.pageNo=this.formFieldApp.pageNo;c.id=this.formFieldApp.id;b&&(dvJQuery.extend(!0,c.properties,b),c.rotation=b.rotation);this.updateNo+=1;this.pendingUpdate+=1;c.updateNo=this.updateNo;var d=this;0!==c.properties.parentId&&3===c.properties.type&&(c.id=c.properties.parentId,c.properties.id=c.properties.parentId,c.properties.parentId=0);a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+
"/formfieldupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify(c),contentType:"application/json",success:function(b){--d.pendingUpdate;if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.formFieldApp){if(d.isEditing()||b.updateNo!=d.updateNo||(d.formFieldApp=b.formFieldApp,d.render(),a.updateThumbnails([d.formFieldApp.pageNo])),a.callbacks.onFormFieldChanged)a.callbacks.onFormFieldChanged({id:b.formFieldApp.id,pageNo:b.formFieldApp.pageNo})}else a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b);
--d.pendingUpdate}});return DocuViewareAPI.Status.OK};c.isEditing=function(){return document.activeElement==this.control};c.hasPendingUpdate=function(){return 0<this.pendingUpdate};c.isModified=function(){var a=!1;switch(this.formFieldApp.properties.type){case 2:a=this.formFieldApp.properties.isChecked!=this.control.checked;break;case 4:a=this.formFieldApp.properties.value!=this.control.value;break;case 3:a=!0;break;case 7:a=this.formFieldApp.properties.value!=this.control.options[this.control.selectedIndex].value;
break;case 8:a=this.formFieldApp.properties.value!=this.control.options[this.control.selectedIndex].value}return a};c.blur=function(){this.control.style.backgroundColor="#CCD7FF";this.isModified()&&(this.setCurrentValue(),this.updateFormField(null))};c.focus=function(){this.control.style.backgroundColor=this.formFieldApp.properties.backgroundColor};c.setCurrentValue=function(){switch(this.formFieldApp.properties.type){case 2:this.formFieldApp.properties.isChecked=this.control.checked;break;case 4:this.formFieldApp.properties.value=
this.control.value;break;case 3:this.formFieldApp.properties.value=dvJQuery('input[name="'+a.uniqueID+"_formfield_"+this.formFieldApp.properties.parentId+'"]:checked').val();break;case 7:this.formFieldApp.properties.value=this.control.options[this.control.selectedIndex].value;break;case 8:this.formFieldApp.properties.value=this.control.options[this.control.selectedIndex].value}};c.render=function(){if(this.children)for(var b=0;b<this.children.length;b++)this.children[b].render();if(this.control){b=
{left:this.formFieldApp.properties.left,top:this.formFieldApp.properties.top,width:this.formFieldApp.properties.width,height:this.formFieldApp.properties.height};var c=a.Internal.Pages.getRenderingState(this.formFieldApp.pageNo);b.left*=96;b.top*=96;b.width*=96;b.height*=96;var d=a.Internal.Pages.getRenderRotation(this.formFieldApp.pageNo),h=0;switch(d){case 2:h=180;break;case 3:h=270;break;case 1:h=90}a.Internal.Matrix.transformBBox(c.contentMatrix,-h,b);b.left+=c.pageLeft;b.top+=c.pageTop;this.control.style.display=
0==this.formFieldApp.properties.visibility||0==this.formFieldApp.properties.visibility?"block":"none";this.control.style.position="absolute";this.control.style.padding="0px";this.control.style.margin="0px";this.control.style.outline="0";this.control.style.backgroundColor=this.formFieldApp.properties.readOnly?"transparent":"#CCD7FF";this.control.style.fontSize=0!=this.formFieldApp.properties.fontSize?this.formFieldApp.properties.fontSize*a.GetCurrentZoom()+"pt":12*a.GetCurrentZoom()+"pt";this.control.style.color=
this.formFieldApp.properties.fontColor;this.formFieldApp.properties.fontFamily&&(this.control.style.fontFamily='"'+this.formFieldApp.properties.fontFamily+'"');switch(this.formFieldApp.properties.fontStyle){case 0:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 1:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="none";break;case 2:this.control.style.fontStyle=
"italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 3:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="none";break;case 4:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="underline";break;case 5:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="underline";break;case 6:this.control.style.fontStyle=
"italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="underline";break;case 7:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="underline";break;case 8:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="line-through";break;case 9:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="line-through";
break;case 10:this.control.style.fontStyle="italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="line-through";break;case 11:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="line-through";break;case 12:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 13:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";
this.control.style.textDecoration="none";break;case 14:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 15:this.control.style.fontStyle="normal",this.control.style.fontWeight="normal",this.control.style.textDecoration="none"}if(2!=this.formFieldApp.properties.type&&3!=this.formFieldApp.properties.type){switch(this.formFieldApp.properties.borderStyle){case 0:this.control.style.borderStyle="solid";break;case 1:this.control.style.borderStyle=
"dashed";break;case 2:this.control.style.borderStyle="outset";break;case 3:this.control.style.borderStyle="inset";break;case 4:this.control.style.borderStyle="none";this.control.style.borderBottomStyle="solid";break;default:this.control.style.borderStyle="none"}this.control.style.borderWidth=96*this.formFieldApp.properties.borderWidth*a.GetCurrentZoom()+"px";this.control.style.borderColor=this.formFieldApp.properties.borderColor}3===this.formFieldApp.properties.type&&"checkbox"===this.formFieldApp.properties.appearance&&
(this.control.style["-webkit-appearance"]="checkbox",this.control.style["-moz-appearance"]="checkbox",this.control.style["-ms-appearance"]="checkbox",this.control.style["-o-appearance"]="checkbox",this.control.style.appearance="checkbox");this.control.alt=this.formFieldApp.properties.title;switch(this.formFieldApp.properties.textAlignment){case 0:this.control.style.textAlign="left";break;case 1:this.control.style.textAlign="center";break;case 2:this.control.style.textAlign="right"}this.control.disabled=
this.formFieldApp.properties.readOnly;this.control.style.left=b.left+"px";this.control.style.top=b.top+"px";this.control.style.width=b.width+"px";this.control.style.height=b.height+"px";this.control.style.transform=0!=h?"rotate("+h+"deg)":"none";this.control.style.cursor=4!=this.formFieldApp.properties.type||1!=d&&3!=d&&5!=d&&7!=d?"auto":"vertical-text"}};switch(b.properties.type){case 2:c.control=document.createElement("input");c.control.type="checkbox";c.control.checked=b.properties.isChecked;break;
case 4:b.properties.isMultiline?c.control=document.createElement("textarea"):(c.control=document.createElement("input"),c.control.type=b.properties.password?"password":"text");c.control.value=b.properties.value;b.properties.maxLength&&0<b.properties.maxLength&&(c.control.maxLength=b.properties.maxLength);break;case 3:if(b.properties.children){c.children=[];for(var d=0;d<b.properties.children.length;d++){var e=this.newController(b.properties.children[d]);e.control&&e.formFieldApp.properties.value==
b.properties.value&&(e.control.checked=!0);c.children.push(e)}}else c.control=document.createElement("input"),c.control.type="radio",c.control.value=b.properties.value;break;case 7:c.control=document.createElement("select");c.control.size=b.properties.items.length;b.properties.isMultiSelect&&(c.control.multiple=!0);if(null!=b.properties.items)for(d=0;d<b.properties.items.length;d++)e=document.createElement("option"),e.text=b.properties.items[d].Value,e.value=b.properties.items[d].Key,b.properties.value==
e.value&&(e.selected=!0),c.control.appendChild(e);break;case 8:if(c.control=document.createElement("select"),null!=b.properties.items)for(d=0;d<b.properties.items.length;d++)e=document.createElement("option"),e.text=b.properties.items[d].Value,e.value=b.properties.items[d].Key,b.properties.value==e.value&&(e.selected=!0),c.control.appendChild(e)}c.control&&(c.control.style.display="none",c.control.owner=c,c.control.name=0==b.properties.parentId?a.uniqueID+"_formfield_"+b.properties.id:a.uniqueID+
"_formfield_"+b.properties.parentId,c.control.id=a.uniqueID+"_formfield_"+b.properties.id,c.control.classList.add("dvFormField"),c.control.style.zIndex=a.dom.zindexManager.getFirstFormFieldZindex(),c.control.onblur=function(a){this.owner.blur()},c.control.onfocus=function(a){this.owner.focus()});null==a.cache.FormFields?a.cache.FormFields=[c]:a.cache.FormFields.push(c);c.control&&a.dom.viewerArea.appendChild(c.control);return c}},Twain:{Status:{OK:0,WARNING:1,ERROR:2,BAD_VERSION:3,NOT_RESPONDING:4},
updateStatusBar:function(b,d){d=d?d:"";switch(b){case a.Internal.Twain.Status.OK:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #3c763d";a.dom.twainAcquisitionStatusBarMessage.style.color="#3c763d";break;case a.Internal.Twain.Status.WARNING:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #cc5500";a.dom.twainAcquisitionStatusBarMessage.style.color="#cc5500";break;case a.Internal.Twain.Status.ERROR:case a.Internal.Twain.Status.BAD_VERSION:case a.Internal.Twain.Status.NOT_RESPONDING:a.dom.twainAcquisitionStatusBarMessage.style.border=
"1px solid #a94442";a.dom.twainAcquisitionStatusBarMessage.style.color="#a94442";break;default:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid transparent",a.dom.twainAcquisitionStatusBarMessage.style.color="#000000"}!b||b!=a.Internal.Twain.Status.BAD_VERSION&&b!=a.Internal.Twain.Status.NOT_RESPONDING||(d=d+"<br>"+a.Localize("_twain_connector_donwload")+'<a href="#" onclick="var e = document.getElementById(\''+a.uniqueID+"'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">"+
a.Localize("_twain_connector_donwload_here")+"</a>");a.dom.twainAcquisitionStatusBarMessage.innerHTML=d},updateTwainAcquisitionDialogMessageBox:function(b,d){d=d?d:"";switch(b){case a.Internal.Twain.Status.OK:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #3c763d");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#3c763d");break;case a.Internal.Twain.Status.WARNING:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+
a.uniqueID).css("border","1px solid #cc5500");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#cc5500");break;case a.Internal.Twain.Status.ERROR:case a.Internal.Twain.Status.BAD_VERSION:case a.Internal.Twain.Status.NOT_RESPONDING:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #a94442");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#a94442");
break;default:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid transparent"),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#000000")}!b||b!=a.Internal.Twain.Status.BAD_VERSION&&b!=a.Internal.Twain.Status.NOT_RESPONDING||(d=d+"<br>"+a.Localize("_twain_connector_donwload")+'<a href="#" onclick="var e = document.getElementById(\''+a.uniqueID+"'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">"+
a.Localize("_twain_connector_donwload_here")+"</a>");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).html(d)},acquire:function(b,d,e){if(!b||!d)return DocuViewareAPI.Status.GenericError;var c=b.endsWith("(64-bit)");c&&(b=b.substring(0,b.length-9));b={url:(c?a.twainServiceUri64:a.twainServiceUri32)+"TWAINAcquire2/",timeout:999999999,data:JSON.stringify({source:{sourceName:b,outputFormat:a.twainSourceConfig.acquisitionFormat,sourceConfig:a.twainSourceConfig}}),success:function(b){(b=
b.TwainAcquire2Result)&&b.status===DocuViewareAPI.Status.OK?d(b):(e&&e(b),a.ajax.HandleError(b))},error:function(){var b={status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),throwError:!1};e&&e(b);a.ajax.HandleError(b)}};a.ajax.PostAjaxRequestForCrossDomainApp(b);return DocuViewareAPI.Status.OK}},DigiSign:{isAddingSignature:!1,signatureAppearance:{image:null,isFreehandDrawn:!1,text:null,pageNo:0,coordinates:{top:0,width:0,left:0,height:0},textApearance:{fontName:"Arial",
fontSize:14,fontStyle:0,fontLineWidth:.1,verticalAlignment:0,horizontalAlignment:1,fontColor:"#000000"}},signatureCertificat:{data:null,displayedName:null,password:null},signatureTimeStamp:{server:null,username:null,password:null},setSignatureAppearanceTextInteractive:function(){dvJQuery(a.dom.signatureTextDialogForm).find("select[name='signature_font_name_select"+a.uniqueID+"']").find("option[value='"+a.Internal.DigiSign.signatureAppearance.textApearance.fontName+"']").prop("selected",!0);a.DisplayDialogForm(dvJQuery(a.dom.signatureTextDialogForm),
a.Localize("label_signature_text"),function(){dvJQuery(document).ready(function(){dvJQuery("input[name='signature_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogSignatureAlignmentPropertiesPreview()});dvJQuery("input[name='signature_line_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogSignatureLineAlignmentPropertiesPreview()});dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height",dvJQuery(a.dom.signatureDialogFormTextInput).height());
dvJQuery(a.dom.signatureDialogFormFontSizeInput).val(a.Internal.DigiSign.signatureAppearance.textApearance.fontSize);dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("value",a.Internal.DigiSign.signatureAppearance.textApearance.fontColor)})},function(){dvJQuery(a.dom.signatureTextDialogForm).show()},function(){dvJQuery(a.dom.signatureTextDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.signatureTextDialogForm).dvDialog("close")}},
{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){var b=dvJQuery(a.dom.signatureDialogFormTextInput).val(),d={fontName:dvJQuery(a.dom.signatureDialogFormFontNameSelect).find("option:selected").val(),fontStyle:dvJQuery(a.dom.signatureDialogFormFontStyleSelect).find("option:selected").val(),fontSize:dvJQuery(a.dom.signatureDialogFormFontSizeInput).val(),fontLineWidth:.1,horizontalAlignment:parseInt(dvJQuery(a.dom.signatureDialogFormAlignmentSelect).filter(":checked").val()),
verticalAlignment:parseInt(dvJQuery("[name='signature_line_alignment_select"+a.uniqueID+"']:checked").val()),fontColor:dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("rgbaString")};a.Internal.DigiSign.setSignatureAppearanceText(b,d);dvJQuery(a.dom.signatureTextDialogForm).dvDialog("close")}}])},setSignatureAppearanceImgInteractive:function(){dvJQuery(a.dom.digisignAppearanceInputImg).on("change",function(){if(this.files&&this.files[0]){var b=this,d=new FileReader;d.addEventListener("load",
function(c){a.Internal.DigiSign.isFreehandDrawn=!1;dvJQuery(b).val("");a.Internal.DigiSign.setSignatureAppearanceImage(c.target.result)});d.readAsDataURL(this.files[0])}});dvJQuery(a.dom.digisignAppearanceInputImg).trigger("click")},setSignatureAppearanceFreehandInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.signatureFreehandDialogForm),a.Localize("label_signature_pad"),function(){dvJQuery(document).ready(function(){dvJQuery(a.dom.signatureFreehandPad).jSignature()})},function(){dvJQuery(a.dom.signatureFreehandDialogForm).show()},
function(){dvJQuery(a.dom.signatureFreehandDialogForm).hide()},[{text:a.Localize("text_reset"),style:"float: left;",click:function(){dvJQuery(a.dom.signatureFreehandPad).jSignature("clear")}},{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.signatureFreehandDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){if(0!=dvJQuery(a.dom.signatureFreehandPad).jSignature("getData","native").length){var b=dvJQuery(a.dom.signatureFreehandPad).jSignature("getData",
"svgbase64");a.Internal.DigiSign.isFreehandDrawn=!0;a.Internal.DigiSign.setSignatureAppearanceImage("data:"+b[0]+","+b[1])}dvJQuery(a.dom.signatureFreehandDialogForm).dvDialog("close")}}])},setCertificateInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.digisignCertificateDialogForm),a.Localize("label_add_certificate"),this.signatureUiSetCertificateDialog,function(){dvJQuery(a.dom.digisignCertificateDialogForm).show()},function(){dvJQuery(a.dom.digisignCertificateDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),
click:function(){dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){var b=dvJQuery(a.dom.digisignCertificateName).val(),d=dvJQuery(a.dom.digisignCertificatePasswordInput).val();a.dom.digisignInputCertificateFile.files&&a.dom.digisignInputCertificateFile.files[0]?(b=new FileReader,b.addEventListener("load",function(b){b=b.target.result;a.dom.digisignCertificateCertificateLabel.style.color=b?"black":"red";
a.dom.digisignCertificatePasswordLabel.style.color=d?"black":"red";b&&d&&(a.Internal.DigiSign.setCertificate(b,null,d),dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close"))}),b.readAsDataURL(a.dom.digisignInputCertificateFile.files[0])):(a.dom.digisignCertificateCertificateLabel.style.color=b?"black":"red",b&&(a.Internal.DigiSign.setCertificate(null,b,null),dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close")))}}])},setTimeStampInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.digisignTimeStampDialogForm),
a.Localize("label_add_time_stamp"),function(){},function(){dvJQuery(a.dom.digisignTimeStampDialogForm).show()},function(){dvJQuery(a.dom.digisignTimeStampDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.digisignTimeStampDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){var b=dvJQuery(a.dom.digisignTimestampServerInput).val(),d=dvJQuery(a.dom.digisignTimestampLoginInput).val(),e=dvJQuery(a.dom.digisignTimestampPasswordInput).val();
a.dom.digisignTimestampServerLabel.style.color=b?"black":"red";b&&(a.Internal.DigiSign.setTimeStamp(b,d,e),dvJQuery(a.dom.digisignTimeStampDialogForm).dvDialog("close"))}}])},setCertificate:function(a,b,d){this.signatureCertificat.data=a;this.signatureCertificat.displayedName=b;this.signatureCertificat.password=d;this.refreshSignatureUi()},setTimeStamp:function(a,b,d){this.signatureTimeStamp.server=a;this.signatureTimeStamp.username=b;this.signatureTimeStamp.password=d;this.refreshSignatureUi()},
setSignatureAppearanceText:function(a,b){this.signatureAppearance.text=a;this.signatureAppearance.textApearance={fontName:b.fontName,fontSize:b.fontSize,fontStyle:b.fontStyle,fontLineWidth:b.fontLineWidth,verticalAlignment:b.verticalAlignment,horizontalAlignment:b.horizontalAlignment,fontColor:b.fontColor};this.refreshSignatureUi()},setSignatureAppearanceImage:function(a){this.signatureAppearance.text=null;this.signatureAppearance.image=a;this.refreshSignatureUi()},resetSignatureConfiguration:function(){this.signatureAppearance.text=
null;this.signatureAppearance.image=null;this.refreshSignatureUi()},refreshSignatureUi:function(){dvJQuery(a.dom.digisignAppearancePreview)&&dvJQuery(a.dom.digisignAppearancePreviewText)&&(this.signatureAppearance.text?(this.signatureUiSetText(this.signatureAppearance.text),this.signatureUiHighlineTextButton(),a.dom.digisignAppearancePreviewDelete.style.display="block"):this.signatureAppearance.image?(this.signatureUiSetImage(this.signatureAppearance.image),this.isFreehandDrawn?this.signatureUiHighlinePadButton():
this.signatureUiHighlineImageButton(),a.dom.digisignAppearancePreviewDelete.style.display="block"):(this.signatureUiUnselectAllButtons(),a.dom.digisignAppearancePreviewDelete.style.display="none",dvJQuery(a.dom.digisignAppearancePreviewText).html(a.Localize("label_invisible_signature")),dvJQuery(a.dom.digisignAppearancePreview).css("background-image","")));dvJQuery(a.dom.digisignCertificateButton)&&(this.signatureCertificat.data&&this.signatureCertificat.password||this.signatureCertificat.displayedName?
this.signatureUiValidateCertificateButton():this.signatureUiUnvalidateCertificateButton());dvJQuery(a.dom.digisignTimeStampButton)&&(this.signatureTimeStamp.server?this.signatureUiValidateTimestampButton():this.signatureUiUnvalidateTimestampButton());a.dom.digisignButtonSubmit.disabled=!this.areSignatureRequiredDataSet()},areSignatureRequiredDataSet:function(){return this.signatureAppearance.text||this.signatureAppearance.image?!0:this.signatureCertificat.data&&this.signatureCertificat.password?!0:
this.signatureCertificat.displayedName?!0:!1},beginAddSignatureInteractive:function(){a.Internal.DigiSign.isAddingSignature=!0;a.SetMouseMode(1);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;return DocuViewareAPI.Status.OK},stopAddSignatureInteractive:function(){a.Internal.DigiSign.isAddingSignature=!1;a.SetMouseMode(0);a.events.ownMouseEvents=!1},sendSignatureRequest:function(b,d){var c={};if(a.Internal.DigiSign.areSignatureRequiredDataSet()){c.signaturePageNo=a.Internal.DigiSign.signatureAppearance.pageNo;
c.signatureLeft=a.Internal.DigiSign.signatureAppearance.coordinates.left;c.signatureTop=a.Internal.DigiSign.signatureAppearance.coordinates.top;c.signatureWidth=a.Internal.DigiSign.signatureAppearance.coordinates.width;c.signatureHeight=a.Internal.DigiSign.signatureAppearance.coordinates.height;null!=a.Internal.DigiSign.signatureAppearance.text?(c.signatureText=a.Internal.DigiSign.signatureAppearance.text,c.signatureFontName=a.Internal.DigiSign.signatureAppearance.textApearance.fontName,c.signatureFontStyle=
a.Internal.DigiSign.signatureAppearance.textApearance.fontStyle,c.signatureFontSize=a.Internal.DigiSign.signatureAppearance.textApearance.fontSize,c.signatureFontLineWidth=a.Internal.DigiSign.signatureAppearance.textApearance.fontLineWidth,c.signatureVerticalAlignment=a.Internal.DigiSign.signatureAppearance.textApearance.verticalAlignment||0,c.signatureHorizontalAlignment=a.Internal.DigiSign.signatureAppearance.textApearance.horizontalAlignment||0,c.signatureFontColor=a.Internal.DigiSign.signatureAppearance.textApearance.fontColor):
null!=a.Internal.DigiSign.signatureAppearance.image&&(c.signatureImageData=a.Internal.DigiSign.signatureAppearance.image);if(a.Internal.DigiSign.signatureCertificat.data&&a.Internal.DigiSign.signatureCertificat.password||a.Internal.DigiSign.signatureCertificat.displayedName)c.certificateData=a.Internal.DigiSign.signatureCertificat.data||"",c.certificateDisplayName=a.Internal.DigiSign.signatureCertificat.displayedName||"",c.certificatePassword=a.Internal.DigiSign.signatureCertificat.password||"";a.Internal.DigiSign.signatureTimeStamp.server?
(c.includeTimestamp=!0,c.timeStampServer=a.Internal.DigiSign.signatureTimeStamp.server,c.timeStampUserName=a.Internal.DigiSign.signatureTimeStamp.username||"",c.timeStampPassword=a.Internal.DigiSign.signatureTimeStamp.password||""):c.includeTimestamp=!1;return a.ajax.PostBaseRequest("digisign",{data:c,success:function(c){var h="string"===typeof c?eval("("+c+")"):c;if(h&&h.status===DocuViewareAPI.Status.OK){if(c="string"===typeof c?eval("("+c+")"):c,a.ajax.HandleServerContextResponse(c,!1),c={certificate:a.Internal.DigiSign.signatureCertificat.data||
a.Internal.DigiSign.signatureCertificat.displayedName,image:null!=a.Internal.DigiSign.signatureAppearance.image,text:null!=a.Internal.DigiSign.signatureAppearance.text},b&&b(c),a.callbacks.onDocumentSigned)a.callbacks.onDocumentSigned(c)}else a.ajax.HandleError(c),d&&d()},error:function(b){a.ajax.HandleError(b);d&&d()}},!1)}a.DisplayError("Digsign appearance or certificate must be set to place the signature")},addSignatureInteractive:function(){a.SetMouseMode(0);a.events.ownMouseEvents=!1;var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),
d=a.Internal.Selection.selectionArea.getPageBounds(a.GetCurrentPage());b=a.Internal.Matrix.scale(a.Internal.Matrix.invert(b.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(b,0,d);a.Internal.DigiSign.signatureAppearance.coordinates.left=a.Internal.Utilities.roundEx(d.left,7);a.Internal.DigiSign.signatureAppearance.coordinates.top=a.Internal.Utilities.roundEx(d.top,7);a.Internal.DigiSign.signatureAppearance.coordinates.width=a.Internal.Utilities.roundEx(d.width,7);a.Internal.DigiSign.signatureAppearance.coordinates.height=
a.Internal.Utilities.roundEx(d.height,7);a.Internal.DigiSign.signatureAppearance.pageNo=a.GetCurrentPage();a.Internal.DigiSign.sendSignatureRequest();a.Internal.DigiSign.stopAddSignatureInteractive()},addSignature:function(b,d){a.Internal.DigiSign.signatureAppearance.pageNo=b;a.Internal.DigiSign.signatureAppearance.coordinates=d;a.Internal.DigiSign.sendSignatureRequest()},signatureUiSetCertificateDialog:function(){dvJQuery(a.dom.digisignCertificateName).empty();if(null!=a.certificateNames&&0<a.certificateNames.length){for(var b=
0;b<a.certificateNames.length;b++){var d=document.createElement("option");d.text=a.certificateNames[b];a.dom.digisignCertificateName.add(d)}a.dom.digisignCertificateNameContainer.style.marginRight="15px";a.dom.digisignCertificateNameContainer.style.display="block";a.dom.digisignCertificateInputContainer.style.display="none";a.dom.digisignCertificatePasswordContainer.style.display="none"}else a.dom.digisignCertificateNameContainer.style.display="none",a.dom.digisignCertificateInputContainer.style.display=
"block",a.dom.digisignCertificatePasswordContainer.style.display="block"},signatureUiValidateCertificateButton:function(){a.dom.digisignCertificateIconValidate.style.display="block";a.dom.digisignCertificateIconUnvalidate.style.display="none";a.dom.digisignCertificateButton.style.backgroundColor=a.dom.UIconfig.activeSelectedColor+"10";a.dom.digisignCertificateButtonDelete.style.display="block"},signatureUiUnvalidateCertificateButton:function(){a.dom.digisignCertificateIconValidate.style.display="none";
a.dom.digisignCertificateIconUnvalidate.style.display="block";a.dom.digisignCertificateButton.style.backgroundColor="white";a.dom.digisignCertificateButtonDelete.style.display="none"},signatureUiValidateTimestampButton:function(){a.dom.digisignTimeStampIconValidate.style.display="block";a.dom.digisignTimeStampIconUnvalidate.style.display="none";a.dom.digisignTimeStampButtonDelete.style.display="block";a.dom.digisignTimeStampButton.style.backgroundColor=a.dom.UIconfig.activeSelectedColor+"10"},signatureUiUnvalidateTimestampButton:function(){a.dom.digisignTimeStampIconValidate.style.display=
"none";a.dom.digisignTimeStampIconUnvalidate.style.display="block";a.dom.digisignTimeStampButton.style.backgroundColor="white";a.dom.digisignTimeStampButtonDelete.style.display="none"},signatureUiUnselectAllButtons:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.fill=a.dom.UIconfig.activeSelectedColor;
a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.fill=a.dom.UIconfig.activeSelectedColor},signatureUiHighlineTextButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonText.style.fill="#fff";a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor=
"";a.dom.digisignAppearanceButtonFreehand.style.fill=a.dom.UIconfig.activeSelectedColor},signatureUiHighlineImageButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.backgroundColor=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.fill="#fff";a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.fill=
a.dom.UIconfig.activeSelectedColor},signatureUiHighlinePadButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.fill=
"#fff"},signatureUiSetText:function(b){dvJQuery(a.dom.digisignAppearancePreviewText).html(b);dvJQuery(a.dom.digisignAppearancePreview).css("background-image","")},signatureUiSetImage:function(b){dvJQuery(a.dom.digisignAppearancePreview).css("background-image","url("+b+")");dvJQuery(a.dom.digisignAppearancePreviewText).html("")}},Redaction:{selectRedactionSelectorById:function(b,d){var c=a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea");b=document.getElementById("redactionAreaButton"+
e+"_"+b);if(!d)for(;0<c.length;)c[0].style.backgroundColor="rgb(255, 255, 255)",c[0].classList.remove("activeRedactionArea");null!=b&&(b.classList.contains("activeRedactionArea")?(b.style.backgroundColor="rgb(255, 255, 255)",b.classList.remove("activeRedactionArea")):(b.style.backgroundColor="rgb(200, 200, 200)",b.classList.add("activeRedactionArea")));1<a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea").length?a.dom.redactionRemoveAllSelectedButton.style.display="block":a.dom.redactionRemoveAllSelectedButton.style.display=
"none"},refreshRedactionPanel:function(b){var c=null==a.cache.AnnotsRedactionReferences?0:a.cache.AnnotsRedactionReferences.length;for(1<a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea").length?a.dom.redactionRemoveAllSelectedButton.style.display="block":a.dom.redactionRemoveAllSelectedButton.style.display="none";a.dom.redactionAreaButtonsList.firstChild;)a.dom.redactionAreaButtonsList.removeChild(a.dom.redactionAreaButtonsList.firstChild);if(0==c)a.dom.redactionAreaFoundText.innerHTML=
a.Localize("label_redaction_panel_no_mark"),a.dom.redactionApplyButton.disabled=!0,a.dom.redactionRemoveAllButton.style.display="none";else for(a.dom.redactionApplyButton.disabled=!1,1==c?(a.dom.redactionRemoveAllButton.style.display="none",a.dom.redactionAreaFoundText.innerHTML=a.Localize("label_redaction_panel_one_mark").replace("#",c)):(a.dom.redactionAreaFoundText.innerHTML=a.Localize("label_redaction_panel_several_marks").replace("#",c),a.dom.redactionRemoveAllButton.style.display="block"),c=
0;c<a.cache.AnnotsRedactionReferences.length;c++)this.addReadactionMarkSelector(a.cache.AnnotsRedactionReferences[c]);b&&a.events.isAddingRedactionMarksMode&&(b=dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors("value"),a.AddAnnotInteractive(17,{autoCreate:!0,fillColor:b}))},addReadactionMarkSelector:function(b){var c=a.dom.redactionAreaButtonModel.cloneNode(!0),d="";c.id="redactionAreaButton"+e+"_"+b.id;c.style.display="block";d=b.title&&
""!=b.title?"Page "+b.pageNo+": "+b.title:"Page "+b.pageNo+": "+a.Localize("label_redaction_title_none");c.getElementsByClassName("redactionAreaSelectionText")[0].innerHTML=d;c.getElementsByClassName("redactionSelectorToolTipText")[0].innerHTML=d;c.getElementsByClassName("redactionAreaColorSquare")[0].style.backgroundColor=b.fillColor;c.addEventListener("click",function(c){a.Internal.Redaction.disableAddRedactionMarksMode();a.Internal.Redaction.selectAnnotFromRedactionSelector(b.id,!0);c.ctrlKey?
a.Internal.Redaction.selectRedactionSelectorById(b.id,!0):a.Internal.Redaction.selectRedactionSelectorById(b.id,!1)});c.addEventListener("dblclick",function(){a.Internal.Annotations.editSelectedAnnotation()});c.addEventListener("mouseenter",function(){"rgb(255, 255, 255)"==this.style.backgroundColor&&(this.style.backgroundColor="rgb(242, 242, 242)")});c.addEventListener("mouseleave",function(){"rgb(242, 242, 242)"==this.style.backgroundColor&&(this.style.backgroundColor="rgb(255, 255, 255)")});c.getElementsByClassName("redactionAreaDeleteIconDiv")[0].addEventListener("click",
function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_redaction_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redaction_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Redaction.deleteRedactionMarkById(b.id);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])});
a.dom.redactionAreaButtonsList.appendChild(c);dvJQuery("#"+c.id+" .redactionSelectorToolTipText").hide();dvJQuery("#"+c.id+" .redactionAreaSelectionText").bind("mouseenter",function(){this.offsetWidth<this.scrollWidth?dvJQuery("#"+c.id+" .redactionSelectorToolTipText").show():dvJQuery("#"+c.id+" .redactionSelectorToolTipText").hide()})},selectAnnotFromRedactionSelector:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var c=0;c<a.cache.AnnotsRedactionReferences.length;c++){var d=a.cache.AnnotsRedactionReferences[c];
if(d.id===b){var e=d.pageNo;a.SelectPage(e,function(){for(var c,d=0;d<a.cache.Annots.length;d++){var h=a.cache.Annots[d];if(h.annotApp.id==b){c=h.annotApp;break}}null!=c&&(c.visible&&a.Internal.Annotations.selectById(c.id),a.EnsurePageRegionVisibility(e,c.bbox.Left,c.bbox.Top,c.bbox.Width,c.bbox.Height))});break}}},deleteRedactionMarkSelector:function(b){var c=document.getElementById("redactionAreaButton"+e+"_"+b);a.Internal.Annotations.deleteAnnotsRedactionReferencesById(b);c.parentNode.removeChild(c);
this.refreshRedactionPanel(!1)},enableAddRedactionMarksMode:function(){if(a.dom.redactionsPanel&&!a.events.isAddingRedactionMarksMode){if(a.hasPendingAction(!0,!1,!1,!0))return DocuViewareAPI.Status.GenericError;var b=dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors("value");b=a.AddAnnotInteractive(17,{autoCreate:!0,fillColor:b});b===DocuViewareAPI.Status.OK&&(a.dom.redactionAddAreasButton.classList.add("addRedactionActiveMode"),a.dom.redactionAddAreasButton.style.color=
"#FFF",a.dom.redactionAddAreasButton.style.border="3px solid #FFFFFF78",a.dom.redactionAddAreasButton.style.margin="5px 0px 10px -3px",a.dom.redactionAddAreasButton.getElementsByClassName("stopAddAreasButtonIcon")[0].style.display="block",a.dom.redactionAddAreasButton.getElementsByClassName("addAreasButtonIcon")[0].style.display="none",a.events.isAddingRedactionMarksMode=!0,dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").attr("disabled",!0));return b}return DocuViewareAPI.Status.OK},
disableAddRedactionMarksMode:function(){a.events.isAddingRedactionMarksMode&&(a.dom.redactionAddAreasButton.classList.remove("addRedactionActiveMode"),a.dom.redactionAddAreasButton.style.margin="5px 0px 10px -1px",a.dom.redactionAddAreasButton.style.border="none",a.dom.redactionAddAreasButton.getElementsByClassName("addAreasButtonIcon")[0].style.display="block",a.dom.redactionAddAreasButton.getElementsByClassName("stopAddAreasButtonIcon")[0].style.display="none",a.Internal.Annotations.stopAnnotInteractiveAdd(),
a.events.isAddingRedactionMarksMode=!1,dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").attr("disabled",!1));return DocuViewareAPI.Status.OK},deleteRedactionMarkById:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var c=0;c<a.cache.AnnotsRedactionReferences.length;c++){var d=a.cache.AnnotsRedactionReferences[c];if(d.id===b){a.SelectPage(d.pageNo,function(){for(var c,d=0;d<a.cache.Annots.length;d++){var h=a.cache.Annots[d];if(h.annotApp.id==b){c=
h.annotApp;break}}null!=c&&c.visible&&a.DeleteAnnotationById(c.id)});break}}},hasPendingRedactionMark:function(){return null!=a.cache.AnnotsRedactionReferences&&0<a.cache.AnnotsRedactionReferences.length},removeAllRedactionMarks:function(){if(null!=a.cache.AnnotsRedactionReferences&&0<a.cache.AnnotsRedactionReferences.length){var b=a.cache.AnnotsRedactionReferences[0];a.SelectPage(b.pageNo,function(){for(var c,d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id==b.id){c=e.annotApp;
break}}if(null!=c&&c.visible)return a.DeleteAnnotationById(c.id),a.Internal.Redaction.removeAllRedactionMarks()})}}},Annotations:{DEFAULT_GRIP_SIZE:6,CANVAS_PADDING:19,RECT_OUTER_MARGIN:1,currentInteractiveAnnotProperties:null,currentInteractiveAnnotPageNo:0,annotationsVisibility:"visible",interactionEnabled:!0,multiSelectionEnabled:!0,selected:[],cached:[],hoveredAnnot:null,annotEdit:null,defaultAuthor:null,getMaxZindex:function(){var b=0;if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=
a.cache.Annots[d];null!=e&&null!=e.canvas&&(b=Math.max(b,e.canvas.style.zIndex))}return b},defaultProperties:{0:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(0),1:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(1),2:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2),3:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(3),4:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(4),5:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(5),
6:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(6),7:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(7),8:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(8),9:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(9),10:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(10),11:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(11),12:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(12),13:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(13),
14:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(14),15:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(15),16:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(16),17:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(17),2048:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2048)},defaultPropertiesDisplay:{0:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(0),1:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(1),
2:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2),3:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(3),4:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(4),5:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(5),6:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(6),7:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(7),8:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(8),
9:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(9),10:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(10),11:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(11),12:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(12),13:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(13),14:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(14),15:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(15),
16:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(16),17:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(17),2048:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2048)},setDefaultPropertiesValues:function(a,b){this.defaultProperties[a]=this.mergeAnnotationProperties(a,b)},setDefaultPropertiesToDisplay:function(a,b){this.defaultPropertiesDisplay[a]=b},setDefaultAuthor:function(a){this.defaultAuthor=a},getAnnotPropertiesValues:function(b){b=
a.Internal.Annotations.defaultProperties[b];delete b.autoCreate;delete b.left;delete b.top;delete b.width;delete b.height;delete b.startX;delete b.startY;delete b.endX;delete b.endY;return b},getAnnotationTitleFromType:function(b){var c="";switch(b){case 0:c=a.Localize("_label_rubber_stamp_properties");break;case 1:c=a.Localize("_label_rectangle_properties");break;case 2:c=a.Localize("_label_rectangle_highlighter_properties");break;case 3:c=a.Localize("_label_line_properties");break;case 4:c=a.Localize("_label_line_arrow_properties");
break;case 5:c=a.Localize("_label_connected_line_properties");break;case 6:c=a.Localize("_label_ellipse_properties");break;case 7:c=a.Localize("_label_embedded_image_properties");break;case 8:c=a.Localize("_label_text_properties");break;case 9:c=a.Localize("_label_stickynote_properties");break;case 10:c=a.Localize("_label_freehand_properties");break;case 11:c=a.Localize("_label_freehand_highlighter_properties");break;case 12:c=a.Localize("_label_freehand_polygon_properties");break;case 13:c=a.Localize("_label_link_properties");
break;case 14:c=a.Localize("_label_polygon_properties");break;case 15:c=a.Localize("_label_ruler_properties");break;case 16:c=a.Localize("_label_polyruler_properties");break;case 17:c=a.Localize("_label_redaction_properties")}return c},editSelectedAnnotation:function(){if(null!=a.dom.selectedAnnotation&&a.dom.selectedAnnotation.annotApp.canEdit){var b=a.dom.selectedAnnotation;a.EditAnnotInteractive(b,this.defaultPropertiesDisplay[b.annotApp.properties.type])}},getAllFirstAnnotationComments:function(b){var c=
[];if(null!=a.cache.AnnotsComments)for(var d=0;d<a.cache.AnnotsComments.length;d++){var e=!1,f=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(a.cache.AnnotsComments[d].annotApp.id);if(null!=f){for(var g=0;g<c.length;g++)if(c[g].comment.annotApp.id===f.annotApp.id){e=!0;break}e||c.push({comment:f})}}null!=b&&b(c);return c},getFirstAnnotationCommentOfAnnotationFromId:function(b,d){if(null!=b&&""!=b&&(d=a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy),null!=d))for(var c=
0;c<d.length;c++)if(d[c].comment.annotApp.properties.previousGuid===b)return d[c];return null},getAnnotationCommentFromId:function(b){if(null!=b&&""!=b)for(var c=0;c<a.cache.AnnotsComments.length;c++)if(a.cache.AnnotsComments[c].annotApp.id===b)return a.cache.AnnotsComments[c];return null},getFirstAnnotationCommentOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);if(null!=b){for(;;){var c=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);
if(null!=c)b=c;else break}return b}return null},getFirstAnnotationCommentAnswerOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);return null!=b&&(b=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id),null!=b)?a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid):null},getLastAnnotationCommentAnswerOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);if(null!=b){for(;;){var c=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid);
if(null!=c)b=c;else break}return b}return null},getAnnotationCommentOwnerAnnotApp:function(b,d){if(null==b||2048!=b.properties.type)return null;if(d)for(;;)if(d=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(b,!1),null!=d)if(2048==d.properties.type)b=d;else return d;else break;if(null!=a.cache.AnnotsComments)for(d=0;d<a.cache.AnnotsComments.length;d++){var c=a.cache.AnnotsComments[d];if(c.annotApp.id==b.properties.previousGuid)return c.annotApp}if(null!=a.cache.Annots)for(d=0;d<a.cache.Annots.length;d++)if(c=
a.cache.Annots[d],c.annotApp.id==b.properties.previousGuid)return c.annotApp;return null},deleteAnnotationComment:function(b,d){var c=!1;if(null!=a.cache.AnnotsComments)for(var h=0;h<a.cache.AnnotsComments.length;h++)if(a.cache.AnnotsComments[h].annotApp.id===b){b=a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[h].annotApp.properties.nextGuid);c=a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[h].annotApp.properties.previousGuid);null==b?null!=c&&(c.annotApp.properties.nextGuid=
null):null!=c?(c.annotApp.properties.nextGuid=b.annotApp.id,b.annotApp.properties.previousGuid=c.annotApp.id):b.annotApp.properties.previousGuid=null;a.cache.AnnotsComments.splice(h,1);c=!0;break}return c?(d&&a.refreshCommentsPanel(),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},scrollToSelectedAnnotationCommentVisibility:function(b){var c=dvJQuery(a.dom.commentsContainer),d=c.innerHeight(),e=dvJQuery("#dvcomment-"+b+"-"+a.uniqueID);b=e.position().top;e=e.children(".dvcomment-header").outerHeight()+
e.children(".dvcomment-content").children(".dvcomment-message").outerHeight();0>b?c.animate({scrollTop:c.scrollTop()+b},600):b>d&&c.animate({scrollTop:c.scrollTop()+(e+(b-d))},600)},resetAnnotationCommentSelection:function(){var b=a.Internal.Annotations.getSelectedAnnotationComment();b&&dvJQuery(b).removeClass("dvcomment-selected");dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).children(".dvcomment").children().each(function(){dvJQuery(this).find(".dvcomment-header").css({border:"",
"padding-left":"","padding-top":"","padding-bottom":"","padding-right":""});dvJQuery(this).find(".dvcomment-message").css({"border-bottom":"","border-left":"","border-right":"","padding-left":"","padding-right":"","padding-bottom":""});dvJQuery(this).children(".dvcomment-content").children(".dvanswer").each(function(){dvJQuery(this).find(".dvcomment-header").css({border:"","padding-left":"","padding-top":"","padding-bottom":"","padding-right":""});dvJQuery(this).find(".dvcomment-message").css({"border-bottom":"",
"border-left":"","border-right":"","padding-left":"","padding-right":"","padding-bottom":""})})})},getSelectedAnnotationComment:function(){return dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).find(".dvcomment-selected")},selectAnnotationCommentById:function(b,d,e){var c=a.Internal.Annotations.getSelectedAnnotationComment();dvJQuery(c).attr("id")!=="dvcomment-"+b+"-"+a.uniqueID&&(a.Internal.Annotations.resetAnnotationCommentSelection(),c=document.getElementById("dvcomment-"+b+
"-"+a.uniqueID),dvJQuery(c).addClass("dvcomment-selected"),dvJQuery(c).children(".dvcomment-header").css({border:"3px solid "+a.dom.UIconfig.headerColor,"padding-left":"7px","padding-top":"7px","padding-bottom":"7px","padding-right":"7px"}),dvJQuery(c).children(".dvcomment-content").children(".dvcomment-message").css({"border-bottom":"3px solid "+a.dom.UIconfig.headerColor,"border-left":"3px solid "+a.dom.UIconfig.headerColor,"border-right":"3px solid "+a.dom.UIconfig.headerColor,"padding-left":"8px",
"padding-right":"8px","padding-bottom":"8px"}));d&&a.Internal.Annotations.scrollToSelectedAnnotationCommentVisibility(b);e&&a.SelectSnapIn("comments",!0)},removeSelectedAnnotations:function(){for(var b=[],d=0;d<a.Internal.Annotations.selected.length;d++)a.Internal.Annotations.selected[d].annotApp.canDelete&&b.push(a.Internal.Annotations.selected[d]);0<b.length&&a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("_title_confirm_annotation_removal"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("_message_confirm_annotation_removal")+
(1<b.length?" ("+b.length.toString()+")":""))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Annotations.unselectAll();a.DeleteAnnotations(b);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},stopAnnotInteractiveAdd:function(){null!=this.currentInteractiveAnnotProperties&&(this.currentInteractiveAnnotProperties=null,this.currentInteractiveAnnotPageNo=
0,a.events.pathPoints=null,a.events.isDrawingPath=!1,a.SetMouseMode(0),a.events.ownMouseEvents=!1)},beginAddAnnotInteractive:function(b){if(a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;this.unselectAll();this.currentInteractiveAnnotProperties=b;5==b.type||10==b.type||11==b.type||16==b.type?a.SetMouseMode(2):(a.SetMouseMode(1),3==b.type||4==b.type||15==b.type?a.Internal.Selection.selectionArea.setLineMode(1):a.Internal.Selection.selectionArea.setLineMode(0));a.events.ownMouseEvents=
!0;a.dom.removeViewAreaTouchAction();return DocuViewareAPI.Status.OK},addAnnotInteractive:function(){a.SetMouseMode(0);a.events.ownMouseEvents=!1;if(0!==Math.abs(a.events.mouseX-a.events.mouseDownX)&&0!==Math.abs(a.events.mouseY-a.events.mouseDownY)||17!==this.currentInteractiveAnnotProperties.type){var b=this.currentInteractiveAnnotPageNo,d=a.Internal.Pages.getRenderingState(b),e=a.Internal.Selection.selectionArea.getPageBounds(b),f=a.Internal.Matrix.scale(a.Internal.Matrix.invert(d.contentMatrix),
1/96,1/96,!1);a.Internal.Matrix.transformBBox(f,0,e);this.currentInteractiveAnnotProperties.left=a.Internal.Utilities.roundEx(e.left,7);this.currentInteractiveAnnotProperties.top=a.Internal.Utilities.roundEx(e.top,7);this.currentInteractiveAnnotProperties.width=a.Internal.Utilities.roundEx(e.width,7);this.currentInteractiveAnnotProperties.height=a.Internal.Utilities.roundEx(e.height,7);e=a.Internal.Selection.selectionArea.getStartPosition();var t=a.Internal.Selection.selectionArea.getEndPosition();
a.Internal.Matrix.transformPoint(f,e);a.Internal.Matrix.transformPoint(f,t);if(5==this.currentInteractiveAnnotProperties.type||10==this.currentInteractiveAnnotProperties.type||11==this.currentInteractiveAnnotProperties.type||16==this.currentInteractiveAnnotProperties.type){if(null==a.events.pathPoints)return;this.currentInteractiveAnnotProperties.startX=-1;this.currentInteractiveAnnotProperties.startY=-1;this.currentInteractiveAnnotProperties.endX=-1;this.currentInteractiveAnnotProperties.endY=-1;
this.currentInteractiveAnnotProperties.pathData=[];for(e=0;e<a.events.pathPoints.length;e++)131072!=a.events.pathPoints[e].x&&131072!=a.events.pathPoints[e].x?(t={x:a.events.pathPoints[e].x-d.pageLeft,y:a.events.pathPoints[e].y-d.pageTop},a.Internal.Matrix.transformPoint(f,t),this.currentInteractiveAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(t.x,7)),this.currentInteractiveAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(t.y,7))):(this.currentInteractiveAnnotProperties.pathData.push(131072),
this.currentInteractiveAnnotProperties.pathData.push(131072))}else this.currentInteractiveAnnotProperties.startX=a.Internal.Utilities.roundEx(e.x,7),this.currentInteractiveAnnotProperties.startY=a.Internal.Utilities.roundEx(e.y,7),this.currentInteractiveAnnotProperties.endX=a.Internal.Utilities.roundEx(t.x,7),this.currentInteractiveAnnotProperties.endY=a.Internal.Utilities.roundEx(t.y,7);d=a.Internal.Annotations.defaultAuthor;f=null;null!=d&&(f={author:d});a.ajax.PostBaseRequest("newannotation",{data:{annots:[{extProperties:f,
properties:this.currentInteractiveAnnotProperties,pageNo:b}]},success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.annots)for(var c=0;c<b.annots.length;c++){var d=b.annots[c].annotApp,h=a.Internal.Pages.getRenderingState(d.pageNo);h=a.Internal.Annotations.newController(d,h.pageLeft,h.pageTop,h.contentMatrix);a.dom.singlePageView&&d.pageNo!=a.GetCurrentPage()||h.render();a.updateThumbnails([d.pageNo]);if(a.callbacks.onAnnotationAdded)a.callbacks.onAnnotationAdded({id:d.id,pageNo:d.pageNo});
17==d.properties.type&&(a.Internal.Annotations.addAnnotsRedactionReferences({id:d.id,pageNo:d.pageNo,title:d.properties.title,fillColor:d.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!0))}else a.ajax.HandleError(b)}},!1);a.Internal.Annotations.stopAnnotInteractiveAdd()}else a.Internal.Redaction.disableAddRedactionMarksMode()},setAnnotationsComments:function(b){a.cache.AnnotsComments=b},addAnnotationComment:function(b){if(null!=b&&(null==a.cache.AnnotsComments?
a.cache.AnnotsComments=[b]:a.cache.AnnotsComments.push(b),null!=b.annotApp.properties.previousGuid&&""!=b.annotApp.properties.previousGuid)){var c=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);null!=c&&(c.annotApp.properties.nextGuid=b.annotApp.id)}},setAnnotsRedactionReferences:function(b){a.cache.AnnotsRedactionReferences=b},addAnnotsRedactionReferences:function(b){null!=b&&(null==a.cache.AnnotsRedactionReferences?a.cache.AnnotsRedactionReferences=[b]:a.cache.AnnotsRedactionReferences.push(b))},
updateAnnotRedactionReferences:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var c=0;c<a.cache.AnnotsRedactionReferences.length;c++)if(a.cache.AnnotsRedactionReferences[c].id===b.id){a.cache.AnnotsRedactionReferences[c]=b;break}},deleteAnnotsRedactionReferencesById:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var c=0;c<a.cache.AnnotsRedactionReferences.length;c++)if(a.cache.AnnotsRedactionReferences[c].id===b){a.cache.AnnotsRedactionReferences.splice(c,1);break}},addAnnotation:function(b){null==
a.cache.Annots?a.cache.Annots=[b]:a.cache.Annots.push(b)},getAnnotationFromCanvas:function(b){if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];if(d.canvas===b)return d}return null},removePageAnnots:function(b){this.unselectAll(b);if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];d.annotApp.pageNo==b&&(d.canvas.parentNode==a.dom.viewerArea&&a.dom.viewerArea.removeChild(d.canvas),a.cache.Annots.splice(c,1),c--)}},removeAll:function(){this.unselectAll();
a.cache.Annots=null;a.cache.AnnotsComments=null},disableAll:function(){if(null!=a.cache.Annots)for(var b=0;b<a.cache.Annots.length;b++){var d=a.cache.Annots[b];null!=d&&null!=d.canvas&&(d.canvas.style.pointerEvents="none")}this.interactionEnabled=!1},enableAll:function(){if(null!=a.cache.Annots)for(var b=0;b<a.cache.Annots.length;b++){var d=a.cache.Annots[b];null!=d&&null!=d.canvas&&(d.canvas.style.pointerEvents="")}this.interactionEnabled=!0},unselectAll:function(b){if(!b||null!=a.dom.selectedAnnotation&&
a.dom.selectedAnnotation.annotApp.pageNo==b)null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide(),a.dom.selectedAnnotation=null;for(var c=this.selected.length-1;0<=c;c--)b&&this.selected[c].annotApp.pageNo!=b||this.selected[c].setSelectState(!1)},selectById:function(b){a.Internal.Annotations.multiSelectionEnabled||a.Internal.Annotations.unselectAll();if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];if(d.annotApp.id===b)return d.setSelectState(!0),
DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},unselectById:function(b){if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];if(d.annotApp.id===b)return d.setSelectState(!1),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},computeEditToolsCoordinates:function(b){if(0!=b.annotApp.properties.rotation){b.EditToolsMat=a.Internal.Matrix.rotateAt({a:1,b:0,c:0,d:1,e:0,f:0},b.annotApp.properties.rotation,b.annotrectNew.width/2,b.annotrectNew.height/
2,!0);var c=b.getBBoxOnViewer(!0,!0);b.EditToolsMat.e+=b.annotrectNew.left-c.left;b.EditToolsMat.f+=b.annotrectNew.top-c.top}else b.EditToolsMat={a:1,b:0,c:0,d:1,e:b.annotrect.left-b.annotbox.left,f:b.annotrect.top-b.annotbox.top};b.EditToolsMat.e+=this.CANVAS_PADDING;b.EditToolsMat.f+=this.CANVAS_PADDING;b.EditToolsTopLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-b.gripSize/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsTopRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+
b.annotrectNew.width-b.gripSize/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsBottomRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+b.annotrectNew.width-b.gripSize/2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsBottomLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-b.gripSize/2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsTopMiddleGrip=a.Internal.Coordinates.newRectangle(-b.gripSize/
2+b.annotrectNew.width/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsMiddleRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+b.annotrectNew.width-b.gripSize/2,-b.gripSize/2+b.annotrectNew.height/2,b.gripSize,b.gripSize);b.EditToolsBottomMiddleGrip=a.Internal.Coordinates.newRectangle(-b.gripSize/2+b.annotrectNew.width/2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsMiddleLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-
b.gripSize/2,-b.gripSize/2+b.annotrectNew.height/2,b.gripSize,b.gripSize);c=b.gripSize/2;b.EditToolsRotateGrip=a.Internal.Coordinates.newRectangle(b.annotrectNew.width/2-c,b.annotrectNew.height/2-c,b.gripSize,b.gripSize)},subrender:function(b,d,e){for(var c=0,h=b;h<e.annotApp.commands.length;h++)switch(e.annotApp.commands[h]){case 0:d.save();break;case 1:d.restore();break;case 2:d.transform(e.annotApp.args[h][0],e.annotApp.args[h][1],e.annotApp.args[h][2],e.annotApp.args[h][3],e.annotApp.args[h][4],
e.annotApp.args[h][5]);break;case 3:d.fillStyle="rgba("+e.annotApp.args[h][1]+","+e.annotApp.args[h][2]+","+e.annotApp.args[h][3]+","+e.annotApp.args[h][0]/255+")";break;case 4:d.beginPath();d.moveTo(e.annotApp.args[h][0],e.annotApp.args[h][1]);d.lineTo(e.annotApp.args[h][0]+e.annotApp.args[h][2],e.annotApp.args[h][1]);d.lineTo(e.annotApp.args[h][0]+e.annotApp.args[h][2],e.annotApp.args[h][1]+e.annotApp.args[h][3]);d.lineTo(e.annotApp.args[h][0],e.annotApp.args[h][1]+e.annotApp.args[h][3]);d.closePath();
d.clip();break;case 5:d.globalAlpha=.5;break;case 6:d.globalAlpha=e.annotApp.args[h][0]/255;break;case 7:for(var l=DocuViewareEncodingUtilities.base64.decode(e.annotApp.data[h]),f=l.length,g=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(f),k=0;k<f;k++)g[k]=l.charCodeAt(k);l=e.annotApp.args[h].length/2;f=[{x:0,y:0},{x:0,y:0},{x:0,y:0}];var m=0;d.beginPath();for(k=0;k<l;k++){var p=128<=g[k];p&&(g[k]-=128);switch(g[k]){case 0:d.moveTo(e.annotApp.args[h][2*k],e.annotApp.args[h][2*k+1]);m=0;break;
case 1:d.lineTo(e.annotApp.args[h][2*k],e.annotApp.args[h][2*k+1]);m=0;break;case 3:f[m].x=e.annotApp.args[h][2*k],f[m].y=e.annotApp.args[h][2*k+1],m+=1,3==m&&(d.bezierCurveTo(f[0].x,f[0].y,f[1].x,f[1].y,f[2].x,f[2].y),m=0)}p&&d.closePath()}d.fill();break;case 8:var r=e.annotApp.args[h][0],w=e.annotApp.args[h][1],x=e.annotApp.args[h][2],y=e.annotApp.args[h][3];c++;if(0==b&&e.cachedImages.length>=c)d.drawImage(e.cachedImages[c-1],r,w,x,y);else{var z=new Image;z.onload=function(){d.drawImage(z,r,w,
x,y);a.Internal.Annotations.subrender(h+1,d,e)};z.src=null==e.annotApp.data[h]?"data:image/png;base64,"+e.annotApp.properties.bitmapData:"data:image/png;base64,"+e.annotApp.data[h];e.cachedImages.push(z);return}}d.restore();e.isSelected&&(d.save(),d.strokeStyle="rgba(153, 209, 255, 0.5)",d.beginPath(),d.moveTo(e.canvas.width-this.CANVAS_PADDING,this.CANVAS_PADDING),d.lineTo(this.CANVAS_PADDING,this.CANVAS_PADDING),d.lineTo(this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),d.stroke(),d.beginPath(),
d.moveTo(this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),d.lineTo(e.canvas.width-this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),d.lineTo(e.canvas.width-this.CANVAS_PADDING,this.CANVAS_PADDING),d.stroke(),d.restore(),d.save(),d.globalCompositeOperation="destination-over",d.fillStyle="rgba(204, 232, 255, 0.2)",d.fillRect(this.CANVAS_PADDING+1,this.CANVAS_PADDING+1,e.canvas.width-2*(1+this.CANVAS_PADDING),e.canvas.height-2*(1+this.CANVAS_PADDING)),d.restore(),d.save(),d.lineWidth=
1,d.strokeStyle="rgba(100, 100, 100, 1.0)",d.setLineDash([5,2]),this.computeEditToolsCoordinates(e),b=e.EditToolsMat,d.transform(b.a,b.b,b.c,b.d,b.e,b.f),d.strokeRect(-a.Internal.Annotations.RECT_OUTER_MARGIN,-a.Internal.Annotations.RECT_OUTER_MARGIN,e.annotrectNew.width+2*a.Internal.Annotations.RECT_OUTER_MARGIN,e.annotrectNew.height+2*a.Internal.Annotations.RECT_OUTER_MARGIN),e.annotApp.canResize&&!e.annotApp.properties.autoSize&&(e.annotApp.properties.keepAspectRatio||e.annotApp.properties.squaredBox||
(d.fillRect(e.EditToolsTopLeftGrip.Left,e.EditToolsTopLeftGrip.Top,e.EditToolsTopLeftGrip.Width,e.EditToolsTopLeftGrip.Height),d.fillRect(e.EditToolsTopRightGrip.Left,e.EditToolsTopRightGrip.Top,e.EditToolsTopRightGrip.Width,e.EditToolsTopRightGrip.Height),d.fillRect(e.EditToolsBottomRightGrip.Left,e.EditToolsBottomRightGrip.Top,e.EditToolsBottomRightGrip.Width,e.EditToolsBottomRightGrip.Height),d.fillRect(e.EditToolsBottomLeftGrip.Left,e.EditToolsBottomLeftGrip.Top,e.EditToolsBottomLeftGrip.Width,
e.EditToolsBottomLeftGrip.Height)),d.fillRect(e.EditToolsTopMiddleGrip.Left,e.EditToolsTopMiddleGrip.Top,e.EditToolsTopMiddleGrip.Width,e.EditToolsTopMiddleGrip.Height),d.fillRect(e.EditToolsMiddleRightGrip.Left,e.EditToolsMiddleRightGrip.Top,e.EditToolsMiddleRightGrip.Width,e.EditToolsMiddleRightGrip.Height),d.fillRect(e.EditToolsBottomMiddleGrip.Left,e.EditToolsBottomMiddleGrip.Top,e.EditToolsBottomMiddleGrip.Width,e.EditToolsBottomMiddleGrip.Height),d.fillRect(e.EditToolsMiddleLeftGrip.Left,e.EditToolsMiddleLeftGrip.Top,
e.EditToolsMiddleLeftGrip.Width,e.EditToolsMiddleLeftGrip.Height)),e.annotApp.canRotate&&(b=e.gripSize/2,d.beginPath(),d.arc(e.EditToolsRotateGrip.Left+b,e.EditToolsRotateGrip.Top+b,b,0,2*Math.PI,!1),d.fill()),d.restore());d=null},prerenderPendingFreenhandAnnot:function(b){var c=5===a.Internal.Annotations.currentInteractiveAnnotProperties.type||16===a.Internal.Annotations.currentInteractiveAnnotProperties.type,d=parseFloat(a.dom.freehandCan.style.top),e=parseFloat(a.dom.freehandCan.style.left),f=
a.dom.freehandCan.getContext("2d");f.clearRect(0,0,a.dom.freehandCan.width,a.dom.freehandCan.height);f.lineWidth=96*a.Internal.Annotations.currentInteractiveAnnotProperties.borderWidth*a.GetCurrentZoom();f.strokeStyle=a.Internal.Annotations.currentInteractiveAnnotProperties.strokeColor;f.globalAlpha=11==a.Internal.Annotations.currentInteractiveAnnotProperties.type?.5:a.Internal.Annotations.currentInteractiveAnnotProperties.opacity;f.beginPath();c||(f.lineJoin="round",f.lineCap="round");var g=a.events.pathPoints;
if(null!==g){for(var k=0;k<g.length;k++)131072===g[k].x&&131072===g[k].y?(f.stroke(),f.beginPath(),c||(f.lineJoin="round",f.lineCap="round")):f.lineTo(g[k].x-e,g[k].y-d);c&&null!=b&&f.lineTo(b.x-e,b.y-d);f.stroke()}},dropPendingFreenhandAnnotLastSubPath:function(){var b=a.events.pathPoints;if(null!==b){for(var d=b.length-1;0!==d&&(131072!==b[d].x||131072!==b[d].y)&&5!==a.Internal.Annotations.currentInteractiveAnnotProperties.type&&16!==a.Internal.Annotations.currentInteractiveAnnotProperties.type;)d--;
a.events.pathPoints=0===d?null:b.slice(0,d);this.prerenderPendingFreenhandAnnot()}},setAnnotationsVisibility:function(b){a.Internal.Annotations.annotationsVisibility=b;if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++)a.cache.Annots[c].canvas.style.visibility=b;return DocuViewareAPI.Status.OK},newController:function(b,d,e,f){var c={cachedImages:[]};c.annotApp=b;c.updateNo=0;c.pendingUpdate=0;c.isMoving=!1;c.isRotating=!1;c.resizingMode=-1;c.isSelected=!1;c.stopMoving=function(){this.isMoving&&
(this.isMoving=!1)};c.stopResizing=function(){-1!=this.resizingMode&&(this.resizingMode=-1)};c.stopRotating=function(){this.isRotating&&(this.isRotating=!1)};c.stopEditing=function(){this.isEditing()&&(this.stopMoving(),this.stopResizing(),this.stopRotating(),this.isModified()&&this.updateAnnotation(!1,null,a.Internal.Annotations.multiSelectionEnabled))};c.hasPendingUpdate=function(){return 0<this.pendingUpdate};c.isEditing=function(){return this.isRotating||this.isMoving||-1!=this.resizingMode};
c.setSelectState=function(b,c){if(b!=this.isSelected){if(b)this.gripSize=a.Internal.Annotations.DEFAULT_GRIP_SIZE*(c?3:1),this.canvas.bakzIndex=this.canvas.style.zIndex,this.canvas.style.zIndex=a.Internal.Annotations.getMaxZindex()+1,this.canvas.tabIndex=1,a.Internal.Annotations.selected.push(this);else for(this.canvas.style.zIndex=this.canvas.bakzIndex,this.canvas.removeAttribute("tabindex"),this.stopEditing(),c=a.Internal.Annotations.selected.length-1;0<=c;c--)if(a.Internal.Annotations.selected[c]===
this){a.Internal.Annotations.selected.splice(c,1);break}this.isSelected=b;this.render(!1,b);if(a.callbacks.onAnnotationSelectedStateChanged)a.callbacks.onAnnotationSelectedStateChanged({id:this.annotApp.id,state:b})}};c.editPointsHitTest=function(b,c,d){if(a.serverCtx.annotationEditorMode&&this.annotApp.canMove&&this.annotApp.canSelect&&this.annotApp.pageNo==a.GetCurrentPage()){d=this.canvas.getBoundingClientRect();b={x:b-d.left,y:c-d.top};a.Internal.Annotations.computeEditToolsCoordinates(this);
a.Internal.Matrix.transformPoint(a.Internal.Matrix.invert(this.EditToolsMat),b);if(!this.annotApp.properties.keepAspectRatio&&!this.annotApp.properties.squaredBox){if(a.Internal.Coordinates.isPointInsideRect(b,this.EditToolsTopLeftGrip,2))return 1;if(a.Internal.Coordinates.isPointInsideRect(b,this.EditToolsTopRightGrip,2))return 3;if(a.Internal.Coordinates.isPointInsideRect(b,this.EditToolsBottomRightGrip,2))return 5;if(a.Internal.Coordinates.isPointInsideRect(b,this.EditToolsBottomLeftGrip,2))return 7}if(a.Internal.Coordinates.isPointInsideRect(b,
this.EditToolsMiddleLeftGrip,2))return 0;if(a.Internal.Coordinates.isPointInsideRect(b,this.EditToolsTopMiddleGrip,2))return 2;if(a.Internal.Coordinates.isPointInsideRect(b,this.EditToolsMiddleRightGrip,2))return 4;if(a.Internal.Coordinates.isPointInsideRect(b,this.EditToolsBottomMiddleGrip,2))return 6;if(a.Internal.Coordinates.isPointInsideRect(b,this.EditToolsRotateGrip,2))return 8}return-1};c.isModified=function(){return this.rotationinit!=this.annotApp.properties.rotation||this.annotrect.left!=
this.annotrectNew.left||this.annotrect.top!=this.annotrectNew.top||this.annotrect.width!=this.annotrectNew.width||this.annotrect.height!=this.annotrectNew.height};c.hasPendingRotateUpdate=function(){return this.rotationinit!=this.annotApp.properties.rotation};c.hasPendingResizeUpdate=function(){return this.annotrectNew.width!=this.annotrect.width||this.annotrectNew.height!=this.annotrect.height};c.hasPendingMoveUpdate=function(){return this.annotrectNew.left!=this.annotrect.left||this.annotrectNew.top!=
this.annotrect.top};c.addWidth=function(a,b){this.annotrectNew.width+=a;this.annotApp.properties.squaredBox?this.annotrectNew.height+=a:this.annotApp.properties.keepAspectRatio&&(this.annotrectNew.height=this.annotrectNew.width/this.annotApp.properties.aspectRatio);b&&this.render(!1)};c.addHeight=function(a,b){this.annotrectNew.height+=a;this.annotApp.properties.squaredBox?this.annotrectNew.width+=a:this.annotApp.properties.keepAspectRatio&&(this.annotrectNew.width=this.annotrectNew.height*this.annotApp.properties.aspectRatio);
b&&this.render(!1)};c.updateCursor=function(b){if(!this.isEditing())if(this.annotApp.canSelect&&!b&&a.serverCtx.annotationEditorMode)if(this.annotApp.pageNo!=a.GetCurrentPage())this.cursorMgr.setStdCursor("not-allowed");else{b=this.editPointsHitTest(a.events.mouseX,a.events.mouseY,a.Internal.Annotations.DEFAULT_GRIP_SIZE);if(this.isSelected){0<=b&&7>=b&&(b+=Math.trunc((this.annotApp.properties.rotation+22.5)/45),b%=8);if(0<=b&&7>=b&&this.annotApp.canResize&&!this.annotApp.properties.autoSize){if(this.hasPendingRotateUpdate()||
this.hasPendingMoveUpdate()){this.cursorMgr.setStdCursor("wait");return}if(0==b){this.cursorMgr.setStdCursor("w-resize");return}if(1==b){this.cursorMgr.setStdCursor("nw-resize");return}if(2==b){this.cursorMgr.setStdCursor("n-resize");return}if(3==b){this.cursorMgr.setStdCursor("ne-resize");return}if(4==b){this.cursorMgr.setStdCursor("w-resize");return}if(5==b){this.cursorMgr.setStdCursor("nwse-resize");return}if(6==b){this.cursorMgr.setStdCursor("n-resize");return}if(7==b){this.cursorMgr.setStdCursor("nesw-resize");
return}}if(this.annotApp.canRotate&&8==b){this.hasPendingResizeUpdate()?this.cursorMgr.setStdCursor("wait"):this.cursorMgr.setCustomCursorClass("rotateCursor");return}}this.annotApp.canMove?this.hasPendingResizeUpdate()&&0!=this.annotApp.properties.rotation?this.cursorMgr.setStdCursor("wait"):13===this.annotApp.properties.type&&a.serverCtx.annotationEditorMode&&2==a.dom.UIconfig.linkAnnotationClickBehaviour?this.cursorMgr.setStdCursor("pointer"):this.cursorMgr.setStdCursor("all-scroll"):this.cursorMgr.setStdCursor("default")}else this.cursorMgr.setStdCursor("")};
c.getBBoxOnViewer=function(b,c){var d=b?0:this.pageLeft;b=b?0:this.pageTop;var e=this.annotrectNew.left-this.annotrect.left,h=this.annotrectNew.top-this.annotrect.top;e={left:this.annotbox.left+d+e,top:this.annotbox.top+b+h,width:this.annotbox.width+(this.annotrectNew.left+this.annotrectNew.width-(this.annotrect.left+this.annotrect.width)-e),height:this.annotbox.height+(this.annotrectNew.top+this.annotrectNew.height-(this.annotrect.top+this.annotrect.height)-h)};0!=this.annotApp.properties.rotation&&
(c=!this.hasPendingResizeUpdate()||c?{x:this.annotrectNew.left+d+this.annotrectNew.width/2,y:this.annotrectNew.top+b+this.annotrectNew.height/2}:{x:this.annotrect.left+d+this.annotrect.width/2,y:this.annotrect.top+b+this.annotrect.height/2},a.Internal.Matrix.transformBBox({a:1,b:0,c:0,d:1,e:0,f:0},this.annotApp.properties.rotation,e,c));return e};c.render=function(b,c){var d=this.getBBoxOnViewer(),e=Math.round(d.left-a.Internal.Annotations.CANVAS_PADDING),h=Math.round(d.top-a.Internal.Annotations.CANVAS_PADDING),
l=Math.round(d.width+2*a.Internal.Annotations.CANVAS_PADDING),f=Math.round(d.height+2*a.Internal.Annotations.CANVAS_PADDING);this.canvas.style.left=e+"px";this.canvas.style.top=h+"px";if(this.isSelected){if(null!=a.dom.annotationsActionButtons)if(null!=a.dom.commentsArea?this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).show(),
dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):this.annotApp.canEdit&&!this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()):!this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),
dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()):this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):this.annotApp.canEdit&&!this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()):!this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),
dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()),1===a.Internal.Annotations.selected.length){dvJQuery(a.dom.annotationsActionButtons).show();var q=dvJQuery(a.dom.annotationsActionButtons).find("div[id^='annotationActionButtonsSplitter']:visible").length,
g=dvJQuery(a.dom.annotationsActionButtons).find("div[id^='annotationAction']:visible").length-q;dvJQuery(a.dom.annotationsActionButtons).width(17*q+17*g);0===g&&0===q?dvJQuery(a.dom.annotationsActionButtons).hide():(dvJQuery(a.dom.annotationsActionButtons).css("left",e+l-dvJQuery(a.dom.annotationsActionButtons).outerWidth()-a.Internal.Annotations.CANVAS_PADDING+"px"),dvJQuery(a.dom.annotationsActionButtons).css("top",h+f+"px"))}else dvJQuery(a.dom.annotationsActionButtons).hide();c&&(a.dom.selectedAnnotation=
this)}b||(this.canvas.width!=l&&(this.canvas.width=l),this.canvas.height!=f&&(this.canvas.height=f),b=this.annotrectNew.width/this.annotrect.width,c=this.annotrectNew.height/this.annotrect.height,1<b&&1>this.annotrect.width&&(b=1),1<c&&1>this.annotrect.height&&(c=1),e=this.canvas.getContext("2d"),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.save(),h=this.annotmat,h=a.Internal.Matrix.translate(h,-this.annotbox.left,-this.annotbox.top),h=a.Internal.Matrix.scale(h,b,c,!1),0!=this.annotApp.properties.rotation&&
(h=a.Internal.Matrix.rotateAt(h,this.annotApp.properties.rotation,this.annotbox.width/2*b,this.annotbox.height/2*c,!1),h=a.Internal.Matrix.translate(h,(d.width-this.annotbox.width*b)/2,(d.height-this.annotbox.height*c)/2)),h=a.Internal.Matrix.translate(h,a.Internal.Annotations.CANVAS_PADDING,a.Internal.Annotations.CANVAS_PADDING),e.transform(h.a,h.b,h.c,h.d,h.e,h.f),a.dom.UIconfig.annotsDropShadow&&this.annotApp.supportShadow&&(e.shadowOffsetX=2,e.shadowOffsetY=2,e.shadowBlur=4,e.shadowColor="rgba(100, 100, 100, 0.6)"),
a.Internal.Annotations.subrender(0,e,this))};c.canvas=document.createElement("canvas");c.canvas.style.display="block";c.canvas.style.position="absolute";c.canvas.style.padding="0px";c.canvas.style.margin="0px";c.canvas.style.outline="0";a.Internal.Annotations.interactionEnabled||(c.canvas.style.pointerEvents="none");c.canvas.style.visibility=a.Internal.Annotations.annotationsVisibility;var h=Math.min(Math.max(c.annotApp.zorder,0),65535);c.canvas.style.zIndex=a.dom.zindexManager.getFirstAnnotZindex()+
h;c.cursorMgr=CreateDocuViewareCursorManager(c.canvas,a.isIEorEdge);c.updateAnnotationDeferred=function(a,b){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);var c=this;this.timeout=setTimeout(function(){c.updateAnnotation(a,b,!1)},300);return DocuViewareAPI.Status.OK};c.getPendingAnnotationUpdateData=function(b,c,d){var e={x:this.annotrectNew.left+this.annotrectNew.width/2,y:this.annotrectNew.top+this.annotrectNew.height/2},h={x:this.annotrectNew.width,y:this.annotrectNew.height};if(0!=
this.annotApp.properties.rotation&&this.hasPendingResizeUpdate()){var l=a.Internal.Matrix.rotateAt({a:1,b:0,c:0,d:1,e:0,f:0},this.annotApp.properties.rotation,this.annotrect.left+this.annotrect.width/2,this.annotrect.top+this.annotrect.height/2,!0);a.Internal.Matrix.transformPoint(l,e)}l=a.Internal.Matrix.scale(a.Internal.Matrix.invert({a:this.annotmat.a,b:this.annotmat.b,c:this.annotmat.c,d:this.annotmat.d,e:0,f:0}),1/96,1/96,!1);var f=a.Internal.Matrix.scale(a.Internal.Matrix.invert({a:this.annotmat.a,
b:this.annotmat.b,c:this.annotmat.c,d:this.annotmat.d,e:this.annotmat.e,f:this.annotmat.f}),1/96,1/96,!1);a.Internal.Matrix.transformPoint(f,e);a.Internal.Matrix.transformPoint(l,h);d&&(this.updateNo+=1,this.pendingUpdate+=1);b={clientTag:this.annotApp.clientTag,properties:this.annotApp.properties,"delete":b,pageNo:this.annotApp.pageNo,id:this.annotApp.id,updateNo:this.updateNo};b.properties.left=a.Internal.Utilities.roundEx(e.x,7);b.properties.top=a.Internal.Utilities.roundEx(e.y,7);b.properties.width=
a.Internal.Utilities.roundEx(Math.abs(h.x),7);b.properties.height=a.Internal.Utilities.roundEx(Math.abs(h.y),7);c&&dvJQuery.extend(!0,b.properties,c);null!=b.properties&&null!=b.properties.bitmapData&&(b.properties.bitmapData=null);return b};c.updateAnnotation=function(b,c,d,e){if(a.hasPendingAction(!0,!0))return DocuViewareAPI.Status.GenericError;var h=this.getPendingAnnotationUpdateData(b,c,!0),l={annots:[h],sessionID:a.ajax.sessionID,contextID:a.ajax.contextID};if(d)for(d=a.Internal.Annotations.selected.length-
1;0<=d;d--){var f=a.Internal.Annotations.selected[d];f!=this&&l.annots.push(f.getPendingAnnotationUpdateData(b,c,!1))}if(null!=e)for(d=0;d<e.length;d++)f=e[d],f!=this&&l.annots.push(f.getPendingAnnotationUpdateData(b,c,!1));var q=this;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!b,data:JSON.stringify(l),contentType:"application/json",success:function(c){--q.pendingUpdate;c="string"===typeof c?eval("("+c+")"):c;var d=[];if(c&&null!=
c.annots){for(var e=!1,l=0;l<c.annots.length;l++)if(b){if(null!=c.annots[l].deletedAnnotsCommentId)for(var f=c.annots[l].deletedAnnotsCommentId.length,g=0;g<f;g++)a.Internal.Annotations.deleteAnnotationComment(c.annots[l].deletedAnnotsCommentId[g],g==f-1);17==c.annots[l].annotType&&(a.Internal.Annotations.deleteAnnotsRedactionReferencesById(c.annots[l].id),a.dom.redactionsPanel&&(a.Internal.Redaction.deleteRedactionMarkSelector(c.annots[l].id),a.Internal.Redaction.refreshRedactionPanel(!1)));null!=
a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide();a.updateThumbnails([c.annots[l].pageNo]);if(null!=a.cache.Annots)for(g=0;g<a.cache.Annots.length;g++)f=a.cache.Annots[g],f.annotApp.pageNo===c.annots[l].pageNo&&(f.annotApp.id===c.annots[l].id?(a.dom.viewerArea.removeChild(f.canvas),a.cache.Annots.splice(g,1),g--):f.annotApp.idx>h.idx&&f.annotApp.idx--);if(a.callbacks.onAnnotationDeleted)a.callbacks.onAnnotationDeleted({id:c.annots[l].id,pageNo:c.annots[l].pageNo})}else{if(!q.isEditing()&&
(e||c.annots[l].updateNo==q.updateNo)&&(0==l&&1<c.annots.length&&(e=!0),null!=a.cache.Annots))for(g=0;g<a.cache.Annots.length;g++)if(f=a.cache.Annots[g],f.annotApp.pageNo===c.annots[l].pageNo&&f.annotApp.id===c.annots[l].id){var t=null!=f.annotApp.properties&&null!=f.annotApp.properties.bitmapData?f.annotApp.properties.bitmapData:null;f.annotApp=c.annots[l].annotApp;if(null==f.annotApp.properties||null==f.annotApp.properties.bitmapData)q.annotApp.properties.bitmapData=t;f.reset();f.render();-1===
d.indexOf(c.annots[l].pageNo)&&d.push(c.annots[l].pageNo)}if(a.callbacks.onAnnotationEdited)a.callbacks.onAnnotationEdited({id:c.annots[l].id,pageNo:c.annots[l].pageNo});g=c.annots[l].annotApp;17==g.properties.type&&(a.Internal.Annotations.updateAnnotRedactionReferences({id:g.id,pageNo:g.pageNo,title:g.properties.title,fillColor:g.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!1))}0<d.length&&a.updateThumbnails(d)}else a.ajax.HandleError(c)},error:function(b){a.ajax.HandleError(b);
--q.pendingUpdate}});return DocuViewareAPI.Status.OK};a.serverCtx.annotationEditorMode&&(window.PointerEvent?(dvJQuery(c.canvas).css("touch-action","none"),c.canvas.onpointerdown=function(a){switch(a.pointerType){case "mouse":this.mousedown(a);break;case "pen":this.mousedown(a,!0);a.preventDefault();break;case "touch":this.mousedown(a,!0);a.preventDefault();break;default:this.mousedown(a)}},c.canvas.onpointermove=function(a){switch(a.pointerType){case "mouse":this.mousemove(a);break;case "pen":this.mousemove(a);
a.preventDefault();break;case "touch":this.mousemove(a);a.preventDefault();break;default:this.mousemove(a)}},c.canvas.onpointerup=function(a){switch(a.pointerType){case "mouse":this.mouseup(a);break;case "pen":this.mouseup(a);a.preventDefault();break;case "touch":this.mouseup(a);a.preventDefault();break;default:this.mouseup(a)}},c.canvas.onpointerenter=function(a){switch(a.pointerType){case "mouse":this.mouseenter(a);break;case "pen":this.mouseenter(a);break;default:this.mouseenter(a)}},c.canvas.onpointerleave=
function(a){switch(a.pointerType){case "mouse":this.mouseleave(a);break;case "pen":this.mouseleave(a);break;default:this.mouseleave(a)}}):(c.canvas.ontouchstart=function(a){1==a.changedTouches.length&&(this.mousedown(a.changedTouches[0],!0),a.cancelable&&a.preventDefault())},c.canvas.ontouchmove=function(a){1==a.changedTouches.length&&(this.mousemove(a.changedTouches[0]),a.cancelable&&a.preventDefault())},c.canvas.ontouchend=function(a){1==a.changedTouches.length&&(this.mouseup(a.changedTouches[0]),
a.cancelable&&a.preventDefault())},c.canvas.onmousedown=function(a){this.mousedown(a)},c.canvas.onmousemove=function(a){this.mousemove(a)},c.canvas.onmouseup=function(a){this.mouseup(a)},c.canvas.onmouseenter=function(a){this.mouseenter(a)},c.canvas.onmouseleave=function(a){this.mouseleave(a)}),c.canvas.onkeyup=function(a){this.keyup(a)},c.canvas.ondblclick=function(a){this.dblClick(a)},c.canvas.mouseenter=function(b){b=a.Internal.Annotations.getAnnotationFromCanvas(this);a.Internal.Annotations.hoveredAnnot=
b;if(a.callbacks.onAnnotationMouseEnter)a.callbacks.onAnnotationMouseEnter({id:b.annotApp.id})},c.canvas.mouseleave=function(b){a.Internal.Annotations.hoveredAnnot=null;a.callbacks.onAnnotationMouseLeave&&(b=a.Internal.Annotations.getAnnotationFromCanvas(this),a.callbacks.onAnnotationMouseLeave({id:b.annotApp.id}))},c.canvas.mouseup=function(b,c){a.events.mouseup(b,c)},c.canvas.mousedown=function(b,c){if(a.events.ownMouseEvents)a.events.mousedown(b,c);else{var d=a.Internal.Annotations.getAnnotationFromCanvas(this),
e=d.annotApp.pageNo!=a.GetCurrentPage();if(!e){if(d.annotApp.canSelect){if(a.Internal.Annotations.multiSelectionEnabled)if(!b.ctrlKey){var h=!0;d.isSelected&&1<a.Internal.Annotations.selected.length&&(h=!1);h&&a.Internal.Annotations.unselectAll()}else{if(d.isSelected){d.setSelectState(!1,c);return}}else a.Internal.Annotations.unselectAll();h=!0;13===d.annotApp.properties.type&&(a.serverCtx.annotationEditorMode&&2!=a.dom.UIconfig.linkAnnotationClickBehaviour||(h=!1));h&&(d.setSelectState(!0,c),h=d.editPointsHitTest(b.clientX,
b.clientY,a.Internal.Annotations.DEFAULT_GRIP_SIZE*(c?3:1)),d.annotApp.canResize&&!d.annotApp.properties.autoSize&&-1!=h&&8!=h?d.hasPendingRotateUpdate()||d.hasPendingMoveUpdate()||(d.resizingMode=h):d.annotApp.canRotate&&8==h?d.hasPendingResizeUpdate()||(d.isRotating=!0):!d.annotApp.canMove||d.hasPendingResizeUpdate()&&0!=d.annotApp.properties.rotation||(d.isMoving=!0))}a.cache.AnnotsComments&&(h=a.Internal.Annotations.getFirstAnnotationCommentOfAnnotationFromId(d.annotApp.id),null!=h?a.Internal.Annotations.selectAnnotationCommentById(h.comment.annotApp.id,
!0,!1):a.Internal.Annotations.resetAnnotationCommentSelection())}a.events.mouseX=b.clientX;a.events.mouseY=b.clientY;d.updateCursor();e&&3!=a.events.mouseMode&&4!=a.events.mouseMode&&a.events.mousedown(b,c)}},c.canvas.mousemove=function(b){if(a.events.ownMouseEvents){var c=a.Internal.Annotations.getAnnotationFromCanvas(this);c.updateCursor(!0);a.events.mousemove(b)}else a.events.mousemove(b),c=a.Internal.Annotations.getAnnotationFromCanvas(this),c.updateCursor()},c.canvas.keyup=function(b){13==b.keyCode?
a.Internal.Annotations.editSelectedAnnotation():46==b.keyCode&&a.Internal.Annotations.removeSelectedAnnotations()},c.canvas.dblClick=function(b){!a.dom.enableAnnotEditionOnDblClick||13===c.annotApp.properties.type&&a.serverCtx.annotationEditorMode&&3==a.dom.UIconfig.linkAnnotationClickBehaviour||a.Internal.Annotations.editSelectedAnnotation()});c.updatePageInfo=function(a,b,c){null!=c&&(this.annotmat=c);this.pageLeft=a;this.pageTop=b;this.reset()};c.runLinkDestination=function(){a.Internal.Destinations.followLink(c.annotApp.properties.link)};
c.reset=function(){this.rotationinit=this.annotApp.properties.rotation;this.annotrect={left:this.annotApp.rect.Left,top:this.annotApp.rect.Top,width:this.annotApp.rect.Right-this.annotApp.rect.Left,height:this.annotApp.rect.Bottom-this.annotApp.rect.Top};this.annotbox={left:this.annotApp.bbox.Left,top:this.annotApp.bbox.Top,width:this.annotApp.bbox.Right-this.annotApp.bbox.Left,height:this.annotApp.bbox.Bottom-this.annotApp.bbox.Top};null!=this.annotmat&&(a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat,
96,96,!0),0,this.annotrect),a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat,96,96,!0),0,this.annotbox));this.annotrectNew={left:this.annotrect.left,top:this.annotrect.top,width:this.annotrect.width,height:this.annotrect.height};var b=Math.min(this.annotrect.left,this.annotbox.left),c=Math.min(this.annotrect.top,this.annotbox.top),d=Math.max(this.annotrect.top+this.annotrect.height,this.annotbox.top+this.annotbox.height),e=Math.max(this.annotrect.left+this.annotrect.width,this.annotbox.left+
this.annotbox.width);this.annotbox.left=b;this.annotbox.top=c;this.annotbox.width=e-b;this.annotbox.height=d-c};a.Internal.Annotations.addAnnotation(c);c.updatePageInfo(d,e,f);if(b.visible){a.serverCtx.annotationEditorMode||(dvJQuery(c.canvas).mouseenter(function(){if(a.callbacks.onAnnotationMouseEnter){var b=a.Internal.Annotations.getAnnotationFromCanvas(this);a.callbacks.onAnnotationMouseEnter({id:b.annotApp.id})}}),dvJQuery(c.canvas).mouseleave(function(){if(a.callbacks.onAnnotationMouseLeave){var b=
a.Internal.Annotations.getAnnotationFromCanvas(this);a.callbacks.onAnnotationMouseLeave({id:b.annotApp.id})}}));if(13===c.annotApp.properties.type)if(b=a.serverCtx.annotationEditorMode&&3==a.dom.UIconfig.linkAnnotationClickBehaviour,!a.serverCtx.annotationEditorMode||2==a.dom.UIconfig.linkAnnotationClickBehaviour)dvJQuery(c.canvas).hover(function(){dvJQuery(this).css("cursor","pointer")}),dvJQuery(c.canvas).on("click",function(a){a.preventDefault();c.runLinkDestination()});else if(b)dvJQuery(c.canvas).on("dblclick",
function(a){a.preventDefault();c.runLinkDestination()});a.dom.viewerArea.appendChild(c.canvas)}return c},mergeAnnotationProperties:function(b,d){var c=dvJQuery.extend(!0,{},a.Internal.Annotations.getAnnotPropertiesValues(b));"object"===typeof d&&dvJQuery.each(d,function(a,b){a in c&&(c[a]=b)});return c},showAnnotationPropertiesUI:function(b,d,e,f){a.Internal.Annotations.annotEdit=e;dvJQuery(a.dom.annotationDialogFormContainer).find(".dv-annotation-control").hide();dvJQuery(a.dom.annotationDialogFormContainer).find("#annotation_auto_creation"+
a.uniqueID).hide();dvJQuery(a.dom.annotationDialogFormContainer).children().find(":disabled").prop("disabled",!1);dvJQuery.each(b,function(c,e){switch(c){case "fill":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input"+a.uniqueID+"']").prop("checked",e).trigger("change");if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("fill"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_control"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("display","inline-block");break;case "fillColor":c=1;-1!=e.indexOf("rgba")&&(c=e.replace(/^.*,(.+)\)/,"$1"),c=parseFloat(c).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").attr("data-opacity",c);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(e));
dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(b){dvJQuery(b.target).parents().add(b.target).hasClass("minicolors")||dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("margin-bottom","0px")});dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("margin-bottom","175px");event.stopPropagation()});
if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("fillColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_color_control"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("display","inline-block");break;case "dashCap":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select"+a.uniqueID+
"'][value='"+e+"']:radio").prop("checked",!0);if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("dashCap"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_cap"+a.uniqueID).css("display","inline-block");break;case "dashStyle":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select"+a.uniqueID+"']").find("option[value='"+e+"']").prop("selected",!0);if(!f||
f&&Array.isArray(f)&&-1!=f.indexOf("dashStyle"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_style"+a.uniqueID).css("display","inline-block");break;case "stroke":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input"+a.uniqueID+"']").prop("checked",e).trigger("change");if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("stroke"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_control"+a.uniqueID).css("display","inline-block");break;case "strokeColor":c=1;-1!=e.indexOf("rgba")&&(c=e.replace(/^.*,(.+)\)/,"$1"),c=parseFloat(c).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']").attr("data-opacity",c);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+
a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(e));dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(b){dvJQuery(b.target).parents().add(b.target).hasClass("minicolors")||dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("margin-bottom","0px")});dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("margin-bottom",
"175px");event.stopPropagation()});if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("strokeColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_color_control"+a.uniqueID).css("display","inline-block");break;case "borderWidth":0==b.type||11==b.type||17==b.type?(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+
a.uniqueID+"']").val(Number((96*e).toFixed(2).replace(".00",""))),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label"+a.uniqueID+" label").html(a.Localize("label_annotation_property_border_width"))):(c=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select"+a.uniqueID+"']").find("option[value='"+Number((9600*e).toFixed(2).replace(".00",""))+"']").val())||0,dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select"+
a.uniqueID+"']").find("option[value='"+c+"']").prop("selected",!0).trigger("change"),0==c&&dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val(Number((96*e).toFixed(2).replace(".00",""))),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label"+a.uniqueID+" label").html("&nbsp;"));if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("borderWidth"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display",
"inline-block"),0==b.type||11==b.type?(dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width"+a.uniqueID).hide()):dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width"+a.uniqueID).css("display","inline-block");break;case "opacity":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input"+a.uniqueID+"']").val(Number((100*e).toFixed(2).replace(".00",
"")));(!f||f&&Array.isArray(f)&&-1!=f.indexOf("opacity"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_opacity"+a.uniqueID).css("display","inline-block");break;case "link":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input"+a.uniqueID+"']").val(e);if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("link"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_link"+
a.uniqueID).css("display","inline-block");break;case "radiusFactor":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input"+a.uniqueID+"']").val(Number((100*e).toFixed(2).replace(".00","")));if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("radiusFactor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_radius_factor"+a.uniqueID).css("display","inline-block");
break;case "rotation":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input"+a.uniqueID+"']").val(Number(e.toFixed(2).replace(".00","")));(!f||f&&Array.isArray(f)&&-1!=f.indexOf("rotation"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_rotation"+a.uniqueID).css("display","inline-block");break;case "squaredBox":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input"+a.uniqueID+"']").prop("checked",e).trigger("change");if(!f||f&&Array.isArray(f)&&
-1!=f.indexOf("squaredBox"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_squared_box"+a.uniqueID).css("display","inline-block");break;case "text":dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+a.uniqueID+"']").val(e);if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("text"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display",
"inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_control"+a.uniqueID).css("display","inline-block");b.canEditText||8!=b.type&&9!=b.type||dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+a.uniqueID+"']").prop("disabled",!0);break;case "fontName":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select"+a.uniqueID+"']").find("option[value='"+e+"']").prop("selected",!0);a.setDialogAnnotationFontNamePropertiesPreview();
if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("fontName"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_name_control"+a.uniqueID).css("display","table-cell");break;case "fontStyle":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option[value='"+e+"']").prop("selected",!0);a.setDialogAnnotationFontStylePropertiesPreview();
if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("fontStyle"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_style_control"+a.uniqueID).css("display","table-cell");break;case "foreColor":c=1;0<=e.indexOf("rgba")&&(c=e.replace(/^.*,(.+)\)/,"$1"),c=parseFloat(c).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']").attr("data-opacity",
c);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(e));if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("foreColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fore_color_control"+a.uniqueID).css("display","table-cell");break;case "alignment":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+
a.uniqueID+"'][value='"+e+"']:radio").prop("checked",!0);a.setDialogAnnotationAlignmentPropertiesPreview();if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("alignment"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_alignment_control"+a.uniqueID).css("display","table-cell");break;case "autoSize":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input"+a.uniqueID+
"']").prop("checked",e).trigger("change");if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("autoSize"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_size"+a.uniqueID).css("display","inline-block");break;case "fontSize":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input"+a.uniqueID+"']").val(Number(e.toFixed(2).replace(".00","")));if(!f||f&&Array.isArray(f)&&
-1!=f.indexOf("fontSize"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_size_control"+a.uniqueID).css("display","table-cell");break;case "lineAlignment":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+a.uniqueID+"'][value='"+e+"']:radio").prop("checked",!0);a.setDialogAnnotationAlignmentPropertiesPreview();if(!f||f&&Array.isArray(f)&&-1!=
f.indexOf("lineAlignment"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_line_alignment_control"+a.uniqueID).css("display","table-cell");break;case "arrowFilled":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input"+a.uniqueID+"']").prop("checked",e).trigger("change");if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("arrowFilled"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_filled"+a.uniqueID).css("display","inline-block");break;case "arrowHeight":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input"+a.uniqueID+"']").val(e);if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("arrowHeight"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_height"+
a.uniqueID).css("display","inline-block");break;case "arrowWidth":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input"+a.uniqueID+"']").val(e);if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("arrowWidth"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_width"+a.uniqueID).css("display","inline-block");break;case "endCap":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select"+
a.uniqueID+"']").find("option[value='"+e+"']").prop("selected",!0);(!f||f&&Array.isArray(f)&&-1!=f.indexOf("endCap"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_end_cap"+a.uniqueID).css("display","inline-block");break;case "startCap":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select"+a.uniqueID+"']").find("option[value='"+e+"']").prop("selected",!0);(!f||f&&Array.isArray(f)&&-1!=f.indexOf("startCap"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_start_cap"+
a.uniqueID).css("display","inline-block");break;case "measurementUnit":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select"+a.uniqueID+"']").find("option[value='"+e+"']").prop("selected",!0);if(!f||f&&Array.isArray(f)&&-1!=f.indexOf("measurementUnit"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_measurement_unit"+a.uniqueID).css("display",
"inline-block");break;case "scale":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input"+a.uniqueID+"']").val(Number(e.toFixed(2).replace(".00","")));(!f||f&&Array.isArray(f)&&-1!=f.indexOf("scale"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_scale"+a.uniqueID).css("display","inline-block");break;case "autoCreate":d||(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input"+a.uniqueID+"']").prop("checked",e).trigger("change"),f||
dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_creation"+a.uniqueID).css("display","inline-block"));break;case "title":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_title_input"+a.uniqueID+"']").val(e),(!f||f&&Array.isArray(f)&&-1!=f.indexOf("title"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_title"+a.uniqueID).css("display","inline-block")}});a.DisplayDialogForm(dvJQuery(a.dom.annotationDialogForm),a.Internal.Annotations.getAnnotationTitleFromType(b.type),
function(){dvJQuery("input[name='annotation_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogAnnotationAlignmentPropertiesPreview()});dvJQuery("input[name='annotation_line_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogAnnotationLineAlignmentPropertiesPreview()});dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height",dvJQuery(a.dom.annotationDialogFormTextInput).height())},null,null,[{text:a.Localize("_label_button_annotation_cancel"),
click:function(){a.ExitAnnotationDrawingMode();dvJQuery(a.dom.annotationDialogForm).dvDialog("close")}},{text:d?a.Localize("_label_button_annotation_edit"):a.Localize("_label_button_annotation_add"),"class":"btn-valid",click:function(){dvJQuery.each(b,function(c,d){switch(c){case "fill":b[c]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input"+a.uniqueID+"']").is(":checked");break;case "fillColor":b[c]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+
a.uniqueID+"']")).minicolors("rgbaString");break;case "dashCap":b[c]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select"+a.uniqueID+"']:checked").val());break;case "dashStyle":b[c]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select"+a.uniqueID+"']").find("option:selected").val());break;case "stroke":b[c]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input"+a.uniqueID+"']").is(":checked");break;
case "strokeColor":b[c]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']")).minicolors("rgbaString");break;case "borderWidth":b[c]=parseFloat(100*dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val())/96/100||0;break;case "opacity":b[c]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input"+a.uniqueID+"']").val()/100);break;case "link":b[c]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input"+
a.uniqueID+"']").val();break;case "radiusFactor":b[c]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input"+a.uniqueID+"']").val()/100);break;case "rotation":b[c]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input"+a.uniqueID+"']").val())||0;break;case "squaredBox":b[c]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input"+a.uniqueID+"']").is(":checked");break;case "text":b[c]=dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+
a.uniqueID+"']").val();break;case "fontName":b[c]=dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select"+a.uniqueID+"']").find("option:selected").val();break;case "fontStyle":b[c]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option:selected").val());break;case "foreColor":b[c]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']")).minicolors("rgbaString");
break;case "alignment":b[c]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+a.uniqueID+"']:checked").val());break;case "autoSize":b[c]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input"+a.uniqueID+"']").is(":checked");break;case "fontSize":b[c]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input"+a.uniqueID+"']").val())||parseFloat(b[c]);break;case "lineAlignment":b[c]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+
a.uniqueID+"']:checked").val());break;case "arrowFilled":b[c]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input"+a.uniqueID+"']").is(":checked");break;case "arrowHeight":b[c]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input"+a.uniqueID+"']").val())||0;break;case "arrowWidth":b[c]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input"+a.uniqueID+"']").val())||0;break;case "endCap":b[c]=
parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select"+a.uniqueID+"']").find("option:selected").val());break;case "startCap":b[c]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select"+a.uniqueID+"']").find("option:selected").val());break;case "measurementUnit":b[c]=dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select"+a.uniqueID+"']").find("option:selected").val();break;case "scale":b[c]=
parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input"+a.uniqueID+"']").val())||1;break;case "autoCreate":b[c]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input"+a.uniqueID+"']").is(":checked");break;case "title":b[c]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_title_input"+a.uniqueID+"']").val()}});dvJQuery(a.dom.annotationDialogForm).dvDialog("close");return d?a.Internal.Annotations.annotEdit.updateAnnotation(!1,
b,!1):a.Internal.Annotations.beginAddAnnotInteractive(b)}}]);return DocuViewareAPI.Status.GenericError}},Magnifier:{isMagnifying:!1,zoomContext:1,currentMagnifyingContext:{pageNo:-1,pageState:null,zoom:-1,magnifyZoom:-1,pixelRatio:-1,magnifierClientRect:null,img:null,cursorX:-1,cursorY:-1},hasContextChanged:function(){var b=a.GetCurrentPage();if(b!==a.Internal.Magnifier.currentMagnifyingContext.pageNo)return!0;b=a.Internal.Pages.getRenderingState(b);return b.pageWidth!==a.Internal.Magnifier.currentMagnifyingContext.pageState.pageWidth||
b.pageHeigth!==a.Internal.Magnifier.currentMagnifyingContext.pageState.pageHeigth||a.Internal.Magnifier.zoomContext*b.zoom!==a.Internal.Magnifier.currentMagnifyingContext.zoom?!0:!1},resetPosition:function(){a.dom.magnifierDiv.style.left="-999px";a.dom.magnifierDiv.style.top="-999px";a.dom.magnifierDiv.style.display="none"},enable:function(){if(a.isIE)return DocuViewareAPI.Status.GenericError;var b=a.dom.magnifierTemplateDiv.cloneNode(!0);b.id="magnifierDiv"+a.uniqueID;a.dom.magnifierDiv=a.dom.viewerArea.appendChild(b);
a.dom.magnifierDiv.style.display="block";a.dom.magnifierDiv.style.zIndex=a.dom.zindexManager.getMagnifierZindex();a.SetMouseMode(5);this.updateContext();b=a.dom.getViewerContainer();b.addEventListener("mousemove",this.magnify);a.dom.magnifierDiv.addEventListener("mousemove",this.magnify,!1);b.addEventListener("mouseout",this.resetPosition);window.addEventListener("resize",this.changeMagnifierPageContext);a.Internal.Magnifier.isMagnifying=!0;return DocuViewareAPI.Status.OK},disable:function(){var b=
a.dom.getViewerContainer();b.removeEventListener("mousemove",this.magnify);b.removeEventListener("mouseout",this.resetPosition);window.removeEventListener("resize",this.changeMagnifierPageContext);a.dom.magnifierDiv.remove();a.Internal.Magnifier.isMagnifying=!1;return DocuViewareAPI.Status.OK},toggle:function(){this.isMagnifying?this.disable():this.enable()},updateContext:function(){var b=a.GetCurrentPage(),d=a.Internal.Pages.getRenderingState(b),e=a.Internal.Magnifier.zoomContext*d.zoom,f=a.cache.getPageObject(b).bitmap,
g=a.getConfig(),k=a.dom.magnifierDiv.getBoundingClientRect();a.Internal.Magnifier.currentMagnifyingContext={pageNo:b,pageState:d,zoom:e,pixelRatio:g.devicePixelRatio,img:f,magnifierClientRect:k,magnifyZoom:a.Internal.Magnifier.zoomContext};g=d.pageWidth*e;d=d.pageHeight*e;a.dom.magnifierDiv.style.backgroundImage="url('"+f.src+"')";a.dom.magnifierDiv.style.backgroundSize=g+"px "+d+"px";switch(a.Internal.Pages.getRenderRotation(b)){case DocuViewareAPI.RotateFlipType.Rotate90FlipNone:a.dom.magnifierDiv.style.transform=
"rotate(90deg)";a.dom.magnifierDiv.style.backgroundSize=d+"px "+g+"px";break;case DocuViewareAPI.RotateFlipType.Rotate180FlipNone:a.dom.magnifierDiv.style.transform="rotate(180deg)";break;case DocuViewareAPI.RotateFlipType.Rotate270FlipNone:a.dom.magnifierDiv.style.transform="rotate(270deg)",a.dom.magnifierDiv.style.backgroundSize=d+"px "+g+"px"}},magnify:function(b){var c=a.dom.viewerArea.getBoundingClientRect();if(c.top>b.clientY||c.left>b.clientX)a.Internal.Magnifier.resetPosition();else{a.dom.magnifierDiv.style.display=
"block";a.Internal.Magnifier.hasContextChanged()&&a.Internal.Magnifier.updateContext();"mousemove"===b.type&&(a.Internal.Magnifier.currentMagnifyingContext.cursorX=b.clientX,a.Internal.Magnifier.currentMagnifyingContext.cursorY=b.clientY);var d=a.Internal.Magnifier.currentMagnifyingContextPostAjaxRequestForCrossDomainApp,e=a.Internal.Coordinates.clienttodocument(a.GetCurrentPage(),b.clientX,b.clientY,0,!1);a.dom.magnifierDiv.style.backgroundPosition="-"+(e.x*d.magnifyZoom-d.magnifierClientRect.width/
2)+"px -"+(e.y*d.magnifyZoom-d.magnifierClientRect.height/2)+"px";a.dom.magnifierDiv.style.left=b.clientX-c.left-d.magnifierClientRect.width/2+"px";a.dom.magnifierDiv.style.top=b.clientY-c.top-d.magnifierClientRect.height/2+"px"}}},Destinations:{followLink:function(b){if(15<b.length&&"fileattachment:"===b.substring(0,15)){var c=b.split(":")[1];b.split(":");isNaN(c)||isNaN(parseInt(c,10))||a.Save(b,".","*",!1,!1)}else DocuViewareUtilities.isValidURL(b)?window.open(b,"_blank"):5<b.length&&"page:"===
b.substring(0,5)&&(b=b.split(":")[1],isNaN(b)||isNaN(parseInt(b,10))||b<=a.serverCtx.pageCount&&a.SelectPage(b))}}},getConfig:function(){var b=a.dom.getViewerContainer();return{devicePixelRatio:DocuViewareUtilities.getDevicePixelRatio(),viewerWidth:null!=b?b.offsetWidth:0,viewerHeight:null!=b?b.offsetHeight:0,scrollBarWidth:this.dom.sbWidth,hasWebPSupport:this.Internal.Capabilities.hasWebPSupport(),hasTiffSupport:this.Internal.Capabilities.hasTiffSupport()}},hasPendingResize:function(){return null!=
a.NewViewerSizeTimeout},checkDocumentLoaded:function(a){return this.serverCtx&&0==this.serverCtx.documentLoaded?(a||this.DisplayError(this.Localize("error__no_document_loaded")),!1):!0},hasPendingAction:function(b,d,e,f){if(b&&!this.checkDocumentLoaded(e))return!0;if(1==this.Internal.Files.uploading)return e||this.DisplayError(this.Localize("label__uploading_document")),!0;if(1==this.ajax.downloading)return e||this.DisplayError(this.Localize("label__downloading_document")),!0;if(0<this.ajax.pendingRequests)return f&&
this.DisplayError(this.Localize("transferring_data")),!0;if(this.waitForInit)return e||this.DisplayError(this.Localize("label__initializing")),!0;if(!d&&null!=a.cache.Annots)for(b=0;b<a.cache.Annots.length;b++)if(a.cache.Annots[b].hasPendingUpdate())return e||this.DisplayError(this.Localize("transferring_annotation_data")),!0;return!1},Localize:function(a){var b=JSON.parse(this.localization);if(b&&0<b.length)for(var c=0;c<b.length;c++)if(a==b[c].id)return b[c].message;return a},DisplayError:function(b){this.ShowMessage({text:b,
backgroundColor:a.dom.UIconfig.headerColor,icon:16,delay:5E3})},ShowMessage:function(b){var c=dvJQuery(this.dom.infoDiv);c.css("background-color",b.backgroundColor?b.backgroundColor:a.dom.UIconfig.headerColor);var d=dvJQuery(this.dom.infoMessage);d.css("font-size",b.fontSize?b.fontSize:"130%");d.css("font-weight",b.fontWeight?b.fontWeight:"normal");d.css("color",b.fontColor?b.fontColor:"#FFFFFF");d.css("text-decoration",b.textDecoration?b.textDecoration:"none");d.css("text-transform",b.textTransform?
b.textTransform:"none");d.css("height",b.messageBoxHeight?b.messageBoxHeight:a.dom.UIconfig.defaultMessageBoxHeight);b.isHtmlText?d.html(b.text):d.text(b.text);c.find(".message_icon").hide();switch(b.icon){case 0:b.customIcon&&c.find(".message_icon_custom").html(b.customIcon).css("display","inline-block");break;case 16:c.find(".message_icon_error").css("display","inline-block");break;case 32:c.find(".message_icon_question").css("display","inline-block");break;case 48:c.find(".message_icon_warning").css("display",
"inline-block");break;case 64:c.find(".message_icon_info").css("display","inline-block");break;case 128:c.find(".message_icon_ok").css("display","inline-block")}c.finish().slideDown(b.slideDown?b.slideDown:300).delay(b.delay?b.delay:2500).slideUp(b.slideUp?b.slideUp:300)},DisplayPendingActionNotification:function(){a.ajax.pendingRequestsWithIndicator++;1==a.ajax.pendingRequestsWithIndicator&&dvJQuery(this.dom.pendingActionDiv).show()},HidePendingActionNotification:function(){a.ajax.pendingRequestsWithIndicator--;
0>=a.ajax.pendingRequestsWithIndicator&&(dvJQuery(this.dom.pendingActionDiv).hide(),a.ajax.pendingRequestsWithIndicator=0)},DisplayDialogForm:function(b,d,e,f,g,k){b.dvDialog({dialogClass:"dv-main",appendTo:dvJQuery(a.dom.mainArea),minWidth:510+a.dom.sbWidth,maxHeight:dvJQuery(a.dom.controlArea).height(),position:{my:"center",at:"center",of:dvJQuery(a.dom.mainArea)},title:d,resizable:!1,draggable:!0,create:function(b,c){null!=e&&"function"==typeof e&&e();dvJQuery(this).css("overflow-x","hidden");
dvJQuery(this).css("overflow-y","auto");dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.headerColor);dvJQuery(this).parent().find(".dvUi-dialog-spacer").css("background-color",a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().css("border","1px solid "+a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find('input[type="text"]:not(".dv-color")').css("border-color",a.dom.UIconfig.strokeColor);
dvJQuery(this).parent().find('input[type="text"]').css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find("select").css("border-color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find("select").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-content").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-content a").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",
a.dom.UIconfig.headerColor);dvJQuery(this).parent().find(".dvUi-widget-header a").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dv-annotationOptionText:not(:last-child)").css("border-right","1px solid "+a.dom.UIconfig.miscBorderColor)},open:function(b,c){var d=this,e=-1;dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button").each(function(){e++});if(-1<e)for(b=0;b<=e;b++)b===e?dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq("+
b+")").focus():dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq("+b+")").blur();null!=f&&"function"==typeof f&&f();dvJQuery(this).parent().find(".dv-jquerySelect").each(function(a){dvJQuery(this).dvSelectmenu({change:function(){dvJQuery(this).trigger("change")}});dvJQuery(this).hasClass("dv-jquerySelectOverflow")&&dvJQuery(this).dvSelectmenu("menuWidget").addClass("overflow")});dvJQuery(this).parent().find(".dv-jqueryRadio").each(function(b){dvJQuery(this).dvButtonset({setActive:function(){dvJQuery(d).parent().find(".dvUi-button").css("border",
"1px solid transparent");dvJQuery(d).parent().find(".dvUi-state-active").css("border","1px solid "+a.dom.UIconfig.miscBorderColor)}})});dvJQuery(this).parent().find(".dvUi-selectmenu-button").css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().find(".dvUi-selectmenu-menu .dvUi-menu").css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().find(".dv-color").each(function(){dvJQuery(this).minicolors({control:"hue",defaultValue:dvJQuery(this).val(),
inline:!1,letterCase:"uppercase",opacity:!0,position:"bottom left"})});dvJQuery(this).parent().find(".minicolors-swatch").css("border-right","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().find(".btn-valid").css("background-color",a.dom.UIconfig.activeSelectedColor);dvJQuery(this).parent().find(".btn-valid").hover(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.activeSelectedColorHover)},function(){dvJQuery(this).css("background-color",a.dom.UIconfig.activeSelectedColor)});
dvJQuery(a.dom.modalOverlayArea).show()},close:function(b,c){null!=g&&"function"==typeof g&&g();dvJQuery(a.dom.modalOverlayArea).hide();dvJQuery(this).parent().find(".dv-jquerySelect").each(function(){dvJQuery(this).dvSelectmenu("destroy")});dvJQuery(this).parent().find(".dv-jqueryRadio").each(function(){dvJQuery(this).dvButtonset("destroy")});dvJQuery(this).parent().find(".dv-color").each(function(){dvJQuery(this).minicolors("destroy")})},buttons:k}).parent().draggable("option","containment",dvJQuery(a.dom.mainArea))},
l10n:null,cache:{Annots:null,AnnotsComments:null,AnnotsRedactionReferences:null,Pages:null,canvas:null,pageCanvasSize:null,pageCanvasZoom:0,viewRotation:0,addedSelectedTextContextMenuItem:[],emptyCanvas:function(){a.dom.SelectedTextRegions.clear();if(a.dom.viewerArea.hasChildNodes())for(var b=a.dom.viewerArea.children.length-1;0<=b;b--){var d=a.dom.viewerArea.children[b];d!=a.dom.panDiv&&a.dom.viewerArea.removeChild(d)}if(null!=this.Pages)for(b=0;b<this.Pages.length;b++)this.Pages[b].drawn=!1,this.Pages[b].drawnPreview=
!1},getPageCanvas:function(a){if(null!=this.canvas)for(var b=0;b<this.canvas.length;b++)if(this.canvas[b].pageNo==a)return this.canvas[b];return null},getPageObject:function(a){if(null!=this.Pages)for(var b=0;b<this.Pages.length;b++)if(this.Pages[b].pageNo==a)return this.Pages[b];return null},clearCachedPages:function(){this.Pages=null;a.ajax.pendingPageViewRequests=null;"function"==typeof CollectGarbage&&CollectGarbage()},clearCachedBitmap:function(){if(null!=this.Pages)for(var b=0;b<this.Pages.length;b++)this.Pages[b].bitmap=
null,this.Pages[b].drawn=!1,this.Pages[b].drawnPreview=!1;a.ajax.pendingPageViewRequests=null;"function"==typeof CollectGarbage&&CollectGarbage()},clearBitmap:function(a){if(null!==this.Pages)for(var b=0;b<this.Pages.length;b++)if(this.Pages[b].pageNo===a){this.Pages[b].bitmap=null;break}},clearPage:function(b){if(null!==this.Pages)for(var c=0;c<this.Pages.length;c++)if(this.Pages[c].pageNo===b){this.Pages[c].bitmap=null;this.Pages[c].drawn=!1;this.Pages[c].drawnPreview=!1;break}c=this.getPageCanvas(b);
if(null!=c)for(var d=0;d<c.canvas.length;d++){var e=c.canvas[d].tile;null!=e&&(e.style.backgroundColor="white",e.getContext("2d").clearRect(0,0,e.width,e.height))}a.Internal.Annotations.removePageAnnots(b);a.Internal.FormFields.removePageFormFields(b);a.dom.thumbnailArea&&(b=a.Internal.Thumbnails.getThumbnailFromPageNo(b),null!=b&&(b.attr("data-loaded","false"),b.attr("data-loading","false")))},cachePage:function(a){null==this.Pages&&(this.Pages=[]);this.Pages.push(a)},cachePageBitmap:function(a,
b,d,e,f){var c=new Image;c.src="data:"+b+";base64,"+d;if(null!=this.Pages)for(b=0;b<this.Pages.length;b++)if(this.Pages[b].pageNo==a){this.Pages[b].drawn=!1;this.Pages[b].drawnPreview=!1;this.attachImageToPage(this.Pages[b],c,e,f);return}a={pageNo:a,drawn:!1,drawnPreview:!1};this.attachImageToPage(a,c,e,f);this.cachePage(a)},attachImageToPage:function(a,b,d,e){a.bitmap=b;a.scale=d;a.hasTransparency=e}},ajax:{sessionID:p,requestNo:0,pageViewRequestNo:0,thumbnailRequestNo:0,transferID:0,downloading:!1,
pendingRequests:0,pendingPageViewRequests:null,pendingRequestsWithIndicator:0,latestSelectedPage:0,contextID:f,customHeaders:eval(M),AjaxRequestTimeout:U,hasPendingPageViewRequests:function(){return null!=this.pendingPageViewRequests&&0<this.pendingPageViewRequests.length},SetNewServerCtx:function(b,d,e,f){var c=a.GetCurrentPage(),h=a.GetCurrentZoom(),l=a.ajax.contextID,g=a.serverCtx.documentLoaded,q=a.IsZoomSynchronized();null===b?(a.resetServerCtx(),a.ajax.contextID=""):(a.serverCtx=b,a.ajax.contextID=
b.contextID);var k=null!==b&&b.documentLoaded&&l!==a.ajax.contextID||null!==b&&b.reloadDocument,m=null!=b&&b.documentLoaded;h=h!=a.GetCurrentZoom();l=g&&a.ajax.contextID!==l;g=a.dom.selectedSnapin;var p=!1;if(null===b||k||l||a.serverCtx.reloadDocument)p=!0;p&&(a.cache.emptyCanvas(),a.Internal.Thumbnails.removeAllThumbnails(),a.dom.bookmarksArea&&dvJQuery(a.dom.bookmarksTree).empty(),a.Internal.Text.clearSelection(),a.ClearSearch(),a.Internal.FormFields.removeAll(),a.Internal.Annotations.removeAll(),
a.refreshCommentsPanel(),a.cache.Pages=null);if(l&&(k||(null!=a.dom.pageNavBox&&(a.dom.pageNavBox.style.width="36px"),null!==a.dom.pageNavBoxMobile&&(a.dom.pageNavBoxMobile.style.width="36px"),a.dom.UIconfig.collapseSnapinOnDocumentClosed&&a.SetSnapinsPanelVisibility(!1)),a.callbacks.onDocumentClosed))a.callbacks.onDocumentClosed();h&&!1===q&&(a.serverCtx.vScrollbarVal=a.Internal.Coordinates.getViewerScrollTop(),a.serverCtx.hScrollbarVal=a.Internal.Coordinates.getViewerScrollLeft());k&&(a.cache.pageCanvasSize=
null,a.dom.viewerContextMenuRemoveTextButton&&a.serverCtx.hasTextRemovalSupport?dvJQuery(a.dom.viewerContextMenuRemoveTextButton).show():a.dom.viewerContextMenuRemoveTextButton&&dvJQuery(a.dom.viewerContextMenuRemoveTextButton).hide(),a.dom.viewerContextMenuRedactButton&&a.serverCtx.hasRedactionSupport?dvJQuery(a.dom.viewerContextMenuRedactButton).show():a.dom.viewerContextMenuRedactButton&&dvJQuery(a.dom.viewerContextMenuRedactButton).hide());a.UpdateUI(k,e,null!==b,l,!1,!1,f);null!==b&&b.hasUserPassword&&
b.newDocument&&a.Internal.FilePassword.createAndShowDialog(function(b){""==b||null==b?a.Internal.FilePassword.showError(a.Localize("dialog_password_missing")):a.Internal.FilePassword.setPassword(b,!0)},function(){a.Internal.FilePassword.destroyDialog()});k&&a.IsSnapinsPanelVisible()&&(null===a.dom.selectedSnapin||a.SelectSnapIn(g,!0)!==DocuViewareAPI.Status.OK)&&a.SelectFirstAvailableSnapin(null);b=c!==a.GetCurrentPage();if(k||b)a.Internal.Annotations.unselectAll(),a.dom.pageCountBox&&a.dom.pageNavBox&&
(a.dom.pageCountBox.innerHTML=a.GetPageCount(),a.dom.pageNavBox.value=a.GetCurrentPage()),a.dom.pageCountBoxMobile&&a.dom.pageNavBoxMobile&&(a.dom.pageCountBoxMobile.innerHTML=a.GetPageCount(),a.dom.pageNavBoxMobile.value=a.GetCurrentPage()),a.Internal.Redaction.disableAddRedactionMarksMode();if(!d){if(k&&(a.dom.adjustPageNavBoxWidthForMaxPages(a.GetPageCount()),a.callbacks.onNewDocumentLoaded))a.callbacks.onNewDocumentLoaded();if(b&&a.callbacks.onPageChanged)a.callbacks.onPageChanged();if(h&&(a.dom.zoomButtonValue&&
a.dom.updateZoomValue(a.GetCurrentZoom()),a.callbacks.onZoomChanged))a.callbacks.onZoomChanged()}null!=a.dom.previousPageButton&&(a.dom.previousPageButton.disabled=1>=a.GetCurrentPage()||!m);null!=a.dom.previousPageButtonMobile&&(a.dom.previousPageButtonMobile.disabled=1>=a.GetCurrentPage()||!m);null!=a.dom.nextPageButton&&(a.dom.nextPageButton.disabled=a.GetCurrentPage()>=a.GetPageCount()||!m);null!=a.dom.nextPageButtonMobile&&(a.dom.nextPageButtonMobile.disabled=a.GetCurrentPage()>=a.GetPageCount()||
!m);null!=a.dom.firstPageButtonMobile&&(a.dom.firstPageButtonMobile.disabled=1>=a.GetCurrentPage()||!m);null!=a.dom.lastPageButtonMobile&&(a.dom.lastPageButtonMobile.disabled=a.GetCurrentPage()>=a.GetPageCount()||!m);null!=a.dom.rotateLeftButton&&(a.dom.rotateLeftButton.disable=!m);null!=a.dom.rotateRightButton&&(a.dom.rotateRightButton.disable=!m);null!=a.dom.rotateLeftButtonMobile&&(a.dom.rotateLeftButtonMobile.disable=!m);null!=a.dom.rotateRightButtonMobile&&(a.dom.rotateRightButtonMobile.disable=
!m);null!=a.dom.zoomInButton&&(a.GetCurrentZoom()>=a.serverCtx.zoomMax||!m?(a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButton),a.dom.zoomInButton.disabled=!0):(a.dom.zoomInButton.disabled=!1,a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButton)));null!=a.dom.zoomInButtonMobile&&(a.GetCurrentZoom()>=a.serverCtx.zoomMax||!m?(a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButtonMobile),a.dom.zoomInButtonMobile.disabled=!0):(a.dom.zoomInButtonMobile.disabled=!1,a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButtonMobile)));
null!=a.dom.zoomOutButton&&(a.GetCurrentZoom()<=a.serverCtx.zoomMin||!m?(a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButton),a.dom.zoomOutButton.disabled=!0):(a.dom.zoomOutButton.disabled=!1,a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButton)));null!=a.dom.zoomOutButtonMobile&&(a.GetCurrentZoom()<=a.serverCtx.zoomMin||!m?(a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButtonMobile),a.dom.zoomOutButtonMobile.disabled=!0):(a.dom.zoomOutButtonMobile.disabled=!1,a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButtonMobile)))},
PostCustomServerAction:function(b,d,e,f,g){if(a.waitForInit)return setTimeout(function(){a.ajax.PostCustomServerAction(b,d,e,f,g)},100),DocuViewareAPI.Status.OK;if(a.hasPendingAction())return DocuViewareAPI.Status.GenericError;var c={data:{actionName:d,args:e,clientConfiguration:a.getConfig()},success:function(b){"string"===typeof b&&(b=eval("("+b+")"));a.ajax.HandleServerContextResponse(b,!1,!0);f&&f(b.result)},error:function(){g&&g()}},h={};h.customactionname=d;return a.ajax.PostBaseRequest("customaction",
c,!b,!0,h)},PostAjaxRequestForCrossDomainApp:function(b,d){b.cache=!1;b.processData=!1;this.customHeaders&&"null"!==this.customHeaders&&"undefined"!==this.customHeaders&&(M=this.customHeaders,dvJQuery.each(this.customHeaders,function(a,b){b&&""!=b||delete M[a]}),dvJQuery.isEmptyObject(M)||(b.headers=M));null!=d&&(null==b.headers&&(b.headers={}),Object.assign(b.headers,d));b.timeout||(b.timeout=a.ajax.AjaxRequestTimeout);b.crossDomain=!0;b.type="POST";b.contentType="application/json";b.dataType="json";
dvJQuery.ajax(b)},PostAjaxRequestForDocuViewareAction:function(b,d){null===b.error&&alert("Please specify an error object!");b.cache=!1;b.processData=!1;this.customHeaders&&"null"!==this.customHeaders&&"undefined"!==this.customHeaders&&(M=this.customHeaders,dvJQuery.each(this.customHeaders,function(a,b){b&&""!=b||delete M[a]}),dvJQuery.isEmptyObject(M)||(b.headers=M));null!=d&&(null==b.headers&&(b.headers={}),Object.assign(b.headers,d));b.timeout||(b.timeout=a.ajax.AjaxRequestTimeout);b.type="POST";
b.dataType="json";var c=b.success;b.success=function(a){null!=c&&c(a)};dvJQuery.ajax(b)},PostBaseRequest:function(b,d,e,f,g){if(!f&&a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;null!=d.beforeStart&&d.beforeStart();2==a.events.mouseMode&&a.events.isDrawingPath&&a.ExitAnnotationDrawingMode();this.pendingRequests+=1;this.requestNo+=1;null==d.data&&(d.data={});d.data.vScrollbarVal=a.Internal.Coordinates.getViewerScrollTop();d.data.vScrollbarMax=a.Internal.Coordinates.getViewerScrollTopMax();
d.data.hScrollbarVal=a.Internal.Coordinates.getViewerScrollLeft();d.data.hScrollbarMax=a.Internal.Coordinates.getViewerScrollLeftMax();d.data.sessionID=this.sessionID;d.data.contextID=this.contextID;d.data.requestNo=this.requestNo;a.DisplayPendingActionNotification();null==g&&(g={});g.docuviewarerequest=b;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!e,data:JSON.stringify({requestName:b,requestData:d.data}),contentType:"application/json",
success:function(b){--a.ajax.pendingRequests;a.HidePendingActionNotification();d.success&&d.success(b)},error:function(b){a.ajax.HandleError(b);--a.ajax.pendingRequests;null!=d.error&&d.error(b)},complete:function(a){null!=d.complete&&d.complete(a)}},g);return DocuViewareAPI.Status.OK},HandleError:function(b){if(b){if(null!=b.responseType&&"DocuVieware"==b.responseType){var c="";null!=b.action&&""!=b.action&&(c+=b.action+": ");c+=b.message;console.log("DocuVieware: "+c);b.throwError&&a.DisplayError(c)}else null!=
b.readyState&&null!=b.statusText&&(c="DocuVieware XMLHttpRequest error."+("\nStatus: "+b.status+"."),c+="\nReadyState: ",c=0==b.readyState?c+"uninitialized.":1==b.readyState?c+"loading.":2==b.readyState?c+"loaded.":3==b.readyState?c+"interactive.":4==b.readyState?c+"completed.":c+(b.readyState+"."),c+="\nDescription: "+b.statusText+".",null!=b.responseText&&""!=b.responseText&&(c+="\nResponse text: "+b.responseText),"timeout"!=b.statusText&&null!=b.status&&"0"==b.status&&null!=b.readyState&&0==b.readyState?
a.debug&&console.log(c):(console.log(c),a.debug&&alert(c))),dvJQuery(a.dom.mainSpinner).hide(),a.HidePendingActionNotification();b.resetClientUI&&a.ClearUI();if(1==b.reloadServerContext)a.events.onLoad(!0)}},HandleServerContextResponse:function(b,d,e,f){if(b&&b.status==DocuViewareAPI.Status.OK){var c=a.GetCurrentPage();b.message&&a.ShowMessage(b.message);if(b.contextID<a.ajax.contextID)return;a.ajax.SetNewServerCtx(b,f,d);!e||c==a.GetCurrentPage()&&a.GetCurrentPage()==a.GetLastPageNoRequest()||(a.ajax.latestSelectedPage=
a.GetCurrentPage(),a.EnsureCurrentPageVisibility());return!0}a.ajax.HandleError(b);return!1}},callbacks:{onFileOpenSuccess:null,onFileOpenError:null,onURIOpenSuccess:null,onURIOpenError:null,onPageChanged:null,onRotationChanged:null,onAnnotationSelectedStateChanged:null,onAnnotationAdded:null,onAnnotationEdited:null,onAnnotationDeleted:null,onAnnotationMouseEnter:null,onAnnotationMouseLeave:null,onAnnotationMoved:null,onCommentAdded:null,onCommentEdited:null,onCommentDeleted:null,onFormFieldChanged:null,
onZoomChanged:null,onNewDocumentLoaded:null,onDocumentClosed:null,onDocumentPrinted:null,onDocumentSaved:null,onDocumentSigned:null,onTwainAcquisitionDialogAcquireButtonClick:null,onTwainAcquisitionDialogCancelButtonClick:null,onThumbnailsOrderChanged:null,onTextSelected:null,onTextUnselected:null,onTextAnnotated:null,onAreaSelected:null,onFullscreenModeChanged:null,onThumbnailsSnapInSelected:null,onBookmarksSnapInSelected:null,onSearchSnapInSelected:null,onAnnotationsSnapInSelected:null,onCommentsSnapInSelected:null,
onSnapInPanelResized:null,onSnapInPanelToggle:null,onRedactionMarksApplied:null,onViewerScroll:null},serverCtx:{},dom:{getViewerContainer:function(){return document.getElementById("viewerContainer"+a.uniqueID)},zindexManager:{getFirstAnnotZindex:function(){return 65535},getFirstFormFieldZindex:function(){return 65535},getSelectionAreaZindex:function(){return 16777271},getFreehandDrawingCanvasZindex:function(){return 16777271},getMagnifierZindex:function(){return 16777271}},visibleToolbar:DocuViewareAPI.Toolbar.None,
enableAnnotEditionOnDblClick:!0,selectedAnnotation:null,selectedSnapin:null,isLoadFromUriDialogVisible:!1,sbWidth:DocuViewareUtilities.getScrollbarWidth(),toolbarLogo:document.getElementById("docuViewareLogo"+e),mobileToolbarArea:document.getElementById("mobileToolbar"+e),mobileToolbarTop:document.getElementById("mobileToolbarTop"+e),mobileToolbarContainer:document.getElementById("mobileToolbarContainer"+e),subMenuZoomModeMobile:document.getElementById("subMenuZoomModeMobile"+e),subMenuMouseModeMobile:document.getElementById("subMenuMouseModeMobile"+
e),pageNavBoxMobile:document.getElementById("pageNavBoxMobile"+e),pageCountBoxMobile:document.getElementById("pageCountBoxMobile"+e),openFromFileButtonMobile:document.getElementById("openFromFileButtonMobile"+e),twainAcquisitionButtonMobile:document.getElementById("twainAcquisitionButtonMobile"+e),fullscreenButtonMobile:document.getElementById("fullscreenButtonMobile"+e),singlePageModeButtonMobile:document.getElementById("singlePageModeButtonMobile"+e),panMouseModeButtonMobile:document.getElementById("panMouseModeButtonMobile"+
e),selectMouseModeButtonMobile:document.getElementById("selectMouseModeButtonMobile"+e),zoomAreaMouseModeButtonMobile:document.getElementById("zoomAreaMouseModeButtonMobile"+e),openfile:document.getElementById("openfile"+e),twainAcquisitionButton:document.getElementById("twainAcquisitionButton"+e),openFromFileButton:document.getElementById("openFromFileButton"+e),rotateLeftButton:document.getElementById("rotateLeftButton"+e),rotateRightButton:document.getElementById("rotateRightButton"+e),rotateLeftButtonMobile:document.getElementById("rotateLeftButtonMobile"+
e),rotateRightButtonMobile:document.getElementById("rotateRightButtonMobile"+e),zoomInButton:document.getElementById("zoomInButton"+e),zoomInButtonMobile:document.getElementById("zoomInButtonMobile"+e),zoomOutButton:document.getElementById("zoomOutButton"+e),zoomOutButtonMobile:document.getElementById("zoomOutButtonMobile"+e),zoomModeButton:document.getElementById("zoomModeButton"+e),zoomButtonValue:document.getElementById("zoomButtonValue"+e),mouseModeButton:document.getElementById("mouseModeButton"+
e),subMenuZoomMode:document.getElementById("subMenuZoomMode"+e),subMenuMouseMode:document.getElementById("subMenuMouseMode"+e),pendingActionDiv:document.getElementById("pendingActionDiv"+e),openFromUriArea:document.getElementById("openuri"+e),openFromUriButton:document.getElementById("openFromUriButton"+e),singlePageModeButton:document.getElementById("singlePageModeButton"+e),fullscreenButton:document.getElementById("fullscreenButton"+e),magnifierButton:document.getElementById("magnifierButton"+e),
magnifierTemplateDiv:document.getElementById("magnifierTemplateDiv"+e),panMouseModeButton:document.getElementById("panMouseModeButton"+e),selectMouseModeButton:document.getElementById("selectMouseModeButton"+e),zoomAreaMouseModeButton:document.getElementById("zoomAreaMouseModeButton"+e),infoDiv:document.getElementById("infoDiv"+e),infoMessage:document.getElementById("infoMessage"+e),addressBar:document.getElementById("openuriinput"+e),mainArea:document.getElementById("main"+e),containerArea:document.getElementById(e),
mainSpinner:document.getElementById("mainSpinner"+e),mainSpinnerContent:document.getElementById("mainSpinnerContent"+e),leftSideArea:document.getElementById("leftside"+e),leftSideResizeBar:document.getElementById("leftSideResizeBar"+e),snapinButtonStrip:document.getElementById("snapinButtonStrip"+e),leftsideContainer:document.getElementById("leftsideContainer"+e),leftSideContainerPanelsArea:document.getElementById("leftsideContainerPanels"+e),snapinsHeader:document.getElementById("snapinsHeader"+
e),snapinTabControl:document.getElementById("leftsidePanels"+e),snapinsHeaderLabel:document.getElementById("snapinsHeaderLabel"+e),thumbnailArea:document.getElementById("thumbnailsPanel"+e),commentsArea:document.getElementById("commentsPanel"+e),commentsAuthorInput:document.getElementById("commentAuthorInput"+e),commentsSearchArea:document.getElementById("commentsContainer"+e),commentsSearchValueInput:document.getElementById("commentsSearchValueInput"+e),commentsSearchClearResultsButton:document.getElementById("commentsSearchClearResultsButton"+
e),commentsSortBySelect:document.getElementById("commentsSortBySelect"+e),commentsSearchActionContainerOverlayDisable:document.getElementById("commentsSearchActionContainerOverlayDisable"+e),commentsSortBySelectContainer:document.getElementById("commentsSortBySelectContainer"+e),commentsContainer:document.getElementById("commentsContainer"+e),commentAnswerBox:document.getElementById("commentAnswerBox"+e),commentContentBox:document.getElementById("commentContentBox"+e),commentStatusBox:document.getElementById("commentStatusBox"+
e),commentMessageInput:document.getElementById("commentMessageInput"+e),commentAnswerInput:document.getElementById("commentAnswerInput"+e),commentStatusSelect:document.getElementById("commentStatusSelect"+e),commentsCollapseExpandAllButton:document.getElementById("commentsCollapseExpandAllButton"+e),bookmarksArea:document.getElementById("bookmarksPanel"+e),bookmarksTree:document.getElementById("bookmarksTree"+e),searchArea:document.getElementById("searchPanel"+e),searchPanelForm:document.getElementById("searchPanelForm"+
e),searchValueInput:document.getElementById("searchValueInput"+e),searchCaseSensitiveInput:document.getElementById("searchCaseSensitiveInput"+e),searchAnyWordInput:document.getElementById("searchAnyWordInput"+e),searchPageSelect:document.getElementsByName("searchPageSelect"+e),searchWholeWordInput:document.getElementById("searchWholeWordInput"+e),searchResultsContainer:document.getElementById("searchResultsContainer"+e),searchClearResultsButton:document.getElementById("searchClearResultsButton"+e),
annotationsArea:document.getElementById("annotationsPanel"+e),searchResults:document.getElementById("searchResults"+e),viewerArea:document.getElementById("viewer"+e),panDiv:null,controlArea:document.getElementById("control"+e),toolBarArea:document.getElementById("toolbar"+e),pageNavBox:document.getElementById("pageNavBox"+e),previousPageButton:document.getElementById("previousPageButton"+e),nextPageButton:document.getElementById("nextPageButton"+e),firstPageButtonMobile:document.getElementById("firstPageButtonMobile"+
e),previousPageButtonMobile:document.getElementById("previousPageButtonMobile"+e),nextPageButtonMobile:document.getElementById("nextPageButtonMobile"+e),lastPageButtonMobile:document.getElementById("lastPageButtonMobile"+e),pageCountBox:document.getElementById("pageCountBox"+e),dvpassword:document.getElementById("dvpassword"+e),dvpasswordInput:document.getElementById("dvpassword-input"+e),dvpasswordError:document.getElementById("dvpassword-error"+e),annotationsActionButtons:document.getElementById("annotationActionButtons"+
e),annotationDialogFormTextInput:document.getElementById("annotation_text_input"+e),annotationDialogFormFontSizeInput:document.getElementById("annotation_font_size_input"+e),annotationDialogFormForeColorInput:document.getElementById("annotation_fore_color_input"+e),annotationDialogFormFontNameSelect:document.querySelectorAll("select[name='annotation_font_name_select"+e+"']"),annotationDialogFormAlignmentSelect:document.querySelectorAll("input[name='annotation_alignment_select"+e+"']"),annotationDialogFormFontStyleSelect:document.querySelectorAll("select[name='annotation_font_style_select"+
e+"']"),annotationDialogFormContainer:document.getElementById("annotationDialogFormContainer"+e),annotationDialogForm:document.getElementById("annotationDialogForm"+e),annotationActionRemoveConfirm:document.getElementById("annotationActionRemoveConfirm"+e),annotationRemoveConfirmMessage:document.getElementById("annotationRemoveConfirmMessage"+e),redactionAddAreasButton:document.getElementById("redactionAddAreas"+e),redactionApplyButton:document.getElementById("redactionApply"+e),redactionsPanel:document.getElementById("redactionsPanel"+
e),redactionFill:document.getElementById("redaction_fill"+e),redactionAreaButtonsList:document.getElementById("redactionAreaButtonsList"+e),redactionAreaButtonModel:document.getElementById("redactionAreaButtonModel"+e),redactionAreaFoundText:document.getElementById("redactionAreaFoundText"+e),redactionRemoveAllButton:document.getElementById("redactionRemoveAllButton"+e),redactionRemoveAllSelectedButton:document.getElementById("redactionRemoveAllSelectedButton"+e),digisignAppearanceMenuToggle:document.getElementById("digisignAppearanceMenuToggle"+
e),digisignCertificateMenuToggle:document.getElementById("digisignCertificateMenuToggle"+e),digisignAppearanceMenuContent:document.getElementById("digisignAppearanceMenuContent"+e),digisignCertificateMenuContent:document.getElementById("digisignCertificateMenuContent"+e),digisignAppearanceButtonText:document.getElementById("digisignAppearanceButtonText"+e),digisignAppearanceButtonImg:document.getElementById("digisignAppearanceButtonImg"+e),digisignAppearanceButtonFreehand:document.getElementById("digisignAppearanceButtonFreehand"+
e),digisignAppearanceInputImg:document.getElementById("digisignAppearanceInputImg"+e),digisignAppearancePreview:document.getElementById("digisignAppearancePreview"+e),digisignAppearancePreviewText:document.getElementById("digisignAppearancePreviewText"+e),digisignAppearancePreviewDelete:document.getElementById("digisignAppearancePreviewDelete"+e),digisignCertificateButton:document.getElementById("digisignCertificateButton"+e),digisignCertificateIconValidate:document.getElementById("digisignCertificateIconValidate"+
e),digisignCertificateIconUnvalidate:document.getElementById("digisignCertificateIconUnvalidate"+e),digisignTimeStampButton:document.getElementById("digisignTimeStampButton"+e),digisignTimeStampIconValidate:document.getElementById("digisignTimeStampIconValidate"+e),digisignTimeStampIconUnvalidate:document.getElementById("digisignTimeStampIconUnvalidate"+e),digisignCertificateDialogForm:document.getElementById("digisignCertificateDialogForm"+e),digisignCertificateName:document.getElementById("digisignCertificateName"+
e),digisignInputCertificateFile:document.getElementById("digisign_input_certificate_file"+e),digisignTimeStampDialogForm:document.getElementById("digisignTimeStampDialogForm"+e),digisignCertificateNameContainer:document.getElementById("digisignCertificateNameContainer"+e),digisignCertificateInputContainer:document.getElementById("digisignCertificateInputContainer"+e),digisignCertificatePasswordContainer:document.getElementById("digisignCertificatePasswordContainer"+e),digisignButtonSubmit:document.getElementById("digisignSubmit"+
e),digisignCertificateButtonDelete:document.getElementById("digisignCertificateButtonDelete"+e),digisignTimeStampButtonDelete:document.getElementById("digisignTimeStampButtonDelete"+e),signatureTextDialogForm:document.getElementById("signatureTextDialogForm"+e),signatureDialogFormTextInput:document.getElementById("signature_text_input"+e),signatureDialogFormFontSizeInput:document.getElementById("signature_font_size_input"+e),signatureDialogFormForeColorInput:document.getElementById("signature_fore_color_input"+
e),signatureDialogFormFontNameSelect:document.querySelectorAll("select[name='signature_font_name_select"+e+"']"),signatureDialogFormAlignmentSelect:document.querySelectorAll("input[name='signature_alignment_select"+e+"']"),signatureDialogFormFontStyleSelect:document.querySelectorAll("select[name='signature_font_style_select"+e+"']"),signatureFreehandDialogForm:document.getElementById("signatureFreehandDialogForm"+e),signatureFreehandPad:document.getElementById("signatureFreehandPad"+e),digisignCertificatePasswordInput:document.getElementById("digisign_certificate_password"+
e),digisignCertificateCertificateLabel:document.getElementById("digisign_certificate_certificate_label"+e),digisignCertificatePasswordLabel:document.getElementById("digisign_certificate_password_label"+e),digisignTimestampServerInput:document.getElementById("digisign_timestamp_server"+e),digisignTimestampLoginInput:document.getElementById("digisign_timestamp_login"+e),digisignTimestampPasswordInput:document.getElementById("digisign_timestamp_password"+e),digisignTimestampServerLabel:document.getElementById("digisign_timestamp_server_label"+
e),signaturesContainer:document.getElementById("signaturesContainer"+e),drawingModeArea:document.getElementById("drawingMode"+e),modalOverlayArea:document.getElementById("modalOverlayDiv"+e),commentDialogModalOverlay:document.getElementById("commentDialogModalOverlayDiv"+e),saveDialog:document.getElementById("saveDialog"+e),twainAcquisitionDialog:document.getElementById("twainAcquisitionDialog"+e),twainAcquisitionDialogPanel:document.getElementById("twainAcquisitionDialogPanel"+e),twainAcquisitionDialogAcquireButton:document.getElementById("twainAcquisitionDialogAcquireButton"+
e),twainAcquisitionDestinationAppendDocBox:document.getElementById("twainAcquisitionDestinationAppendDocBox"+e),commentDialog:document.getElementById("commentDialog"+e),printDialog:document.getElementById("printDialog"+e),printPageRangeInput:document.getElementById("printPageRangeInput"+e),printProgressbarDiv:document.getElementById("printProgressbarDiv"+e),printDialogPrintButton:document.getElementById("printDialogPrintButton"+e),copyDialog:document.getElementById("copyDialog"+e),copyTextInput:document.getElementById("copy_text_input"+
e),viewerContextMenu:document.getElementById("viewerContextMenu"+e),viewerContextMenuRedactButton:document.getElementById("viewerContextMenuRedactButton"+e),viewerContextMenuRemoveTextButton:document.getElementById("viewerContextMenuRemoveTextButton"+e),faderArea:document.getElementById("label-fader__"+e),freehandAnnotButton:document.getElementById("annotButtonfreehand"+e),freehandhighlighterAnnotButton:document.getElementById("annotButtonfreehandhighlighter"+e),connectedLinesAnnotButton:document.getElementById("annotButtonconnectedline"+
e),polyRulerAnnotButton:document.getElementById("annotButtonpolyruler"+e),maxUploadSize:g,packetSize:r,UIconfig:eval("("+y+")"),singlePageView:null,thumbnailSelectBox:null,thumbnailSelectBoxOrigin:{left:0,top:0},checkLinkAt:function(b,d){if(0===a.Internal.Annotations.selected.length&&null===a.Internal.Annotations.hoveredAnnot){var c=a.Internal.Pages.getVisiblePageNumbers();if(null!=c)for(var e=0;e<c.length;e++){var h=c[e];if(a.Internal.Pages.isPageRendered(h)){var f=a.cache.getPageObject(h);if(null!=
f&&null!=f.links){h=a.Internal.Pages.getRenderingState(h);for(var g=0;g<f.links.length;g++){var k={left:96*f.links[g].x,top:96*f.links[g].y,width:96*f.links[g].width,height:96*f.links[g].height};a.Internal.Matrix.transformBBox(h.contentMatrix,0,k);k.left+=h.pageLeft;k.top+=h.pageTop;var m=a.dom.viewerArea.getBoundingClientRect(),p=b-m.left+a.Internal.Coordinates.getViewerScrollLeft();m=d-m.top+a.Internal.Coordinates.getViewerScrollTop();if(p>=k.left&&p<=k.left+k.width&&m>=k.top&&m<=k.top+k.height)return a.dom.rlink.style.height=
k.height+"px",a.dom.rlink.style.width=k.width+"px",a.dom.rlink.style.left=k.left+"px",a.dom.rlink.style.top=k.top+"px",a.events.overLink=f.links[g],!0}}}}}return!1},handleLinkRectVisibility:function(){a.dom.UIconfig.enableLinkRect&&a.events.overLink?"none"==a.dom.rlink.style.display&&a.IsZoomSynchronized()&&(a.dom.rlink.style.display="block",a.events.setCursor()):"block"==a.dom.rlink.style.display&&(a.dom.rlink.style.display="none",a.events.setCursor())},adjustPageNavBoxWidthForMaxPages:function(b){null!=
a.dom.pageNavBox&&(a.dom.pageNavBox.style.width=(12*b.toString().length).toString()+"px")},updateSelectedPageFader:function(b,d){if(0!=a.dom.viewerArea.offsetWidth&&0!=a.dom.viewerArea.offsetHeight){var c=dvJQuery(a.dom.faderArea),e=a.Localize("_label__fader_page");e=e.replace("#",d);e=e.replace("@",a.serverCtx.pageCount);c.find("div:first-child").text()!=e&&(c.find("div:first-child").text(e),d=100,e=e.length,15<e&&(d=100/15*e),c.width()!=d&&c.width(d),c.finish().animate({opacity:1},{duration:b,start:function(){c.css("z-index",
16777270)}}).delay(1E3).animate({opacity:0},{duration:800,complete:function(){c.css("z-index","")}}))}},ensureSelectedThumbnailVisibility:function(b){if(a.serverCtx.documentLoaded&&a.dom.thumbnailArea){var c=document.getElementById(a.FindSnapIn("thumbnails").snapInID),d=a.GetLastPageNoRequest();d=a.Internal.Thumbnails.getThumbnailFromPageNo(d);null!=d&&(d=c.scrollTop+Math.floor(d.position().top),d!=c.scrollTop?c.scrollTop=d:b&&a.showVisibleThumbnails())}},updateThumbsStyle:function(b,d){if(d){if(a.dom.thumbnailArea)for(a.Internal.Thumbnails.lastUpdatedPageThumbnail=
a.GetLastPageNoRequest(),d=0;d<a.dom.thumbnailArea.childElementCount;d++){var c=a.dom.thumbnailArea.children[d],e=dvJQuery(c);c=a.Internal.Thumbnails.getThumbnailPage(c);0!=c&&this.resetThumbStyle(e,c==a.GetLastPageNoRequest())}}else a.Internal.Thumbnails.lastUpdatedPageThumbnail!=a.GetLastPageNoRequest()&&(0<a.Internal.Thumbnails.lastUpdatedPageThumbnail&&a.dom.thumbnailArea&&this.updateThumbStyle(a.Internal.Thumbnails.lastUpdatedPageThumbnail),0<a.GetLastPageNoRequest()&&a.dom.thumbnailArea&&this.updateThumbStyle(a.GetLastPageNoRequest()),
a.Internal.Thumbnails.lastUpdatedPageThumbnail=a.GetLastPageNoRequest());b&&this.ensureSelectedThumbnailVisibility(!1)},resetThumbStyle:function(b,d){b.css({display:"inline-block","border-style":d?"dotted":"solid","border-width":"1px",margin:"8px 8px 8px 8px",padding:"5px 5px 0px 5px","text-align":"center",position:"relative","border-color":d?a.dom.UIconfig.strokeColor:"transparent","background-color":"transparent"})},updateThumbStyle:function(b){if(a.dom.thumbnailArea){var c=a.Internal.Thumbnails.getThumbnailFromPageNo(b);
if(null!=c){var d=c[0].getAttribute("mouse-over");d=null!=d&&"true"===d;var e=a.Internal.Thumbnails.isThumbnailSelected(b);b=b==a.GetLastPageNoRequest();c.css({"border-color":d?a.dom.UIconfig.activeSelectedColor:b?a.dom.UIconfig.strokeColor:"transparent","border-style":d?"solid":"dotted","background-color":e?a.dom.UIconfig.activeSelectedBackgroundColor:"transparent"})}}},updateZoomValue:function(b){a.dom.zoomButtonValue&&(b&&null!==b?(b*=100,b=1<b?b.toFixed(0):.1<b?b.toFixed(1):.01<b?b.toFixed(2):
b.toFixed(3),a.dom.zoomButtonValue.textContent=b+" %"):a.dom.zoomButtonValue.textContent="- %")},updateHoverBordersOnDisableToggle:function(a){a.style.border="1px solid transparent"},updateSinglePageModeButton:function(){var b=a.dom.singlePageModeButton?dvJQuery(a.dom.singlePageModeButton):null,d=a.dom.singlePageModeButtonMobile?dvJQuery(a.dom.singlePageModeButtonMobile):null;this.singlePageView?(b&&b.removeClass("button_active"),d&&d.removeClass("button_active")):(b&&b.addClass("button_active"),
d&&d.addClass("button_active"));this.updateButtons()},udpateMouseModeButtons:function(b){var c=a.dom.panMouseModeButton?dvJQuery(a.dom.panMouseModeButton):null,d=a.dom.selectMouseModeButton?dvJQuery(a.dom.selectMouseModeButton):null,e=a.dom.zoomAreaMouseModeButton?dvJQuery(a.dom.zoomAreaMouseModeButton):null,f=a.dom.magnifierButton?dvJQuery(a.dom.magnifierButton):null,g=a.dom.panMouseModeButtonMobile?dvJQuery(a.dom.panMouseModeButtonMobile):null,k=a.dom.selectMouseModeButtonMobile?dvJQuery(a.dom.selectMouseModeButtonMobile):
null,m=a.dom.zoomAreaMouseModeButtonMobile?dvJQuery(a.dom.zoomAreaMouseModeButtonMobile):null;c&&c.removeClass("button_active");d&&d.removeClass("button_active");e&&e.removeClass("button_active");f&&f.removeClass("button_active");g&&g.removeClass("button_active");k&&k.removeClass("button_active");m&&m.removeClass("button_active");switch(b){case 0:case 1:c&&c.addClass("button_active");g&&g.addClass("button_active");break;case 3:d&&d.addClass("button_active");k&&k.addClass("button_active");break;case 4:e&&
e.addClass("button_active");m&&m.addClass("button_active");break;case 5:f&&f.addClass("button_active")}},updateButtons:function(){dvJQuery(a.dom.mainArea).find(".dv-button").each(function(b){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("border","1px solid transparent");dvJQuery(this).css("background-image","none");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});dvJQuery(a.dom.mainArea).find(".dv-button.button_active").each(function(b){dvJQuery(this).css("border",
"1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("background-image","-moz-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","-webkit-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","-ms-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+" 0%,"+a.dom.UIconfig.buttonActiveGradientColorEnd+
" 100%)");dvJQuery(this).css("background-image","-o-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","linear-gradient(to bottom, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor)});dvJQuery(a.dom.mainArea).find(".dv-button.button_hover").each(function(b){dvJQuery(this).css("border",
"1px solid");dvJQuery(this).css("-webkit-border-radius","2px");dvJQuery(this).css("-moz-border-radius","2px");dvJQuery(this).css("border-radius","2px");dvJQuery(this).css("border-color",a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("background-image","none")})},autoSelectToolbar:function(){if(a.dom.mobileToolbarArea&&0!==dvJQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").length){var b=0;dvJQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").children(".dv-buttons-container").each(function(){b+=
dvJQuery(this).outerWidth()});var d=dvJQuery(a.dom.mainArea).width();dvJQuery(a.dom.toolbarLogo)&&(d-=dvJQuery(a.dom.toolbarLogo).width());b>d?(dvJQuery(a.dom.toolBarArea).css({position:"absolute",left:"-300%"}),dvJQuery(a.dom.mobileToolbarArea).css("display","block"),dvJQuery(a.dom.mobileToolbarTop).css("display","block"),a.dom.visibleToolbar=DocuViewareAPI.Toolbar.Mobile):(dvJQuery(a.dom.mobileToolbarArea).css("display","none"),dvJQuery(a.dom.mobileToolbarTop).css("display","none"),dvJQuery(a.dom.toolBarArea).css({position:"relative",
left:""}),a.dom.visibleToolbar=DocuViewareAPI.Toolbar.Standard)}else a.dom.visibleToolbar=a.dom.UIconfig.docuViewareLiteMode?DocuViewareAPI.Toolbar.Standard:DocuViewareAPI.Toolbar.None},resizeControlArea:function(){if(dvJQuery(a.dom.containerArea).is(":visible")){a.dom.autoSelectToolbar();var b=a.dom.mainArea.offsetHeight;a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Mobile?b-=dvJQuery(a.dom.mobileToolbarTop).height()+a.dom.mobileToolbarArea.clientHeight:a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Standard&&
(b-=a.dom.toolBarArea.offsetHeight);b!==a.dom.controlArea.offsetHeight&&(a.dom.controlArea.style.height=b+"px");a.dom.mobileToolbarContainer&&a.dom.resizeMobileToolbarMenu()}},resizeMobileToolbarMenu:function(){var b=0;dvJQuery(a.dom.mobileToolbarContainer).children(".dv-button").each(function(){b+=dvJQuery(this).height();b+=parseInt(dvJQuery(this).css("padding-top"),10);b+=parseInt(dvJQuery(this).css("padding-bottom"),10);b+=parseInt(dvJQuery(this).css("border-top"),10);b+=parseInt(dvJQuery(this).css("border-bottom"),
10);b+=parseInt(dvJQuery(this).css("margin-top"),10);b+=parseInt(dvJQuery(this).css("margin-bottom"),10)});b>=dvJQuery(a.dom.controlArea).height()?dvJQuery(a.dom.mobileToolbarContainer).width()===DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH&&dvJQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH):dvJQuery(a.dom.mobileToolbarContainer).width()===DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH&&dvJQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH)},
SelectedTextRegions:{_cache:[],count:function(a){if(a){for(var b=0,c=0;c<this._cache.length;c++)this._cache[c].category==a&&b++;return b}return this._cache.length},addNew:function(b,d,e,f,g,k){var c=document.createElement("div"),h=document.createAttribute("data-dv-sel-type");1===g?h.value="us":2===g&&(h.value="tr");c.attributes.setNamedItem(h);c.coordinates={left:d.left,top:d.top,width:d.width,height:d.height};a.Internal.Coordinates.documentToViewerBox(b,d);c.category=g;c.pageNo=b;c.style.display=
"block";c.style.position="absolute";c.style.padding="0px";c.style.margin="0px";c.style.outline="0";c.style.left=d.left+"px";c.style.top=d.top+"px";c.style.width=d.width+"px";c.style.height=d.height+"px";c.style.backgroundColor=e;f&&(c.style.borderColor=f,c.style.borderWidth="1px",c.style.borderStyle="solid");a.events.forwardMouseEventsToViewer(c);k?k.appendChild(c):a.dom.viewerArea.appendChild(c);this._cache.push(c)},addNews:function(a,b,d,e,f,g){b.forEach(function(b){this.addNew(a,b,d,e,f,g)},this)},
clear:function(b,d){if(0<this._cache.length)if(b||d)for(var c=0;c<this._cache.length;c++)b&&this._cache[c].category!=b||d&&this._cache[c].pageNo!=d||(a.dom.viewerArea.removeChild(this._cache[c]),this._cache.splice(c--,1));else{for(c=0;c<this._cache.length;c++)a.dom.viewerArea.removeChild(this._cache[c]);this._cache=[]}},onPageBoundsChanged:function(){if(0<this._cache.length)for(var b=0;b<this._cache.length;b++){var d=this._cache[b],e={left:d.coordinates.left,top:d.coordinates.top,width:d.coordinates.width,
height:d.coordinates.height};a.Internal.Coordinates.documentToViewerBox(d.pageNo,e);d.style.left=e.left+"px";d.style.top=e.top+"px";d.style.width=e.width+"px";d.style.height=e.height+"px"}}},createBookmarkNode:function(b,d){if(d){var c=document.createElement("li");c.bookmarkID=d.bookmarkID;if(d.hasChildren){c.className="hasChildren";var e=document.createElement("div");e.className="hitarea collapsed";e.bookmarkID=d.bookmarkID;e.onclick=a.events.onBookmarkTogglerClickHandler;e.onmouseover=a.events.onBookmarkItemMouseOverHandler;
e.onmouseout=a.events.onBookmarkItemMouseOutHandler;dvJQuery(c).append(e)}e=document.createElement("span");e.action=d.action;e.onmouseover=a.events.onBookmarkItemMouseOverHandler;e.onmouseout=a.events.onBookmarkItemMouseOutHandler;d.action&&-1<d.action.indexOf("PdfPageDest")&&(e.className="internal");e.onclick=a.events.onBookmarkItemClickHandler;e.innerHTML=d.text;d.foreColor&&(e.style.color=d.foreColor);if(1==d.textAttribute||3==d.textAttribute)e.style.fontStyle="italic";if(2==d.textAttribute||3==
d.textAttribute)e.style.fontWeight="bold";dvJQuery(c).append(e);d.hasChildren&&dvJQuery(c).append('<ul><li><span class="placeholder">&nbsp;</span></li></ul>');b.append(c)}},setBookmarkOverStyle:function(a,b){dvJQuery(a).parent().find("span:first").css("text-decoration",b?"underline":"none")},selectBookmark:function(b){this.resetBookmarkStyle();dvJQuery(b).css("background-color",a.dom.UIconfig.activeSelectedBackgroundColor).addClass("selected")},resetBookmarkStyle:function(){a.dom.bookmarksTree&&dvJQuery(a.dom.bookmarksTree).find("span.selected").removeClass("selected").css("background-color",
"transparent")},createCommentItem:function(b,d){if(b&&b.annotApp.visible){var c=document.createElement("div");c.className="dvcomment";var e=document.createElement("div");e.className="dvcomment-wrapper";e.id="dvcomment-"+b.annotApp.id+"-"+a.uniqueID;var h=this.generateCommentHeaderMarkup(b);e.appendChild(h);b=this.generateCommentContentMarkup(b);if(null!=d)for(h=0;h<d.length;h++){var f=d[h];if(f.annotApp.visible){var g=document.createElement("div");g.className="dvcomment-wrapper dvanswer";g.id="dvcomment-"+
f.annotApp.id+"-"+a.uniqueID;var k=this.generateCommentHeaderMarkup(f);f=this.generateCommentContentMarkup(f);g.appendChild(k);g.appendChild(f);b.appendChild(g)}}e.appendChild(b);c.appendChild(e);dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).append(c)}},generateCommentHeaderMarkup:function(b){var c=document.createElement("div");c.className="dvcomment-header";c.addEventListener("click",function(c){c.stopPropagation();(c=document.getElementById(a.uniqueID))&&c.control.CommentHeader_Click(b.annotApp.id)});
b.annotApp.canEdit&&c.addEventListener("dblclick",function(c){c.stopPropagation();(c=document.getElementById(a.uniqueID))&&c.control.CommentProperties_Click(b.annotApp.id)});c.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer")});c.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default")});switch(b.annotApp.properties.reviewStatus){case 0:c.className+=" status-none";break;case 1:c.className+=" status-approved";break;case 2:c.className+=" status-canceled";
break;case 3:c.className+=" status-finished";break;case 4:c.className+=" status-rejected"}var d=document.createElement("div");d.className="dvcomment-user";var e=document.createElement("span");e.className="dvtoggle";d.appendChild(e);e=document.createElement("span");e.innerText=b.annotApp.author;d.appendChild(e);e=document.createElement("div");e.className="dvcomment-date";var f=document.createElement("span");f.innerText=b.annotApp.creationTime.split("T")[0]+" "+b.annotApp.creationTime.split("T")[1].split(".")[0];
e.appendChild(f);c.appendChild(d);c.appendChild(e);return c},generateCommentContentMarkup:function(b){var c=document.createElement("div");c.className="dvcomment-content";c.addEventListener("click",function(c){c.stopPropagation();(c=document.getElementById(a.uniqueID))&&c.control.CommentHeader_Click(b.annotApp.id)});b.annotApp.canEdit&&c.addEventListener("dblclick",function(c){c.stopPropagation();(c=document.getElementById(a.uniqueID))&&c.control.CommentProperties_Click(b.annotApp.id)});c.addEventListener("mouseover",
function(){dvJQuery(this).css("cursor","pointer")});c.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default")});var d=document.createElement("div");d.className="dvcomment-message";b.annotApp.properties.fill&&null!=b.annotApp.properties.fillColor&&(d.style.backgroundColor=b.annotApp.properties.fillColor);var e=document.createElement("p");e.style.color=b.annotApp.properties.foreColor;e.style.fontFamily=b.annotApp.properties.fontName;switch(b.annotApp.properties.fontStyle){case 0:e.style.fontStyle=
"normal";e.style.fontWeight="normal";e.style.textDecoration="none";break;case 1:e.style.fontStyle="normal";e.style.fontWeight="bold";e.style.textDecoration="none";break;case 2:e.style.fontStyle="italic";e.style.fontWeight="normal";e.style.textDecoration="none";break;case 3:e.style.fontStyle="italic";e.style.fontWeight="bold";e.style.textDecoration="none";break;case 4:e.style.fontStyle="normal";e.style.fontWeight="normal";e.style.textDecoration="underline";break;case 5:e.style.fontStyle="normal";e.style.fontWeight=
"bold";e.style.textDecoration="underline";break;case 6:e.style.fontStyle="italic";e.style.fontWeight="normal";e.style.textDecoration="underline";break;case 7:e.style.fontStyle="italic";e.style.fontWeight="bold";e.style.textDecoration="underline";break;case 8:e.style.fontStyle="normal";e.style.fontWeight="normal";e.style.textDecoration="line-through";break;case 9:e.style.fontStyle="normal";e.style.fontWeight="bold";e.style.textDecoration="line-through";break;case 10:e.style.fontStyle="italic";e.style.fontWeight=
"normal";e.style.textDecoration="line-through";break;case 11:e.style.fontStyle="italic";e.style.fontWeight="bold";e.style.textDecoration="line-through";break;case 12:e.style.fontStyle="normal";e.style.fontWeight="normal";e.style.textDecoration="none";break;case 13:e.style.fontStyle="normal";e.style.fontWeight="normal";e.style.textDecoration="none";break;case 14:e.style.fontStyle="normal";e.style.fontWeight="normal";e.style.textDecoration="none";break;case 15:e.style.fontStyle="normal",e.style.fontWeight=
"normal",e.style.textDecoration="none"}e.style.fontSize=b.annotApp.properties.fontSize+"pt";e.innerText=b.annotApp.properties.text;d.appendChild(e);e=document.createElement("div");e.className="dvcomment-options";e.style.borderTop="1px solid"+a.dom.UIconfig.strokeColor;e.style.paddingTop="10px";e.style.height="20px";e.style.lineHeight="18px";e.style.display="inline-block";e.style.width="100%";e.style.fill=a.dom.UIconfig.strokeColor;var f=document.createElement("div");f.style.height="20px";f.style.width=
"16px";f.style.display="inline-block";f.style.float="left";f.style.marginRight="5px";switch(b.ownerAnnotType){case 0:f.title=a.Localize("annotation_rubberstamp");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M502.17,471.293C498.894,479.536,491.698,485,482.614,485H29.392c-9.074,0-16.275-5.452-19.557-13.681l-1.611,11.991C6.007,499.252,15.508,512,29.392,512h453.223c13.883,0,23.357-12.748,21.168-28.689L502.17,471.293z"></path><path d="M29.392,459h453.223c13.883,0,23.357-13.272,21.168-29.215L485.65,293.901C483.802,280.073,472.189,268,459.705,268H312.91c-9.316-21.166-19.587-46.501-19.587-78.786c0-65.296,33.704-94.909,33.704-124.417c0-34.522-30.432-62.552-71.975-64.558c-41.648,2.006-74.72,30.035-74.72,64.558c0,29.507,32.359,59.12,32.359,124.417c0,32.285-9.665,57.621-18.431,78.786H52.3c-12.484,0-24.07,12.073-25.918,25.901L8.224,429.785C6.007,445.728,15.508,459,29.392,459z"></path></g></svg>';
break;case 1:f.title=a.Localize("annotation_rectangle");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M500.984,475H12.015C5.58,475,1,470.943,1,464.485V45.368C1,38.955,5.58,32,12.015,32h488.97C507.42,32,512,38.955,512,45.368v419.117C512,470.943,507.42,475,500.984,475z M23,451h467V56H23V451z"></path></svg>';break;case 2:f.title=a.Localize("annotation_highlighter");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><rect y="460" width="511" height="22"></rect><path d="M171.273,360.939l66.635,66.652l31.584-31.587l38.585,37.878l147.65-50.41l-77.51-96.199l32.437-32.439l-66.608-66.643l22.511-22.507L253.862,29.357L236.748,43.5l99.789,120.753l-187.28,187.29L38.114,236.169L21,250.333l126.696,134.18L171.273,360.939z M379.246,254.834L237.909,396.184l-50.928-50.948l141.364-141.343L379.246,254.834z"></path></g></svg>';
break;case 3:f.title=a.Localize("annotation_line");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M18.027,508.886c-3.465,0-6.93-1.322-9.574-3.968c-5.29-5.289-5.29-13.858,0-19.147L484.646,9.604c5.289-5.29,13.858-5.29,19.147,0c5.289,5.289,5.289,13.858,0,19.148L27.601,504.918C24.956,507.563,21.491,508.886,18.027,508.886z"></path></svg>';break;case 4:f.title=a.Localize("annotation_arrow");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M505.772,5.964L274.419,56.371l74.596,85.702L6.272,484.867c-5.689,5.689-5.689,14.906,0,20.596c2.844,2.845,6.571,4.267,10.297,4.267c3.726,0,7.453-1.422,10.297-4.267l341.316-341.369l70.939,81.502L505.772,5.964z"></path></svg>';
break;case 5:f.title=a.Localize("annotation_connectedline");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><polygon points="423.454,318 239,85.713 239,1 145,1 145,95 162.2,95 67.761,414 17,414 17,509 112,509 112,414 100.812,414 195.267,95 208.079,95 398,337.304 398,414 494,414 494,318 "></polygon></svg>';break;case 6:f.title=a.Localize("annotation_ellipse");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M256,475C114.579,475-0.474,375.635-0.474,253.5S114.579,32,256,32c141.42,0,256.475,99.365,256.475,221.5S397.42,475,256,475z M256,55.315c-128.567,0-233.158,88.914-233.158,198.185c0,109.293,104.591,198.185,233.158,198.185c128.555,0,233.157-88.892,233.157-198.185C489.156,144.229,384.555,55.315,256,55.315z"></path></svg>';
break;case 7:f.title=a.Localize("annotation_image");f.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><g><g><g><path d="M2.1,16c-0.2,0-0.4-0.2-0.4-0.4V4c0-0.1,0-0.2,0.1-0.3l3.6-3.7C5.4,0,5.5,0,5.6,0h8.3 c0.2,0,0.4,0.2,0.4,0.4v15.2c0,0.2-0.2,0.4-0.4,0.4H2.1z M13.5,15.2V0.8H5.8L2.4,4.2l0,11H13.5z"/></g><g><path d="M2.3,4.4C2.1,4.4,2,4.3,2,4.1c0-0.2,0.2-0.4,0.4-0.4h3.1v-3c0-0.2,0.2-0.4,0.4-0.4s0.4,0.2,0.4,0.4v3.4\tc0,0.2-0.2,0.4-0.4,0.4H2.3z"/></g></g><g><path d="M11.8,13.8H4.2c-0.1,0-0.3-0.1-0.3-0.3V6.2C4,6,4.1,5.9,4.2,5.9h7.5C11.9,5.9,12,6,12,6.2v7.4\tC12,13.7,11.9,13.8,11.8,13.8z M4.5,13.3h7V6.4h-7V13.3z"/></g><g><path d="M10.6,12.2C10.6,12.2,10.6,12.2,10.6,12.2H5.3c-0.1,0-0.3-0.1-0.3-0.2c-0.1-0.1,0-0.3,0.1-0.4l1.4-1.5 C6.6,10,6.8,10,6.9,10l0.8,0.4L8.9,9C9,8.9,9.1,8.9,9.2,8.9c0.1,0,0.2,0.1,0.3,0.2l1.4,2.6c0,0.1,0.1,0.1,0.1,0.2 C10.9,12,10.8,12.2,10.6,12.2z M6.1,11.5H10L9.1,9.8L8.1,11c-0.1,0.1-0.3,0.1-0.4,0.1l-0.8-0.4L6.1,11.5z"/></g><g><path d="M6.4,9.7c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2s1.2,0.5,1.2,1.2S7.1,9.7,6.4,9.7z M6.4,8 C6.1,8,5.9,8.2,5.9,8.5C5.9,8.8,6.1,9,6.4,9s0.5-0.2,0.5-0.5C6.9,8.2,6.7,8,6.4,8z"/></g></g></svg>';
break;case 8:f.title=a.Localize("annotation_text");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M43.419,109l-2.444,88h30.453l3.074-27.874c0.604-4.992,1.576-9.444,2.995-13.384c1.394-3.995,3.521-7.271,6.385-10.003c2.864-2.732,6.595-4.948,11.14-6.418c4.573-1.472,10.221-2.32,17-2.32H149v241.824c0,6.463-0.991,11.612-2.174,15.448c-1.182,3.836-2.992,6.727-5.041,8.829c-2.075,2.049-4.596,3.343-7.38,3.973c-2.811,0.683-5.99,0.926-9.378,0.926H107v24h155v-24h-18.951c-3.258,0-6.252-0.243-9.063-0.926c-2.785-0.63-5.256-1.961-7.384-4.009c-2.128-2.103-3.721-4.976-4.903-8.812c-1.182-3.836-1.698-8.967-1.698-15.43V137h36.056c6.751,0,12.428,0.865,16.973,2.337c4.572,1.471,8.275,3.638,11.142,6.371c2.889,2.733,5.018,6.075,6.41,10.069c1.392,3.94,2.391,8.342,2.968,13.333L296.86,197h30.215l-2.208-88H43.419z"></path><polygon points="471,28 471,0 416.925,0 389.875,0 336,0 336,28 390,28 390,485 336,485 336,512 471,512 471,485 417,485 417,28 \t"></polygon></g></svg>';
break;case 9:f.title=a.Localize("annotation_stickynote");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><g><path d="M469.819,482.76c-0.163-0.056-0.352,0-0.541,0H43.514c-4.457,0-8.656-2.167-11.256-5.8c-55.361-76.884-28.135-152.522-1.788-225.654c24.992-69.462,48.614-135.05,1.788-200.095c-3.047-4.227-3.468-9.78-1.084-14.413c2.371-4.633,7.138-7.558,12.34-7.558h425.765c4.444,0,8.668,2.14,11.269,5.77c55.348,76.884,28.121,152.523,1.787,225.669c-24.706,68.581-48.004,133.383-3.573,197.589c3.033,2.547,4.931,6.339,4.931,10.619C483.691,476.529,477.487,482.76,469.819,482.76z M50.801,455.018h393.552c-36.519-69.354-11.947-137.568,11.867-203.711c24.272-67.403,47.245-131.176,5.771-194.326H68.438c36.505,69.327,11.948,137.542-11.88,203.699C32.298,328.068,9.338,391.842,50.801,455.018z"></path></g></g><g><path d="M156.769,256.182c-6.678,0-12.571-4.821-13.681-11.649c-1.232-7.559,3.901-14.684,11.459-15.903c43.698-7.125,109.436-5.336,162.288-3.901c28.148,0.732,59.953,1.653,68.245-0.027c5.038-3.007,11.593-2.574,16.253,1.49c5.744,5.065,6.338,13.817,1.247,19.587c-7.206,8.208-18.587,8.534-86.503,6.664c-51.635-1.408-115.963-3.115-157.061,3.55C158.258,256.128,157.513,256.182,156.769,256.182z"></path></g><g><path d="M156.769,187.371c-6.678,0-12.557-4.823-13.681-11.623c-1.232-7.558,3.901-14.71,11.459-15.93c43.711-7.152,109.504-5.363,162.343-3.927c28.147,0.758,59.926,1.652,68.19-0.027c5.038-3.008,11.593-2.575,16.253,1.49c5.744,5.066,6.338,13.815,1.247,19.587c-7.206,8.236-18.531,8.561-86.449,6.664c-51.675-1.354-115.977-3.142-157.114,3.576C158.258,187.316,157.513,187.371,156.769,187.371z"></path></g><g><path d="M121.306,334.896c-6.678,0-12.557-4.822-13.681-11.65c-1.233-7.531,3.901-14.683,11.459-15.93c43.752-7.152,109.583-5.31,162.452-3.9c28.119,0.812,59.816,1.625,68.054,0c5.039-3.034,11.648-2.602,16.254,1.516c5.742,5.039,6.312,13.817,1.246,19.561c-7.205,8.181-18.638,8.398-86.312,6.665c-51.703-1.409-116.044-3.197-157.223,3.521C122.795,334.842,122.051,334.896,121.306,334.896z"></path></g></svg>';
break;case 10:f.title=a.Localize("annotation_freehand");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M499.492,181.467c-11.96,44.414-34.563,117.339-89.42,65.275c-34.057-32.322-42.199-91.157-80.909-117.183c-73.542-49.445-91.639,63.943-102.845,115.369c-3.438,16.144-8.056,72.668-23.494,85.512c-25.722,21.399-39.179-22.3-49.779-43.835c-17.208-34.958-52.154-79.916-97.267-55.696C-6.626,264.413,16.887,361.838,0.465,415.423C17.113,386.214,22.62,255.181,75.526,255.69c33.803-3.687,41.408,45.87,50.069,68.527c20.406,53.379,83.937,75.822,116.963,24.443c34.052-52.975,24.004-126.769,51.01-182.784c11.182-23.193,70.538,81.331,79.993,90.828c23.427,22.811,63.715,51.87,96.841,28.584c42.556-29.914,32.615-97.03,42.144-140.822C507.233,156.46,502.883,168.794,499.492,181.467C496.096,194.08,502.778,168.854,499.492,181.467z M203.761,328.545l-0.014,0.027C203.998,328.008,204.119,327.738,203.761,328.545zM202.883,330.527l-0.015,0.046C202.837,330.637,202.848,330.609,202.883,330.527z M297.399,158.402C298.163,158.724,296.701,158.864,297.399,158.402C297.498,158.444,297.2,158.534,297.399,158.402z M297.736,158.915C297.252,159.131,297.667,158.945,297.736,158.915C297.662,158.948,297.688,158.936,297.736,158.915z M299.317,158.358C298.857,158.425,300.358,157.938,299.317,158.358C299.294,158.361,300.867,157.733,299.317,158.358z M301.544,160.298l0.002,0.002C301.514,160.271,301.506,160.264,301.544,160.298z"></path></svg>';
break;case 11:f.title=a.Localize("annotation_freehandhighlighter");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M472.685,400.812c-2.421,2.721-6.351,6.44-11.314,10.836c-9.825,9.039-25.58,20.031-45.521,30.845c-39.815,21.707-98.25,41.07-158.094,46.855c-29.812,3.23-59.989,2.698-87.392-1.899c-27.469-4.519-51.906-13.823-70.315-26.18c-18.498-12.204-31.01-26.869-37.717-38.372c-3.786-5.53-5.918-10.382-7.65-13.591c-1.676-3.243-2.576-4.974-2.576-4.974s0.488,1.876,1.41,5.407c1.088,3.464,1.832,8.971,4.874,15.178c2.443,6.506,6.473,13.911,11.714,22.193c5.596,7.995,12.602,16.811,22.039,24.539c18.375,16.099,44.756,28.923,74.279,35.44c29.5,6.973,61.921,7.815,93.607,4.862c63.566-6.306,124.054-30.643,162.682-58.424c9.838-6.662,18.12-13.855,25.037-20.573c6.983-6.64,12.602-12.846,16.876-18.331c4.485-5.318,7.173-9.925,9.038-13.068c1.898-3.108,2.909-4.773,2.909-4.773S475.217,398.181,472.685,400.812z"></path><path d="M181.89,338.128l68.226,68.226l31.801-31.802l40.035,38.241l151.154-51.584l-79.351-98.495l33.208-33.208l-67.064-69.36l21.908-21.905L266.448-1.324l-17.521,14.478l102.17,123.62L159.36,328.499L49.557,211.623l-17.521,14.5l125.726,136.129L181.89,338.128z M394.809,229.506L250.116,374.199l-52.148-52.146L342.692,177.35L394.809,229.506z"></path></g></svg>';
break;case 12:f.title=a.Localize("annotation_freehandpolygon");f.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><g><path d="M3.4,16c-0.2,0-0.3-0.1-0.4-0.2l-3-5.6C-0.1,10,0,9.7,0.2,9.6l4-2.8l0-6.4c0-0.2,0.1-0.3,0.2-0.4 C4.5,0,4.6,0,4.7,0c0.1,0,0.1,0,0.2,0.1l10.9,6.1C16,6.2,16,6.4,16,6.7l-2.9,9C13,15.9,12.8,16,12.7,16H3.4z M12.3,15.1L15,6.7l-10-5.5l0,5.9C5,7.2,5,7.4,4.9,7.4L1,10.1l2.7,5H12.3z"/></g></svg>';break;case 13:f.title=a.Localize("annotation_link");f.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><g><g><path d="M6,10.3c-0.1,0.1-0.4,0.1-0.5,0c-0.1-0.1-0.1-0.4,0-0.5l4-4c0.1-0.1,0.4-0.1,0.5,0c0.1,0.1,0.1,0.4,0,0.5 L6,10.3z"/></g><g><path d="M13,7.6c-1,1-2.4,1.2-3.6,0.6C9.3,8.2,9.2,8.1,9.2,8c0-0.1,0-0.2,0-0.3c0,0,0-0.1,0.1-0.1 c0.1-0.1,0.3-0.1,0.4-0.1c0.9,0.5,2.1,0.3,2.8-0.5l2.1-2.1c1-1,1-2.5,0-3.5l-0.2-0.2c-1-1-2.5-1-3.5,0L8.9,3.5 C8.2,4.2,8,5.2,8.3,6.2c0.1,0.1,0,0.3-0.1,0.4c0,0-0.1,0.1-0.1,0.1C8,6.7,7.8,6.6,7.7,6.4C7.2,5.3,7.5,3.9,8.4,3l2.1-2.1 c1.2-1.2,3.2-1.2,4.5,0l0.2,0.2c1.2,1.2,1.2,3.2,0,4.5L13,7.6z"/></g><g><path d="M5.6,15.1c-1.2,1.2-3.2,1.2-4.5,0l-0.2-0.2c-1.2-1.2-1.2-3.2,0-4.5L3,8.4c0.9-0.9,2.3-1.2,3.5-0.7 C6.6,7.8,6.7,8,6.6,8.2c0,0,0,0.1-0.1,0.1C6.5,8.4,6.3,8.4,6.2,8.3C5.2,8,4.2,8.2,3.5,8.9l-2.1,2.1c-1,1-1,2.5,0,3.5l0.2,0.2 c1,1,2.5,1,3.5,0l2.1-2.1c0.7-0.7,0.9-1.9,0.5-2.8c-0.1-0.1,0-0.3,0.1-0.4c0,0,0.1-0.1,0.1-0.1c0.1,0,0.2,0,0.3,0 c0.1,0,0.2,0.1,0.2,0.2c0.6,1.2,0.3,2.7-0.6,3.6L5.6,15.1z"/></g></g></svg>';
break;case 14:f.title=a.Localize("annotation_polygon");f.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><path d="M4.2,15.2c-0.2,0-0.3-0.1-0.3-0.2L0.1,8.2C0,8.1,0,7.9,0.1,7.8L3.9,1c0.1-0.1,0.2-0.2,0.3-0.2h7.6 c0.1,0,0.3,0.1,0.3,0.2l3.8,6.8c0.1,0.1,0.1,0.3,0,0.4L12.1,15c-0.1,0.1-0.2,0.2-0.3,0.2H4.2z M11.6,14.6L15.1,8l-3.6-6.6H4.4L0.9,8 l3.6,6.6H11.6z"/></svg>';break;case 15:f.title=a.Localize("annotation_ruler");f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M210.091,479.958 M499.701,177.36c4.492-4.675,4.693-12.183,0.004-16.689L344.134,11.188 c-4.69-4.506-15.696-7.381-20.188-2.708l-7.533,7.842L197.22,140.381L33.748,310.516l-21.75,22.641l-7.971,8.295l11.851,11.387 l147.033,141.279l8.538,8.202c4.689,4.508,11.782,4.424,16.305-0.285 M209.507,479.395 M180.333,157.957L99.611,241.97 L49.96,293.643 M179.123,477.244L40.627,344.169l13.848-14.415l15.874-16.52l16.169,15.536l17.576,16.888l16.874,16.212 l16.873,16.214l16.886-17.578l-16.872-16.213l-16.873-16.211l-17.577-16.888l-16.168-15.536l15.537-16.17l16.168,15.537 l17.578,16.888l16.873,16.212l16.888-17.577l-16.874-16.212l-17.577-16.887l-16.169-15.537l16.213-16.873l16.168,15.537 l17.577,16.888l16.873,16.212l16.212-16.873l-50.619-48.636l16.212-16.873l67.491,64.849l16.887-17.575l-67.491-64.85l15.535-16.169 l50.62,48.636l16.888-17.575l-50.618-48.637l16.211-16.874l50.618,48.637l16.213-16.873l-50.618-48.637l16.212-16.873l67.491,64.849 l16.888-17.575l-67.49-64.849l15.534-16.171l50.619,48.638l16.889-17.577l-50.619-48.637l20.903-21.766l138.499,133.077 L356.444,292.697l-16.889,17.576l-64.848,67.49l-65.525,68.195l-16.212,16.872L179.123,477.244z M356.089,326.837 M226.304,463.085"></path> path d="M798.922,450.447 M797.895,20.84c-0.002-6.649-5.19-12.344-11.861-12.34L568.746,8.593 c-6.672,0.003-12.854,5.703-12.851,12.351l0.005,11.154l0.084,176.454l0.104,242l0.017,32.201l0.005,11.799l12.856-0.007 l205.143-0.088l12.144-0.006c6.672-0.002,11.855-5.106,11.852-11.803 M798.089,450.447 M555.994,233.552l0.053,119.499l0.031,73.501  M774.099,470.458l-193,0.083l-0.011-20.501l-0.01-23.5l23-0.009l25-0.011l24-0.012l24.001-0.009l-0.013-25l-24,0.01l-23.999,0.011 l-25.001,0.012l-22.998,0.009l-0.01-23l22.999-0.009l25.001-0.012l23.999-0.011l-0.011-25.001l-24,0.012l-25,0.012l-23,0.009 l-0.01-24.001l22.999-0.008l25-0.012l24-0.011l-0.01-24l-72,0.031l-0.011-24l96-0.042l-0.011-25l-96,0.042l-0.01-23l72-0.031 l-0.011-25l-72,0.03l-0.012-24l72.001-0.031l-0.01-24l-72.001,0.031l-0.01-24l96-0.042l-0.01-25l-96,0.041l-0.011-23l72.001-0.03 l-0.013-25l-71.999,0.031l-0.021-30.953l193.001-0.084l0.083,175.454l0.011,25l0.041,96l0.041,97l0.011,24L774.099,470.458z  M797.995,233.448 M798.911,426.446"/&gt;</svg>';
break;case 16:f.title=a.Localize("annotation_polyruler"),f.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M497.429,220H461V15.345C461,8.696,455.814,3,449.143,3H231.856C225.185,3,219,8.696,219,15.345V26.5V220H14.571C7.899,220,2,225.982,2,232.631V244.5v205.416V462h12.571H219v36.202V510h12.856H437h12.143c6.672,0,11.857-5.102,11.857-11.798V462h24h12.429c6.672,0,11.571-5.388,11.571-12.084V232.631C509,225.982,504.101,220,497.429,220z M195,438v-73h-24v73h-24v-97h-25v97H99v-73H74v73H26V245h193v119.5V438H195z M437,486H244v-24.5V438h23h25h24h24v-25h-24h-24h-25h-23v-23h23h25h24v-25h-24h-25h-23v-24h23h25h24v-24h-72v-24h96v-25h-96v-23h72v-25h-72v-24h72v-24h-72v-24h96v-25h-96v-23h72V75h-72V27h193v192.5v25v96v97v24V486zM485,438h-24V245h24V438z"></path></svg>'}e.appendChild(f);
f=document.createElement("div");f.style.fontSize="smaller";f.style.lineHeight="20px";f.style.display="inline-block";f.innerText=a.Localize("label_page")+" "+b.annotApp.pageNo;e.appendChild(f);b.annotApp.canEdit&&(f=document.createElement("div"),f.title=a.Localize("annotation_action_edit"),f.style.height="20px",f.style.width="16px",f.style.marginLeft="15px",f.style.display="inline-block",f.style.float="right",f.addEventListener("click",function(){var c=document.getElementById(a.uniqueID);c&&c.control.CommentProperties_Click(b.annotApp.id)}),
f.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer");dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor)}),f.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),f.innerHTML="<svg viewBox='0 0 16 16' width='100%' height='100%'><path d='M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z'></path></svg>",
e.appendChild(f));f=a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id===b.annotApp.id;var g=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id).annotApp.id===b.annotApp.id;(f||g)&&b.annotApp.properties.allowAnswer&&(f=document.createElement("div"),f.title=a.Localize("label_comment_answer"),f.style.height="20px",f.style.width="16px",f.style.display="inline-block",f.style.float="right",f.addEventListener("click",function(){var c=document.getElementById(a.uniqueID);
c&&(g?c.control.CommentAnswer_Click(a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id):c.control.CommentAnswer_Click(b.annotApp.id))}),f.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer");dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor)}),f.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),f.innerHTML="<svg viewBox='0 0 16 16' width='100%' height='100%'><path d='M7 12.119v3.881l-6-6 6-6v3.966c6.98 0.164 6.681-4.747 4.904-7.966 4.386 4.741 3.455 12.337-4.904 12.119z'></path></svg>",
e.appendChild(f));f=document.createElement("div");f.style.height="20px";f.style.width="16px";f.style.display="inline-block";f.style.marginRight="15px";f.style.float="right";if(0!==b.annotApp.properties.reviewStatus)switch(b.annotApp.properties.reviewStatus){case 1:f.title=a.Localize("label_comment_status_approved");f.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-approved"><path d="M8,16c4.4,0,8-3.6,8-8s-3.6-8-8-8S0,3.6,0,8S3.6,16,8,16z M8,1.5c3.6,0,6.5,2.9,6.5,6.5s-2.9,6.5-6.5,6.5S1.5,11.6,1.5,8\tS4.4,1.5,8,1.5z"/><path d="M6.8,11h3.6c0.3,0,0.6-0.2,0.7-0.5l1.2-2.8c0-0.1,0.1-0.2,0.1-0.3V6.6l0,0l0,0c0-0.4-0.4-0.8-0.8-0.8H9.1 L9.4,4l0-0.1c0-0.2-0.1-0.3-0.2-0.4L8.9,3L6.2,5.6C6.1,5.8,6,6,6,6.2v4C6,10.6,6.4,11,6.8,11z M5.2,11V6.2H3.6V11H5.2z"/></svg>';
break;case 2:f.title=a.Localize("label_comment_status_canceled");f.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-canceled"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><polygon points="10.6,4 8,6.6 5.4,4 4,5.4 6.6,8 4,10.6 5.4,12 8,9.4 10.6,12 12,10.6 9.4,8 12,5.4 "/></svg>';break;case 3:f.title=a.Localize("label_comment_status_finished");f.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-finished"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><g transform="translate(256 352)"><path d="M-244.9-347.5l-4.2,4.2l-2-2l-1.4,1.4l3.4,3.4l5.7-5.7L-244.9-347.5z"/></g></svg>';
break;case 4:f.title=a.Localize("label_comment_status_rejected"),f.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-rejected"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><path d="M9.2,5H5.6C5.3,5,5,5.2,4.9,5.5L3.7,8.3c0,0.1-0.1,0.2-0.1,0.3v0.8l0,0l0,0c0,0.4,0.4,0.8,0.8,0.8h2.5 L6.6,12l0,0.1c0,0.2,0.1,0.3,0.2,0.4L7.1,13l2.6-2.6C9.9,10.2,10,10,10,9.8v-4C10,5.4,9.6,5,9.2,5z M10.8,5v4.8h1.6V5H10.8z"/></svg>'}e.appendChild(f);
d.appendChild(e);c.appendChild(d);return c},sidePanelResized:function(){if(a.callbacks.onSnapInPanelResized)a.callbacks.onSnapInPanelResized(dvJQuery(a.dom.leftSideArea).width())},sidePanelToggled:function(b){if(a.callbacks.onSnapInPanelToggle)a.callbacks.onSnapInPanelToggle(b)},removeViewAreaTouchAction:function(){var b=a.dom.viewerArea.getAttribute("style");-1!=b.indexOf("touch-action: auto;")?a.dom.viewerArea.setAttribute("style",b.replace("touch-action: auto;","touch-action: none;")):-1!=!b.indexOf("touch-action:")&&
a.dom.viewerArea.setAttribute("style",b+"touch-action: none;")},addViewAreaTouchAction:function(){var b=a.dom.viewerArea.getAttribute("style");-1!=b.indexOf("touch-action: none;")?a.dom.viewerArea.setAttribute("style",b.replace("touch-action: none;","touch-action: auto;")):-1!=!b.indexOf("touch-action:")&&a.dom.viewerArea.setAttribute("style",b+"touch-action: auto;")}},events:{ownMouseEvents:!1,overLink:null,overPageText:null,overAnnotEditable:!1,mouseMode:0,mouseX:0,mouseY:0,mouseDownX:0,mouseDownY:0,
mouseDownViewerScrollLeft:0,mouseDownViewerScrollTop:0,mouseDownClientX:0,mouseDownClientY:0,isAddingRedactionMarksMode:!1,isDrawingPath:!1,isMouseDown:!1,pathPoints:null,isPanning:!1,isZoomingPreview:!1,canPan:function(){return!0},isResizingUI:!1,isSelectingText:!1,isDragMultipleSelecting:!1,UIStateVerifier:function(){if(null==a.NewViewerSizeTimeout){var b=a.dom.getViewerContainer();if(null!=b&&(a.viewerWidth!=b.offsetWidth||a.viewerHeight!=b.offsetHeight)&&!a.events.isResizingUI)a.events.onResize()}a.events.isZoomingPreview||
a.hasPendingAction(!0,!1,!0,!1)||a.IsZoomSynchronized()||a.SetCurrentZoom(a.cache.pageCanvasZoom);setTimeout(a.events.UIStateVerifier,300)},restartZoomPreviewAutoSubmitter:function(b){var c=function(){a.events.isZoomingPreview&&(a.events.isZoomingPreviewTouchMode=null,a.events.zoomPreviewWheelValue=null,a.events.isZoomingPreview=!1,a.events.disableSingleInputEvents=!1,a.SetCurrentZoom(a.cache.pageCanvasZoom));clearTimeout(a.EnableZoomPreviewAutoSubmitterTimeout);a.EnableZoomPreviewAutoSubmitterTimeout=
null};if(b||null!=a.EnableZoomPreviewAutoSubmitterTimeout)null!=a.EnableZoomPreviewAutoSubmitterTimeout&&clearTimeout(a.EnableZoomPreviewAutoSubmitterTimeout),a.EnableZoomPreviewAutoSubmitterTimeout=setTimeout(c,2E3)},enableZoomPreviewAutoSubmitter:function(){a.events.restartZoomPreviewAutoSubmitter(!0)},onNewViewerSize:function(){a.NewViewerSizeTimeout&&(clearTimeout(a.NewViewerSizeTimeout),a.NewViewerSizeTimeout=null);a.dom.resizeControlArea();a.dom.searchArea&&dvJQuery(a.dom.searchArea.parentElement).hasClass("active")&&
(a.dom.searchResultsContainer.style.height=dvJQuery(a.dom.searchArea).outerHeight(!0)-dvJQuery(a.dom.searchPanelForm).outerHeight(!0)+"px");var b={sessionID:a.ajax.sessionID,reuseSessionContext:!0,clientConfiguration:a.getConfig(),newViewerSize:!0};a.viewerWidth==b.clientConfiguration.viewerWidth&&a.viewerHeight==b.clientConfiguration.viewerHeight||0===b.clientConfiguration.viewerWidth||0===b.clientConfiguration.viewerHeight||(a.NewViewerSizePreview(),a.NewViewerSizeTimeout=setTimeout(function(){if(a.hasPendingAction(!1,
!1,!0))a.events.onNewViewerSize();else{var c=a.getConfig();b.clientConfiguration.viewerWidth==c.viewerWidth&&b.clientConfiguration.viewerHeight==c.viewerHeight&&(a.viewerWidth=b.clientConfiguration.viewerWidth,a.viewerHeight=b.clientConfiguration.viewerHeight,a.ajax.PostBaseRequest("init",{data:b,success:function(b){var c="string"===typeof b?eval("("+b+")"):b;c&&c.status===DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(c,!1,!1,!0),a.showVisibleThumbnails()):a.ajax.HandleError(b);a.NewViewerSizeTimeout=
null},error:function(){a.NewViewerSizeTimeout=null}},!1,!0))}},300),a.serverCtx.vScrollbarVisible?dvJQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth-a.dom.sbWidth):dvJQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth),dvJQuery(a.dom.mainArea).find(".dvUi-dialog:visible").not(".dvPassword-dialog").find(".dvUi-dialog-content").dvDialog("refresh",dvJQuery(a.dom.controlArea).height()))},onLoad:function(b){if(a.isSafari||a.isIOS||a.isIE10||a.isIE9)null!=a.dom.fullscreenButton&&dvJQuery(a.dom.fullscreenButton).remove(),
null!=a.dom.fullscreenButtonMobile&&dvJQuery(a.dom.fullscreenButtonMobile).remove();a.IsTwainSupportAvailable()||(null!=a.dom.twainAcquisitionButton&&dvJQuery(a.dom.twainAcquisitionButton).remove(),null!=a.dom.twainAcquisitionButtonMobile&&dvJQuery(a.dom.twainAcquisitionButtonMobile).remove());!a.isIE||a.isIE10||a.isIE11||(null!=a.dom.openFromFileButton&&dvJQuery(a.dom.openFromFileButton).remove(),null!=a.dom.openFromFileButtonMobile&&dvJQuery(a.dom.openFromFileButtonMobile).remove());a.isIE&&!a.isIE11&&
null!=a.dom.snapinTabControl&&(a.dom.snapinTabControl.style.position="static");a.isIE&&null!=a.dom.snapinTabControl&&(a.dom.snapinTabControl.style.display="block");a.SetMouseMode(0);1==b&&(a.waitForInit=!0);window.setTimeout(function(){a.dom.resizeControlArea();var c=a.dom.getViewerContainer();a.viewerWidth=c.offsetWidth;a.viewerHeight=c.offsetHeight;a.dom.mainArea.style.visibility="visible";1==b?(c={sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,clientConfiguration:a.getConfig(),reuseSessionContext:!1,
newViewerSize:!1},a.DisplayPendingActionNotification(),a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({requestName:"init",requestData:c}),contentType:"application/json",success:function(b){a.waitForInit=!1;a.HidePendingActionNotification();var c="string"===typeof b?eval("("+b+")"):b;c&&c.status===DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(c),c.documentLoaded&&!a.dom.singlePageView&&(b=a.GetCurrentPage(),
a.Internal.Pages.isPageVisible(b)||a.EnsureCurrentPageVisibility())):a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b)}})):2==b&&a.LoadFromUri("","")},100)},onResize:function(){a.events.onNewViewerSize()},forwardMouseEventsToViewer:function(b){window.PointerEvent?(b.onpointerup=function(b){switch(b.pointerType){case "mouse":a.events.mouseup(b);break;case "pen":a.events.mouseup(b);b.preventDefault();break;case "touch":a.events.mouseup(b);b.preventDefault();break;default:a.events.mouseup(b)}},
b.onpointerdown=function(b){switch(b.pointerType){case "mouse":a.events.mousedown(b);break;case "pen":a.events.mousedown(b,!0);case "touch":a.events.mousedown(b,!0);break;default:a.events.mousedown(b)}},b.onpointermove=function(b){switch(b.pointerType){case "mouse":a.events.mousemove(b);break;case "pen":a.events.mousemove(b,!0);b.preventDefault();break;case "touch":a.events.mousemove(b,!0)&&b.preventDefault();break;default:a.events.mousemove(b)}},b.onpointerleave=function(b){switch(b.pointerType){case "mouse":a.events.mouseleave(b);
break;case "pen":a.events.mouseleave(b);break;default:a.events.mouseleave(b)}},b.onpointerenter=function(b){switch(b.pointerType){case "mouse":a.events.mouseenter(b);break;case "pen":a.events.mouseenter(b);break;default:a.events.mouseenter(b)}}):(b.onmouseup=function(b){a.events.mouseup(b)},b.onmousedown=function(b){a.events.mousedown(b)},b.onmousemove=function(b){a.events.mousemove(b)},b.onmouseleave=function(b){a.events.mouseleave(b)},b.onmouseenter=function(b){a.events.mouseenter(b)},b.ontouchstart=
function(b){1==b.changedTouches.length&&a.events.mousedown(b.changedTouches[0],!0)},b.ontouchmove=function(b){1==b.changedTouches.length&&a.events.mousemove(b.changedTouches[0],!0)&&b.preventDefault()},b.ontouchend=function(b){1==b.changedTouches.length&&(a.events.mouseup(b.changedTouches[0]),b.preventDefault())});b.ondblclick=function(b){a.events.dblclick(b)}},dblclick:function(b){if(null==a.dom.drawingModeArea||"block"!=a.dom.drawingModeArea.style.display)a.ExitAnnotationDrawingMode(),this.overPageText&&
0==a.dom.SelectedTextRegions.count(1)&&a.Internal.Text.captureAndHighlightSelectedText(this.mouseDownClientX,this.mouseDownClientY,this.mouseDownClientX,this.mouseDownClientY,!0,!1)},mousedown:function(b,d,e){if(!a.events.disableSingleInputEvents&&3!=b.which){this.isMouseDown=!0;this.mouseX=b.clientX;this.mouseY=b.clientY;this.mouseDownViewerScrollLeft=a.Internal.Coordinates.getViewerScrollLeft();this.mouseDownViewerScrollTop=a.Internal.Coordinates.getViewerScrollTop();this.mouseDownX=b.clientX+this.mouseDownViewerScrollLeft;
this.mouseDownY=b.clientY+this.mouseDownViewerScrollTop;this.mouseDownClientX=b.clientX;this.mouseDownClientY=b.clientY;var c=a.dom.viewerArea.getBoundingClientRect(),h=this.mouseDownX-c.left,f=this.mouseDownY-c.top;e=-1;for(var l=1;l<=a.GetPageCount();l++){var g=a.Internal.Pages.getRenderingState(l),k=g.pageLeft+g.pageWidth,m=g.pageTop+g.pageHeight;if(h>=g.pageLeft&&h<=k&&f>=g.pageTop&&f<=m){e=l;break}}if(1==this.mouseMode)null!=a.Internal.Annotations.hoveredAnnot&&17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type?
a.Internal.Redaction.disableAddRedactionMarksMode():(a.Internal.Annotations.currentInteractiveAnnotPageNo=-1==e?a.GetCurrentPage():e,a.Internal.Selection.selectionArea.startNewAnnotBox(this.mouseDownX-c.left,this.mouseDownY-c.top));else if(2==this.mouseMode)b={x:b.clientX+a.Internal.Coordinates.getViewerScrollLeft()-c.left,y:b.clientY+a.Internal.Coordinates.getViewerScrollTop()-c.top},a.Internal.Annotations.currentInteractiveAnnotPageNo=-1==e?a.GetCurrentPage():e,(5==a.Internal.Annotations.currentInteractiveAnnotProperties.type||
16==a.Internal.Annotations.currentInteractiveAnnotProperties.type||a.dom.UIconfig.freeHandContinuousDrawingMode&&10==a.Internal.Annotations.currentInteractiveAnnotProperties.type)&&!a.dom.UIconfig.disableAnnotationDrawingModePanel&&(a.dom.drawingModeArea.style.display="block",a.dom.modalOverlayArea.style.display="block"),null==this.pathPoints?(e=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),a.dom.freehandCan.style.left=e.pageLeft+"px",a.dom.freehandCan.style.top=e.pageTop+"px",a.dom.freehandCan.width=
e.pageWidth,a.dom.freehandCan.height=e.pageHeight,a.dom.freehandCan.getContext("2d").clearRect(0,0,a.dom.freehandCan.width,a.dom.freehandCan.height),a.dom.freehandCan.style.display="block",this.pathPoints=[b]):(5!=a.Internal.Annotations.currentInteractiveAnnotProperties.type&&16!=a.Internal.Annotations.currentInteractiveAnnotProperties.type&&this.pathPoints.push({x:131072,y:131072}),this.pathPoints.push(b)),d&&a.Internal.Annotations.prerenderPendingFreenhandAnnot(b),this.isDrawingPath=!0;else if(3==
this.mouseMode||4==this.mouseMode)a.Internal.Selection.selectionArea.startNewSelectionBox(this.mouseDownX-c.left,this.mouseDownY-c.top);else{a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);if(!d&&(this.overPageText=a.Internal.Text.anyWordHitTest(b.clientX,b.clientY,5),null!=this.overPageText)){this.isSelectingText=!0;this.setCursor();return}this.overLink||(1==this.canPan()&&(this.isPanning=!0,a.dom.viewerArea.cursorMgr.setCustomCursorClass("closedHandCursor")),
d&&(this.overLink=!1,a.dom.checkLinkAt(b.clientX,b.clientY)),a.dom.handleLinkRectVisibility())}}},mouseup:function(b){if(!a.events.disableSingleInputEvents){var c=this.isSelectingText;this.isPanning=this.isSelectingText=this.isMouseDown=!1;if(c&&0<a.dom.SelectedTextRegions.count(1))this.setCursor(),a.callbacks.onTextSelected&&(c=a.Internal.Text.getSelectedTextAreas(),a.callbacks.onTextSelected(c)),b=dvJQuery.Event("contextmenu.dv-context-menu-viewerContextMenu"+a.uniqueID,{clientX:b.clientX,clientY:b.clientY,
skipNextCloseEvent:!0}),dvJQuery(a.dom.viewerArea).trigger(b);else if(this.overLink)3!=b.which&&a.IsZoomSynchronized()&&(b=this.overLink.destPage,c=this.overLink.destUri,this.overLink=null,a.dom.handleLinkRectVisibility(),"unknown"!==c&&0===b?a.Internal.Destinations.followLink(c):a.SelectPageEx(b,!0,!0,!0,!1),this.setCursor());else if(1!=this.mouseMode&&3!=this.mouseMode&&4!=this.mouseMode||!a.Internal.Selection.selectionArea.mouseUp(b))if(2==this.mouseMode&&this.isDrawingPath)a.dom.UIconfig.freeHandContinuousDrawingMode&&
10==a.Internal.Annotations.currentInteractiveAnnotProperties.type||5==a.Internal.Annotations.currentInteractiveAnnotProperties.type||16==a.Internal.Annotations.currentInteractiveAnnotProperties.type||(a.dom.freehandCan.style.display="none",this.isDrawingPath=!1,a.Internal.Annotations.addAnnotInteractive());else if(0<a.Internal.Annotations.selected.length)for(b=a.Internal.Annotations.selected.length-1;0<=b;b--)a.Internal.Annotations.selected[b].stopEditing(),a.Internal.Annotations.selected[b].updateCursor();
else this.overPageText||0==this.mouseMode&&1==this.canPan()&&a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor")}},mousemove:function(b,d){if(!a.events.disableSingleInputEvents)if(this.isSelectingText){a.dom.SelectedTextRegions.clear(1);var c=this.mouseDownViewerScrollLeft-a.Internal.Coordinates.getViewerScrollLeft(),e=this.mouseDownViewerScrollTop-a.Internal.Coordinates.getViewerScrollTop();if((this.mouseDownClientX+c!=b.clientX||this.mouseDownClientY+e!=b.clientY)&&(b=a.Internal.Text.captureSelectedText(this.mouseDownClientX+
c,this.mouseDownClientY+e,b.clientX,b.clientY,!1,b.altKey))&&0<b.length){d=document.createDocumentFragment();for(var h=0;h<b.length;h++)for(var f=0;f<b[h].regions.length;f++)a.dom.SelectedTextRegions.addNew(b[h].pageNo,{left:b[h].regions[f].Left/b[h].scale,top:b[h].regions[f].Top/b[h].scale,width:b[h].regions[f].Width/b[h].scale,height:b[h].regions[f].Height/b[h].scale},"rgba(0,0,201,0.3)",null,1,d);a.dom.viewerArea.appendChild(d)}}else{h=!1;this.overPageText=null;f=!1;1==this.mouseMode&&null!=a.Internal.Annotations.hoveredAnnot&&
17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type&&(f=!0);if(1==this.mouseMode&&!f||3==this.mouseMode||4==this.mouseMode)h=a.Internal.Selection.selectionArea.mouseMove(b,d);2===this.mouseMode&&this.isDrawingPath&&(f=a.dom.viewerArea.getBoundingClientRect(),h=5===a.Internal.Annotations.currentInteractiveAnnotProperties.type||16===a.Internal.Annotations.currentInteractiveAnnotProperties.type,f={x:b.clientX+a.Internal.Coordinates.getViewerScrollLeft()-f.left,y:b.clientY+a.Internal.Coordinates.getViewerScrollTop()-
f.top},this.isMouseDown&&!h&&(c=!0,h=this.pathPoints.length,1<h&&(c=this.pathPoints[h-2],e=this.pathPoints[h-1],c=1.5<=Math.sqrt(Math.abs((c.y-e.y)*(c.x-f.x)-(c.y-f.y)*(c.x-e.x)))),c?this.pathPoints.push(f):this.pathPoints[h-1]=f),a.Internal.Annotations.prerenderPendingFreenhandAnnot(f),h=!0);if(!h&&0<a.Internal.Annotations.selected.length)for(c=b.clientX-this.mouseX,e=b.clientY-this.mouseY,f=a.Internal.Annotations.selected.length-1;0<=f;f--){var g=a.Internal.Annotations.selected[f];h|=g.isEditing();
if(g.isMoving){g.annotrectNew.left+=c;g.annotrectNew.top+=e;g.render(!0);if(a.callbacks.onAnnotationMoved)a.callbacks.onAnnotationMoved({id:g.annotApp.id});if(a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(var k=a.Internal.Annotations.selected.length-1;0<=k;k--){var m=a.Internal.Annotations.selected[k];if(m!=g&&(m.annotrectNew.left+=c,m.annotrectNew.top+=e,m.render(!0),a.callbacks.onAnnotationMoved))a.callbacks.onAnnotationMoved({id:m.annotApp.id})}}else if(g.isRotating){if(g.annotApp.properties.rotation=
a.Internal.Utilities.normalizeRotation(g.annotApp.properties.rotation+c),g.render(!1),a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(k=a.Internal.Annotations.selected.length-1;0<=k;k--)m=a.Internal.Annotations.selected[k],m!=g&&(m.annotApp.properties.rotation=a.Internal.Utilities.normalizeRotation(m.annotApp.properties.rotation+c),m.render(!1))}else if(-1!=g.resizingMode){m=-g.annotApp.properties.rotation*Math.PI/180;k=Math.cos(m);m=Math.sin(m);var p=c;
c=c*k-e*m;e=p*m+e*k;p=function(a,b,c,d){switch(b){case 0:0<a.annotrectNew.width-c&&(a.annotrectNew.left+=c,a.addWidth(-c));a.render(!1);break;case 1:0<a.annotrectNew.width-c&&(a.annotrectNew.left+=c,a.addWidth(-c));0<a.annotrectNew.height-d&&(a.annotrectNew.top+=d,a.addHeight(-d));a.render(!1);break;case 2:0<a.annotrectNew.height-d&&(a.annotrectNew.top+=d,a.addHeight(-d));a.render(!1);break;case 3:0<a.annotrectNew.width+c&&a.addWidth(c);0<a.annotrectNew.height-d&&(a.annotrectNew.top+=d,a.addHeight(-d));
a.render(!1);break;case 4:0<a.annotrectNew.width+c&&a.addWidth(c);a.render(!1);break;case 5:0<a.annotrectNew.width+c&&a.addWidth(c);0<a.annotrectNew.height+d&&a.addHeight(d);a.render(!1);break;case 6:0<a.annotrectNew.height+d&&a.addHeight(d);a.render(!1);break;case 7:0<a.annotrectNew.width-c&&(a.annotrectNew.left+=c,a.addWidth(-c)),0<a.annotrectNew.height+d&&a.addHeight(d),a.render(!1)}};p(g,g.resizingMode,c,e);if(a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(k=
a.Internal.Annotations.selected.length-1;0<=k;k--)m=a.Internal.Annotations.selected[k],m!=g&&p(m,g.resizingMode,c,e)}g.updateCursor()}h||0!=this.mouseMode||d||1!=this.canPan()||1!=this.isPanning||(h=!0,dvJQuery(a.dom.viewerArea).scrollLeft(this.mouseDownViewerScrollLeft-(b.clientX-this.mouseDownClientX)),dvJQuery(a.dom.viewerArea).scrollTop(this.mouseDownViewerScrollTop-(b.clientY-this.mouseDownClientY)));this.overLink=!1;3!=this.mouseMode&&4!=this.mouseMode&&(h||(a.dom.checkLinkAt(b.clientX,b.clientY)||
(this.overPageText=a.Internal.Text.anyWordHitTest(b.clientX,b.clientY,5)),this.setCursor()),a.dom.handleLinkRectVisibility());this.mouseX=b.clientX;this.mouseY=b.clientY;return h}},mouseleave:function(b){a.events.disableSingleInputEvents||this.isResizingUI||this.isSelectingText||(this.isPanning=!1,0==this.mouseMode&&a.dom.viewerArea.cursorMgr.setStdCursor("default"),this.overLink=null,a.dom.handleLinkRectVisibility())},mouseenter:function(a){this.isResizingUI||this.isSelectingText||this.setCursor()},
setCursor:function(){if(this.isResizingUI)a.dom.viewerArea.cursorMgr.setStdCursor("col-resize");else switch(this.mouseMode){case 0:if(null!=this.overPageText){var b=a.Internal.Rotations.getRotateFlipTypeAngle(a.Internal.Pages.getRenderRotation(this.overPageText.page)),d=a.Internal.Rotations.getRotateFlipTypeAngle(a.Internal.Pages.getPageRotation(this.overPageText.page)),e=a.Internal.Rotations.getRotateFlipTypeAngle(this.overPageText.textRotate);b=b+e-d;360<b?b-=360:0>b&&(b+=360);90==b||270==b?a.dom.viewerArea.cursorMgr.setStdCursor("vertical-text"):
a.dom.viewerArea.cursorMgr.setStdCursor("text");break}if(this.overLink){a.dom.viewerArea.cursorMgr.setStdCursor("pointer");break}1==this.canPan()?1==!this.isPanning&&a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor"):a.dom.viewerArea.cursorMgr.setStdCursor("default");break;case 1:null!=a.Internal.Annotations.hoveredAnnot&&17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type?a.dom.viewerArea.cursorMgr.setStdCursor("default"):a.dom.viewerArea.cursorMgr.setStdCursor("crosshair");
break;case 2:a.dom.viewerArea.cursorMgr.setCustomCursorClass("pencilCursor");break;case 3:case 4:a.dom.viewerArea.cursorMgr.setStdCursor("crosshair");break;case 5:a.dom.viewerArea.cursorMgr.setStdCursor("none")}},onSnapInButtonMouseEnter:function(b){dvJQuery(b).hasClass("active")||(b.style.backgroundColor=a.dom.UIconfig.snapInButtonBorderBottom,b.style.borderTopColor=a.dom.UIconfig.snapInButtonBorderBottom,b.style.cursor="pointer")},onSnapInButtonMouseLeave:function(b){dvJQuery(b).hasClass("active")||
(b.style.backgroundColor=a.dom.UIconfig.headerColor,b.style.borderTopColor=a.dom.UIconfig.snapInButtonBorderTop,b.style.cursor="default")},onThumbnailAreaMouseDownHandler:function(b){if(b.target==document.getElementById(a.FindSnapIn("thumbnails").snapInID)||b.target==a.dom.thumbnailArea){var c=document.getElementById(a.FindSnapIn("thumbnails").snapInID);c=dvJQuery(c).offset().left+dvJQuery(c).width()-a.dom.sbWidth;b.pageX>c||(b.ctrlKey||(a.Internal.Thumbnails.reinitThumbnailsSelection(),a.dom.updateThumbsStyle(!1,
!0)),a.dom.thumbnailSelectBox&&(a.dom.thumbnailSelectBoxOrigin.left=b.pageX-dvJQuery(a.dom.thumbnailArea).offset().left+a.dom.thumbnailArea.scrollLeft,a.dom.thumbnailSelectBoxOrigin.top=b.pageY-dvJQuery(a.dom.thumbnailArea).offset().top+a.dom.thumbnailArea.scrollTop,b={display:"block",left:a.dom.thumbnailSelectBoxOrigin.left+"px",top:a.dom.thumbnailSelectBoxOrigin.top+"px",width:"1px",height:"1px"},a.dom.thumbnailSelectBox.addClass("active").css(b),a.events.isDragMultipleSelecting=!0))}},onThumbnailAreaMouseMoveHandler:function(b){if(a.dom.thumbnailSelectBox.is(".active")){var c=
b.pageX-dvJQuery(a.dom.thumbnailArea).offset().left+a.dom.thumbnailArea.scrollLeft,d=b.pageY-dvJQuery(a.dom.thumbnailArea).offset().top+a.dom.thumbnailArea.scrollTop,e=c,f=d,g=a.dom.thumbnailSelectBoxOrigin.left-e,k=a.dom.thumbnailSelectBoxOrigin.top-f;c>a.dom.thumbnailSelectBoxOrigin.left&&(e=a.dom.thumbnailSelectBoxOrigin.left,g=c-a.dom.thumbnailSelectBoxOrigin.left);d>a.dom.thumbnailSelectBoxOrigin.top&&(f=a.dom.thumbnailSelectBoxOrigin.top,k=d-a.dom.thumbnailSelectBoxOrigin.top);a.dom.thumbnailSelectBox.css({left:e+
"px",top:f+"px",width:g+"px",height:k+"px"});c=a.getVisibleThumbnails(!1);g=dvJQuery(a.dom.thumbnailSelectBox).position();d=g.left;e=g.top;f=g.left+dvJQuery(a.dom.thumbnailSelectBox).width();g=g.top+dvJQuery(a.dom.thumbnailSelectBox).height();for(k=0;k<c.length;k++){var m=dvJQuery(a.dom.thumbnailArea.children[c[k]-1]),p=m.position(),r=p.left,Y=p.top,w=p.left+m.width();p=p.top+m.height();(m=a.Internal.Thumbnails.getThumbnailPage(m.get(0)))&&(a.Internal.Coordinates.hasIntersection(d,e,f,g,r,Y,w,p)?
a.Internal.Thumbnails.selectThumbnail(m):b.ctrlKey||a.Internal.Thumbnails.unselectThumbnail(m))}c=document.getElementById(a.FindSnapIn("thumbnails").snapInID);b.pageY+20>dvJQuery(c).offset().top+dvJQuery(c).height()&&(c.scrollTop+=20);b.pageY-20<dvJQuery(c).offset().top&&(c.scrollTop-=20);b.preventDefault()}},onThumbnailAreaMouseUpHandler:function(b){a.dom.thumbnailSelectBox.is(".active")&&(a.dom.thumbnailSelectBox.removeClass("active").css("display","none"),a.events.isDragMultipleSelecting=!1);b.preventDefault()},
onThumbnailItemClickHandler:function(b){if(!a.events.isResizingUI&&(b.stopImmediatePropagation(),b&&b.target)){var c=a.Internal.Thumbnails.getThumbnailPage(b.target);c&&a.serverCtx.documentLoaded&&0<c&&c<=a.serverCtx.pageCount&&(a.dom.UIconfig.enableMultipleThumbnailSelection&&b.ctrlKey?a.Internal.Thumbnails.toggleThumbnailSelection(c):0==a.dom.viewerArea.offsetWidth||0==a.dom.viewerArea.offsetHeight?(a.ajax.latestSelectedPage=c,a.dom.updateThumbsStyle(!1,!1)):a.SelectPageEx(c,!1,!0,!0,!0))}},onThumbnailItemMouseOverHandler:function(b){!a.events.isResizingUI&&
!a.events.isDragMultipleSelecting&&b&&b.target&&(b=a.Internal.Thumbnails.getThumbnailPage(b.target))&&(a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over","true"),a.dom.updateThumbStyle(b))},onThumbnailItemMouseOutHandler:function(b){!a.events.isResizingUI&&!a.events.isDragMultipleSelecting&&b&&b.target&&(b=a.Internal.Thumbnails.getThumbnailPage(b.target))&&(a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over","false"),a.dom.updateThumbStyle(b))},onBookmarkItemClickHandler:function(b){!a.events.isResizingUI&&
b&&b.target&&(a.dom.selectBookmark(b.target),b.target.action&&(-1<b.target.action.indexOf("PdfPageDest")?a.Internal.Pages.selectByDestination(b.target.action):-1<b.target.action.indexOf("uri")&&window.open(b.target.action.replace("uri:","").trim(),"_blank")))},onBookmarkItemMouseOverHandler:function(b){a.events.isResizingUI||(b.stopPropagation(),b&&b.currentTarget&&a.dom.setBookmarkOverStyle(b.currentTarget,!0))},onBookmarkItemMouseOutHandler:function(b){a.events.isResizingUI||b&&b.currentTarget&&
a.dom.setBookmarkOverStyle(b.currentTarget,!1)},onBookmarkTogglerClickHandler:function(b){if(!a.events.isResizingUI&&b&&b.target){var c=dvJQuery(b.target).parent().find("ul");dvJQuery(b.target).hasClass("collapsed")?(dvJQuery(b.target).removeClass("collapsed").addClass("expanded"),c.show(),0!=dvJQuery(b.target).parent().children("ul").children("li").children("span.placeholder").length&&b.target.bookmarkID&&(b={url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),data:JSON.stringify({requestName:"bookmarks",
requestData:{sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,bookmarkID:b.target.bookmarkID}}),contentType:"application/json",success:function(b){var d="string"===typeof b?eval("("+b+")"):b;if(d&&d.status===DocuViewareAPI.Status.OK){if(c.empty(),d.bookmarks)for(b=0;b<d.bookmarks.length;b++)a.dom.createBookmarkNode(c,d.bookmarks[b])}else a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b)}},a.ajax.PostAjaxRequestForDocuViewareAction(b,!1,!0))):(dvJQuery(b.target).removeClass("expanded").addClass("collapsed"),
c.hide())}}},doNextPageViewProcess:function(){if(!this.serverCtx.documentLoaded||!this.cache.canvas)return DocuViewareAPI.Status.GenericError;if(!a.IsZoomSynchronized())return 0;var b=0;this.serverCtx.singlePageView||(b=this.showVisiblePages(a.GetCurrentPage()));if(!(0==this.serverCtx.pagePreload||this.serverCtx.hasVariableZoomRange&&this.serverCtx.singlePageView)){var d=this.serverCtx.minPagesPreloadPerRequest,e=this.serverCtx.maxPagesForAllPagesPreloadingMode,f=[];if(0==b&&1==(this.serverCtx.pagePreload&
1)){var g=this.Internal.Pages.getVisiblePageNumbers();if(0<g.length){var k=g[g.length-1]+1;g=g[0]-1;var m=0==g,p=k==this.serverCtx.pageCount+1;if(null!=a.cache.Pages)for(var r=0;r<a.cache.Pages.length&&(0==m&&a.cache.Pages[r].pageNo==g?(a.cache.Pages[r].bitmap||a.cache.Pages[r].renderStatus==DocuViewareAPI.Status.OK&&f.push(g),m=!0):a.cache.Pages[r].pageNo==k&&(a.cache.Pages[r].bitmap||a.cache.Pages[r].renderStatus==DocuViewareAPI.Status.OK&&f.push(k),p=!0),!m||!p);r++);m||f.push(g);p||f.push(k)}}if(f.length<
d&&2==(this.serverCtx.pagePreload&2)&&e>=this.serverCtx.pageCount)for(e=1;e<=this.serverCtx.pageCount&&(k=!1,(g=a.Internal.Pages.getPage(e))&&(g.bitmap||g.renderStatus!=DocuViewareAPI.Status.OK)&&(k=!0),k||(f.push(e),f.length!=d));e++);0<f.length&&(b=this.Internal.Pages.pageView(f,!1,!1))}return b},showVisiblePages:function(a){var b=this.Internal.Pages.getVisiblePageNumbers();if(null!=a)for(var c=0;c<b.length;c++)if(b[c]==a){b.splice(c,1);break}return this.Internal.Pages.pageView(b,!0,!1)},previewVisiblePages:function(){for(var b=
this.Internal.Pages.getVisiblePageNumbers(),d=0;d<b.length;d++){var e=a.Internal.Pages.getPage(b[d]);e&&(!e.bitmap||e.drawing||e.drawn||e.drawnPreview||a.DrawPage(e,!0))}},showVisibleThumbnails:function(){this.Internal.Files.uploading||this.ajax.downloading||a.events.isResizingUI||this.dom.thumbnailArea&&1==this.serverCtx.documentLoaded&&this.updateThumbnails(a.getVisibleThumbnails(!0))},getVisibleThumbnails:function(b){var c=this.dom.thumbnailArea,d=this.dom.thumbnailArea.scrollLeft,e=this.dom.thumbnailArea.scrollTop,
f=d+dvJQuery(c).innerWidth();c=e+dvJQuery(c).innerHeight();for(var g=this.dom.thumbnailArea.childElementCount,k=[],m=!1,p=0;p<g;p++){var r=this.dom.thumbnailArea.children[p];if(0!=a.Internal.Thumbnails.getThumbnailPage(r)){var Y=dvJQuery(r).position().left,w=dvJQuery(r).position().top,x=Y+dvJQuery(r).innerWidth(),y=w+dvJQuery(r).innerHeight();if(a.Internal.Coordinates.hasIntersection(d,e,f,c,Y,w,x,y))b?"false"==r.getAttribute("data-moving")&&"false"==r.getAttribute("data-loaded")&&"false"==r.getAttribute("data-loading")&&
k.push(p+1):k.push(p+1),m=!0;else if(m)break}}return k},sortCommentsBy:function(b){var c=function(a,b,c,d){var e=function(a,b){if(b){b=b.split(".");for(var c=0,d=b.length-1;c<d;c++)a=a[b[c]];return a[b[d]]}return a},h=function(b){return c?c(e(b,a)):e(b,a)};return function(a,c){var e=h(a),f=h(c);return(e<f?-1:e>f?1:"function"===typeof d?d(a,c):0)*[1,-1][+!!b]}};switch(dvJQuery(a.dom.commentsSortBySelect).find("option:selected").val()){case "page":b.sort(c("comment.annotApp.pageNo",!1,null,c("comment.annotApp.zorder",
!1,parseFloat)));break;case "author":b.sort(c("comment.annotApp.author",!1,function(a){return a.toUpperCase()}));break;case "date":b.sort(c("comment.annotApp.creationTime",!1,function(a){return new Date(a)}))}},refreshCommentsPanel:function(){null!=a.cache.AnnotsComments&&0<a.cache.AnnotsComments.length?(dvJQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display","none"),dvJQuery(a.dom.commentsSortBySelectContainer).css("opacity","1")):(dvJQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display",
"block"),dvJQuery(a.dom.commentsSortBySelectContainer).css("opacity","0.5"));dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).empty();for(var b=a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy),d=0;d<b.length;d++)for(var e=a.Internal.Annotations.getFirstAnnotationCommentAnswerOfDiscussion(b[d].comment.annotApp.id);null!=e;)null==b[d].answers?b[d].answers=[e]:b[d].answers.push(e),e=a.Internal.Annotations.getAnnotationCommentFromId(e.annotApp.properties.nextGuid);
for(d=0;d<b.length;d++)a.dom.createCommentItem(b[d].comment,b[d].answers);dvJQuery(function(){dvJQuery(".dvtoggle").click(function(a){a.stopPropagation();dvJQuery(this).parents(".dvcomment-header").next(".dvcomment-content").slideToggle();dvJQuery(this).toggleClass("dvcolapsed")})});a.SetSnapInVisibility("comments",!0)},updateThumbnails:function(b,d){if(0!=b.length&&a.dom.thumbnailArea&&a.dom.thumbnailArea.children){if(d){for(var c=0;c<b.length;c++){var e=a.Internal.Thumbnails.getThumbnailFromPageNo(b[c]);
if(null==e||null!=e&&("false"==e.attr("data-loaded")||"true"==e.attr("data-loading")))b.splice(c,1),c--}if(0==b.length)return}for(c=0;c<b.length;c++)e=a.Internal.Thumbnails.getThumbnailFromPageNo(b[c]),null!=e&&e.attr("data-loading","true");var h=function(){if(a.dom.thumbnailArea&&a.dom.thumbnailArea.children)for(var c=0;c<b.length;c++){var d=a.Internal.Thumbnails.getThumbnailFromPageNo(b[c]);null!=d&&(d.attr("data-loaded","false"),d.attr("data-loading","false"))}};a.debug&&console.log("DocuVieware: showing visible thumbnails: "+
JSON.stringify(b)+"onlyIfLoaded "+(d?"true":"false"));this.ajax.thumbnailRequestNo+=1;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({requestName:"thumbnails",requestData:{sessionID:this.ajax.sessionID,contextID:this.ajax.contextID,entries:b,requestNo:this.ajax.thumbnailRequestNo}}),contentType:"application/json",success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&b.status==DocuViewareAPI.Status.OK){if(b.contextID==
a.ajax.contextID&&a.dom.thumbnailArea&&(b=b.images)&&0<b.length){for(var c=0;c<b.length;c++){var d=a.Internal.Thumbnails.getThumbnailFromPageNo(b[c].pageNo);if(null!=d){d.attr("data-loaded","true");d.attr("data-loading","false");d=d.children("canvas");d.removeClass("spinner-thumb");d.css("backgroundColor","rgba(0,0,0,0)");var e=new Image;e.owner=d.get(0);e.setAttribute("data-pageNo",b[c].pageNo);e.src="data:"+b[c].mime+";base64,"+b[c].data;var f=b[c].scale;e.onload=function(){var b=this.owner.getContext("2d");
b.clearRect(0,0,this.owner.width,this.owner.height);b.save();1==f?(b.mozImageSmoothingEnabled=!1,b.msImageSmoothingEnabled=!1,b.imageSmoothingEnabled=!1):b.transform(1/f,0,0,1/f,0,0);b.shadowColor=a.Internal.Thumbnails.THUMBNAIL_SHADOW_COLOR;b.shadowBlur=a.Internal.Thumbnails.THUMBNAIL_SHADOW_BLUR;b.shadowOffsetX=a.Internal.Thumbnails.THUMBNAIL_SHADOW_OFFSET;b.shadowOffsetY=a.Internal.Thumbnails.THUMBNAIL_SHADOW_OFFSET;if(a.isIE9){var c=this;window.setTimeout(function(){b.drawImage(c,0,0);b.restore();
b=null},100)}else b.drawImage(this,0,0),b.restore(),b=null}}}a.dom.updateThumbsStyle(!1,!1)}}else h()},error:function(b){a.ajax.HandleError(b);h()}})}},ResetScrollConfig:function(b){a.isIOS?a.dom.viewerArea.style.overflow="auto":a.serverCtx.scrollBars?a.dom.viewerArea.style.overflow="auto":(a.dom.viewerArea.style.overflowY="hidden",a.dom.viewerArea.style.overflowX="hidden")},ClearUI:function(){a.ajax.SetNewServerCtx(null)},IsZoomSynchronized:function(){return Math.round(1E3*a.serverCtx.zoom)===Math.round(1E3*
a.cache.pageCanvasZoom)},SetupViewerArea:function(b,d,e,f){var c=Math.round(1E3*a.serverCtx.zoom)!=Math.round(1E3*d);c||f||(a.cache.pageCanvasSizeNoPreview=DocuViewareUtilities.clonePageCanvasSizes(b));var h=!0;if(Math.round(1E3*a.cache.pageCanvasZoom)==Math.round(1E3*d)&&null!=b&&null!=a.cache.pageCanvasSize&&a.cache.pageCanvasSize.length==b.length){h=!1;f=!0;for(var l=0;l<b.length;l++){var g=b[l].PageNo==a.cache.pageCanvasSize[l].PageNo&&1>=Math.abs(b[l].Width-a.cache.pageCanvasSize[l].Width)&&
1>=Math.abs(b[l].Height-a.cache.pageCanvasSize[l].Height);g||(h=!0);if(!g||1<Math.abs(b[l].OffsetX-a.cache.pageCanvasSize[l].OffsetX)||1<Math.abs(b[l].OffsetY-a.cache.pageCanvasSize[l].OffsetY))f=!1}if(f)return}f=a.isIOS?1024:2048;e=!h||e&&Math.round(1E3*a.cache.pageCanvasZoom)==Math.round(1E3*d);e||(a.cache.emptyCanvas(),a.cache.canvas=[],a.cache.pageCanvasZoom=d);a.cache.pageCanvasSize=b;l=DocuViewareUtilities.getPageCanvasSize(a.cache.pageCanvasSize);d=a.dom.viewerArea.clientWidth;h=a.dom.viewerArea.clientHeight;
g=d<l.width;h<l.height&&(d-=a.dom.sbWidth);g&&(h-=a.dom.sbWidth);a.dom.panDiv.style.width=Math.round(Math.max(l.width,d)-2).toString()+"px";a.dom.panDiv.style.height=Math.round(Math.max(l.height,h)-2).toString()+"px";d=e?null:document.createDocumentFragment();for(l=0;l<b.length;l++){h=b[l].OffsetX;g=b[l].OffsetY;var k=b[l].Width+h,m=b[l].Height+g,q=e?a.cache.canvas[l]:[],p=Math.ceil(b[l].Width/f),r=Math.ceil(b[l].Height/f),w=b[l].Width*b[l].Height>f*f,x=DocuViewareUtilities.getDevicePixelRatio();
if(w&&(1<p||1<r))for(var y=w=0,z=0;z<r;z++){y+=f;y-1>b[l].Height&&(y=b[l].Height-1);var B=y-w;if(0>=B)break;for(var C=0,G=0,J=0;J<p;J++){G+=f;G-1>b[l].Width&&(G=b[l].Width-1);var H=G-C,E=e?q.canvas[z*p+J].tile:document.createElement("canvas");e||(E.width=H*x,E.height=B*x,E.style.width=H+"px",E.style.height=B+"px",E.style.display="block",E.style.position="absolute",E.style.padding="0px",E.style.margin="0px",E.style.backgroundColor="white");E.style.left=h+C+"px";E.style.top=g+w+"px";e?(q.canvas[z*p+
J].tx=-(C*x),q.canvas[z*p+J].ty=-(w*x)):(d.appendChild(E),q.push({tile:E,tx:-(C*x),ty:-(w*x)}));C+=H}w+=B}else E=e?q.canvas[0].tile:document.createElement("canvas"),e||(E.width=Math.ceil(b[l].Width*x),E.height=Math.ceil(b[l].Height*x),E.style.width=Math.ceil(b[l].Width)+"px",E.style.height=Math.ceil(b[l].Height)+"px",E.style.display="block",E.style.position="absolute",E.style.padding="0px",E.style.margin="0px",E.style.backgroundColor="white",d.appendChild(E),q.push({tile:E,tx:0,ty:0})),E.style.left=
h+"px",E.style.top=g+"px";e?(a.cache.canvas[l].top=g,a.cache.canvas[l].left=h,a.cache.canvas[l].right=k,a.cache.canvas[l].bottom=m):a.cache.canvas.push({canvas:q,top:g,left:h,right:k,bottom:m,pageNo:b[l].PageNo})}e||(a.SetMouseMode(a.events.mouseMode),a.dom.viewerArea.insertBefore(d,a.dom.panDiv),a.dom.freehandCan||(a.dom.freehandCan=document.createElement("canvas")),a.dom.freehandCan.style.position="absolute",a.dom.freehandCan.style.padding="0px",a.dom.freehandCan.style.margin="0px",a.dom.freehandCan.style.display=
"none",a.dom.freehandCan.style.zIndex=a.dom.zindexManager.getFreehandDrawingCanvasZindex(),window.PointerEvent?(dvJQuery(a.dom.freehandCan).css("touch-action","none"),a.dom.freehandCan.onpointerup=function(b){switch(b.pointerType){case "mouse":a.events.mouseup(b);break;case "pen":a.events.mouseup(b);break;case "touch":a.events.mouseup(b);break;default:a.events.mouseup(b)}},a.dom.freehandCan.onpointerdown=function(b){switch(b.pointerType){case "mouse":a.events.mousedown(b,!1,!1);break;case "pen":a.events.mousedown(b,
!1,!0);break;case "touch":a.events.mousedown(b,!0,!1);break;default:a.events.mousedown(b,!1,!1)}},a.dom.freehandCan.onpointermove=function(b){switch(b.pointerType){case "mouse":a.events.mousemove(b,!1);break;case "pen":b.preventDefault();a.events.mousemove(b,!0);break;case "touch":b.preventDefault();a.events.mousemove(b,!0);break;default:a.events.mousemove(b,!1)}},a.dom.freehandCan.onpointerleave=function(b){switch(b.pointerType){case "mouse":a.events.mouseleave(b);break;case "pen":a.events.mouseleave(b);
break;default:a.events.mouseleave(b)}},a.dom.freehandCan.onpointerenter=function(b){switch(b.pointerType){case "mouse":a.events.mouseenter(b);break;case "pen":a.events.mouseenter(b);break;default:a.events.mouseenter(b)}}):(a.dom.freehandCan.onmouseup=function(b){a.events.mouseup(b)},a.dom.freehandCan.onmousedown=function(b){a.events.mousedown(b)},a.dom.freehandCan.onmousemove=function(b){a.events.mousemove(b)},a.dom.freehandCan.onmouseleave=function(b){a.events.mouseleave(b)},a.dom.freehandCan.onmouseenter=
function(b){a.events.mouseenter(b)},a.dom.freehandCan.ontouchstart=function(b){1==b.changedTouches.length&&a.events.mousedown(b.changedTouches[0])},a.dom.freehandCan.ontouchmove=function(b){1==b.changedTouches.length&&(b.preventDefault(),a.events.mousemove(b.changedTouches[0],!0))},a.dom.freehandCan.ontouchend=function(b){1==b.changedTouches.length&&a.events.mouseup(b.changedTouches[0])}),a.dom.freehandCan.ondblclick=function(b){a.events.dblclick(b)},a.dom.viewerArea.appendChild(a.dom.freehandCan),
null!=a.dom.annotationsActionButtons&&a.dom.viewerArea.appendChild(a.dom.annotationsActionButtons));a.Internal.Selection.clearSelectionArea();a.UpdatePageBoundsDiv(a.GetCurrentPage());a.dom.SelectedTextRegions.onPageBoundsChanged();a.dom.handleLinkRectVisibility();if(c)null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide();else if(null!=a.cache.Annots)for(b=0;b<a.cache.Annots.length;b++)c=a.cache.Annots[b],c.annotApp.visible&&(f=a.cache.getPageCanvas(c.annotApp.pageNo),
null!=f&&(c.updatePageInfo(f.left,f.top,null),c.render()));if(null!=a.cache.FormFields)for(b=0;b<a.cache.FormFields.length;b++)a.cache.FormFields[b].render()},UpdateUI:function(b,d,e,f,g,k,m){a.Internal.Annotations.hoveredAnnot=null;var c=null!=a.serverCtx&&a.serverCtx.documentLoaded;b&&(this.ajax.latestSelectedPage=this.serverCtx.selectedPage);this.dom.singlePageView!=this.serverCtx.singlePageView&&(this.dom.singlePageView=this.serverCtx.singlePageView,this.dom.updateSinglePageModeButton());g||!a.serverCtx.clearCachedBitmap&&
!a.serverCtx.clearCachedPages||(a.serverCtx.clearCachedPages?(a.debug&&console.log("DocuVieware: Cached pages removed. zoom: "+a.serverCtx.zoom),a.cache.clearCachedPages()):a.serverCtx.clearCachedBitmap&&(a.debug&&console.log("DocuVieware: Cached bitmap removed. zoom: "+a.serverCtx.zoom),a.cache.clearCachedBitmap()),a.serverCtx.clearCachedBitmap=!1,a.serverCtx.clearCachedPages=!1);this.ResetScrollConfig(!1);if(c){var h=[];if(null!=a.serverCtx.pageCanvasSize){a.SetupViewerArea(a.serverCtx.pageCanvasSize,
a.serverCtx.zoom,m);a.serverCtx.pageCanvasSize=null;if(a.cache.viewRotation!=a.serverCtx.viewRotation&&a.serverCtx.applyViewRotationToThumbnails)for(m=1;m<=a.serverCtx.pageCount;m++)a.Internal.Thumbnails.resetThumbnailFromPageNo(m);if(a.serverCtx.thumbnailsReset){for(m=0;m<a.serverCtx.thumbnailsReset.length;m++)a.Internal.Thumbnails.resetThumbnailFromPageNo(a.serverCtx.thumbnailsReset[m]);a.serverCtx.thumbnailsReset=null}a.cache.viewRotation=a.serverCtx.viewRotation}if(a.serverCtx.pagesReset){for(m=
0;m<a.serverCtx.pagesReset.length;m++)a.cache.clearPage(a.serverCtx.pagesReset[m]);a.serverCtx.pagesReset=null}d||(a.debug&&console.log("DocuVieware: Setting scrollbar values of page: "+a.GetCurrentPage()+" / "+a.GetLastPageNoRequest()+" v: "+a.serverCtx.vScrollbarVal.toString()),a.serverCtx.vScrollbarVisible&&a.serverCtx.hScrollbarVisible?(a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal,2),a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal,2)):a.serverCtx.vScrollbarVisible?
a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal,2):a.serverCtx.hScrollbarVisible&&a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal,2));null!=a.serverCtx.annotsComments&&a.dom.commentsArea&&(a.Internal.Annotations.setAnnotationsComments(a.serverCtx.annotsComments),a.refreshCommentsPanel());null!=a.serverCtx.annotsRedactionReferences&&a.dom.redactionsPanel&&(a.Internal.Annotations.setAnnotsRedactionReferences(a.serverCtx.annotsRedactionReferences),a.Internal.Redaction.refreshRedactionPanel(!1));
if(null!=a.serverCtx.page)for(m=0;m<a.serverCtx.page.length;m++){var l=!1;d=a.serverCtx.page[m].pageNo;var q=a.Internal.Pages.getPage(d);q&&(l=!0,!g&&a.serverCtx.page[m].data&&(q.bitmap=null));l||(q={pageNo:d,drawn:!1,drawnPreview:!1,drawing:!1},a.cache.cachePage(q));q.renderStatus=a.serverCtx.page[m].renderStatus;g||(k||(q.renderRotation=a.serverCtx.page[m].renderRotation,q.pageRotation=a.serverCtx.page[m].pageRotation,q.viewRotation=a.serverCtx.page[m].viewRotation,q.drawn&&!a.Internal.Matrix.equal(q.matrix,
a.serverCtx.page[m].matrix)&&(q.drawn=!1),q.matrix=a.serverCtx.page[m].matrix,q.contentMatrix=a.serverCtx.page[m].contentMatrix,q.zoom=a.serverCtx.page[m].zoom,q.viewRotation=a.serverCtx.page[m].viewRotation),q.width=a.serverCtx.page[m].width,q.height=a.serverCtx.page[m].height);if(a.serverCtx.page[m].formFields&&(l=a.serverCtx.page[m].formFields,l.firstAccess&&(a.Internal.FormFields.removePageFormFields(q.pageNo),q.drawn&&(q.drawn=!1)),l.formFieldsApp)){for(var t=0;t<l.formFieldsApp.length;t++)a.Internal.FormFields.newController(l.formFieldsApp[t]);
q.drawn&&(q.drawn=!1)}if(a.serverCtx.page[m].annots&&(l=a.serverCtx.page[m].annots,l.firstAccess&&(a.Internal.Annotations.removePageAnnots(q.pageNo),q.drawn&&(q.drawn=!1)),l.annotsApp)){t=a.cache.getPageCanvas(q.pageNo);for(var p=0;p<l.annotsApp.length;p++)a.Internal.Annotations.newController(l.annotsApp[p],null!=t?t.left:0,null!=t?t.top:0,q.contentMatrix);q.drawn&&(q.drawn=!1)}a.serverCtx.page[m].text&&(q.text=a.serverCtx.page[m].text);a.serverCtx.page[m].links&&(q.links=a.serverCtx.page[m].links);
a.GetCurrentPage()===q.pageNo&&a.UpdatePageBoundsDiv(q.pageNo);g||(a.serverCtx.page[m].data?(l=new Image,l.src="data:"+a.serverCtx.page[m].mime+";base64,"+a.serverCtx.page[m].data,a.cache.attachImageToPage(q,l,a.serverCtx.page[m].scale,a.serverCtx.page[m].hasTransparency),q.drawn=!1,l.setAttribute("data-pageNo",d),e&&(q.drawing=!0,l.onload=function(b){b=parseInt(this.getAttribute("data-pageNo"));a.DrawPage(a.cache.getPageObject(b),!1)})):e&&(null!=q.bitmap?a.Internal.Pages.isPageVisible(q.pageNo)&&
(q.drawing=!0,a.DrawPage(q,!1)):(a.debug&&console.log("DocuVieware: draw page request without attached bitmap "+d+". render status: "+q.renderStatus),q.renderStatus==DocuViewareAPI.Status.OK&&(q.renderStatus=DocuViewareAPI.Status.GenericError))),a.serverCtx.page[m].updateThumbnail&&h.push(d));a.serverCtx.page[m]=null;null==q.bitmap&&(q.TransferRetries||(q.TransferRetries=0),q.TransferRetries++<DocuViewareConstants.MAX_PAGE_TRANSFER_RETRIES&&(a.debug&&console.log("DocuVieware: new page content received without attached bitmap "+
d+". Total retries: "+parseFloat(q.TransferRetries)),a.Internal.Pages.pageView([q.pageNo],!1,!0)))}a.updateThumbnails(h,!0)}if(b){if(0<a.serverCtx.pageCount&&a.dom.thumbnailArea){e=document.createDocumentFragment();for(g=0;g<a.serverCtx.pageCount;g++)e.appendChild(a.Internal.Thumbnails.createThumbnail(g+1));a.dom.thumbnailArea.appendChild(e);a.dom.updateThumbsStyle(!0,!0)}if(null!=a.serverCtx.bookmarks&&a.dom.bookmarksArea){for(m=0;m<a.serverCtx.bookmarks.length;m++)e=a.serverCtx.bookmarks[m],a.dom.createBookmarkNode(dvJQuery(a.dom.bookmarksTree),
e);a.SetSnapInVisibility("bookmarks",!0)}}if(!c||b||f)a.SetSnapInVisibility("annotations",c&&a.serverCtx.annotationEditorMode),a.SetSnapInVisibility("comments",c&&a.serverCtx.annotationEditorMode),a.SetSnapInVisibility("thumbnails",c),a.SetSnapInVisibility("bookmarks",c&&0<dvJQuery(a.dom.bookmarksTree).children().length),a.SetSnapInVisibility("search",c&&a.serverCtx.enableTextSearch),a.SetSnapInVisibility("redaction",c&&a.serverCtx.hasRedactionSupport),a.SetSnapInVisibility("digisign",c&&a.serverCtx.enableDigiSign&&
3===a.serverCtx.documentType);a.dom.leftSideArea&&(a.isIE9||a.isIE10)&&dvJQuery(a.dom.leftSideContainerPanelsArea).height(dvJQuery(a.dom.controlArea).height()-dvJQuery(a.dom.snapinsHeader).height());c&&(a.isIEorEdge&&!a.serverCtx.singlePageView&&a.serverCtx.vScrollbarMax>DocuViewareConstants.IE_MAX_SCROLL_TOP_LIMIT?a.ToggleSinglePageViewMode():(a.showVisibleThumbnails(),a.doNextPageViewProcess()))},UpdatePageBoundsDiv:function(b){if(!a.dom.singlePageView&&1<a.GetPageCount()){var c=parseFloat(a.dom.pageBoundsDiv.style.borderWidth);
b=a.Internal.Pages.getRenderingState(b);a.dom.pageBoundsDiv.style.left=b.pageLeft+"px";a.dom.pageBoundsDiv.style.top=b.pageTop+"px";a.dom.pageBoundsDiv.style.width=b.pageWidth-2*c+"px";a.dom.pageBoundsDiv.style.height=b.pageHeight-2*c+"px";a.dom.pageBoundsDiv.style.display="block"}else a.dom.pageBoundsDiv.style.display="none"},DrawPage:function(b,d){if(null!==b&&null!==b.matrix&&null!=b.bitmap){var c=a.cache.getPageCanvas(b.pageNo);b.drawing=!1;if(null!==c){var e=b.zoom,h=Math.round(1E3*e)!==Math.round(1E3*
a.cache.pageCanvasZoom),f;(f=d?!b.drawnPreview:!b.drawn)&&b.viewRotation!==a.cache.viewRotation&&(f=!1);if(f){var g=null;f=b.matrix;var k=DocuViewareUtilities.getDevicePixelRatio(),m=a.serverCtx.enableSmoothing,p=!(a.isIE||a.isFirefox),r="high";h&&(m=!0,1!==k&&(r="medium"),e=a.cache.pageCanvasZoom/e,f=a.Internal.Matrix.combine(f,{a:e,b:0,c:0,d:e,e:0,f:0}));1!==k&&a.Internal.Matrix.isRotatedOrFlipped(f)&&(f=a.Internal.Matrix.combine({a:1/k,b:0,c:0,d:1/k,e:0,f:0},f),f=a.Internal.Matrix.combine(f,{a:k,
b:0,c:0,d:k,e:0,f:0}));e=b.scale;1!==e&&(f=a.Internal.Matrix.combine({a:1/e,b:0,c:0,d:1/e,e:0,f:0},f));a.debug&&console.log("DocuVieware: drawing page: "+b.pageNo+". mat: "+JSON.stringify(f)+" previewmode: "+(d?"true":"false"));var w=Math.abs(f.a)+Math.abs(f.c),x=Math.abs(f.b)+Math.abs(f.d);try{var y=m&&!p?.15>=Math.min(w,x)?3:.5>=Math.min(w,x)?2:1:1;if(1!==y){var z=b.bitmap.width,B=b.bitmap.height;if(a.attachedDebugger&&a.isIE)if(9437184>b.bitmap.width*b.bitmap.height)if(f={a:f.a*Math.pow(2,y-1),
b:f.b*Math.pow(2,y-1),c:f.c*Math.pow(2,y-1),d:f.d*Math.pow(2,y-1),e:f.e,f:f.f},b.hasTransparency)if(2==y)E=document.createElement("canvas"),E.width=z/2,E.height=B/2,J=E.getContext("2d"),J.drawImage(b.bitmap,0,0,z/2,B/2),J=null,g=E;else{E=document.createElement("canvas");E.width=z/2;E.height=B/2;J=E.getContext("2d");J.drawImage(b.bitmap,0,0,z/2,B/2);J=null;var C=document.createElement("canvas");C.width=z/4;C.height=B/4;var G=C.getContext("2d");G.drawImage(E,0,0,z/4,B/4);G=null;g=C}else{var E=document.createElement("canvas");
E.width=z/2;E.height=B/2;for(var J=E.getContext("2d"),H=0;H<y-1;H++)J.drawImage(0==H?b.bitmap:E,0,0,z/Math.pow(2,H+1),B/Math.pow(2,H+1));g=E}else g=b.bitmap;else{var K=document.createElement("canvas");K.width=z;K.height=B;var L=K.getContext("2d");L.mozImageSmoothingEnabled=!1;L.msImageSmoothingEnabled=!1;L.imageSmoothingEnabled=!1;L.drawImage(b.bitmap,0,0,z,B);var M=document.createElement("canvas");M.width=Math.ceil(z*w);M.height=Math.ceil(B*x);var I=M.getContext("2d"),T=I.getImageData(0,0,M.width,
M.height);f=a.Internal.Matrix.combine({a:1/w,b:0,c:0,d:1/x,e:0,f:0},f);var V=L.getImageData(0,0,K.width,K.height).data;L=null;a.Internal.Libs.pica.resize({src:V,dest:T.data,width:K.width,height:K.height,toWidth:M.width,toHeight:M.height,alpha:b.hasTransparency,quality:y-2});I.putImageData(T,0,0);V=K=I=T=null;g=M}}else g=b.bitmap;if(g){for(H=0;H<c.canvas.length;H++){var U=c.canvas[H].tile;if(null!==U){U.style.backgroundColor="transparent";var P=U.getContext("2d");if(null===P)console.log("Can not obtain 2d context for the tile "+
(H+1).toString()+"\r\nTile count: "+c.canvas.length.toString());else if(P.save(),P.clearRect(0,0,U.width,U.height),P.mozImageSmoothingEnabled=m,P.msImageSmoothingEnabled=m,(P.imageSmoothingEnabled=m)&&p&&(P.imageSmoothingQuality=r),1===f.a&&0===f.b&&0===f.c&&1===f.d&&0===f.e+c.canvas[H].tx&&0===f.f+c.canvas[H].ty||P.transform(f.a,f.b,f.c,f.d,f.e+c.canvas[H].tx,f.f+c.canvas[H].ty),a.isIE9)window.setTimeout(function(){if(9437184<g.width*g.height){var a=Math.round(g.width/2),b=Math.round(g.height/2),
c=1/w,d=1/x;P.drawImage(g,0,0,a,b,0,0,a,b);P.drawImage(g,a,0,a,b,a-c,0,a,b);P.drawImage(g,0,b,a,b,0,b-d,a,b);P.drawImage(g,a,b,a,b,a-c,b-d,a,b)}else P.drawImage(g,0,0);P.restore();P=null},100);else{if(9437184<=g.width*g.height){var S=Math.round(g.width/2),ea=Math.round(g.height/2);z=1/w;B=1/x;P.drawImage(g,0,0,S,ea,0,0,S,ea);P.drawImage(g,S,0,S,ea,S-z,0,S,ea);P.drawImage(g,0,ea,S,ea,0,ea-B,S,ea);P.drawImage(g,S,ea,S,ea,S-z,ea-B,S,ea)}else P.drawImage(g,0,0);P.restore();P=null}}}d?b.drawnPreview=!0:
b.drawn=!0}}catch(W){H="DocuVieware page drawing exception: "+W.message+"\r\nDownscales: "+y.toString(),a.debug?alert(H):console.log(H)}}if(!h){if(null!=a.cache.FormFields)for(H=0;H<a.cache.FormFields.length;H++)h=a.cache.FormFields[H],h.control&&h.formFieldApp.pageNo==b.pageNo&&(a.Internal.FormFields.existFormField(h)||a.dom.viewerArea.appendChild(h.control),h.render());if(null!=a.cache.Annots)for(H=0;H<a.cache.Annots.length;H++)if(h=a.cache.Annots[H],h.annotApp.pageNo==b.pageNo&&(h.updatePageInfo(c.left,
c.top,b.contentMatrix),h.annotApp.visible)){d=!0;if(a.dom.viewerArea.hasChildNodes())for(y=a.dom.viewerArea.children.length-1;0<=y;y--)if(a.dom.viewerArea.children[y]===h.canvas){d=!1;break}d&&a.dom.viewerArea.appendChild(h.canvas);h.render()}a.Internal.Search.highlightResults(b.pageNo)}}}},resetServerCtx:function(){this.serverCtx={zoomMode:0,zoom:0,documentLoaded:!1,pageCount:0,selectedPage:0,imageCanvasSize:null,enableSmoothing:!1,hScrollbarVal:0,hScrollbarMax:0,hScrollbarVisible:!1,vScrollbarVal:0,
vScrollbarMax:0,vScrollbarVisible:!1,image:null}},setDialogAnnotationFontNamePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("font-family",dvJQuery(a.dom.annotationDialogFormFontNameSelect).find("option:selected").val());this.setDialogAnnotationLineAlignmentPropertiesPreview()},setDialogAnnotationFontSizePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("font-size",dvJQuery(a.dom.annotationDialogFormFontSizeInput).val()+"px");this.setDialogAnnotationLineAlignmentPropertiesPreview()},
setDialogAnnotationFontColorPropertiesPreview:function(){},setDialogAnnotationFontStylePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","none");dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style","normal");dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight","normal");switch(parseInt(dvJQuery(a.dom.annotationDialogFormFontStyleSelect).find("option:selected").val())){case 0:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration",
"none");break;case 1:dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight","bold");break;case 2:dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style","italic");break;case 4:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","underline");break;case 8:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","line-through")}},setDialogAnnotationAlignmentPropertiesPreview:function(){switch(parseInt(dvJQuery(a.dom.annotationDialogFormAlignmentSelect).filter(":checked").val())){case 0:var b=
"left";break;case 1:b="center";break;case 2:b="right";break;default:b="left"}dvJQuery(a.dom.annotationDialogFormTextInput).css("text-align",b)},setDialogAnnotationLineAlignmentPropertiesPreview:function(){var b=dvJQuery("<div>");b.css("width",dvJQuery(a.dom.annotationDialogFormTextInput).width());b.css("font-size",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-size"));b.css("font-family",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-family"));b.css("font-weight",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight"));
b.css("text-decoration",dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration"));b.css("text-align",dvJQuery(a.dom.annotationDialogFormTextInput).css("text-align"));b.css("display","none");var d=dvJQuery(a.dom.annotationDialogFormTextInput).val();b.html((d+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"));dvJQuery(a.dom.annotationDialogForm).append(b);switch(parseInt(dvJQuery("[name='annotation_line_alignment_select"+a.uniqueID+"']:checked").val())){case 0:d=0;break;case 1:d=
Math.max(0,(dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height")-b.height())/2);break;case 2:d=Math.max(0,dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height")-b.height()-1);break;default:d=0}dvJQuery(a.dom.annotationDialogFormTextInput).css("height",dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height")-d+"px");dvJQuery(a.dom.annotationDialogFormTextInput).css("padding-top",d+"px");b.remove()},setDialogSignatureFontNamePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("font-family",
dvJQuery(a.dom.signatureDialogFormFontNameSelect).find("option:selected").val());this.setDialogSignatureLineAlignmentPropertiesPreview()},setDialogSignatureFontSizePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("font-size",dvJQuery(a.dom.signatureDialogFormFontSizeInput).val()+"px");this.setDialogSignatureLineAlignmentPropertiesPreview()},setDialogSignatureFontColorPropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("color",dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("rgbaString"))},
setDialogSignatureFontStylePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","none");dvJQuery(a.dom.signatureDialogFormTextInput).css("font-style","normal");dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight","normal");switch(parseInt(dvJQuery(a.dom.signatureDialogFormFontStyleSelect).find("option:selected").val())){case 0:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","none");break;case 1:dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight",
"bold");break;case 2:dvJQuery(a.dom.signatureDialogFormTextInput).css("font-style","italic");break;case 4:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","underline");break;case 8:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","line-through")}},setDialogSignatureAlignmentPropertiesPreview:function(){switch(parseInt(dvJQuery(a.dom.signatureDialogFormAlignmentSelect).filter(":checked").val())){case 0:var b="left";break;case 1:b="center";break;case 2:b="right";
break;default:b="left"}dvJQuery(a.dom.signatureDialogFormTextInput).css("text-align",b)},setDialogSignatureLineAlignmentPropertiesPreview:function(){var b=dvJQuery("<div>");b.css("width",dvJQuery(a.dom.signatureDialogFormTextInput).width());b.css("font-size",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-size"));b.css("font-family",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-family"));b.css("font-weight",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight"));b.css("text-decoration",
dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration"));b.css("text-align",dvJQuery(a.dom.signatureDialogFormTextInput).css("text-align"));b.css("display","none");var d=dvJQuery(a.dom.signatureDialogFormTextInput).val();b.html((d+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"));dvJQuery(a.dom.signatureTextDialogForm).append(b);switch(parseInt(dvJQuery("[name='signature_line_alignment_select"+a.uniqueID+"']:checked").val())){case 0:d=0;break;case 1:d=Math.max(0,(dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-
b.height())/2);break;case 2:d=Math.max(0,dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-b.height()-1);break;default:d=0}dvJQuery(a.dom.signatureDialogFormTextInput).css("height",dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-d+"px");dvJQuery(a.dom.signatureDialogFormTextInput).css("padding-top",d+"px");b.remove()},inputControl:function(a,b,d,e){var c=a.val().split(""),h="",f="";if("int"==b)l=/^([0-9])$/,g=/^([0-9][0-9]*)$/;else if("float"==b)var l=
/(^\d+$)|(^\d+\.\d+$)|[,\.]/,g=/^([0-9][0-9]*[,\.]?\d{0,3})$/;for(var k in c)1==l.test(c[k])&&""!=c[k]&&(f+=""+c[k].replace(",","."),1==g.test(f)&&(h+=""+c[k].replace(",",".")));"undefined"!==typeof d&&null!==d&&h<d&&(h=d);"undefined"!==typeof e&&null!==e&&h>e&&(h=e);a.val(h)},inputPageRangeControl:function(a){var b=a.value.split(""),c=/^([0-9|;-])$/,d="",e;for(e in b)1==c.test(b[e])&&(d+=b[e]);a.value=d},ToggleSinglePageViewMode_Click:function(){this.ToggleSinglePageViewMode()},pageRangeSelection:function(b,
d){switch(parseInt(b)){case 0:d.value="1-"+a.GetPageCount();d.disabled=!0;break;case 1:d.value=a.GetCurrentPage();d.disabled=!0;break;case 2:d.disabled=!1}},SelectFirstPage_Click:function(){this.serverCtx.documentLoaded&&(this.dom.updateSelectedPageFader(0,1),this.EnsurePageVisibility(1),a.SelectPage(1))},SelectNextPage_Click:function(){if(this.serverCtx.documentLoaded){this.selectNextPageTimeout&&(clearTimeout(this.selectNextPageTimeout),this.selectNextPageTimeout=null);this.selectNextPageActions?
this.selectNextPageActions++:this.selectNextPageActions=1;var b=Math.min(this.GetLastPageNoRequest()+this.selectNextPageActions,this.serverCtx.pageCount);this.dom.updateSelectedPageFader(0,b);this.EnsurePageVisibility(b);this.selectNextPageTimeout=setTimeout(function(){a.GetLastPageNoRequest()+1<=a.serverCtx.pageCount&&a.SelectPageEx(b,!0,!1,!0,!0);a.selectNextPageActions=0},300)}},SelectPreviousPage_Click:function(){if(this.serverCtx.documentLoaded){this.selectPreviousPageTimeout&&(clearTimeout(this.selectPreviousPageTimeout),
this.selectPreviousPageTimeout=null);this.selectPreviousPageActions?this.selectPreviousPageActions++:this.selectPreviousPageActions=1;var b=Math.max(this.GetLastPageNoRequest()-this.selectPreviousPageActions,1);this.dom.updateSelectedPageFader(0,b);this.EnsurePageVisibility(b);this.selectPreviousPageTimeout=setTimeout(function(){1<a.GetLastPageNoRequest()&&a.SelectPageEx(b,!0,!1,!0,!0);a.selectPreviousPageActions=0},300)}},SelectLastPage_Click:function(){this.serverCtx.documentLoaded&&(this.dom.updateSelectedPageFader(0,
a.serverCtx.pageCount),this.EnsurePageVisibility(a.serverCtx.pageCount),a.SelectPage(a.serverCtx.pageCount))},ToggleMobileToolbar_Click:function(){a.dom.mobileToolbarContainer&&dvJQuery(a.dom.mobileToolbarContainer).slideToggle("fast")},ZoomMode_Click:function(){a.dom.subMenuZoomMode&&(a.dom.subMenuMouseMode&&dvJQuery(a.dom.subMenuMouseMode).hide(),dvJQuery(a.dom.subMenuZoomMode).show().position({my:"left top",at:"left bottom",of:dvJQuery(a.dom.zoomModeButton)}),dvJQuery(document).on("click",function(){dvJQuery(a.dom.subMenuZoomMode).hide()}));
a.dom.mobileToolbarContainer&&a.dom.subMenuZoomModeMobile&&(dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).addClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active"),"-60px"===dvJQuery(a.dom.mobileToolbarContainer).css("margin-right")?(dvJQuery(a.dom.subMenuZoomModeMobile).show(),dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","")):"none"!==
dvJQuery(a.dom.subMenuZoomModeMobile).css("display")?(dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","-60px"),dvJQuery(a.dom.subMenuZoomModeMobile).hide(),dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active")):(dvJQuery(a.dom.subMenuZoomModeMobile).show(),dvJQuery(a.dom.subMenuMouseModeMobile).hide()),
a.dom.updateButtons())},MouseMode_Click:function(){a.dom.subMenuMouseMode&&(a.dom.subMenuZoomMode&&dvJQuery(a.dom.subMenuZoomMode).hide(),dvJQuery(a.dom.subMenuMouseMode).show().position({my:"left top",at:"left bottom",of:dvJQuery(a.dom.mouseModeButton)}),dvJQuery(document).on("click",function(){dvJQuery(a.dom.subMenuMouseMode).hide()}));a.dom.mobileToolbarContainer&&a.dom.subMenuMouseModeMobile&&(dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).addClass("button_active"),
dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),"-60px"===dvJQuery(a.dom.mobileToolbarContainer).css("margin-right")?(dvJQuery(a.dom.subMenuMouseModeMobile).show(),dvJQuery(a.dom.subMenuZoomModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","")):"none"!==dvJQuery(a.dom.subMenuMouseModeMobile).css("display")?(dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","-60px"),dvJQuery(a.dom.subMenuZoomModeMobile).hide(),
dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active")):(dvJQuery(a.dom.subMenuMouseModeMobile).show(),dvJQuery(a.dom.subMenuZoomModeMobile).hide()),a.dom.updateButtons())},restartZoomInTimeout:function(b){b&&(a.events.enableZoomPreviewAutoSubmitter(),a.zoomInActions=1,a.ZoomINPreview(1));a.zoomInTimeout&&
(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null);a.events.isZoomingPreview&&(a.zoomInTimeout=setTimeout(function(){a.zoomInActions++;a.ZoomINPreview(a.zoomInActions);a.restartZoomInTimeout(!1)},250))},ZoomIN_MouseUp:function(){a.ZoomINMouseDown=!1;null!=a.zoomInTimeout&&(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null,a.events.isZoomingPreview=!1)},ZoomIN_MouseLeave:function(){null!=a.zoomInTimeout&&(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null,a.ZoomINMouseDown&&(a.ZoomINMouseDown=!1,
a.events.isZoomingPreview=!1,a.ZoomIN_Click()))},ZoomIN_MouseDown:function(){a.ZoomINMouseDown=!0;a.events.isZoomingPreview=!0;a.restartZoomInTimeout(!0)},ZoomIN_Click:function(){a.ZoomIN(null!=a.zoomInActions?a.zoomInActions:1,!0,!0,null,null)},ZoomOUT_MouseUp:function(){a.ZoomOUTMouseDown=!1;null!=a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=null,a.events.isZoomingPreview=!1)},ZoomOUT_MouseLeave:function(){null!=a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=
null,a.ZoomOUTMouseDown&&(a.ZoomOUTMouseDown=!1,a.events.isZoomingPreview=!1,a.ZoomOUT_Click()))},restartZoomOutTimeout:function(b){b&&(a.events.enableZoomPreviewAutoSubmitter(),a.zoomOutActions=1,a.ZoomOUTPreview(1));a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=null);a.events.isZoomingPreview&&(a.zoomOutTimeout=setTimeout(function(){a.zoomOutActions++;a.ZoomOUTPreview(a.zoomOutActions);a.restartZoomOutTimeout(!1)},250))},ZoomOUT_MouseDown:function(){a.ZoomOUTMouseDown=!0;a.events.isZoomingPreview=
!0;a.restartZoomOutTimeout(!0)},ZoomOUT_Click:function(){a.ZoomOUT(null!=a.zoomOutActions?a.zoomOutActions:1,!0,!0,null,null)},Rotate90_Click:function(){this.rotate90Timeout&&(clearTimeout(this.rotate90Timeout),this.rotate90Timeout=null);this.rotate90Actions?this.rotate90Actions++:this.rotate90Actions=1;this.rotate90Timeout=setTimeout(function(){var b=a.rotate90Actions%4;0!=b%4&&a.Rotate(b%4,-1);a.rotate90Actions=0},300)},Rotate270_Click:function(){this.rotate270Timeout&&(clearTimeout(this.rotate270Timeout),
this.rotate270Timeout=null);this.rotate270Actions?this.rotate270Actions++:this.rotate270Actions=1;this.rotate270Timeout=setTimeout(function(){var b=a.rotate270Actions%4;0!=b%4&&a.Rotate(4-b%4,-1);a.rotate270Actions=0},300)},Print_Click:function(){this.TogglePrintDialog(null,null)},LoadFromFile_Click:function(){this.LoadFromFile(null,null)},LoadFromUriDialog_Click:function(){this.ToggleLoadFromUriDialog()},SaveDialog_Click:function(){this.ToggleSaveDialog(null,null)},TwainAcquisitionDialog_Click:function(){this.TwainToggleAcquisitionDialog(null,
null)},CopyDialog_Click:function(a){a.preventDefault();this.CopySelectedTextToClipboard()},HighlightContextMenu_Click:function(a){a.preventDefault();this.HighlightSelectedText()},StrikeoutContextMenu_Click:function(a){a.preventDefault();this.StrikeoutSelectedText()},UnderlineContextMenu_Click:function(a){a.preventDefault();this.UnderlineSelectedText()},RedactionMarkContextMenu_Click:function(b){b.preventDefault();b=a.dom.redactionFill?dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+
a.uniqueID+"']")).minicolors("value"):null;this.RedactSelectedText(b)},RemoveTextContextMenu_Click:function(a){a.preventDefault();this.Internal.Text.removeSelectedText()},LoadFromUri_Click:function(){this.LoadFromUri(dvJQuery(this.dom.addressBar).val(),"",null,null,null,!0)},ExitDrawingMode_Click:function(){this.ExitAnnotationDrawingMode()},UndoDrawing_Click:function(){this.Internal.Annotations.dropPendingFreenhandAnnotLastSubPath()},AnnotationActionEditButton_Click:function(){this.Internal.Annotations.editSelectedAnnotation()},
AnnotationActionRemoveButton_Click:function(){this.Internal.Annotations.removeSelectedAnnotations()},AnnotationActionCommentButton_Click:function(){this.ToggleCommentDialog("comment")},CommentAnswer_Click:function(a){this.ToggleCommentDialog("answer",a)},CommentProperties_Click:function(a){this.ToggleCommentDialog("edit",a)},ZoomWidth_Click:function(){this.SetZoomMode(3)},ZoomFit_Click:function(){this.SetZoomMode(2)},Fullscreen_Click:function(){this.ToggleFullscreen()},MagnifierMouseMode_Click:function(){this.EnableMagnifier()},
PanMouseMode_Click:function(){this.SetMouseMode(0)},SelectMouseMode_Click:function(){this.SetMouseMode(3)},MarqueeZoomMouseMode_Click:function(){this.SetMouseMode(4)},AddRubberStampAnnot_Click:function(){this.AddAnnotInteractive(0)},AddRectangleAnnot_Click:function(){this.AddAnnotInteractive(1)},AddRectangleHighlighterAnnot_Click:function(){this.AddAnnotInteractive(2)},AddLineAnnot_Click:function(){this.AddAnnotInteractive(3)},AddConnectedLineAnnot_Click:function(){null!=a.dom.connectedLinesAnnotButton&&
dvJQuery(a.dom.connectedLinesAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(5)},AddLineArrowAnnot_Click:function(){this.AddAnnotInteractive(4)},AddEllipseAnnot_Click:function(){this.AddAnnotInteractive(6)},AddTextAnnot_Click:function(){this.AddAnnotInteractive(8)},AddStickyNoteAnnot_Click:function(){this.AddAnnotInteractive(9)},AddFreeHandAnnot_Click:function(){null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).hasClass("button_active")?
a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(10)},AddFreeHandHighlighterAnnot_Click:function(){null!=a.dom.freehandhighlighterAnnotButton&&dvJQuery(a.dom.freehandhighlighterAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(11)},AddLinkAnnot_Click:function(){this.AddAnnotInteractive(13)},AddRulerAnnot_Click:function(){this.AddAnnotInteractive(15)},AddPolyRulerAnnot_Click:function(){null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).hasClass("button_active")?
a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(16)},ClosePanelButton_Click:function(){this.SetSnapinsPanelVisibility(!1)},SearchSubmit_Click:function(){var a=this.dom.searchValueInput.value,b=this.dom.searchWholeWordInput.checked,d=this.dom.searchCaseSensitiveInput.checked,e=this.dom.searchAnyWordInput.checked,f=dvJQuery(this.dom.searchPageSelect).filter(":checked").val();this.SubmitSearch(a,b,d,e,f)},TwainAcquisitionSubmit_Click:function(){if(a.callbacks.onTwainAcquisitionDialogAcquireButtonClick)a.callbacks.onTwainAcquisitionDialogAcquireButtonClick();
var b=dvJQuery(this.dom.twainAcquisitionSourceNameSelect).find("option:selected").val();0==dvJQuery(a.dom.twainAcquisitionPanelForm).find("input[name='twainAcquisitionDestinationInput"+a.uniqueID+"']:checked").val()?this.TwainAcquireToNewDocument(b):this.TwainAcquireToCurrentDocument(b,dvJQuery(a.dom.twainAcquisitionPanelForm).find("select[name='twainAcquisitionDestinationAppendSelect"+a.uniqueID+"']").find("option:selected").val())},DownloadTwainServiceSetup_Click:function(){this.DownloadTwainServiceSetup();
dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")},SearchClearResult_Click:function(){this.ClearSearch()},CommentHeader_Click:function(b){a.Internal.Annotations.selectAnnotationCommentById(b,!1,!1);if(null!=a.cache.AnnotsComments)for(var c=0;c<a.cache.AnnotsComments.length;c++){var d=a.cache.AnnotsComments[c];if(d.annotApp.id===b){var e=d.annotApp.pageNo;a.SelectPage(e,function(){var b=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(d.annotApp,!0);null!=b&&(b.visible&&(a.Internal.Annotations.unselectAll(),
a.Internal.Annotations.selectById(b.id)),a.EnsurePageRegionVisibility(e,b.bbox.Left,b.bbox.Top,b.bbox.Width,b.bbox.Height))});break}}},CommentsSearchClearResult_Click:function(){this.CommentsClearSearch()},CommentsSearchSubmit_Click:function(){this.SubmitCommentsSearch(this.dom.commentsSearchValueInput.value)},CommentsExpandCollapseAll_Click:function(){this.CommentsExpandCollapseAll()},CommentsSortBySelect_Change:function(){this.refreshCommentsPanel()},RedactionAddAreas_Click:function(){a.events.isAddingRedactionMarksMode?
a.Internal.Redaction.disableAddRedactionMarksMode():a.Internal.Redaction.enableAddRedactionMarksMode()},RedactionApply_Click:function(){var b=this;a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_apply_redaction_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_apply_redaction_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),
"class":"btn-valid",click:function(){b.ApplyAllRedactions();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},RemoveSelectedRedactionMarks_Click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_selected_redactions_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redactions_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},
{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){for(var b=a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea"),d=[],e=0;e<b.length;e++)d.push(b[e].id.split("_").pop());for(e=0;e<d.length;e++)a.Internal.Redaction.deleteRedactionMarkById(d[e]);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},RemoveAllRedactionMarks_Click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_redactions_warning"),null,
function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redactions_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Redaction.removeAllRedactionMarks();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},DigiSignAppearanceMenu_Click:function(){var b=a.dom.digisignAppearanceMenuToggle.getElementsByClassName("dv-signature-menu-toggle")[0];
b.classList.contains("dv-signature-menu-toggle-collapsed")?(b.classList.remove("dv-signature-menu-toggle-collapsed"),a.dom.digisignAppearanceMenuContent.style.display="block"):(b.classList.add("dv-signature-menu-toggle-collapsed"),a.dom.digisignAppearanceMenuContent.style.display="none")},DigiSignCertificateMenu_Click:function(){var b=a.dom.digisignCertificateMenuToggle.getElementsByClassName("dv-signature-menu-toggle")[0];b.classList.contains("dv-signature-menu-toggle-collapsed")?(b.classList.remove("dv-signature-menu-toggle-collapsed"),
a.dom.digisignCertificateMenuContent.style.display="block"):(b.classList.add("dv-signature-menu-toggle-collapsed"),a.dom.digisignCertificateMenuContent.style.display="none")},DigiSignAppearanceText_Click:function(){a.Internal.DigiSign.setSignatureAppearanceTextInteractive()},DigiSignAppearanceImg_Click:function(){a.Internal.DigiSign.setSignatureAppearanceImgInteractive()},DigiSignAppearanceFreehand_Click:function(){a.Internal.DigiSign.setSignatureAppearanceFreehandInteractive()},DigiSignAppearanceDeleteSignatureAppearance_Click:function(){a.Internal.DigiSign.resetSignatureConfiguration()},
DigiSignAddTimeStamp_Click:function(){a.Internal.DigiSign.setTimeStampInteractive()},DigiSignAddCertificate_Click:function(){a.Internal.DigiSign.setCertificateInteractive()},DigiSignPlaceSignature_Click:function(){a.Internal.DigiSign.beginAddSignatureInteractive()},DigiSignDeleteCertificate_Click:function(b){b.stopPropagation&&b.stopPropagation();a.Internal.DigiSign.setCertificate(null,null,null)},DigiSignDeleteTimeStamp_Click:function(b){b.stopPropagation&&b.stopPropagation();a.Internal.DigiSign.setTimeStamp(null,
null,null)},SnapInButton_Click:function(a){this.SelectSnapIn(a,!1)},IsTwainSupportAvailable:function(){return this.isWindows&&5.1<this.windowsVersion},ToggleSinglePageViewMode:function(){return this.ajax.PostBaseRequest("singlepageviewmode",{data:{enabled:this.serverCtx.singlePageView},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1)}},!0)},RegisterOnViewerScroll:function(a){this.callbacks.onViewerScroll=a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationSelectedStateChanged:function(a){this.callbacks.onAnnotationSelectedStateChanged=
a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationAdded:function(a){this.callbacks.onAnnotationAdded=a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationEdited:function(a){this.callbacks.onAnnotationEdited=a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMoved:function(a){this.callbacks.onAnnotationMoved=a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationDeleted:function(a){this.callbacks.onAnnotationDeleted=a;return DocuViewareAPI.Status.OK},RegisterOnCommentAdded:function(a){this.callbacks.onCommentAdded=
a;return DocuViewareAPI.Status.OK},RegisterOnCommentEdited:function(a){this.callbacks.onCommentEdited=a;return DocuViewareAPI.Status.OK},RegisterOnCommentDeleted:function(a){this.callbacks.onCommentDeleted=a;return DocuViewareAPI.Status.OK},RegisterOnDocumentSigned:function(a){this.callbacks.onDocumentSigned=a;return DocuViewareAPI.Status.OK},RegisterOnFormFieldChanged:function(a){this.callbacks.onFormFieldChanged=a;return DocuViewareAPI.Status.OK},RegisterOnPageChanged:function(a){this.callbacks.onPageChanged=
a;return DocuViewareAPI.Status.OK},RegisterOnZoomChanged:function(a){this.callbacks.onZoomChanged=a;return DocuViewareAPI.Status.OK},RegisterOnRotationChanged:function(a){this.callbacks.onRotationChanged=a;return DocuViewareAPI.Status.OK},RegisterOnNewDocumentLoaded:function(a){this.callbacks.onNewDocumentLoaded=a;return DocuViewareAPI.Status.OK},RegisterOnDocumentClosed:function(a){this.callbacks.onDocumentClosed=a;return DocuViewareAPI.Status.OK},RegisterOnDocumentPrinted:function(a){this.callbacks.onDocumentPrinted=
a;return DocuViewareAPI.Status.OK},RegisterOnDocumentSaved:function(a){this.callbacks.onDocumentSaved=a;return DocuViewareAPI.Status.OK},RegisterOnTwainAcquisitionDialogAcquireButtonClick:function(a){this.callbacks.onTwainAcquisitionDialogAcquireButtonClick=a;return DocuViewareAPI.Status.OK},RegisterOnTwainAcquisitionDialogCancelButtonClick:function(a){this.callbacks.onTwainAcquisitionDialogCancelButtonClick=a;return DocuViewareAPI.Status.OK},RegisterOnThumbnailsOrderChanged:function(a){this.callbacks.onThumbnailsOrderChanged=
a;return DocuViewareAPI.Status.OK},RegisterOnTextSelected:function(a){this.callbacks.onTextSelected=a;return DocuViewareAPI.Status.OK},RegisterOnTextUnselected:function(a){this.callbacks.onTextUnselected=a;return DocuViewareAPI.Status.OK},RegisterOnTextAnnotated:function(a){this.callbacks.onTextAnnotated=a;return DocuViewareAPI.Status.OK},RegisterOnAreaSelected:function(a){this.callbacks.onAreaSelected=a;return DocuViewareAPI.Status.OK},RegisterOnFullscreenModeChanged:function(a){this.callbacks.onFullscreenModeChanged=
a;return DocuViewareAPI.Status.OK},RegisterOnSearchInvoked:function(a){this.callbacks.onSearchInvoked=a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMouseEnter:function(a){this.callbacks.onAnnotationMouseEnter=a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMouseLeave:function(a){this.callbacks.onAnnotationMouseLeave=a;return DocuViewareAPI.Status.OK},RegisterOnThumbnailsSnapInSelected:function(a){this.callbacks.onThumbnailsSnapInSelected=a;return DocuViewareAPI.Status.OK},RegisterOnBookmarksSnapInSelected:function(a){this.callbacks.onBookmarksSnapInSelected=
a;return DocuViewareAPI.Status.OK},RegisterOnSearchSnapInSelected:function(a){this.callbacks.onSearchSnapInSelected=a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationsSnapInSelected:function(a){this.callbacks.onAnnotationsSnapInSelected=a;return DocuViewareAPI.Status.OK},RegisterOnCommentsSnapInSelected:function(a){this.callbacks.onCommentsSnapInSelected=a;return DocuViewareAPI.Status.OK},RegisterOnSnapInPanelResized:function(a){this.callbacks.onSnapInPanelResized=a;return DocuViewareAPI.Status.OK},
RegisterOnSnapInPanelToggle:function(a){this.callbacks.onSnapInPanelToggle=a;return DocuViewareAPI.Status.OK},RegisterOnRedactionMarksApplied:function(a){this.callbacks.onRedactionMarksApplied=a;return DocuViewareAPI.Status.OK},DisplayMessageBox:function(a){return"object"===typeof a&&null!==a&&a.hasOwnProperty("text")&&a.hasOwnProperty("icon")?(this.ShowMessage(a),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},PostCustomServerAction:function(a,b,d,e,f){return this.ajax.PostCustomServerAction(a,
b,d,e,f)},SetMaxUploadThreads:function(b){return 0<b&&16>=b?(a.Internal.Files.MAX_UPLOAD_THREADS=b,DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},LoadFromBase64:function(a,b,d,e,f){return this.LoadFromByteArray(DocuViewareEncodingUtilities.base64.base64toArrayBuffer(a),b,d,e,f)},LoadFromByteArray:function(b,d,e,f,g){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.callbacks.onFileOpenError=g;this.callbacks.onFileOpenSuccess=f;a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b,
d,e),0);return DocuViewareAPI.Status.OK},LoadFromFile:function(a,b){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.SetLoadFromUriDialogVisibility(!1);this.callbacks.onFileOpenError=b;this.callbacks.onFileOpenSuccess=a;dvJQuery(this.dom.openfile).click();return DocuViewareAPI.Status.OK},GetDocumentType:function(){return this.serverCtx?this.serverCtx.documentType:0},GetDocumentFormat:function(){return this.serverCtx?this.serverCtx.documentFormat:0},GetDocumentName:function(){return this.serverCtx?
this.serverCtx.fileName:""},GetPageCount:function(){return this.serverCtx?this.serverCtx.pageCount:0},GetCurrentPage:function(){return this.serverCtx?this.serverCtx.selectedPage:0},GetPageWidth:function(a){return this.serverCtx?this.Internal.Pages.getPageWidth(a):0},GetPageHeight:function(a){return this.serverCtx?this.Internal.Pages.getPageHeight(a):0},GetSelectedTextArea:function(){return this.serverCtx?this.Internal.Text.getSelectedTextAreas():0},GetLastPageNoRequest:function(){return this.ajax.latestSelectedPage},
GetDisplayedArea:function(){if(this.serverCtx){var b=a.dom.viewerArea.getBoundingClientRect(),d=this.GetCurrentPage(),e=a.Internal.Pages.getPageWidth(d),f=a.Internal.Pages.getPageHeight(d),g=this.Internal.Coordinates.clienttodocument(d,b.left,b.top,1),k=this.Internal.Coordinates.clienttodocument(d,b.left+b.width,b.top,1),m=this.Internal.Coordinates.clienttodocument(d,b.left+b.width,b.top+b.height,1);b=this.Internal.Coordinates.clienttodocument(d,b.left,b.top+b.height,1);d=Math.max(Math.min(g.x,Math.min(k.x,
Math.min(m.x,b.x))),0);var p=Math.max(Math.min(g.y,Math.min(k.y,Math.min(m.y,b.y))),0);return{left:d,top:p,width:Math.min(Math.max(g.x,Math.max(k.x,Math.max(m.x,b.x))),e)-d,height:Math.min(Math.max(g.y,Math.max(k.y,Math.max(m.y,b.y))),f)-p}}return{left:0,top:0,width:0,height:0}},GetSelectionAreaCoordinates:function(){return this.serverCtx?this.Internal.Selection.getSelectionAreaCoordinates():{left:0,top:0,width:0,height:0}},SetSelectionAreaCoordinates:function(a){return this.serverCtx?this.Internal.Selection.setSelectionAreaCoordinates(a):
DocuViewareAPI.Status.GenericError},GetViewerScrollLeft:function(){return this.Internal.Coordinates.getViewerScrollLeft()},GetViewerScrollTop:function(){return this.Internal.Coordinates.getViewerScrollTop()},SetViewerScrollLeft:function(a){return this.Internal.Coordinates.setViewerScrollLeft(a)},SetViewerScrollTop:function(a){return this.Internal.Coordinates.setViewerScrollTop(a)},ClearSelectionArea:function(){return this.serverCtx?(this.Internal.Selection.clearSelectionArea(),DocuViewareAPI.Status.OK):
DocuViewareAPI.Status.GenericError},GetSelectedThumbnailItems:function(){return this.serverCtx?this.Internal.Thumbnails.getSelectedThumbnails(!0):null},SetThumbnailSelected:function(a,b){return this.serverCtx?this.Internal.Thumbnails.setThumbnailSelected(a,b):DocuViewareAPI.Status.GenericError},GetCurrentZoom:function(){return this.serverCtx?this.serverCtx.zoom:0},SetCurrentZoom:function(b){return Math.round(1E3*b)===Math.round(1E3*a.serverCtx.zoom)?DocuViewareAPI.Status.OK:a.ajax.PostBaseRequest("zoomset",
{data:{zoom:b},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1)}},!1)},GetCurrentViewRotation:function(){return this.serverCtx?this.serverCtx.viewRotation:0},GetCurrentPageRotation:function(){return this.serverCtx?this.serverCtx.pageRotation:0},GetCurrentPageRenderRotation:function(){return this.serverCtx?this.serverCtx.renderRotation:0},ToggleLoadFromUriDialog:function(){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.SetLoadFromUriDialogVisibility(!this.dom.isLoadFromUriDialogVisible);
return DocuViewareAPI.Status.OK},DirectSave:function(b,d,e){var c="*"===a.serverCtx.allowedExportFormats?"pdf":a.serverCtx.allowedExportFormats.split(",")[0];if(null==b)b={fileName:a.serverCtx.fileName,format:c,range:"*",dropAnnotations:!1,flattenAnnotations:!1};else{if(null==b.format)b.format=c;else if(null!=b.format&&"*"!==a.serverCtx.allowedExportFormats&&!1===a.serverCtx.allowedExportFormats.split(",").some(function(a){return b.format.toLowerCase()===a.toLowerCase()}))return DocuViewareAPI.Status.GenericError;
null==b.range&&(b.range="*");null==b.fileName&&(b.fileName=a.serverCtx.fileName);null==b.dropAnnotations&&(b.dropAnnotations=!1);null==b.flattenAnnotations&&(b.flattenAnnotations=!1)}return a.Save(b.fileName,b.format,b.range,b.dropAnnotations,b.flattenAnnotations,d,e)},ToggleSaveDialog:function(b,d){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(dvJQuery(a.dom.saveDialog),a.Localize("_title_save_dialog"),null,function(){dvJQuery("[name='savePageRangeInput"+
a.uniqueID+"']").val("");var b=a.GetSelectedThumbnailItems();1==b.length&&b[0]===a.GetCurrentPage()?dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):0<b.length?(dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=2]:radio").prop("checked",!0).trigger("change"),dvJQuery("[name='savePageRangeInput"+a.uniqueID+"']").val(b.join())):dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change");dvJQuery(a.dom.saveDialog).find("input[name='saving_filename_input"+
a.uniqueID+"']").val(a.serverCtx.fileName)},null,[{text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.saveDialog).dvDialog("close")}},{text:a.Localize("_label_save"),"class":"btn-valid",click:function(){var c=dvJQuery(a.dom.saveDialog).find("input[name='saving_filename_input"+a.uniqueID+"']").val(),e=dvJQuery(a.dom.saveDialog).find("select[name='save_extension_select"+a.uniqueID+"']").find("option:selected").val(),h=dvJQuery(a.dom.saveDialog).find("input[name='savePageRangeInput"+a.uniqueID+
"']").val(),f=1===parseInt(dvJQuery(a.dom.saveDialog).find("select[name='save_content_select"+a.uniqueID+"']").find("option:selected").val())?!0:!1,g=dvJQuery(a.dom.saveDialog).find("input[name='save_content_burn_annot"+a.uniqueID+"']").is(":checked");1==g&&(f=!0);a.Save(c,e,h,f,g,b,d)==DocuViewareAPI.Status.OK&&dvJQuery(a.dom.saveDialog).dvDialog("close")}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},TwainToggleAcquisitionDialog:function(b,d){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;
a.DisplayDialogForm(dvJQuery(a.dom.twainAcquisitionDialog),a.Localize("button__twain_acquisition"),null,function(){a.Internal.Twain.updateTwainAcquisitionDialogMessageBox();dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",.3).hide();dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0);dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");var b=
function(b){a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(b.twainStatus,b.message);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show();dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0);dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")};a.GetTwainAcquisitionServiceInfo(function(c){parseInt(c.ServiceVersionResult)>=a.twainServiceSupportedVersion?
a.GetTwainAcquisitionSources(function(b){if(b.GetTwainSourcesResult&&b.GetTwainSourcesResult.sources.length){dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!1);dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").removeClass("dvUi-state-disabled").removeClass("dvUi-dvSelectmenu-disabled").css("opacity",1);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).find("option").remove().end();if(b.GetTwainSourcesResult.sources&&0<b.GetTwainSourcesResult.sources.length){for(var c=
0;c<b.GetTwainSourcesResult.sources.length;c++){var d=dvJQuery("<option>"),e=b.GetTwainSourcesResult.sources[c];d.attr("value",e.sourceName);d.html(e.sourceName);(!b.GetTwainSourcesResult.defaultSource&&1==c||b.GetTwainSourcesResult.defaultSource&&(b.GetTwainSourcesResult.defaultSource==e.sourceName||b.GetTwainSourcesResult.defaultSource+" (64-bit)"==e.sourceName))&&d.prop("selected",!0);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).append(d)}dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+
a.uniqueID).dvSelectmenu&&dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu("destroy");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu()}a.serverCtx.enablePageAppending?dvJQuery("[name='inputTwainAcquisitionDestination"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):(dvJQuery("[name='inputTwainAcquisitionDestination"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change"),
dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("*").prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled").css("opacity",.3));dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).hide();dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled")}else a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.WARNING,
a.Localize("_twain_connector_no_sources")),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show(),dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")},b):(c=a.Localize("_twain_connector_bad_version"),a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.BAD_VERSION,c),dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",
!0),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show(),dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled"))},b)!=DocuViewareAPI.Status.OK&&dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")},null,[{text:a.Localize("_label_cancel"),click:function(){if(a.callbacks.onTwainAcquisitionDialogCancelButtonClick)a.callbacks.onTwainAcquisitionDialogCancelButtonClick();
dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")}},{id:"twainAcquisitionDialogAcquireButton"+a.uniqueID,text:a.Localize("button__twain_acquire"),"class":"btn-valid",click:function(){var b=dvJQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionSourceSelect"+a.uniqueID+"']").find("option:selected").val();0==dvJQuery(a.dom.twainAcquisitionDialog).find("input[name='inputTwainAcquisitionDestination"+a.uniqueID+"']:checked").val()?a.TwainAcquireToNewDocument(b)==DocuViewareAPI.Status.OK&&
dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close"):a.TwainAcquireToCurrentDocument(b,dvJQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionDestinationAppendSelect"+a.uniqueID+"']").find("option:selected").val())==DocuViewareAPI.Status.OK&&dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},TwainAcquireToNewDocument:function(b,d,e){return a.Internal.Twain.acquire(b,function(b){a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b.fileData,
"image/tiff",b.fileName),0,"",b.fileContentEncoding);d&&"function"===typeof d&&d()},function(a){e&&"function"===typeof e&&e(a)})},TwainAcquireToCurrentDocument:function(b,d,e,f){return!d||0>d||3<d||!a.serverCtx.enablePageAppending?DocuViewareAPI.Status.GenericError:a.Internal.Twain.acquire(b,function(b){a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b.fileData,"image/tiff",b.fileName),d,"",b.fileContentEncoding);e&&"function"===typeof e&&e()},function(a){f&&"function"===typeof f&&
f(a)})},TwainSetConfig:function(b,d,e,f,g,k,m){"boolean"===typeof b&&(a.twainSourceConfig.enableCustomConfiguration=b);"boolean"===typeof d&&(a.twainSourceConfig.selectFeeder=d);Number.isInteger(e)&&(a.twainSourceConfig.resolution=e);Number.isInteger(f)&&(a.twainSourceConfig.bitDepth=f);"boolean"===typeof g&&(a.twainSourceConfig.enableDuplex=g);"boolean"===typeof k&&(a.twainSourceConfig.hideUI=k);if(m)if(Array.isArray(m)){b=[];for(d=0;d<m.length;d++)m[d].hasOwnProperty("capability")&&m[d].hasOwnProperty("value")&&
Number.isInteger(m[d].capability)&&"string"===typeof m[d].value&&b.push(m[d]);a.twainSourceConfig.extConfig=0!==b.length?b:null}else a.twainSourceConfig.extConfig=null;else a.twainSourceConfig.extConfig=null;return DocuViewareAPI.Status.OK},ToggleCommentDialog:function(b,d){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;"comment"===b?a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog"),null,function(){var b=null!=a.Internal.Annotations.defaultAuthor?
a.Internal.Annotations.defaultAuthor:a.Localize("label_comment_anonymous");dvJQuery(a.dom.commentsAuthorInput).val(b);dvJQuery(a.dom.commentAnswerBox).hide();dvJQuery(a.dom.commentContentBox).show();dvJQuery(a.dom.commentStatusBox).hide();dvJQuery(a.dom.commentMessageInput).val("").focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_publish"),
"class":"btn-valid",click:function(){var b=dvJQuery(a.dom.commentsAuthorInput).val(),c=a.Internal.Annotations.defaultProperties[2048];c.previousGuid=a.dom.selectedAnnotation.annotApp.id;c.text=dvJQuery(a.dom.commentMessageInput).val();a.ajax.PostBaseRequest("newannotationcomment",{data:{annots:[{extProperties:{author:b},properties:c,ownerAnnotType:a.dom.selectedAnnotation.annotApp.properties.type,pageNo:a.dom.selectedAnnotation.annotApp.pageNo}]},success:function(b){if((b="string"===typeof b?eval("("+
b+")"):b)&&null!=b.annotApp&&b.annotApp.status===DocuViewareAPI.Status.OK){if(a.Internal.Annotations.addAnnotationComment(b),a.refreshCommentsPanel(),a.SelectSnapIn("comments",!0),a.Internal.Annotations.selectAnnotationCommentById(b.annotApp.id,!0,!1),a.callbacks.onCommentAdded)a.callbacks.onCommentAdded({id:b.annotApp.id,pageNo:b.annotApp.pageNo})}else a.ajax.HandleError(b)}},!1);dvJQuery(a.dom.commentDialog).dvDialog("close")}}]):"edit"===b?a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog_edit"),
null,function(){dvJQuery(a.dom.commentAnswerBox).hide();dvJQuery(a.dom.commentContentBox).show();dvJQuery(a.dom.commentStatusBox).show();for(var b=0;b<a.cache.AnnotsComments.length;b++){var c=a.cache.AnnotsComments[b];if(c.annotApp.id===d){dvJQuery(a.dom.commentMessageInput).val(c.annotApp.properties.text);dvJQuery(a.dom.commentDialog).find("select[name='commentStatusSelect"+a.uniqueID+"']").find("option[value='"+c.annotApp.properties.reviewStatus+"']").prop("selected",!0);dvJQuery(a.dom.commentsAuthorInput).val(c.annotApp.author);
c.annotApp.properties.allowReview?dvJQuery(a.dom.commentStatusSelect).attr("disabled",!1):dvJQuery(a.dom.commentStatusSelect).attr("disabled",!0);c.annotApp.canDelete?dvJQuery(":button:contains('"+a.Localize("_label_delete")+"')").prop("disabled",!1).removeClass("ui-state-disabled"):dvJQuery(":button:contains('"+a.Localize("_label_delete")+"')").prop("disabled",!0).addClass("ui-state-disabled");break}}dvJQuery(a.dom.commentMessageInput).focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),
click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogDeleteButton"+a.uniqueID,text:a.Localize("_label_delete"),click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("_title_confirm_comment_removal"),null,function(){dvJQuery(a.dom.commentDialogModalOverlay).show();dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("_message_confirm_comment_removal"))},function(){dvJQuery(a.dom.commentDialogModalOverlay).hide()},[{text:a.Localize("_label_no"),
click:function(){dvJQuery(a.dom.commentDialogModalOverlay).hide();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");dvJQuery(a.dom.modalOverlayArea).show()}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){if(null!=a.cache.AnnotsComments)for(var b=a.GetCurrentPage(),c=0;c<a.cache.AnnotsComments.length;c++)if(a.cache.AnnotsComments[c].annotApp.pageNo===b&&a.cache.AnnotsComments[c].annotApp.id===d){a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+
"/annotupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({annots:[{properties:a.cache.AnnotsComments[c].annotApp.properties,"delete":!0,pageNo:a.cache.AnnotsComments[c].annotApp.pageNo,id:a.cache.AnnotsComments[c].annotApp.id}],sessionID:a.ajax.sessionID,contextID:a.ajax.contextID}),contentType:"application/json",success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.annots)for(var c=0;c<b.annots.length;c++){if(null!=b.annots[c].deletedAnnotsCommentId)for(var e=0;e<b.annots[c].deletedAnnotsCommentId.length;e++)a.Internal.Annotations.deleteAnnotationComment(b.annots[c].deletedAnnotsCommentId[e],
!1);a.Internal.Annotations.deleteAnnotationComment(d,!0);if(a.callbacks.onCommentDeleted)a.callbacks.onCommentDeleted({id:b.annots[c].id,pageNo:b.annots[c].pageNo})}else a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b)}});break}dvJQuery(a.dom.commentDialogModalOverlay).hide();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");dvJQuery(a.dom.commentDialog).dvDialog("close")}}])}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_save"),"class":"btn-valid",
click:function(){var b=dvJQuery(a.dom.commentMessageInput).val(),c=dvJQuery(a.dom.commentDialog).find("select[name='commentStatusSelect"+a.uniqueID+"']").find("option:selected").val(),e=dvJQuery(a.dom.commentsAuthorInput).val();if(null!=a.cache.AnnotsComments){for(var f=a.GetCurrentPage(),h=null,g=0;g<a.cache.AnnotsComments.length;g++)if(a.cache.AnnotsComments[g].annotApp.pageNo===f&&a.cache.AnnotsComments[g].annotApp.id===d){h=a.cache.AnnotsComments[g].annotApp.properties;h.text=b;h.reviewStatus=
parseInt(c);break}a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({annots:[{extProperties:{author:e},properties:h,pageNo:f,id:d}],sessionID:a.ajax.sessionID,contextID:a.ajax.contextID}),contentType:"application/json",success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.annots)for(var c=0;c<b.annots.length;c++){for(var e=0;e<a.cache.AnnotsComments.length;e++)if(a.cache.AnnotsComments[e].annotApp.pageNo===
f&&a.cache.AnnotsComments[e].annotApp.id===d){a.cache.AnnotsComments[e].annotApp=b.annots[c].annotApp;break}a.refreshCommentsPanel();a.Internal.Annotations.selectAnnotationCommentById(b.annots[c].annotApp.id,!0,!1);if(a.callbacks.onCommentEdited)a.callbacks.onCommentEdited({id:b.annots[c].annotApp.id,pageNo:b.annots[c].annotApp.pageNo})}else a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b)}})}dvJQuery(a.dom.commentDialog).dvDialog("close")}}]):"answer"===b&&a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),
a.Localize("_title_comment_dialog_answer"),null,function(){var b=null!=a.Internal.Annotations.defaultAuthor?a.Internal.Annotations.defaultAuthor:a.Localize("label_comment_anonymous");dvJQuery(a.dom.commentsAuthorInput).val(b);dvJQuery(a.dom.commentContentBox).hide();dvJQuery(a.dom.commentAnswerBox).show();dvJQuery(a.dom.commentStatusBox).hide();dvJQuery(a.dom.commentAnswerInput).val("").focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},
{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_publish"),"class":"btn-valid",click:function(){for(var b=1,c=-1,e=0;e<a.cache.AnnotsComments.length;e++)a.cache.AnnotsComments[e].annotApp.id===d&&(b=a.cache.AnnotsComments[e].annotApp.pageNo,c=a.cache.AnnotsComments[e].ownerAnnotType);e=dvJQuery(a.dom.commentsAuthorInput).val();var f=a.Internal.Annotations.defaultProperties[2048];f.text=dvJQuery(a.dom.commentAnswerInput).val();f.pageNo=b;f.previousGuid=d;a.ajax.PostBaseRequest("newannotationcomment",
{data:{annots:[{extProperties:{author:e},properties:f,ownerAnnotType:c,pageNo:b}]},success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.annotApp&&b.annotApp.status===DocuViewareAPI.Status.OK){if(a.Internal.Annotations.addAnnotationComment(b),a.refreshCommentsPanel(),a.Internal.Annotations.selectAnnotationCommentById(b.annotApp.id,!0,!1),a.callbacks.onCommentAdded)a.callbacks.onCommentAdded({id:b.annotApp.id,pageNo:b.annotApp.pageNo})}else a.ajax.HandleError(b)}},!1);dvJQuery(a.dom.commentDialog).dvDialog("close")}}]);
return DocuViewareAPI.Status.OK},TogglePrintDialog:function(b,d){if("undefined"===typeof c)var c=null;if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(dvJQuery(a.dom.printDialog),a.Localize("_title_print_dialog"),null,function(){dvJQuery("[name='printPageRangeInput"+a.uniqueID+"']").val("");var b=a.GetSelectedThumbnailItems();1==b.length&&b[0]===a.GetCurrentPage()?dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):
0<b.length?(dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=2]:radio").prop("checked",!0).trigger("change"),dvJQuery("[name='printPageRangeInput"+a.uniqueID+"']").val(b.join())):dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change")},null,[{id:"printDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){if(a.Internal.Print.isPrinting){a.Internal.Print.isPrinting=!1;dvJQuery(a.dom.printProgressbarDiv).remove();
var b=document.getElementById("printProgressionText"+a.uniqueID);b.parentNode.removeChild(b)}dvJQuery(a.dom.printDialog).dvDialog("close")}},{id:"printDialogPrintButton"+a.uniqueID,text:a.Localize("_label_print"),"class":"btn-valid",click:function(){null===a.dom.printDialogPrintButton&&(a.dom.printDialogPrintButton=dvJQuery("#printDialogPrintButton"+a.uniqueID));var c=dvJQuery(a.dom.printDialog).find("select[name='print_content_select"+a.uniqueID+"']").find("option:selected").val(),e=dvJQuery(a.dom.printDialog).find("select[name='print_destination_select"+
a.uniqueID+"']").find("option:selected").val(),f=a.dom.printPageRangeInput.value;dvJQuery(".dvUi-dialog-buttonset").before("<div id='printProgressionText"+a.uniqueID+"'></div>");dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");var h=dvJQuery("<div>").css({width:"100%"}).attr("id","printProgressbarDiv"+a.uniqueID).append("<div>");h.insertBefore(a.dom.printDialog);var g=new DocuViewareProgressbar({bg:"#acf",target:h.get(0),
id:"printProgressbar"+a.uniqueID});g.go(0);a.Internal.Print.printPages(0==c,f,e,function(b,c){document.getElementById("printProgressionText"+a.uniqueID).innerHTML=a.Localize("label_printing_progess").replace("#",b).replace("@",c);g.go(100*b/c)},function(){h.remove();var c=document.getElementById("printProgressionText"+a.uniqueID);c.parentNode.removeChild(c);dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");dvJQuery(a.dom.printDialog).dvDialog("close");
b&&b()},function(){h.remove();var b=document.getElementById("printProgressionText"+a.uniqueID);b.parentNode.removeChild(b);dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");dvJQuery(a.dom.printDialog).dvDialog("close");d&&d()})!=DocuViewareAPI.Status.OK&&(h.remove(),c=document.getElementById("printProgressionText"+a.uniqueID),c.parentNode.removeChild(c),dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled"))}}]);
this.dom.updateButtons();return DocuViewareAPI.Status.OK},LaunchDirectPrint:function(b,d,e){"undefined"===typeof b&&(b={removeAnnontations:!1,range:"*",destination:0});var c=b.removeAnnontations||!1,f=b.range||"*";b=b.destination||0;a.DisplayPendingActionNotification();a.Internal.Print.printPages(!c,f,b,function(b,c){b===c&&a.HidePendingActionNotification()},d,e)},CopySelectedTextToClipboard:function(){var b=this.GetSelectedText();if(null!=b&&""!=b){var d=dvJQuery("<textarea>");d.css({position:"absolute",
left:"-1000px",top:"-1000px"});d.addClass("dvTemporaryTextToCopy"+a.uniqueID);d.text(b);dvJQuery(a.dom.mainArea).append(d);document.querySelector(".dvTemporaryTextToCopy"+a.uniqueID).select();try{var e=document.execCommand("copy");d.remove();if(!e)throw"failed";}catch(q){a.dom.copyTextInput.value=b,a.DisplayDialogForm(dvJQuery(a.dom.copyDialog),a.Localize("_title_copy_dialog"),null,function(){a.dom.copyTextInput.focus()},null,[{text:a.Localize("_label_close"),"class":"btn-valid",click:function(){dvJQuery(a.dom.copyDialog).dvDialog("close")}}])}this.dom.updateButtons();
return DocuViewareAPI.Status.OK}},HighlightSelectedText:function(a){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var b=this.Internal.Text.getSelectedTextCoordinatesOnDocument();if(0<b.length){for(var c=[],d=0;d<b.length;d++)c.push({type:2,pageNo:b[d].pageNo,coordinates:{left:b[d].left,top:b[d].top,height:b[d].height,width:b[d].width},appearance:{fillColor:null!=a?a:"#FFFF00",rotation:0,squaredBox:!1},common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,
canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:""}});this.AddAnnot(c,!1,null,null,"highlight");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},StrikeoutSelectedText:function(a){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var b=this.Internal.Text.getSelectedTextCoordinatesOnDocument();if(0<
b.length){for(var c=[],d=0;d<b.length;d++)c.push({type:3,pageNo:b[d].pageNo,coordinates:{left:b[d].left,top:b[d].top+b[d].height/2,height:.001,width:b[d].width},appearance:{borderWidth:.02,dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:null!=a?a:"#FF0000"},common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,
tag:"",publicTag:""}});this.AddAnnot(c,!1,null,null,"strikeout");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},UnderlineSelectedText:function(a){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var b=this.Internal.Text.getSelectedTextCoordinatesOnDocument();if(0<b.length){for(var c=[],d=0;d<b.length;d++)c.push({type:3,pageNo:b[d].pageNo,coordinates:{left:b[d].left,top:b[d].top+
b[d].height,height:.001,width:b[d].width},appearance:{borderWidth:.02,dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:null!=a?a:"#FF0000"},common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:"",publicTag:""}});this.AddAnnot(c,!1,null,null,"underline");this.Internal.Text.clearSelection();
this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},RedactSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var c=this.Internal.Text.getSelectedTextCoordinatesOnDocument();if(0<c.length){for(var d=[],e=0;e<c.length;e++){var f={type:17,pageNo:c[e].pageNo,coordinates:{left:c[e].left,top:c[e].top,height:c[e].height,width:c[e].width},appearance:null,common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,
canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:""}};f.appearance=a.Internal.Annotations.getAnnotPropertiesValues(17);b&&(f.appearance.fillColor=b);d.push(f)}this.AddAnnot(d,!1,null,null,"redaction mark");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},GetSelectedText:function(){return a.Internal.Text.getSelectedText()},
AddSelectedTextContextMenuItem:function(b,d,e){if(b&&"function"===typeof d&&this.dom.viewerContextMenu){var c=document.createElement("a");c.href="#";c.className="dv-list-group-item";c.title=b;c.style.color=this.dom.UIconfig.strokeColor;var f=document.createElement("span");f.className="context-menu-icon";e&&e.nodeName&&"svg"===e.nodeName?(e.setAttribute("width","100%"),e.setAttribute("height","100%"),f.appendChild(e)):f.innerHTML="string"===typeof e?e:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><path d="M71.6,110.7h60.3v76.1H71.6L71.6,110.7z M296.4,81.6h39.8v49.8h-39.8V81.6z M141.5,275.4h43.9v55.4h-43.9V275.4z\t M321.1,435.9H354v41.5h-32.9V435.9z M295.1,27.7h23.3v29.1h-23.3V27.7z M177.2,142.5h38.4v49.8h-38.4V142.5z M256.7,357h50.7v65\th-50.7V357z M78.5,345.9h23.3V375H78.5V345.9z M192.3,365.3h34.3v42.9h-34.3V365.3z M345.8,351.5h20.6v26.3h-20.6V351.5z\t M207.3,232.5h23.3v29.1h-23.3V232.5z M400.6,182.7h23.3v29.1h-23.3V182.7z M129.2,408.2h34.3v42.9h-34.3V408.2z M114.1,47h23.3\tv29.1h-23.3V47z M386.9,390.2h35.6v44.3h-35.6V390.2z M256.7,0h-60.3v92.7H269V11.1C269,11.1,256.7,0,256.7,0z M247.1,76.1h-38.4V72\th38.4V76.1z M256.7,59.5h-48V54h48V59.5z M256.7,41.5h-48V36h48C256.7,36,256.7,41.5,256.7,41.5z M256.7,23.5h-48V18h48V23.5z\t M256.7,11.1V2.8l9.6,8.3C266.3,11.1,256.7,11.1,256.7,11.1z M94.9,215.9H34.6v92.7h72.7v-81.6C107.3,226.9,94.9,215.9,94.9,215.9z\t M86.7,293.4H48.3v-5.5h38.4V293.4z M94.9,275.4h-48v-5.5h48V275.4z M94.9,257.4h-48v-5.5h48V257.4z M94.9,240.8h-48v-5.5h48\tC94.9,235.2,94.9,240.8,94.9,240.8z M94.9,226.9v-8.3l9.6,8.3H94.9z M374.6,177.1l-21.9-19.4H240.2v171.6h134.4\tC374.6,329.3,374.6,177.1,374.6,177.1z M336.2,296.1h-71.3v-5.5h71.3C336.2,290.6,336.2,296.1,336.2,296.1z M352.7,272.6h-87.7v-5.5\th87.7V272.6z M352.7,247.7h-87.7v-5.5h87.7V247.7z M352.7,222.8h-87.7v-5.5h87.7V222.8z M352.7,197.9h-87.7v-4.2h87.7\tC352.7,193.7,352.7,197.9,352.7,197.9z M352.7,177.1v-15.2l17.8,15.2H352.7z M465.1,244.9h-60.3v92.7h72.7V256\tC477.4,256,465.1,244.9,465.1,244.9z M455.5,322.4h-38.4v-5.5h38.4V322.4z M465.1,304.4h-48v-5.5h48V304.4z M465.1,286.4h-48v-5.5\th48V286.4z M465.1,268.5h-48v-5.5h48C465.1,262.9,465.1,268.5,465.1,268.5z M465.1,256v-8.3l9.6,8.3H465.1z M402,96.9h-35.6v54H413\tv-44.3C413,106.6,402,96.9,402,96.9z M393.8,139.8h-19.2v-5.5h19.2V139.8z M404.7,128.7h-30.2v-5.5h30.2V128.7z M404.7,116.2h-30.2\tv-5.5h30.2C404.7,110.7,404.7,116.2,404.7,116.2z M402,106.6v-8.3l9.6,8.3H402z M260.8,458h-35.6v54h46.6v-44.3\tC271.8,467.7,260.8,458,260.8,458z M252.6,500.9h-19.2v-5.5h19.2V500.9z M263.5,489.9h-30.2v-5.5h30.2 C263.5,484.3,263.5,489.9,263.5,489.9z M263.5,477.4h-30.2v-5.5h30.2V477.4z M259.4,467.7v-8.3l9.6,8.3H259.4z"/></svg>';
c.appendChild(f);e=document.createElement("span");e.className="context-menu-label";e.innerText=b;c.appendChild(e);c.addEventListener("click",function(){var b=a.Internal.Text.getSelectedTextAreas();d(b);a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1)});a.cache.addedSelectedTextContextMenuItem.push(c);this.dom.viewerContextMenu.firstChild.appendChild(c);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},ResetSelectedTextContextMenu:function(){for(;0!=a.cache.addedSelectedTextContextMenuItem.length;)a.cache.addedSelectedTextContextMenuItem[0].parentNode.removeChild(a.cache.addedSelectedTextContextMenuItem[0]),
a.cache.addedSelectedTextContextMenuItem.splice(0,1);return DocuViewareAPI.Status.OK},AddAnnotationsActionButton:function(b,d,e){if(b&&d&&"function"===typeof e&&this.dom.annotationsActionButtons){var c=0,f=document.createElement("div"),h=dvJQuery("div[id^='annotationActionButtonsSplitter']").length+1;f.id="annotationActionButtonsSplitter"+h+this.uniqueID;f.style.fill=this.dom.UIconfig.strokeColor;f.style.height="16px";f.style.width="1px";f.style.marginLeft="8px";f.style.marginRight="8px";f.style.float=
"left";f.style.borderRight="solid";f.style.borderRightWidth="1px";f.style.borderRightColor=this.UIconfig.strokeColor;c+=dvJQuery(f).outerWidth()+2;this.dom.annotationsActionButtons.appendChild(f);c=document.createElement("div");h=dvJQuery("div[id^='annotationActionCustomButtons']").length+1;c.id="annotationActionCustom"+h+this.uniqueID;c.title=b;c.style.fill=this.dom.UIconfig.strokeColor;c.style.height="16px";c.style.width="16px";c.style.float="left";c.innerHTML=d;c.addEventListener("mouseenter",
function(){dvJQuery(this).css("cursor","pointer");dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor)});c.addEventListener("mouseleave",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});c.addEventListener("click",function(){e({id:a.dom.selectedAnnotation.annotApp.id})});this.dom.annotationsActionButtons.appendChild(c);this.Internal.Annotations.unselectAll();return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},ShowThumbnailsSnapIn:function(){return this.dom.thumbnailArea?
this.SelectSnapIn("thumbnails",!1):DocuViewareAPI.Status.GenericError},ShowBookmarksSnapIn:function(){return this.dom.bookmarksArea?this.SelectSnapIn("bookmarks",!1):DocuViewareAPI.Status.GenericError},ShowSearchSnapIn:function(){if(this.dom.searchArea){var b=this.SelectSnapIn("search",!1);b==DocuViewareAPI.Status.OK&&(a.dom.searchResultsContainer.style.height=dvJQuery(a.dom.searchArea).outerHeight(!0)-dvJQuery(a.dom.searchPanelForm).outerHeight(!0)+"px",dvJQuery(this.dom.searchValueInput).focus());
return b}return DocuViewareAPI.Status.GenericError},ShowAnnotationsSnapIn:function(){return this.dom.annotationsArea?this.SelectSnapIn("annotations",!1):DocuViewareAPI.Status.GenericError},ShowCommentsSnapIn:function(){return this.dom.commentsArea?this.SelectSnapIn("comments",!1):DocuViewareAPI.Status.GenericError},ShowRedactionSnapIn:function(){return this.dom.commentsArea?this.SelectSnapIn("redaction",!1):DocuViewareAPI.Status.GenericError},IsSnapinsPanelVisible:function(){return this.dom.leftSideArea?
"none"!=this.dom.leftSideContainerPanelsArea.style.display:!1},SetSnapinsPanelVisibility:function(b,d,e){if(!this.dom.leftSideArea)return DocuViewareAPI.Status.GenericError;var c=this.dom.leftSideContainerPanelsArea.style.display;if(b){if(!this.IsSnapinsPanelVisible()||d)d&&(d=Math.max(d,dvJQuery(a.dom.leftsideContainer).width()-dvJQuery(a.dom.leftSideContainerPanelsArea).width())),dvJQuery(a.dom.leftSideArea).animate({width:d?d:a.dom.leftSideArea.oldWidth},100,"linear",function(){dvJQuery(a.dom.leftsideContainer).css("width",
"");dvJQuery(a.dom.leftSideContainerPanelsArea).show(0,function(){if(c!=a.dom.leftSideContainerPanelsArea.style.display||e)a.events.onNewViewerSize(),a.dom.ensureSelectedThumbnailVisibility(!1)});dvJQuery(a.dom.leftSideArea).resizable("enable");d?a.dom.sidePanelResized():a.dom.sidePanelToggled(!1)})}else this.IsSnapinsPanelVisible()&&(this.UnselectSelectedSnapin(),a.dom.leftSideArea.oldWidth=d?d+"px":a.dom.leftSideArea.style.width,dvJQuery(a.dom.leftSideArea).animate({width:dvJQuery(a.dom.leftsideContainer).width()-
dvJQuery(a.dom.leftSideContainerPanelsArea).width()},100,"linear",function(){dvJQuery(a.dom.leftsideContainer).css("width",dvJQuery(a.dom.leftsideContainer).width()-dvJQuery(a.dom.leftSideContainerPanelsArea).width());dvJQuery(a.dom.leftSideContainerPanelsArea).hide(0,function(){if(c!=a.dom.leftSideContainerPanelsArea.style.display||e)a.events.onNewViewerSize()});dvJQuery(a.dom.leftSideArea).resizable("disable");a.dom.sidePanelToggled(!0)}));return DocuViewareAPI.Status.OK},GetSnapInPanelWidth:function(){return this.IsSnapinsPanelVisible()?
parseInt(a.dom.leftSideArea.style.width.replace("px","")):0},SetSnapInPanelWidth:function(b){return this.dom.leftSideArea&&b===parseInt(b)?null==a.dom.selectedSnapin?(a.dom.leftSideArea.oldWidth=Math.max(b,dvJQuery(a.dom.leftsideContainer).width()-dvJQuery(a.dom.leftSideContainerPanelsArea).width()),this.SelectFirstAvailableSnapin()):this.SetSnapinsPanelVisibility(!0,b,!0):DocuViewareAPI.Status.GenericError},AddCustomSnapIn:function(b,d,e,f,g,k){function c(a){return"object"===typeof HTMLElement?a instanceof
HTMLElement:a&&"object"===typeof a&&null!==a&&1===a.nodeType&&"string"===typeof a.nodeName}if(!this.dom.leftSideArea)return DocuViewareAPI.Status.GenericError;var h=document.createElement("div");h.id=a.uniqueID+"_snapin_button_"+b;h.className="leftsidebutton";h.title=d;h.style.display=!0===g?"block":"none";h.style.borderTop="1px solid "+a.dom.UIconfig.snapInButtonBorderTop;c(e)?h.innerHTML=e.outerHTML:h.innerHTML=e;h.addEventListener("click",function(){a.SnapInButton_Click(b)});h.addEventListener("mouseenter",
function(){a.events.onSnapInButtonMouseEnter(this)});h.addEventListener("mouseleave",function(){a.events.onSnapInButtonMouseLeave(this)});document.getElementById("snapinButtonStrip"+a.uniqueID).appendChild(h);e=document.createElement("div");e.id=a.uniqueID+"_snapin_panel_"+b;e.className="panel";c(f)?e.innerHTML=f.outerHTML:e.innerHTML=f;document.getElementById("leftsidePanels"+a.uniqueID).appendChild(e);a.snapIns.push({snapInID:a.uniqueID+"_snapin_panel_"+b,buttonID:a.uniqueID+"_snapin_button_"+b,
name:b,label:d,onSelection:null==k?null:k});return DocuViewareAPI.Status.OK},FindSnapIn:function(b){if(null!=a.snapIns)for(var c=0;c<a.snapIns.length;c++)if(a.snapIns[c].name==b)return a.snapIns[c];return null},ToggleSnapIn:function(b,d){return(b=a.FindSnapIn(b))?(d?dvJQuery("#"+b.buttonID).show():(dvJQuery("#"+b.buttonID).hide(),!0===a.IsSnapinsPanelVisible()&&0!==a.SelectFirstAvailableSnapin()&&a.SetSnapinsPanelVisibility(!1)),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},UnselectSelectedSnapin:function(){if(this.dom.selectedSnapin){var a=
this.FindSnapIn(this.dom.selectedSnapin);if(a){var b=document.getElementById(a.snapInID);a=document.getElementById(a.buttonID);if(b&&a)return this.dom.selectedSnapin=null,null!=this.dom.snapinsHeaderLabel&&(this.dom.snapinsHeaderLabel.innerHTML=""),dvJQuery(b).removeClass("active"),dvJQuery(a).removeClass("active"),dvJQuery(a).attr("aria-selected","false"),a.style.fill="",a.style.backgroundColor="",a.style.borderBottomColor=this.dom.UIconfig.snapInButtonBorderBottom,a.style.borderTopColor=this.dom.UIconfig.snapInButtonBorderTop,
DocuViewareAPI.Status.OK}this.dom.selectedSnapin=null}return DocuViewareAPI.Status.GenericError},SelectFirstAvailableSnapin:function(b){if(null!=a.snapIns)for(b=0;b<a.snapIns.length;b++){var c=document.getElementById(a.snapIns[b].snapInID),d=document.getElementById(a.snapIns[b].buttonID);if(c&&d&&"none"!=d.style.display)return this.SelectSnapIn(a.snapIns[b].name,!0)}return DocuViewareAPI.Status.GenericError},SelectSnapIn:function(b,d){if(this.dom.selectedSnapin==b)return DocuViewareAPI.Status.OK;
var c=this.SetSnapInVisibility(b,!0);if(c==DocuViewareAPI.Status.OK){if(c=this.FindSnapIn(b)){var e=document.getElementById(c.buttonID),f=document.getElementById(c.snapInID);if(e&&f&&"none"!=e.style.display){this.UnselectSelectedSnapin();null!=this.dom.snapinsHeaderLabel&&(this.dom.snapinsHeaderLabel.innerHTML=c.label);dvJQuery(e).addClass("active");dvJQuery(e).attr("aria-selected","true");e.style.fill=this.dom.UIconfig.headerColor;e.style.backgroundColor=this.dom.UIconfig.panelBackColor;e.style.borderBottomColor=
this.dom.UIconfig.panelBackColor;e.style.borderTopColor=this.dom.UIconfig.panelBackColor;dvJQuery(f).addClass("active");if(c.onSelection)if("[object Function]"==={}.toString.call(c.onSelection))c.onSelection();else eval(c.onSelection);dvJQuery(f).focus();this.SetSnapinsPanelVisibility(!0);this.dom.selectedSnapin=b;if(!d)if("thumbnails"===b){if(a.callbacks.onThumbnailsSnapInSelected)a.callbacks.onThumbnailsSnapInSelected()}else if("bookmarks"===b){if(a.callbacks.onBookmarksSnapInSelected)a.callbacks.onBookmarksSnapInSelected()}else if("search"===
b){if(a.callbacks.onSearchSnapInSelected)a.callbacks.onSearchSnapInSelected()}else if("annotations"===b){if(a.callbacks.onAnnotationsSnapInSelected)a.callbacks.onAnnotationsSnapInSelected()}else if("comments"===b&&a.callbacks.onCommentsSnapInSelected)a.callbacks.onCommentsSnapInSelected();return DocuViewareAPI.Status.OK}}return DocuViewareAPI.Status.GenericError}return c},SetSnapInVisibility:function(b,d){if(d&&"annotations"==b&&0==this.serverCtx.annotationEditorMode)return DocuViewareAPI.Status.GenericError;
var c=this.FindSnapIn(b);if(c){this.dom.selectedSnapin!=b||d||this.UnselectSelectedSnapin();var e=document.getElementById(c.buttonID);c=document.getElementById(c.snapInID);"redaction"==b&&d&&(dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors({defaultValue:"#000000",letterCase:"uppercase"}),dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(b){dvJQuery(b.target).parents().add(b.target).hasClass("minicolors")||
dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("margin-bottom","0px")}),dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("margin-bottom","175px");event.stopPropagation()}),dvJQuery(a.dom.redactionFill).find("#redaction_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.redactionFill).find("#redaction_fill_color_control"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("display","inline-block"));if(e&&c)return"none"!=e.style.display!=d&&(e.style.display=d?"":"none",c.style.display=d?"":"none"),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},Search:function(a,b,d,e,f){this.ClearSearch();this.SubmitSearch(a,b,d,e,f);this.dom.searchArea&&(this.dom.searchValueInput.value=a,this.dom.searchWholeWordInput.checked=b,this.dom.searchCaseSensitiveInput.checked=
d,this.dom.searchAnyWordInput.checked=e,dvJQuery(this.dom.searchPageSelect).filter("[value='"+f+"']").prop("checked",!0),dvJQuery(this.dom.searchPageSelect).dvButton("refresh"));return DocuViewareAPI.Status.OK},SetSearchSettings:function(a,b,d,e){this.dom.searchWholeWordInput.checked=a;this.dom.searchCaseSensitiveInput.checked=b;this.dom.searchAnyWordInput.checked=d;dvJQuery(this.dom.searchPageSelect).filter("[value='"+e+"']").prop("checked",!0);dvJQuery(this.dom.searchPageSelect).dvButton("refresh");
return DocuViewareAPI.Status.OK},SearchNavigateToOccurrence:function(b){return a.Internal.Search.occurences[b]&&(b=document.getElementById(a.uniqueID+"searchResultItem"+b))?(a.Internal.Search.navigateToResult(b),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},GetSearchResultsCount:function(){return a.Internal.Search._occurences?a.Internal.Search._occurences.length:0},GetCurrentSearchOccurrenceIdx:function(){return a.Internal.Search._currentOccurence?parseInt(a.Internal.Search._currentOccurence.dataset.idx):
-1},SubmitSearch:function(b,d,e,f,g){this.ShowSearchSnapIn();if(b){var c=[];c.push(0==g?a.GetCurrentPage():-1);return this.ajax.PostBaseRequest("textsearch",{data:{text:b,pages:c,wholeWord:d,caseSensitive:e,anyWord:f},success:function(c){c="string"===typeof c?eval("("+c+")"):c;var d=0;c&&c.status==DocuViewareAPI.Status.OK?(a.Internal.Search.addResults(b,c.occurences),0==c.occurences.length?a.callbacks.onSearchInvoked||a.ShowMessage({text:a.Localize("no_result"),backgroundColor:a.dom.UIconfig.headerColor,
icon:64,delay:5E3}):(d=c.occurences.length,a.Internal.Search.navigateToFirstResult(),a.dom.searchArea&&(a.dom.searchClearResultsButton.style.display="block"))):(a.callbacks.onSearchInvoked||a.ShowMessage({text:a.Localize("no_result"),backgroundColor:a.dom.UIconfig.headerColor,icon:64,delay:5E3}),a.Internal.Search.addResults(null,null),a.ajax.HandleError(c));if(a.callbacks.onSearchInvoked)a.callbacks.onSearchInvoked({occurrences:d})}},!1)}return DocuViewareAPI.Status.GenericError},UpdateLayout:function(){this.events.onResize();
return DocuViewareAPI.Status.OK},ClearSearch:function(){this.Internal.Search.clearResults();this.dom.searchArea&&(this.dom.searchValueInput.value="",this.dom.searchClearResultsButton.style.display="none");return DocuViewareAPI.Status.OK},CommentsClearSearch:function(){this.dom.commentsSearchArea&&(this.dom.commentsSearchValueInput.value="",this.dom.commentsSearchClearResultsButton.style.display="none");a.refreshCommentsPanel();return DocuViewareAPI.Status.OK},SubmitCommentsSearch:function(a){this.ShowCommentsSnapIn();
if(!a)return DocuViewareAPI.Status.GenericError},CommentsExpandCollapseAll:function(){dvJQuery(".dvtoggle").toggleClass("dvcolapsed").parents(".dvcomment-header").next(".dvcomment-content").slideToggle();dvJQuery(".dvtoggle").hasClass("dvcolapsed")?dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg viewBox="0 0 16 16" width="100%" height="100%" style="height:16px;width:16px;"><path d="M0,4v12h12V4H0z M11,15H1V5h10V15z"/><polygon points="13,3 13,13.5 14,14.5 14,2 1.5,2 2.5,3 "/><polygon points="15,1 15,11.5 16,12.5 16,0 3.5,0 4.5,1 "/><polygon points="3.2,8.5 2.7,9 6,12.4 9.3,9 8.7,8.5 6,11.3 "/></svg>'):
dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg viewBox="0 0 16 16" width="100%" height="100%" style="height:16px;width:16px;"><path d="M16,16H0V0h16V16z M0.9,15.1h14.1V0.9H0.9V15.1z"/><polygon points="6.1,10.8 6.6,11.3 9.9,8 6.6,4.7 6.1,5.2 8.8,8 "/></svg>')},SetLoadFromUriDialogVisibility:function(b){this.dom.isLoadFromUriDialogVisible!=b&&(b?(dvJQuery(this.dom.openFromUriArea).slideDown({complete:function(){dvJQuery(document).on("mousedown.toggleOpenUriEvent",function(b){dvJQuery(a.dom.openFromUriArea).is(dvJQuery(b.target))||
0!=dvJQuery(a.dom.openFromUriArea).has(dvJQuery(b.target)).length||a.ToggleLoadFromUriDialog()});dvJQuery(a.dom.addressBar).focus();dvJQuery(a.dom.addressBar).select();a.dom.isLoadFromUriDialogVisible=b}}),dvJQuery(this.dom.openFromUriButton).addClass("button_active")):(dvJQuery(document).unbind("mousedown.toggleOpenUriEvent"),dvJQuery(this.dom.openFromUriArea).slideUp({complete:function(){a.dom.isLoadFromUriDialogVisible=b}}),dvJQuery(this.dom.openFromUriButton).removeClass("button_active")),this.dom.updateButtons())},
LoadFromUri:function(b,d,e,f,g,k){function c(b){a.ajax.downloading=!1;0!=a.dom.progressbar.value()&&(a.dom.progressbar.go(100),a.dom.progressbar.value100=100);dvJQuery(a.dom.mainSpinner).hide();a.SetLoadFromUriDialogVisibility(!1);if(b){if(a.callbacks.onURIOpenSuccess)a.callbacks.onURIOpenSuccess()}else if(a.callbacks.onURIOpenError)a.callbacks.onURIOpenError()}function h(b){a.ajax.HandleError(b);c(!1)}function l(e){if(a.ajax.downloading&&(e="string"===typeof e?eval("("+e+")"):e,!e||!e.ignoreResponse))if(e&&
e.status==DocuViewareAPI.Status.OK)if(e.isTransfering){if(0<e.progress&&100>=e.progress){100!=e.progress&&(a.dom.progressbar.go(e.progress),a.dom.progressbar.value100=e.progress);var f=dvJQuery(a.dom.mainSpinnerContent);f.children(f.children.length-1).text(a.Localize("label__downloading_document")+" ("+e.progress+"%)")}a.ajax.PostBaseRequest("loadfromuri",{data:{transferID:a.ajax.transferID,progressRequest:!0,URI:b,fileName:d,password:g,ignoreFileHostingURI:null!=k?k:!1},success:l,error:h},!1,!0)}else c(!0),
a.ajax.SetNewServerCtx(e);else c(!1),a.ajax.HandleError(e)}if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.callbacks.onURIOpenError=f;this.callbacks.onURIOpenSuccess=e;this.ajax.downloading=!0;this.ajax.transferID=Date.now();e=dvJQuery(this.dom.mainSpinnerContent);e.children(e.children.length-1).text(this.Localize("label__loading_progress"));a.SetLoadFromUriDialogVisibility(!1);dvJQuery(this.dom.mainSpinner).show();a.ajax.PostBaseRequest("loadfromuri",{data:{transferID:a.ajax.transferID,
progressRequest:!1,URI:b,fileName:d,clientConfiguration:a.getConfig(),password:g,ignoreFileHostingURI:null!=k?k:!1},success:l,error:h},!1,!0);return DocuViewareAPI.Status.OK},ExitAnnotationDrawingMode:function(){2==this.events.mouseMode&&this.events.isDrawingPath&&(this.ResetScrollConfig(!1),this.dom.freehandCan.style.display="none",this.events.isDrawingPath=!1,this.Internal.Annotations.addAnnotInteractive(),this.dom.drawingModeArea.style.display="none",this.dom.modalOverlayArea.style.display="none");
a.dom.UIconfig.disableAnnotationDrawingModePanel&&(null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).removeClass("button_active"),null!=a.dom.freehandhighlighterAnnotButton&&dvJQuery(a.dom.freehandhighlighterAnnotButton).removeClass("button_active"),null!=a.dom.connectedLinesAnnotButton&&dvJQuery(a.dom.connectedLinesAnnotButton).removeClass("button_active"),null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).removeClass("button_active"));this.dom.addViewAreaTouchAction();
this.Internal.Annotations.stopAnnotInteractiveAdd();return DocuViewareAPI.Status.OK},IsFullScreenMode:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},ToggleFullscreen:function(){if(a.isSafari||a.isIOS||a.isIE9||a.isIE10||this.hasPendingAction(!1,!1,!1))return DocuViewareAPI.Status.GenericError;var b=this.IsFullScreenMode();if(b)document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():
document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{dvJQuery(a.dom.fullscreenButton).addClass("button_active");var d=a.dom.mainArea;d.requestFullscreen?(DocuViewareUtilities.addEvent(document,"fullscreenchange",function t(b){document.fullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"fullscreenchange",t,!1))},!1),d.requestFullscreen()):d.msRequestFullscreen?(DocuViewareUtilities.addEvent(document,
"MSFullscreenChange",function t(b){document.msFullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"MSFullscreenChange",t,!1))},!1),d.msRequestFullscreen()):d.mozRequestFullScreen?(DocuViewareUtilities.addEvent(document,"mozfullscreenchange",function t(b){document.mozFullScreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"mozfullscreenchange",t,!1))},!1),d.mozRequestFullScreen()):d.webkitRequestFullScreen&&(DocuViewareUtilities.addEvent(document,
"webkitfullscreenchange",function t(b){document.webkitFullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"webkitfullscreenchange",t,!1))},!1),d.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT));if(a.callbacks.onFullscreenModeChanged){if(!b)a.callbacks.onFullscreenModeChanged({newMode:!0})}else return DocuViewareAPI.Status.GenericError;a.dom.UIconfig.old_viewer_width=a.width;a.dom.UIconfig.old_viewer_height=a.height;a.dom.leftSideArea&&"none"!=a.dom.leftSideContainerPanelsArea.style.display&&
(b=window.screen.width/a.width,a.dom.leftSideArea.style.width=Math.round((a.dom.leftSideArea.style.width.replace("px","")||a.dom.leftSideArea.offsetWidth)*b)+"px");a.events.onNewViewerSize();a.dom.updateButtons()}return DocuViewareAPI.Status.OK},ExitFullscreen:function(){if(this.hasPendingAction(!1,!1,!1))return DocuViewareAPI.Status.GenericError;dvJQuery(a.dom.fullscreenButton).removeClass("button_active");a.dom.updateButtons();var b=a.dom.UIconfig.old_viewer_width/a.width;a.dom.leftSideArea&&("none"!=
a.dom.leftSideContainerPanelsArea.style.display?a.dom.leftSideArea.style.width=Math.round((a.dom.leftSideArea.style.width.replace("px","")||a.dom.leftSideArea.offsetWidth)*b)+"px":a.dom.leftSideContainerPanelsArea.style.width=Math.round(parseFloat(a.dom.leftSideContainerPanelsArea.style.width.replace("px",""))*b)+"px");a.events.onNewViewerSize();if(a.callbacks.onFullscreenModeChanged)a.callbacks.onFullscreenModeChanged({newMode:!1})},SetZoomMode:function(b){return a.ajax.PostBaseRequest("zoommode",
{data:{zoomMode:b},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1)}},!1)},IsMagnifierEnabled:function(){return a.Internal.Magnifier.isMagnifying},ToggleMagnifier:function(){return a.Internal.Magnifier.toggle()},EnableMagnifier:function(){return a.Internal.Magnifier.enable()},DisableMagnifier:function(){return a.Internal.Magnifier.disable()},SetMouseMode:function(b){a.events.mouseMode=b;var c=DocuViewareAPI.Status.OK;a.events.setCursor();a.Internal.Selection.selectionArea.hide();
this.IsMagnifierEnabled()&&this.DisableMagnifier();switch(b){case 0:this.dom.addViewAreaTouchAction();case 1:a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!1);a.events.ownMouseEvents=!1;break;case 3:this.dom.removeViewAreaTouchAction();a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);break;
case 4:this.dom.removeViewAreaTouchAction();a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);break;case 5:this.dom.removeViewAreaTouchAction(),a.events.ownMouseEvents=!0;default:c=DocuViewareAPI.Status.GenericError}a.dom.udpateMouseModeButtons(b);a.dom.updateButtons();return c},GetMouseMode:function(){return a.events.mouseMode},
NewViewerSizePreview:function(){if(!this.serverCtx.singlePageView||2==this.serverCtx.documentPosition){var b=DocuViewareUtilities.clonePageCanvasSizes(a.cache.pageCanvasSize);if(null!=b){var d=a.dom.getViewerContainer(),e=d.offsetWidth;d=d.offsetHeight;a.serverCtx.vScrollbarVisible&&(e-=a.dom.sbWidth);a.serverCtx.hScrollbarVisible&&(d-=a.dom.sbWidth);for(var f=b.length,g=!0,k=0,m=0;m<f;m++){m+1<f&&(k+=a.serverCtx.itemsVerticalSpacing);var p=b[m].Width,r=b[m].Height;g&&p>e&&(g=!1);k+=r}var w=k<d;if(w||
g){var x=0;for(m=0;m<f;m++)p=b[m].Width,r=b[m].Height,g&&(b[m].OffsetX=(e-p)/2),w&&(b[m].OffsetY=x+(d-k)/2),x+=r+a.serverCtx.itemsVerticalSpacing}a.SetupViewerArea(b,a.cache.pageCanvasZoom,!0,!0)}}},CanChangeZoom:function(){return!a.hasPendingAction(!0,!0,!0,!1)},ZoomPreview:function(b){b>a.serverCtx.zoomMax?b=a.serverCtx.zoomMax:b<a.serverCtx.zoomMin&&(b=a.serverCtx.zoomMin);if(Math.round(1E3*b)!==Math.round(1E3*a.cache.pageCanvasZoom)){a.events.restartZoomPreviewAutoSubmitter();var c=DocuViewareUtilities.clonePageCanvasSizes(a.cache.pageCanvasSizeNoPreview);
if(null!=c){var d=a.dom.getViewerContainer(),e=d.offsetWidth,f=d.offsetHeight;a.serverCtx.vScrollbarVisible&&(e-=a.dom.sbWidth);a.serverCtx.hScrollbarVisible&&(f-=a.dom.sbWidth);d=c.length;for(var g=b/a.serverCtx.zoom,k=0,m=0,p=0;p<d;p++)c[p].Width>m&&(m=c[p].Width);var r=m=0;for(p=0;p<d;p++){var w=c[p].Width*g,x=c[p].Height*g;w>m&&(m=w);c[p].OffsetY=k;c[p].OffsetX=0;c[p].Width=w;c[p].Height=x;p==d-1&&(r=k+x);k+=x+a.serverCtx.itemsVerticalSpacing}switch(a.serverCtx.documentPosition){case 0:g=0;k=
f>r&&0==c[0].OffsetY?(f-r)/2:0;break;case 1:g=e>m?e-m:0;k=f>r&&0==c[0].OffsetY?(f-r)/2:0;break;default:g=e>m?(e-m)/2:0;k=f>r&&0==c[0].OffsetY?(f-r)/2:0;break;case 4:k=g=0;break;case 5:g=e>m?e-m:0;k=0;break;case 6:g=e>m?(e-m)/2:0;k=0;break;case 7:g=0;k=f>r&&0==c[0].OffsetY?f-r:0;break;case 8:g=e>m?e-m:0;k=f>r&&0==c[0].OffsetY?f-r:0;break;case 9:g=e>m?(e-m)/2:0,k=f>r&&0==c[0].OffsetY?f-r:0}p=a.serverCtx.forceScrollBars||a.viewerHeight<r||!a.serverCtx.singlePageView&&1<a.serverCtx.pageCount;Math.round(m)<
Math.round(e)&&(p?a.serverCtx.vScrollbarVisible||(g-=a.dom.sbWidth/2):a.serverCtx.vScrollbarVisible&&(g+=a.dom.sbWidth/2));e=a.serverCtx.forceScrollBars||Math.round(a.viewerWidth)<Math.round(m);Math.round(r)<Math.round(f)&&(e?a.serverCtx.hScrollbarVisible||(k-=a.dom.sbWidth/2):a.serverCtx.hScrollbarVisible&&(k+=a.dom.sbWidth/2));for(p=0;p<d;p++)e=g,c[p].Width<m&&(e+=(m-c[p].Width)/2),0!=e&&(c[p].OffsetX+=e),0!=k&&(c[p].OffsetY+=k);d=a.Internal.Coordinates.getViewerScrollTop();m=a.Internal.Coordinates.getViewerScrollTopMax();
e=a.Internal.Coordinates.getViewerScrollLeft();f=a.Internal.Coordinates.getViewerScrollLeftMax();a.SetupViewerArea(c,b);a.dom.viewerArea.scrollLeft=a.Internal.Coordinates.getViewerScrollLeftMax()*(e/f);a.dom.viewerArea.scrollTop=a.Internal.Coordinates.getViewerScrollTopMax()*(d/m);c=this.Internal.Pages.getVisiblePageNumbers();if(null!=c)for(d=0;d<c.length;d++)a.DrawPage(a.cache.getPageObject(c[d]),b!==a.serverCtx.zoom)}}},ComputeNextZoom:function(b,d){for(var c=a.serverCtx.zoom,e=0;e<b;e++)c=d?c+
a.serverCtx.zoomStep/100*c:c/(a.serverCtx.zoomStep/100+1);return c},ZoomINPreview:function(b){if(!a.CanChangeZoom())return DocuViewareAPI.Status.GenericError;b=a.ComputeNextZoom(b,!0);a.ZoomPreview(b);return DocuViewareAPI.Status.OK},ZoomIN:function(b,d,e,f,g){if(!a.CanChangeZoom())return DocuViewareAPI.Status.GenericError;d&&a.ZoomINPreview(b);if(e)return this.zoomInTimeout&&(clearTimeout(this.zoomInTimeout),this.zoomInTimeout=null),this.zoomInTimeout=setTimeout(function(){a.ZoomIN(b,!1,!1,f,g)},
0),DocuViewareAPI.Status.OK;d=a.ComputeNextZoom(b,!0);return this.SetCurrentZoom(d)},ZoomOUTPreview:function(b){if(!a.CanChangeZoom())return DocuViewareAPI.Status.GenericError;b=a.ComputeNextZoom(b,!1);a.ZoomPreview(b);return DocuViewareAPI.Status.OK},ZoomOUT:function(b,d,e,f,g){if(a.CanChangeZoom()){d&&a.ZoomOUTPreview(b);if(e)return this.zoomOutTimeout&&(clearTimeout(this.zoomOutTimeout),this.zoomOutTimeout=null),this.zoomOutTimeout=setTimeout(function(){a.ZoomOUT(b,!1,!1,f,g)},0),DocuViewareAPI.Status.OK;
d=a.ComputeNextZoom(b,!1);return this.SetCurrentZoom(d)}},ZoomRect:function(b,d,e){if(a.CanChangeZoom())return b&&b.left&&b.top&&b.width&&b.height?(b={data:{pageNo:this.GetCurrentPage(),left:b.left,top:b.top,width:b.width,height:b.height},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1);d&&d()},error:function(){e&&e()}},this.ajax.PostBaseRequest("zoomrect",b,!1)):DocuViewareAPI.Status.GenericError},Rotate:function(b,d){return this.ajax.PostBaseRequest("rotate",
{data:{rotation:b,mode:d},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1);if(a.callbacks.onRotationChanged)a.callbacks.onRotationChanged(a.serverCtx.renderRotation)}})},RotatePage:function(b,d,e,f){"number"==typeof b&&(b=[b]);return this.ajax.PostBaseRequest("rotate",{data:{rotation:d,pages:b,mode:2},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1);e&&e()},error:function(){f&&f()}})},DeletePage:function(b,
d,e){"number"==typeof b&&(b=[b]);return this.ajax.PostBaseRequest("deletepage",{data:{pages:b},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1);d&&d()},error:function(){e&&e()}})},SwapPages:function(b,d,e,f){return"number"==typeof b&&"number"==typeof d?this.ajax.PostBaseRequest("swappages",{data:{page1:b,page2:d},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1);e&&e()},error:function(){f&&f()}}):DocuViewareAPI.Status.GenericError},
SelectPage:function(a,b){if(!(this.serverCtx.documentLoaded&&0<a&&a<=this.serverCtx.pageCount))return DocuViewareAPI.Status.GenericError;a!=this.GetLastPageNoRequest()?this.SelectPageEx(a,!0,!0,!0,!1,!1,b):b&&b();return DocuViewareAPI.Status.OK},EnsurePageVisibility:function(b){if(!this.serverCtx.singlePageView&&null!=this.cache.canvas)for(var c=0;c<this.cache.canvas.length;c++)if(this.cache.canvas[c].pageNo==b){var d=this.cache.canvas[c].top;c=this.cache.canvas[c].bottom-d;var e=this.dom.viewerArea.offsetHeight;
d=e<c?Math.round(d):Math.round(d+(c-e)/2);a.Internal.Coordinates.getViewerScrollTop()!=d&&(this.dom.viewerArea.ignoreScrollAt=d,a.Internal.Coordinates.setViewerScrollTop(d),a.showVisiblePages(b));break}},EnsurePageRegionVisibility:function(b,d,e,f,g){if((!this.serverCtx.singlePageView||b==a.GetCurrentPage())&&null!=this.cache.canvas)for(var c=0;c<this.cache.canvas.length;c++)if(this.cache.canvas[c].pageNo==b){var h=this.cache.canvas[c].top,l=this.cache.canvas[c].bottom-h,k=this.dom.viewerArea.offsetHeight,
m=this.dom.viewerArea.offsetWidth;c=0;k<l?(l=a.Internal.Pages.getRenderingState(b),d={left:d,top:e,width:f,height:g},e=a.Internal.Matrix.scale(l.contentMatrix,96,96,!1),a.Internal.Matrix.transformBBox(e,0,d),e=d.top+d.height,e>k&&(h+=e-k+2,a.serverCtx.hScrollbarVisible&&(h+=a.dom.sbWidth)),k=d.left+d.width,k>m&&(c=k-m+2,a.serverCtx.vScrollbarVisible&&(c+=a.dom.sbWidth)),h=Math.round(h)):h=Math.round(h+(l-k)/2);a.Internal.Coordinates.getViewerScrollTop()!=h&&(this.dom.viewerArea.ignoreScrollAt=h,a.Internal.Coordinates.setViewerScrollTop(h),
0!=c&&a.Internal.Coordinates.setViewerScrollLeft(c),a.showVisiblePages(b));break}},EnsureCurrentPageVisibility:function(){this.EnsurePageVisibility(this.GetLastPageNoRequest())},SelectPageEx:function(b,d,e,f,g,k,m){a.debug&&console.log("DocuVieware: Select page: "+b);a.Internal.Thumbnails.reinitThumbnailsSelection();if(b!=a.GetLastPageNoRequest())return f&&this.dom.updateSelectedPageFader(500,b),e&&!a.serverCtx.singlePageView&&a.EnsurePageVisibility(b),g&&a.serverCtx.singlePageView&&(g=!1),e=this.ajax.latestSelectedPage,
this.ajax.latestSelectedPage=b,b=this.ajax.PostBaseRequest("selectpage",{data:{page:b},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,g)&&a.dom.updateThumbsStyle(d,!1);m&&m()},error:function(){}},!1,!0),b!=DocuViewareAPI.Status.OK&&(this.ajax.latestSelectedPage=e),b;a.Internal.Thumbnails.toggleThumbnailSelection(b);k&&a.DrawPage(a.cache.getPageObject(b),!1);m&&m();return DocuViewareAPI.Status.OK},Save:function(b,d,e,f,g,k,m){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;
if(""==b)return a.DisplayError(a.Localize("error__saving_filename")),DocuViewareAPI.Status.GenericError;if(""==d)return a.DisplayError(a.Localize("error__saving_file_format")),DocuViewareAPI.Status.GenericError;window.location=a.appControllerPath+"/save"+(a.useIdInRoot?"/1":"")+"?sessionID="+this.ajax.sessionID+"&fileName="+encodeURIComponent(b)+"&format="+d+"&pageRange="+(e?e:"*")+"&dropAnnotations="+f+"&flattenAnnotations="+g;k&&k();if(a.callbacks.onDocumentSaved)a.callbacks.onDocumentSaved();return DocuViewareAPI.Status.OK},
CloseDocument:function(){return this.serverCtx.documentLoaded?this.ajax.PostBaseRequest("close",{data:{},success:function(b){a.ajax.SetNewServerCtx(null)}},!0):DocuViewareAPI.Status.GenericError},AddAnnot:function(b,d,e,f,g){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var c=[],h=null;null!=this.Internal.Annotations.defaultAuthor&&(h={},h.author=this.Internal.Annotations.defaultAuthor);for(var l=0;l<b.length;l++){var k=this.Internal.Annotations.mergeAnnotationProperties(b[l].type,
b[l].appearance);k.left=b[l].coordinates.left;k.top=b[l].coordinates.top;k.height=b[l].coordinates.height;k.width=b[l].coordinates.width;null!=b[l].appearance.flipX&&(k.flipX=b[l].appearance.flipX,k.useClientFlipX=!0);null!=b[l].appearance.flipY&&(k.flipY=b[l].appearance.flipY,k.useClientFlipY=!0);for(var m in b[l].common)b[l].common.hasOwnProperty(m)&&(null==h&&(h={}),h[m]=b[l].common[m]);c.push({extProperties:h,properties:k,pageNo:b[l].pageNo})}this.ajax.PostBaseRequest("newannotation",{data:{annots:c},
success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.annots){for(var c=[],f=[],h=0;h<b.annots.length;h++){var l=a.Internal.Pages.getRenderingState(b.annots[h].annotApp.pageNo);l=a.Internal.Annotations.newController(b.annots[h].annotApp,l.pageLeft,l.pageTop,l.contentMatrix);f.push(b.annots[h].annotApp.pageNo);a.dom.singlePageView&&b.annots[h].annotApp.pageNo!==a.GetCurrentPage()||a.Internal.Pages.isPageRendered(b.annots[h].annotApp.pageNo)&&l.render();if(!d&&a.callbacks.onAnnotationAdded)a.callbacks.onAnnotationAdded({id:b.annots[h].annotApp.id,
pageNo:b.annots[h].annotApp.pageNo});c.push({id:b.annots[h].annotApp.id,pageNo:b.annots[h].annotApp.pageNo});17==b.annots[h].annotApp.properties.type&&(l=b.annots[h].annotApp,a.Internal.Annotations.addAnnotsRedactionReferences({id:l.id,pageNo:l.pageNo,title:l.properties.title,fillColor:l.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!0))}a.updateThumbnails(f,!0);if(a.callbacks.onTextAnnotated&&g)a.callbacks.onTextAnnotated({userAction:g,resultAnnots:c})}else a.ajax.HandleError(b);
e&&e()},error:function(){f&&f()}},!1);return DocuViewareAPI.Status.OK},GetPageFormFields:function(b){if(b){var c=[];if(null!=a.cache.FormFields){for(var d=0;d<a.cache.FormFields.length;d++)a.cache.FormFields[d].formFieldApp.pageNo!==b&&"*"!==b||c.push({id:a.cache.FormFields[d].formFieldApp.id,pageNo:a.cache.FormFields[d].formFieldApp.pageNo,properties:a.cache.FormFields[d].formFieldApp.properties});return c}}return DocuViewareAPI.Status.GenericError},UpdateFormFields:function(b,d,e){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;
for(var c=[],f=0;f<b.length;f++)c.push({id:b[f].id,pageNo:b[f].pageNo,updateNo:f,properties:b[f].properties});this.ajax.PostBaseRequest("formfieldsdupdate",{data:{items:c},success:function(b){if(b="string"===typeof b?eval("("+b+")"):b){for(var c=[],e=0;e<b.length;e++){a.Internal.FormFields.removeFormFieldFromCache(b[e].formFieldApp.id);var f=a.Internal.FormFields.newController(b[e].formFieldApp);a.dom.singlePageView&&b[e].formFieldApp.pageNo!==a.GetCurrentPage()||f.render();-1===c.indexOf(b[e].formFieldApp.pageNo)&&
c.push(b[e].formFieldApp.pageNo);if(a.callbacks.onFormFieldChanged)a.callbacks.onFormFieldChanged({id:b[e].formFieldApp.id,pageNo:b[e].formFieldApp.pageNo})}0<c.length&&a.updateThumbnails(c)}else a.ajax.HandleError(b);d&&d()},error:function(){e&&e()}},!1);return DocuViewareAPI.Status.OK},SetAnnotationsInteractionState:function(b){b?a.Internal.Annotations.enableAll():a.Internal.Annotations.disableAll();return DocuViewareAPI.Status.OK},SetAnnotationsVisibility:function(b){return a.Internal.Annotations.setAnnotationsVisibility(b)},
AddAnnotInteractive:function(b,d,e,f){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.ExitAnnotationDrawingMode();a.dom.UIconfig.disableAnnotationDrawingModePanel&&(5==b?null!=a.dom.connectedLinesAnnotButton&&dvJQuery(a.dom.connectedLinesAnnotButton).addClass("button_active"):10==b?null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).addClass("button_active"):11==b?null!=a.dom.freehandhighlighterAnnotButton&&dvJQuery(a.dom.freehandhighlighterAnnotButton).addClass("button_active"):
16==b&&null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).addClass("button_active"));d?(b=this.Internal.Annotations.mergeAnnotationProperties(b,d),e?this.Internal.Annotations.showAnnotationPropertiesUI(b,null,null,f):this.Internal.Annotations.beginAddAnnotInteractive(b)):this.Internal.Annotations.defaultProperties[b].autoCreate?this.Internal.Annotations.beginAddAnnotInteractive(this.Internal.Annotations.defaultProperties[b]):this.Internal.Annotations.showAnnotationPropertiesUI(this.Internal.Annotations.defaultProperties[b],
null);return DocuViewareAPI.Status.OK},EditAnnotInteractive:function(a,b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var c=dvJQuery.extend(!0,{},this.Internal.Annotations.defaultProperties[a.annotApp.properties.type]);dvJQuery.each(c,function(b,d){c[b]=a.annotApp.properties[b]});return this.Internal.Annotations.showAnnotationPropertiesUI(c,!0,a,b)},DeleteAnnotationById:function(b,d){d="undefined"===typeof d?!0:d;if(b&&null!=a.cache.Annots)for(var c=d?this.GetCurrentPage():
-1,e=0;e<a.cache.Annots.length;e++){var f=a.cache.Annots[e];if((!d||f.annotApp.pageNo==c)&&f.annotApp.id==b)return this.DeleteAnnotations([f])}return DocuViewareAPI.Status.GenericError},DeleteAnnotations:function(a){if(a&&0<a.length){for(var b=[],c=1;c<a.length;c++)b.push(a[c]);return a[0].updateAnnotation(!0,null,!1,b)}return DocuViewareAPI.Status.GenericError},UnselectAllAnnotations:function(){a.Internal.Annotations.unselectAll();return DocuViewareAPI.Status.OK},UpdateAnnotationById:function(b,
d){if(b&&null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];if(e.annotApp.id==b)return e.updateAnnotationDeferred(!1,d)}return DocuViewareAPI.Status.GenericError},GetAnnotationProperties:function(b){if(b&&null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];if(d.annotApp.id==b)return d.annotApp.properties}return DocuViewareAPI.Status.GenericError},GetPageAnnotCount:function(b){var c=0;if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++)a.cache.Annots[d].annotApp.pageNo===
b&&c++;return c},GetPageAnnotId:function(b,d){var c=0;if(null!=a.cache.Annots)for(var e=0;e<a.cache.Annots.length;e++){var f=a.cache.Annots[e];if(f.annotApp.pageNo===b){if(c===d)return f.annotApp.id;c++}}return DocuViewareAPI.Status.GenericError},GetAnnotationClientTag:function(b){if(b&&null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];if(d.annotApp.id==b)return d.annotApp.clientTag}return DocuViewareAPI.Status.GenericError},SetAnnotationClientTag:function(b,d){if(b&&
null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];if(e.annotApp.id==b)return e.annotApp.clientTag=d,e.updateAnnotationDeferred(!1,e.annotApp.properties)}return DocuViewareAPI.Status.GenericError},ApplyAllRedactions:function(){a.Internal.Redaction.disableAddRedactionMarksMode();return a.ajax.PostBaseRequest("redact",{data:{},success:function(b){var c="string"===typeof b?eval("("+b+")"):b;if(c&&c.status===DocuViewareAPI.Status.OK){if(a.callbacks.onRedactionMarksApplied)a.callbacks.onRedactionMarksApplied();
a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1)}else a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b)}},!1)},HasPendingRedactionMark:function(){return a.Internal.Redaction.hasPendingRedactionMark()},EnableAnnotEditionOnDblClick:function(a){if("boolean"==typeof a)this.dom.enableAnnotEditionOnDblClick=a;else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},ResetAnnotAutoCreate:function(a){if(0<a.length)for(var b=0;b<a.length;b++)this.Internal.Annotations.defaultProperties[a[b]].autoCreate=
!1;else for(b=0;b<Object.keys(this.Internal.Annotations.defaultProperties).length;b++)this.Internal.Annotations.defaultProperties[b].autoCreate=!1;return DocuViewareAPI.Status.OK},ResetAnnotToDefault:function(a){if(0<a.length)for(var b=0;b<a.length;b++)this.Internal.Annotations.defaultProperties[a[b]]=DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties([a[b]]);else for(b=0;b<Object.keys(this.Internal.Annotations.defaultProperties).length;b++)this.Internal.Annotations.defaultProperties[b]=
DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(b);return DocuViewareAPI.Status.OK},SetAnnotDefaultAuthor:function(a,b){this.Internal.Annotations.setDefaultAuthor(a);this.dom.commentsAuthorInput.disabled=!0===b?!0:!1;return DocuViewareAPI.Status.OK},SetAnnotPropertiesValues:function(a,b){if(b)this.Internal.Annotations.setDefaultPropertiesValues(a,b);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},GetAnnotPropertiesValues:function(a){return null!=a&&0<=
a&&17>=a?this.Internal.Annotations.getAnnotPropertiesValues(a):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesToDisplay:function(a,b){if(b)this.Internal.Annotations.setDefaultPropertiesToDisplay(a,b);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},ResetAnnotPropertiesToDisplayDefault:function(a){if(0<a.length)for(var b=0;b<a.length;b++)this.Internal.Annotations.defaultPropertiesDisplay[a[b]]=DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay([a[b]]);
else for(b=0;b<Object.keys(this.Internal.Annotations.defaultPropertiesDisplay).length;b++)this.Internal.Annotations.defaultPropertiesDisplay[b]=DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(b);return DocuViewareAPI.Status.OK},EnableAnnotMultiSelect:function(b){a.Internal.Annotations.multiSelectionEnabled=b},FocusAnnot:function(b,d,e){if(b&&null!=a.cache.Annots){if(null!=a.cache.AnnotsComments&&0<a.cache.AnnotsComments.length&&null!=a.cache.AnnotsComments)for(var c=0;c<a.cache.AnnotsComments.length;c++){var f=
a.cache.AnnotsComments[c];if(f.annotApp.id===b){d&&a.Internal.Annotations.selectAnnotationCommentById(b,e,e);var h=f.annotApp.pageNo;return a.SelectPage(h,function(){var b=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(f.annotApp,!0);null!=b&&(d&&b.visible&&(a.Internal.Annotations.unselectAll(),a.Internal.Annotations.selectById(b.id)),e&&a.EnsurePageRegionVisibility(h,b.bbox.Left,b.bbox.Top,b.bbox.Width,b.bbox.Height))})}}for(c=0;c<a.cache.Annots.length;c++){var g=a.cache.Annots[c];if(g.annotApp.id===
b){if(g.annotApp.visible)return h=g.annotApp.pageNo,a.SelectPage(h,function(){e&&a.EnsurePageRegionVisibility(h,g.annotApp.bbox.Left,g.annotApp.bbox.Top,g.annotApp.bbox.Width,g.annotApp.bbox.Height);d&&a.Internal.Annotations.selectById(g.annotApp.id)});break}}}return DocuViewareAPI.Status.GenericError},UnselectAnnot:function(b){if(b&&null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];if(d.annotApp.id===b)return a.Internal.Annotations.unselectById(d.annotApp.id)}return DocuViewareAPI.Status.GenericError},
GetAnnotBBoxOnViewer:function(b){if(b&&null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];if(d.annotApp.id===b)return d.getBBoxOnViewer()}return DocuViewareAPI.Status.GenericError},GetTwainAcquisitionServiceInfo:function(b,d){a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri32+"ServiceVersion/",success:function(a){a?b&&b(a):d&&d()},error:function(){d&&d({status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),twainStatus:a.Internal.Twain.Status.NOT_RESPONDING})}});
return DocuViewareAPI.Status.OK},GetTwainAcquisitionSources:function(b,d){a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri32+"GetTwainSources/",success:function(a){if(a){if(b){if(null!=a.GetTwainSourcesResult&&null!=a.GetTwainSourcesResult.sources)for(var c=0;c<a.GetTwainSourcesResult.sources.length;c++)a.GetTwainSourcesResult.sources[c].is64bit&&(a.GetTwainSourcesResult.sources[c].sourceName+=" (64-bit)");b(a)}}else d&&d(a)},error:function(){d&&d({status:DocuViewareAPI.Status.GenericError,
message:a.Localize("_twain_connector_unavailable"),twainStatus:a.Internal.Twain.Status.NOT_RESPONDING})}})},GetTwainSourceList:function(){var b=null;a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri32+"GetTwainSources/",async:!1,timeout:5E3,success:function(a){if(a&&a.GetTwainSourcesResult){if(null!=a.GetTwainSourcesResult&&null!=a.GetTwainSourcesResult.sources)for(var c=0;c<a.GetTwainSourcesResult.sources.length;c++)a.GetTwainSourcesResult.sources[c].is64bit&&(a.GetTwainSourcesResult.sources[c].sourceName+=
" (64-bit)");b=a.GetTwainSourcesResult}}});return b},TwainGetClientInfo:function(){var b=null;a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri32+"GetTwainClientInfo/",async:!1,timeout:5E3,success:function(a){a&&a.GetTwainClientInfoResult&&(b=a.GetTwainClientInfoResult)}});return b},TwainGetLocalServiceStatus:function(){var b=DocuViewareAPI.LocalServiceStatus.NotFound;a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri32+"ServiceVersion/",async:!1,timeout:5E3,success:function(c){b=
c&&c.ServiceVersionResult?parseInt(c.ServiceVersionResult)>=a.twainServiceSupportedVersion?DocuViewareAPI.LocalServiceStatus.Ready:DocuViewareAPI.LocalServiceStatus.WrongVersion:DocuViewareAPI.LocalServiceStatus.NotFound}});return b},DownloadTwainServiceSetup:function(){window.location=a.appControllerPath+"/twainservicesetupdownload"+(a.useIdInRoot?"/1":"")+"?sessionID="+this.ajax.sessionID;return DocuViewareAPI.Status.OK}};a.resetServerCtx();if(a.dom.thumbnailArea){b=document.getElementById(a.FindSnapIn("thumbnails").snapInID);
a.isIOS&&(b.style.overflow="auto");var E=null;dvJQuery(b).bind("scroll",function(b){null!=E&&clearTimeout(E);E=setTimeout(function(){a.showVisibleThumbnails()},a.fastMode?50:400)});a.dom.UIconfig.enableMultipleThumbnailSelection&&(a.dom.thumbnailSelectBox=dvJQuery("<div/>").appendTo(b).css("position","absolute").css("border","1px solid "+a.dom.UIconfig.activeSelectedColorHover).css("background-color",a.dom.UIconfig.activeSelectedBackgroundColor).css("display","none"),b.onmousedown=a.events.onThumbnailAreaMouseDownHandler,
b.onmousemove=a.events.onThumbnailAreaMouseMoveHandler,b.onmouseup=a.events.onThumbnailAreaMouseUpHandler);a.dom.UIconfig.enableThumbnailDragDrop&&dvJQuery(a.dom.thumbnailArea).sortable({placeholder:"highlight",forcePlaceholderSize:!0,tolerance:"pointer",helper:function(b,d){if(!a.serverCtx.enablePageMoving||a.hasPendingAction())return null;b=dvJQuery("<div>");var c=dvJQuery("<div>");c.css({position:"relative",width:"100%",height:"100%"});d=d.find("canvas");var e=d.get(0).toDataURL("image/png");e=
dvJQuery('<img src="'+e+'"/>');e.css({position:"absolute",left:"0px",top:"0px",opacity:"0.5",width:d.width()/2+"px",height:d.height()/2+"px"});c.html(e);b.html(c);b.width(d.width()/2);b.height(d.height()/2);return b},start:function(b,d){if(a.serverCtx.enablePageMoving&&!a.hasPendingAction()&&(a.dom.resetThumbStyle(d.placeholder,!0),d.placeholder.width(d.item.width()),d.item.attr("data-moving","true"),b=a.Internal.Thumbnails.getThumbnailPage(d.item.get(0)),a.Internal.Thumbnails.isThumbnailSelected(b)||
(a.Internal.Thumbnails.reinitThumbnailsSelection(),a.Internal.Thumbnails.selectThumbnail(b)),b=a.GetSelectedThumbnailItems(),0!=b.length)){for(var c=0;c<b.length;c++){var e=a.Internal.Thumbnails.getThumbnailFromPageNo(b[c]);null!=e&&e.css("opacity","0.5")}b=dvJQuery("<span>"+b.length+"</span>");b.css({padding:"6px",color:"white",border:"1px solid white",position:"absolute",opacity:"0.95","background-color":a.dom.UIconfig.activeSelectedColor,right:"10%",bottom:"10%","-webkit-border-radius":"4px","-moz-border-radius":"4px",
"border-radius":"4px"});dvJQuery(d.helper).children(0).append(b)}},update:function(b,d){if(a.serverCtx.enablePageMoving&&!a.hasPendingAction()){var c=d.item.index()+1,e=a.GetSelectedThumbnailItems();1==e.length&&e[0]===c||a.ajax.PostBaseRequest("movepage",{data:{source:e,dest:c},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1,!0,!0);if(a.callbacks.onThumbnailsOrderChanged)a.callbacks.onThumbnailsOrderChanged({source:e,destination:c})}},!1)}},stop:function(b,
d){d.item.attr("data-moving","false");b=a.GetSelectedThumbnailItems();if(0!=b.length)for(var c=a.Internal.Thumbnails.getThumbnailPage(d.item.get(0)),e=d.item,f=0;f<b.length;f++){var h=b[f],g=a.Internal.Thumbnails.getThumbnailFromPageNo(h);h!=c&&(h<c?d.item.before(g):e.after(g));e=g;e.css("opacity","1")}}})}a.events.pageRequestTimeout=null;a.events.onViewScroll=function(){a.events.pageRequestTimeout&&clearTimeout(a.events.pageRequestTimeout);if(!(0!=this.ignoreScrollAt&&this.scrollTop==this.ignoreScrollAt||
null==a.serverCtx||a.serverCtx.singlePageView||!a.serverCtx.documentLoaded||a.Internal.Files.uploading||a.ajax.downloading||a.events.isZoomingPreview||null!=a.selectNextPageActions&&0!=a.selectNextPageActions||null!=a.selectPreviousPageActions&&0!=a.selectPreviousPageActions)){var b=-1;if(null!=a.cache.canvas)for(var d=!1,e=a.Internal.Coordinates.getViewerScrollTop()+a.dom.viewerArea.offsetHeight/2,f=0;f<a.cache.canvas.length;f++){for(var g=0;g<a.cache.canvas[f].canvas.length;g++){var k=parseFloat(a.cache.canvas[f].canvas[g].tile.style.top),
m=k+parseFloat(a.cache.canvas[f].canvas[g].tile.style.height);if(k<e&&m>e){b=a.cache.canvas[f].pageNo;a.dom.updateSelectedPageFader(0,b);d=!0;break}}if(d)break}a.events.pageRequestTimeout=setTimeout(function(){0<b&&b<=a.serverCtx.pageCount&&b!=a.GetLastPageNoRequest()?a.SelectPageEx(b,!0,!1,!0,!0):a.showVisiblePages(b)},a.fastMode?50:500);a.previewVisiblePages();if(a.callbacks.onViewerScroll)a.callbacks.onViewerScroll()}};dvJQuery(a.dom.viewerArea).bind("scroll",a.events.onViewScroll);dvJQuery(a.dom.viewerArea).dvContextMenu({idMenu:"viewerContextMenu"+
a.uniqueID,referrer:a.dom.viewerArea,dependsOnTextSelection:!0,beforeShow:function(){return null!=a.Internal.Text.getSelectedText()},translateMouse:function(b){var c=a.dom.viewerArea.getBoundingClientRect(),d=dvJQuery(document.getElementById("viewerContextMenu"+a.uniqueID));b.x=b.x-c.left+a.dom.viewerArea.offsetLeft+5;b.y=b.y-c.top+a.dom.viewerArea.offsetTop+5;c=d.width();b.x+c>a.dom.viewerArea.clientWidth&&(b.x-=b.x+c-a.dom.viewerArea.clientWidth+5)}});P(a);dvJQuery("#"+e).on("dragenter",function(a){a.stopPropagation();
a.preventDefault()});dvJQuery("#"+e).on("dragover",function(a){a.stopPropagation();a.preventDefault()});if(T)dvJQuery("#"+e).on("drop",function(b){b.originalEvent&&b.originalEvent.dataTransfer&&b.originalEvent.dataTransfer.files&&(b.preventDefault(),(b=b.originalEvent.dataTransfer.files)&&1<=b.length&&a.Internal.Files.uploadFile(b[0],0))});else dvJQuery("#"+e).on("drop",function(a){a.preventDefault()});dvJQuery(a.dom.viewerArea).on("keydown",function(b){(b.metaKey||b.ctrlKey)&&"c"===String.fromCharCode(b.which).toLowerCase()?
(a.CopySelectedTextToClipboard(),b.preventDefault()):(b.metaKey||b.ctrlKey)&&"a"===String.fromCharCode(b.which).toLowerCase()?(a.dom.SelectedTextRegions.clear(1),a.Internal.Text.captureAndHighlightSelectedText(-1,-1,-1,-1,!0,!1),b.preventDefault()):a.events.isDrawingPath&&(b.metaKey||b.ctrlKey)&&"z"===String.fromCharCode(b.which).toLowerCase()&&(a.Internal.Annotations.dropPendingFreenhandAnnotLastSubPath(),b.preventDefault())});a.dom.pageNavBox&&a.dom.pageNavBox.id&&dvJQuery(a.dom.pageNavBox).keypress(function(b){13==
(b.keyCode||b.which)&&(b.preventDefault(),b=parseInt(a.dom.pageNavBox.value),a.serverCtx.documentLoaded&&b!=a.GetLastPageNoRequest()?0<b&&b<=a.serverCtx.pageCount?(a.dom.pageNavBox.value=b,a.SelectPage(b)):a.DisplayError(a.Localize("error_invalid_pages_number")+" [1 - "+a.serverCtx.pageCount.toString()+"]"):a.dom.pageNavBox.value=b)});a.dom.pageNavBoxMobile&&a.dom.pageNavBoxMobile.id&&dvJQuery(a.dom.pageNavBoxMobile).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),b=parseInt(a.dom.pageNavBoxMobile.value),
a.serverCtx.documentLoaded&&b!=a.GetLastPageNoRequest()?0<b&&b<=a.serverCtx.pageCount?(a.dom.pageNavBoxMobile.value=b,a.SelectPage(b)):a.DisplayError(a.Localize("error_invalid_pages_number")+" [1 - "+a.serverCtx.pageCount.toString()+"]"):a.dom.pageNavBoxMobile.value=b)});a.dom.searchValueInput&&dvJQuery(a.dom.searchValueInput).keypress(function(b){if(13==(b.keyCode||b.which)){b.preventDefault();b=a.dom.searchValueInput.value;var c=a.dom.searchWholeWordInput.checked,d=a.dom.searchCaseSensitiveInput.checked,
e=a.dom.searchAnyWordInput.checked,f=dvJQuery(a.dom.searchPageSelect).filter(":checked").val();a.SubmitSearch(b,c,d,e,f)}});a.dom.addressBar&&dvJQuery(a.dom.addressBar).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),a.LoadFromUri(a.dom.addressBar.value,"",null,null,null,!0))});"ontouchstart"in document.documentElement?(dvJQuery(a.dom.mainArea).find(".dv-button").on("touchstart",function(b){dvJQuery(this).addClass("button_hover");a.dom.updateButtons()}),dvJQuery(a.dom.mainArea).find(".dv-button").on("touchend",
function(b){dvJQuery(this).removeClass("button_hover");a.dom.updateButtons()})):dvJQuery(a.dom.mainArea).find(".dv-button").hover(function(){dvJQuery(this).addClass("button_hover");a.dom.updateButtons()},function(){dvJQuery(this).removeClass("button_hover");a.dom.updateButtons()});a.dom.leftSideArea&&(dvJQuery(a.dom.leftSideArea).resizable({containment:dvJQuery(a.dom.controlArea),handles:{e:dvJQuery(a.dom.leftSideResizeBar)},minWidth:null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:
0,start:function(b,d){a.hasPendingAction()?b.preventDefault():a.events.isResizingUI=!0},resize:function(b,d){b=null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0;d.size.width<b+30&&(d.size.width=b);a.NewViewerSizePreview()},stop:function(b,d){a.events.isResizingUI=!1;d.size.width<(null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0)+30&&a.SetSnapinsPanelVisibility(!1,d.originalSize.width);a.events.onNewViewerSize();a.dom.sidePanelResized()}}),a.dom.searchArea&&dvJQuery(a.dom.searchArea).find(".dv-jqueryRadio").dvButtonset({setActive:function(){dvJQuery(a.dom.searchArea).find(".dvUi-button").each(function(b){dvJQuery(this).css("background-color",
"transparent");dvJQuery(this).css("background-image","none");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("border","1px solid transparent");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});dvJQuery(a.dom.searchArea).find(".dvUi-state-active").each(function(b){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("background-image","-moz-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image",
"-webkit-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image","-ms-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+" 0%,"+a.dom.UIconfig.panelDarkerBackColor+" 100%)");dvJQuery(this).css("background-image","-o-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image","linear-gradient(to bottom, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+
")");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor)})}}),a.dom.UIconfig.collapsedSnapInPanel&&(dvJQuery(a.dom.leftSideArea).resizable("disable"),a.dom.leftSideArea.oldWidth=a.dom.UIconfig.snapInPanelDefaultWidth));b=document.getElementsByName("inputSelectedPages"+a.uniqueID);for(var L=0;L<b.length;L++)b[L].onchange=function(b){a.pageRangeSelection(this.value,document.getElementById("savePageRangeInput"+
a.uniqueID))};document.getElementById("savePageRangeInput"+a.uniqueID).onkeyup=function(b){a.inputPageRangeControl(b.target)};document.getElementById("save_extension_select"+a.uniqueID).onchange=S;document.getElementById("save_content_select"+a.uniqueID).onchange=S;document.getElementById("save_extension_select"+a.uniqueID).onchange();b=document.getElementsByName("inputPrintSelectedPages"+a.uniqueID);for(L=0;L<b.length;L++)b[L].onchange=function(b){a.pageRangeSelection(this.value,a.dom.printPageRangeInput)};
b=document.getElementsByName("inputTwainAcquisitionDestination"+a.uniqueID);for(L=0;L<b.length;L++)b[L].onchange=function(b){"1"===b.target.value&&b.target.checked?dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("select,span").prop("disabled",!1).removeClass("dvUi-state-disabled").addClass("dvUi-state-default").css("opacity",1):dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("select,span").prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled").css("opacity",
.3)};a.dom.printPageRangeInput.onkeyup=function(b){a.inputPageRangeControl(b.target)};a.dom.progressbar=new DocuViewareProgressbar({bg:"#acf",target:a.dom.controlArea,id:"progressbar"+a.uniqueID});"undefined"!=typeof a.dom.toolBarArea&&null!=a.dom.toolBarArea&&dvJQuery(a.dom.toolBarArea).bind("touchstart",function(a){var b=a.timeStamp,c=dvJQuery(this).data("lastTouch")||b;c=b-c;var d=a.originalEvent.touches.length;dvJQuery(this).data("lastTouch",b);!c||500<c||1<d||(a.preventDefault(),dvJQuery(this).trigger("click").trigger("click"))});
a.dom.viewerArea.cursorMgr=CreateDocuViewareCursorManager(a.dom.viewerArea,a.isIEorEdge);a.dom.updateSinglePageModeButton();null!=a.dom.zoomInButton&&(dvJQuery(a.dom.zoomInButton).bind("touchstart",function(a){a.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomInButton).bind("touchend",function(a){a.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomInButtonMobile&&
(dvJQuery(a.dom.zoomInButtonMobile).bind("touchstart",function(a){a.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomInButtonMobile).bind("touchend",function(a){a.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomOutButton&&(dvJQuery(a.dom.zoomOutButton).bind("touchstart",function(a){a.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomOutButton).bind("touchend",
function(a){a.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomOutButtonMobile&&(dvJQuery(a.dom.zoomOutButtonMobile).bind("touchstart",function(a){a.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomOutButtonMobile).bind("touchend",function(a){a.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));
a.dom.panDiv=document.createElement("div");a.dom.panDiv.style.display="block";a.dom.panDiv.style.position="absolute";a.dom.panDiv.style.height="100%";a.dom.panDiv.style.width="100%";a.dom.panDiv.style.left="0px";a.dom.panDiv.style.top="0px";a.dom.panDiv.style.padding="0px";a.dom.panDiv.style.margin="0px";a.isIE&&(a.dom.panDiv.style.backgroundColor="rgba(255,255,255,0.01)");a.dom.mainArea.addEventListener("touchstart",function(b){1<b.touches.length&&(a.events.disableSingleInputEvents=!0,a.Internal.Annotations.unselectAll());
2===b.touches.length&&(!a.events.isZoomingPreview&&a.CanChangeZoom()&&(a.events.isZoomingPreview=!0,a.events.isZoomingPreviewTouchMode=!0,a.events.enableZoomPreviewAutoSubmitter(),a.events.twoFingersDistStart=Math.hypot(b.touches[0].pageX-b.touches[1].pageX,b.touches[0].pageY-b.touches[1].pageY),a.events.prevTwoFingersDist=null),b.cancelable&&b.preventDefault())});a.dom.mainArea.addEventListener("touchend",function(b){a.events.disableSingleInputEvents&&(a.events.disableSingleInputEvents=!1);a.events.isZoomingPreview&&
a.events.isZoomingPreviewTouchMode&&(a.events.isZoomingPreview=!1,a.events.isZoomingPreviewTouchMode=null,a.SetCurrentZoom(a.cache.pageCanvasZoom),b.cancelable&&b.preventDefault())});a.dom.mainArea.addEventListener("touchmove",function(b){if(2===b.touches.length){if(a.events.isZoomingPreview&&a.events.isZoomingPreviewTouchMode){var c=Math.hypot(b.touches[0].pageX-b.touches[1].pageX,b.touches[0].pageY-b.touches[1].pageY),d=!0;null!=a.events.prevTwoFingersDist&&(d=5<Math.abs(c-a.events.prevTwoFingersDist));
d&&(a.ZoomPreview(c/a.events.twoFingersDistStart*a.serverCtx.zoom),a.events.prevTwoFingersDist=c)}b.cancelable&&b.preventDefault()}});a.dom.mainArea.addEventListener("wheel",function(b){if(b.ctrlKey){!a.events.isZoomingPreview&&a.CanChangeZoom()&&(a.events.enableZoomPreviewAutoSubmitter(),a.events.isZoomingPreview=!0,a.events.zoomPreviewWheelValue=0);if(a.events.isZoomingPreview&&null!=a.events.zoomPreviewWheelValue){0>b.deltaY?a.events.zoomPreviewWheelValue++:a.events.zoomPreviewWheelValue--;var c=
0<=a.events.zoomPreviewWheelValue?a.ComputeNextZoom(a.events.zoomPreviewWheelValue,!0):a.ComputeNextZoom(Math.abs(a.events.zoomPreviewWheelValue),!1);a.ZoomPreview(c)}b.preventDefault()}});window.addEventListener("keyup",function(b){"Control"==b.key&&a.events.zoomPreviewWheelValue&&a.events.isZoomingPreview&&(a.events.zoomPreviewWheelValue=null,a.events.isZoomingPreview=!1,a.SetCurrentZoom(a.cache.pageCanvasZoom),b.preventDefault())});a.dom.snapinButtonStrip&&(a.dom.snapinButtonStrip.tabFocus=0,a.dom.snapinButtonStrip.addEventListener("keydown",
function(b){if(38===b.keyCode||40===b.keyCode){var c=a.dom.snapinButtonStrip.childNodes;c[a.dom.snapinButtonStrip.tabFocus].setAttribute("tabindex",-1);40===b.keyCode?(a.dom.snapinButtonStrip.tabFocus++,a.dom.snapinButtonStrip.tabFocus>=c.length&&(a.dom.snapinButtonStrip.tabFocus=0)):38===b.keyCode&&(a.dom.snapinButtonStrip.tabFocus--,0>a.dom.snapinButtonStrip.tabFocus&&(a.dom.snapinButtonStrip.tabFocus=c.length-1));c[a.dom.snapinButtonStrip.tabFocus].setAttribute("tabindex",0);c[a.dom.snapinButtonStrip.tabFocus].focus()}}));
a.dom.pageBoundsDiv=document.createElement("div");a.dom.pageBoundsDiv.style.display="block";a.dom.pageBoundsDiv.style.position="absolute";a.dom.pageBoundsDiv.style.padding="0px";a.dom.pageBoundsDiv.style.margin="0px";a.dom.pageBoundsDiv.style.display="none";a.dom.pageBoundsDiv.style.borderStyle="solid";a.dom.pageBoundsDiv.style.borderColor=a.dom.UIconfig.strokeColor;a.dom.pageBoundsDiv.style.borderWidth="2px";a.dom.panDiv.appendChild(a.dom.pageBoundsDiv);a.dom.rlink=document.createElement("canvas");
a.dom.rlink.style.zIndex=a.dom.zindexManager.getFirstAnnotZindex()-1;a.dom.rlink.style.position="absolute";a.dom.rlink.style.height="0px";a.dom.rlink.style.width="0px";a.dom.rlink.style.left="0px";a.dom.rlink.style.top="0px";a.dom.rlink.style.padding="0px";a.dom.rlink.style.margin="0px";a.dom.rlink.style.borderStyle="solid";a.dom.rlink.style.borderColor="red";a.dom.rlink.style.borderWidth="1px";a.dom.rlink.style.display="none";a.dom.panDiv.appendChild(a.dom.rlink);a.Internal.Selection.selectionArea.init(a.dom.panDiv);
a.events.forwardMouseEventsToViewer(a.dom.panDiv);a.dom.viewerArea.appendChild(a.dom.panDiv);a.events.onLoad(x);DocuViewareUtilities.addEvent(window,"resize",a.events.onResize);setTimeout(a.events.UIStateVerifier,1E3);document.getElementById(e).control=a}};
